{"version":3,"sources":["webpack:///./node_modules/rbush/index.js","webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack:///./node_modules/core-js/modules/es.string.split.js","webpack:///./node_modules/maptalks/dist/maptalks.es-bundler.js","webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createSuper.js","webpack:///./node_modules/core-js/modules/es.object.get-prototype-of.js","webpack:///./node_modules/core-js/internals/path.js","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./node_modules/simplify-js/simplify.js","webpack:///./node_modules/earcut/src/earcut.js","webpack:///./node_modules/maptalks.three/dist/util/ThreeAdaptUtil.js","webpack:///./node_modules/maptalks.three/dist/util/fatline/LineSegmentsGeometry.js","webpack:///./node_modules/maptalks.three/dist/util/fatline/LineMaterial.js","webpack:///./node_modules/maptalks.three/dist/util/fatline/LineSegments2.js","webpack:///./node_modules/maptalks.three/dist/util/fatline/LineGeometry.js","webpack:///./node_modules/maptalks.three/dist/util/fatline/Line2.js","webpack:///./node_modules/maptalks.three/dist/BaseObject.js","webpack:///./node_modules/maptalks.three/dist/util/MergeGeometryUtil.js","webpack:///./node_modules/maptalks.three/dist/util/BarUtil.js","webpack:///./node_modules/maptalks.three/dist/Bar.js","webpack:///./node_modules/maptalks.three/dist/util/GeoJSONUtil.js","webpack:///./node_modules/deyihu-geometry-extrude/src/simplify.js","webpack:///./node_modules/deyihu-geometry-extrude/src/math.js","webpack:///./node_modules/deyihu-geometry-extrude/src/main.js","webpack:///./node_modules/maptalks.three/dist/util/index.js","webpack:///./node_modules/maptalks.three/dist/util/ExtrudeUtil.js","webpack:///./node_modules/maptalks.three/dist/util/LineUtil.js","webpack:///./node_modules/maptalks.three/dist/worker/worker.js","webpack:///./node_modules/maptalks.three/dist/worker/MeshActor.js","webpack:///./node_modules/maptalks.three/dist/BaseObjectTaskManager.js","webpack:///./node_modules/maptalks.three/dist/Line.js","webpack:///./node_modules/maptalks.three/dist/ExtrudeLine.js","webpack:///./node_modules/maptalks.three/dist/ExtrudePolygon.js","webpack:///./node_modules/maptalks.three/dist/Model.js","webpack:///./node_modules/maptalks.three/dist/util/GeoUtil.js","webpack:///./node_modules/maptalks.three/dist/ExtrudeLineTrail.js","webpack:///./node_modules/maptalks.three/dist/MergedMixin.js","webpack:///./node_modules/maptalks.three/dist/ExtrudePolygons.js","webpack:///./node_modules/maptalks.three/dist/util/IdentifyUtil.js","webpack:///./node_modules/maptalks.three/dist/Point.js","webpack:///./node_modules/maptalks.three/dist/util/BBox.js","webpack:///./node_modules/maptalks.three/dist/Points.js","webpack:///./node_modules/maptalks.three/dist/Bars.js","webpack:///./node_modules/maptalks.three/dist/ExtrudeLines.js","webpack:///./node_modules/maptalks.three/dist/Lines.js","webpack:///./node_modules/maptalks.three/dist/queue/TileDataQueue.js","webpack:///./node_modules/maptalks.three/dist/util/CanvasUtil.js","webpack:///./node_modules/maptalks.three/dist/BaseVectorTileLayer.js","webpack:///./node_modules/maptalks.three/dist/ThreeVectorTileLayer.js","webpack:///./node_modules/maptalks.three/dist/util/GeometryUtil.js","webpack:///./node_modules/maptalks.three/dist/Terrain.js","webpack:///./node_modules/maptalks.three/dist/TerrainVectorTileLayer.js","webpack:///./node_modules/maptalks.three/dist/util/heatmap/Intensity.js","webpack:///./node_modules/maptalks.three/dist/util/heatmap/HeatMapUtil.js","webpack:///./node_modules/maptalks.three/dist/HeatMap.js","webpack:///./node_modules/maptalks.three/dist/GPUPick.js","webpack:///./node_modules/maptalks.three/dist/FatLine.js","webpack:///./node_modules/maptalks.three/dist/FatLines.js","webpack:///./node_modules/maptalks.three/dist/Box.js","webpack:///./node_modules/maptalks.three/dist/Boxs.js","webpack:///./node_modules/maptalks.three/dist/worker/getworker.js","webpack:///./node_modules/maptalks.three/dist/worker/fetchdataworker.js","webpack:///./node_modules/maptalks.three/dist/index.js","webpack:///./node_modules/quickselect/quickselect.js","webpack:///./src/utils/UnrealBloomPass.js","webpack:///./node_modules/core-js/internals/define-well-known-symbol.js","webpack:///./node_modules/core-js/modules/es.symbol.js","webpack:///./node_modules/three/examples/jsm/shaders/LuminosityHighPassShader.js","webpack:///./src/views/three-demo/city-maptalks-three.vue?556d","webpack:///src/views/three-demo/city-maptalks-three.vue","webpack:///./src/views/three-demo/city-maptalks-three.vue?6afd","webpack:///./src/views/three-demo/city-maptalks-three.vue","webpack:///./src/views/three-demo/city-maptalks-three.vue?fb28","webpack:///./node_modules/core-js/modules/es.symbol.iterator.js","webpack:///./node_modules/tween/tween.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./node_modules/core-js/modules/es.symbol.description.js","webpack:///./node_modules/core-js/internals/well-known-symbol-wrapped.js","webpack:///./src/views/three-demo/city-maptalks-three.vue?6411","webpack:///./node_modules/core-js/modules/es.reflect.to-string-tag.js","webpack:///./node_modules/frustum-intersects/src/index.js","webpack:///./node_modules/zousan/zousan-min.js"],"names":["module","exports","rbush","default","quickselect","maxEntries","format","this","_maxEntries","Math","max","_minEntries","ceil","_initFormat","clear","findItem","item","items","equalsFn","indexOf","i","length","calcBBox","node","toBBox","distBBox","children","k","p","destNode","createNode","minX","Infinity","minY","maxX","maxY","child","extend","leaf","a","b","min","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","enlargedArea","intersectionArea","contains","intersects","height","multiSelect","arr","left","right","n","compare","mid","stack","pop","push","prototype","all","_all","data","search","bbox","result","len","childBBox","nodesToSearch","collides","load","insert","_build","slice","_splitRoot","tmpNode","_insert","remove","parent","index","goingUp","path","indexes","splice","_condense","compareMinX","compareMinY","toJSON","fromJSON","apply","N","M","log","pow","j","right2","right3","N2","N1","sqrt","_chooseSubtree","level","targetNode","area","enlargement","minArea","minEnlargement","isNode","insertPath","_split","_adjustParentBBoxes","m","_chooseSplitAxis","splitIndex","_chooseSplitIndex","newNode","bbox1","bbox2","overlap","minOverlap","xMargin","_allDistMargin","yMargin","sort","leftBBox","rightBBox","margin","siblings","compareArr","Function","join","global","uncurryThis","aCallable","isObject","hasOwn","arraySlice","NATIVE_BIND","concat","factories","construct","C","argsLength","args","list","bind","that","F","Prototype","partArgs","arguments","boundFunction","classof","toIndexedObject","$getOwnPropertyNames","f","windowNames","window","Object","getOwnPropertyNames","getWindowNames","it","error","call","fixRegExpWellKnownSymbolLogic","isRegExp","anObject","requireObjectCoercible","speciesConstructor","advanceStringIndex","toLength","toString","getMethod","callRegExpExec","regexpExec","stickyHelpers","fails","UNSUPPORTED_Y","MAX_UINT32","$push","exec","stringSlice","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","re","originalExec","split","SPLIT","nativeSplit","maybeCallNative","internalSplit","separator","limit","string","lim","undefined","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","separatorCopy","RegExp","source","O","splitter","rx","S","res","done","value","unicodeMatching","q","A","e","z","version","INTERNAL_LAYER_PREFIX","GEOMETRY_COLLECTION_TYPES","GEOJSON_TYPES","RESOURCE_PROPERTIES","RESOURCE_SIZE_PROPERTIES","NUMERICAL_PROPERTIES","COLOR_PROPERTIES","DEFAULT_TEXT_SIZE","now","Date","dest","src","isNil","obj","isNumber","val","isNaN","isInteger","isString","constructor","String","isFunction","hasOwnProperty","key","seperator","Array","isEmpty","object","property","pi","PI","toRadian","d","toDegree","r","IS_NODE","process","versions","Browser","maps","getDevicePixelRatio","devicePixelRatio","screen","deviceXDPI","logicalXDPI","ua","navigator","userAgent","toLowerCase","doc","document","documentElement","ie","webkit","phantomjs","android23","chrome","gecko","opera","mobile","orientation","msPointer","PointerEvent","MSPointerEvent","pointer","pointerEnabled","ie3d","style","webkit3d","WebKitCSSMatrix","gecko3d","opera12","any3d","imageBitMap","createImageBitmap","resizeObserver","ResizeObserver","btoa","chromeVersion","touch","DocumentTouch","webgl","decodeImageInWorker","offCanvas","OffscreenCanvas","getContext","err","supportsPassive","addEventListener","ielt9","edge","android","safari","mobileWebkit","mobileWebkit3d","mobileOpera","mobileGecko","retina","language","browserLanguage","ie9","documentMode","ie10","monitorDPRChange","removeDPRListening","map","id","checkDevicePixelRatio","_devicePixelRatio","changed","addDPRListening","matchMedia","dpi","toFixed","screen$1","addListener","tempDPI","defineProperty","get","set","mapId","options","checkSize","getRenderer","renderer","Browser$1","_inheritsLoose","subClass","superClass","create","__proto__","_assertThisInitialized","self","ReferenceError","requestAnimFrame","cancelAnimFrame","Position","x","y","isArray","_isNaN","Error","_proto","abs","_abs","_round","round","_ceil","distanceTo","point","mag","_floor","floor","copy","_add","add","nx","ny","_sub","_substract","sub","substract","multi","ratio","_multi","div","_div","equals","c","isZero","toArray","Point","_Position","closeTo","delta","unit","_unit","perp","_perp","angleWith","angleWithSep","atan2","_rotate","angle","cos","sin","rotate","isSVG","url","prefix","loadImage","img","imgDesc","fn","setTimeout","clearTimeout","requestFn","cancelFn","timeToCall","timeoutDefer","getPrefixed","name","uid","UID","GUID","parseJSON","str","JSON","parse","pushIn","ii","ll","removeFromArray","array","forEachCoord","context","pp","getValueOrDefault","v","sign","Number","log2","LOG2E","rounded","interpolate","t","wrap","w","clamp","isArrayHasData","urlPattern","isURL","test","cssUrlReWithQuote","cssUrlRe","isCssUrl","extractCssUrl","matches","b64chrs","btoa$1","input","block","charCode","idx","charAt","charCodeAt","b64toBlob","b64Data","contentType","byteCharacters","atob","arraybuffer","ArrayBuffer","view","Uint8Array","blob","Blob","type","computeDegree","x0","y0","x1","y1","dx","dy","BITMAP_CTX","emptyImageUrl","equalMapView","obj1","obj2","approx","expected","flash","interval","count","cb","me","flashGeo","show","hide","_flashTimeout","_defaults$1","defaults","keys","getOwnPropertyDescriptor","configurable","getPointsResultPts","points","ptKey","resultPoints","pt","canvas","createElement","width","getImageBitMap","imageData","createImageData","then","bitmap","getAbsoluteURL","href","CANVAS_SIZE_TEMP","cssWidth","cssHeight","calCanvasSize","size","createFunction","parameters","defaultType","fun","isFeatureConstant","isZoomConstant","isFunctionDefinition","innerFun","zoomAndFeatureDependent","stops","featureDependent","zoomDependent","evaluateExponentialFunction","evaluateIntervalFunction","evaluateCategoricalFunction","evaluateIdentityFunction","featureFunctions","featureFunctionStops","s","stop","zoom","feature","base","coalesce","interpolate$1","inputLower","inputUpper","outputLower","outputUpper","evaluatedLower","evaluatedUpper","interpolateArray","interpolateNumber","difference","progress","hasFunctionDefinition","interpolated","createFunction1","loadFunctionTypes","argFn","hit","loaded","multResult","props","buildFn","enumerable","_i","getFunctionTypeResources","l","stringify","_fn","types","createFilter","filter","compile","op","compileComparisonOp","compileLogicalOp","compileNegation","compileInOp","compileHasOp","compilePropertyReference","substring","checkType","expressions","values","expression","getFilterFeature","geometry","json","_toJSON","g","compileStyle","styles","compiled","extend$1","prop","loadGeoSymbol","symbol","geo","getMap","set$1","getZoom","getProperties","setProp","getBearing","getPitch","a0","a1","translateToSVGStyles","getMarkerPathBase64","svgStyles","_p","pathes","pathesToRender","svg","strPath","_p2","b64","getExternalResources","toAbsolute","symbols","resSizeProp","h","resources","convertResourceUrl","iii","_iii","_convertUrl","Size","toPoint","trim","replace","specialPattern","escapeSpecialChars","splitWords","chr","rulerCtx","stringWidth","text","font","measureText","stringLength","splitContent","content","wrapWidth","textWidth","chrWidth","minChrCount","testStr","prew","contentExpRe","replaceVariable","describeText","textContent","maxHeight","textDesc","splitTextToRow","getAlignPoint","horizontalAlignment","verticalAlignment","alignW","alignH","DEFAULT_FONT","getFont","lineSpacing","textHeight","wrapChar","textRows","actualWidth","texts","tWidth","contents","_contents","_w","rowNum","textSize","hashCode","hash","strlen","isGradient","getGradientStamp","getSymbolStamp","getSymbolHash","sortedKeys","sortedSymbol","reduce","accumulator","curValue","lowerSymbolOpacity","_symbol","_ratio","lower","extendSymbol","sources","parseStyleRootPath","root","iconset","replacer","convertStylePath","parseSymbolPath","URL_PATTERN","parseStops","defaultValue","isDashLine","symbolizers","symbolizer","_symbolizer$style","lineDasharray","lineWidth","index$1","freeze","_defaults","first","testProp","TRANSFORM","TRANSFORMORIGIN","TRANSITION","createEl","tagName","className","el","setClass","createElOn","container","setStyle","appendChild","removeDomNode","innerHTML","parentNode","removeChild","addDomEvent","typeArr","handler","eventHandler","event","listensDomEvent","removeDomEvent","callback","capture","passive","doRemove","removeEventListener","handlers","jlen","hitHandler","preventDefault","returnValue","stopPropagation","cancelBubble","preventSelection","dom","onselectstart","ondragstart","setAttribute","offsetDom","offset","setTransform","top","computeDomPosition","getComputedStyle","padding","parseInt","rect","getBoundingClientRect","offsetWidth","offsetHeight","scaleX","scaleY","__position","getEventContainerPoint","ev","domPos","clientX","clientLeft","clientY","clientTop","endsWith","suffix","strCss","cssText","hasClass","classList","getClass","addClass","classes","baseVal","pos","isHTML","measureDom","parentTag","ruler","getDomRuler","clientWidth","clientHeight","tag","span","body","MapLRUCache","on","off","isMapSupported","Map","ArrayLRUCache","onRemove","reset","order","has","removedData","getAndRemove","setMaxSize","_proto2","_iterator","_isArray","Symbol","iterator","_ref","next","delete","shrink","_iterator2","_isArray2","_i2","_ref2","LRUCache","Ajax","jsonp","script","getElementsByTagName","client","_getClient","open","headers","setRequestHeader","withCredentials","credentials","responseType","send","post","postData","_t","_wrapCallback","readyState","status","response","byteLength","cacheControl","getResponseHeader","expires","responseText","statusText","XMLHttpRequest","ActiveXObject","onreadystatechange","getArrayBuffer","getImage","imgData","onerror","URL","webkitURL","onload","revokeObjectURL","createObjectURL","resp","DEFAULT_STROKE_COLOR","DEFAULT_FILL_COLOR","DEFAULT_TEXT_COLOR","hitTesting","TEMP_CANVAS","RADIAN","textOffsetY","Canvas","setHitTesting","testing","createCanvas","canvasClass","prepareCanvasFont","ctx","textBaseline","fill","fillStyle","getRgba","prepareCanvas","strokeWidth","strokePattern","strokeColor","strokeStyle","patternOffset","_setStrokePattern","_createGradient","normalizeColorToRGBA","lineJoin","lineCap","setLineDash","polygonPattern","fillImgUrl","extractImageUrl","fillTexture","Image","image","createPattern","console","warn","extent","gradient","places","getMin","getMax","getWidth","getHeight","getCenter","createRadialGradient","createLinearGradient","forEach","addColorStop","linePatternOffset","imageTexture","imgUrl","imageRes","patternCanvas","addResource","clearRect","x2","y2","_drawn","fillCanvas","fillOpacity","alpha","isPattern","_isPattern","globalAlpha","translate","color","opacity","drawImage","_text","_textOnMultiRow","splitTextSize","rowAlign","ptAlign","lineHeight","basePoint","_textOnLine","textHaloRadius","textHaloFill","textHaloAlpha","gco","drawHalo","shadowBlur","shadowOffsetX","shadowOffsetY","miterLimit","strokeText","globalCompositeOperation","fillText","rgba","_stroke","strokeOpacity","stroke","_path","lineDashArray","lineOpacity","ignoreStrokePattern","prePoint","nextPoint","isDashed","isPatternLine","lineTo","fillWithPattern","beginPath","moveTo","drawDashLine","p1","p2","degree","save","cosd","restore","_multiClip","polygon","smoothness","isMultiClip","fillFirst","savedCtx","copyProperties","_ring","paintSmoothLine","closePath","ring","ignorePattern","smoothValue","close","tailIdx","tailRatio","preCtrlPoints","x3","y3","ctrlPoints","getCubicControlPoints","bezierCurveTo","lastPoint","prevCtrlPoint","nextCtrlPoint","interpolate$$1","t0","t1","bx1","by1","bx2","by2","u0","u1","qxa","qxb","qxc","qxd","qya","qyb","qyc","qyd","xb","xc","xd","yb","yc","yd","xc1","yc1","xc2","yc2","xc3","yc3","len1","len2","len3","k1","k2","xm1","ym1","xm2","ym2","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y","_arcBetween","dist","p1p2","asin","cp2","da","cx","cy","startAngle","endAngle","arc","_lineTo","bezierCurveAndFill","start","_bezierCurveTo","p3","ellipse","heightTop","heightBottom","bezierEllipse","b1","ox","oy","oy1","rectangle","sector","angles","rad","radius","sDeg","eDeg","drawCross","target","pixelRect","isStroke","strokeRect","fillRect","startPoint","endPoint","dashArray","fromX","fromY","toX","toY","pattern","lt","gt","capmin","capmax","checkX","thereYet","cap","checkY","ang","offsetX","offsetY","dash","promise","lineDashOffset","shadowColor","Promise","Promise$1","Eventable","Base","_Base","_class","eventsOn","_switch","_eventMap","evtType","handlerChain","eventTypes","once","_wrapOnceHandler","evetTypes","eventsOff","eventType","listeners","wrapKey","jl","listener","listens","getListeningEvents","copyEventListeners","eventMap","fire","_eventParent","_fire","called","onceHandler","to","eventKeys","_clearListeners","_clearAllListeners","_setEventParent","_setEventTarget","_eventTarget","param","bubble","passed","queue","Handler","enable","_enabled","addHooks","disable","removeHooks","enabled","Handler$1","Class","setOptions","callInitHooks","proto","getPrototypeOf","_visitInitHooks","config","conf","onConfig","_initHooksCalled","parentProto","hooks","_initHooks","addInitHook","_len","_key","init","include","mergeOptions","registeredTypes","JSONAble","registerJSONType","getJSONClass","getJSONType","_jsonType","clazz","CollisionIndex","_tree","box","insertBox","tree","bulkInsertBox","boxes","Handlerable","addHandler","handlerClass","_handlers","removeHandler","_clearHandlers","START_EVENTS","MOVE_EVENTS","mousedown","touchstart","pointerdown","MSPointerDown","END_EVENTS","DragHandler","_Handler","_this","_onMouseDown","onMouseDown","_offEvents","button","touches","setCapture","captureEvents","MOUSEMOVE","MOUSEUP","moved","actual","startPos","onMouseMove","onMouseUp","interupted","newPos","changedTouches","Coordinate","toNumberArrays","coordinates","coord","toCoordinates","CRS","properties","createProj4","proj","fromProjectionCode","code","toUpperCase","WGS84","EPSG4326","EPSG3857","IDENTITY","CGCS2000","EPSG4490","BD09LL","GCJ02","TEMP_EXTENT","TEMP_POINT0","TEMP_COORD0","TEMP_COORD1","TEMP_COORD2","TEMP_COORD3","TEMP_COORD4","TEMP_COORD5","TEMP_COORD6","TEMP_COORD7","MINMAX","TEMP_COMBINE","Extent","p4","_clazz","unproject","projection","_dirty","_initialize","xmin","xmax","ymin","ymax","_scale","out","isValid","ext2","_project","rxmin","rymin","rxmax","rymax","within","pxmin","pxmax","pymin","pymax","project","getSize","__combine","inited","_combine","ext","combine","intersection","expand","distance","_expand","convertTo","minmax","projectCoords","PointExtent","_Extent","Transformation","matrix","transform","scale","untransform","Common","isSphere","coords","wrapX","wrapY","current","circum","getCircum","getSphereExtent","sx","sy","pre","prj","unprojectCoords","projCoords","sphere","isOutSphere","pcoord","wrapCoord","wrapped","Common$1","measureLength","c1","c2","measureLenBetween","Identity","measureArea","locate","xDist","yDist","_locate","pivot","tmp","Sphere","ry","initialAngle","rhumbBearing","finalAngle","calculateRhumbDestination","end","bear360","final","calculateRhumbBearing","bear180","from","phi1","phi2","deltaLambda","deltaPsi","tan","theta","origin","bearing","lambda1","DeltaPhi","DeltaPsi","DeltaLambda","lambda2","WGS84Sphere","BaiduSphere","DEFAULT","measurers","registerMeasurer","measure","Measurer","getInstance","mName","metersPerDegree","maxLatitude","lnglat","lng","lat","pLnglat","atan","exp","PROJ4326","Projection_EPSG4490","Projection_Baidu","convertLL2MC","convertMC2LL","EARTHRADIUS","MCBAND","LLBAND","MC2LL","LL2MC","cB","cE","cD","T","convertor","cC","getLoop","getRange","toRadians","toDegrees","Projection_IDENTITY","DEFAULT$1","projections","BAIDU","Renderable","registerRenderer","_rendererClasses","getRendererClass","adapters","registerWorkerAdapter","workerKey","adapter","header","footer","compileWorkerSource","getWorkerSourcePath","globalWorkerPool","hardwareConcurrency","workerCount","MessageBatch","_limit","_messages","buffers","addMessage","msg","isFull","getMessage","messageType","messages","WorkerPool","active","MAPTALKS_WORKER_COUNT","_messageBuffers","acquire","workers","worker","Worker","release","terminate","workerId","batches","batch","commit","shift","postMessage","getGlobalWorkerPool","dedicatedWorker","EMPTY_BUFFERS","Actor","workerPool","currentActor","actorId","callbacks","callbackID","receiveFn","receive","isActive","broadcast","_this2","asyncAll","message","_this3","command","params","cbData","_this4","targetID","getDedicatedWorker","remaining","results","imageFetchWorkerKey","EMPTY_ARRAY","ResourceWorkerConnection","_Actor","fetchImage","CanvasRenderer","_Class","layer","_painted","_drawTime","_resWorkerConn","setToRedraw","render","framestamp","prepareRender","isVisible","ResourceCache","checkAndDraw","_tryToDraw","drawFn","_toRedraw","checkResources","_loadingResource","loadResources","testIfNeedRedraw","isInteracting","drawOnInteracting","needToRedraw","isViewChanged","isMoving","isZooming","isRotating","onSkipDrawOnInteracting","isLoadingResource","isRenderComplete","_renderComplete","mustRenderOnInteracting","setCanvasUpdated","_canvasUpdated","isCanvasUpdated","southWest","canvasExtent2D","_extent2D","onAdd","getCanvasImage","_renderZoom","isBlank","containerPoint","_pointToContainerPoint","clearCanvas","setZIndex","hitDetect","_errorThrown","getImageData","resourceUrls","promises","cache","isResourceLoaded","_promiseResource","_get2DExtent","_containerPointToPoint","_canvas","CanvasClass","onCanvasCreate","createContext","gl","dpr","resetCanvasTransform","resizeCanvas","canvasSize","_calCanvasSize","rScale","_maskExtent","mask","getMask","maskExtent2D","_getMaskPainter","get2DExtent","clipCanvas","old","getGeometries","masks","_mask","painter","paint","clip","getViewExtent","completeRender","getEvents","onZoomStart","onZooming","onZoomEnd","onResize","onMoveStart","onMoving","onMoveEnd","onDragRotateStart","onDragRotating","onDragRotateEnd","onSpatialReferenceChange","getDrawTime","_drawAndRecord","painted","draw","getId","crossOrigin","resolve","uri","_cacheResource","onabort","markErrorResource","_errors","_proto3","refCnt","imageBitmap","checkSVG","_getImgUrl","login","logout","merge","DEFAULT_MARKER_SYMBOLS","markerWidth","markerHeight","markerLineWidth","getVectorPadding","DXDY","getFixedExtent","rotation","alignPoint","dxdy","rotateExtent","SIZE","getVectorMarkerFixedExtent","calVectorMarkerSize","getVectorMarkerAnchor","getMarkerRotation","getDefaultHAlign","markerType","getDefaultVAlign","TEMP_SIZE","shadow","ROTATE_EXTENT","fixedExtent","getImageMarkerFixedExtent","getTextMarkerFixedExtent","FIXED_EXTENT","getMarkerFixedExtent","isTextSymbol","isImageSymbol","isVectorSymbol","isPathSymbol","_lastCode","DYNAMIC_SYMBOL_PROPS","SIZE_SYMBOL_PROPS","clipLine","bounds","noCut","segment","parts","clipSegment","useLastCode","codeOut","newCode","codeA","_getBitCode","codeB","_getEdgeIntersection","clipPolygon","clippedPoints","edges","_code","withInEllipse","center","southeast","tolerance","f1","f2","xfocus","Symbolizer","getPainter","isDynamicSize","testColor","CanvasSymbolizer","_Symbolizer","_prepareContext","_opacityFn","isHitTesting","_defineStyle","drawVectorMarker","gradientExtent","strokeAndFill","translateMarkerLineAndFill","vectorArray","getVectorMarkerPoints","getGraidentExtent","hLineWidth","_j","_j2","_lineCap","v0","v1","v2","v3","hh","hw","extWidth","testCanvas","TEMP_POINT0$1","TEMP_POINT1","TEMP_POINT2","TEMP_POINT3","PointSymbolizer","_CanvasSymbolizer","glRes","getGLRes","renderPoints","_getRenderPoints","_pointAtResToPoint","_rotateExtent","placement","isSpriting","getPlacement","getRenderPoints","_getRenderContainerPoints","ignoreAltitude","cpoints","getDxDy","_cPoint","containerOffset","_pointContainerPoints","flat","getRotation","_getRotationAt","rotations","p0","isTransforming","_pointAtResToContainerPoint","DebugSymbolizer","_PointSymbolizer","symbolize","getLayer","outline","getContainerExtent","cross","TEMP_SIZE$1","ImageMarkerSymbolizer","cookedPoints","_getImage","imgURL","removeCache","_url","_fixedExtent","TEMP_COORD0$1","TEMP_COORD1$1","StrokeAndFillSymbolizer","paintParams","_getPaintParams","isGradient$$1","isPath","isSplitted","_paintOn","_params","_getPrjExtent","_extMin","_extMax","_prjToPoint","_pxExtent","getPaintParams","lineColor","grad","TextMarkerSymbolizer","_dynamic","translateLineAndFill","_textDesc","getTextDesc","_index","MARKER_SIZE","VectorMarkerSymbolizer","_drawMarkers","_drawMarkersWithCache","_drawVectorMarker","stamp","_stampSymbol","_createMarkerImage","anchor","_getCacheImageAnchor","_stamp","_getGraidentExtent","isDynamic","ha","va","VectorPathMarkerSymbolizer","_ImageMarkerSymbolize","defaultSymbol","polygonFill","polygonOpacity","DrawAltitudeSymbolizer","_getStyle","groundPoints","_drawLineAltitude","groundPoint","_drawMarkerAltitude","_drawLine","registerSymbolizers","TEMP_POINT0$2","TEMP_PAINT_EXTENT","TEMP_FIXED_EXTENT","TEMP_CLIP_EXTENT0","TEMP_CLIP_EXTENT1","TEMP_CLIP_EXTENT2","PROJECTION","TEMP_BBOX","minx","miny","maxx","maxy","Painter","_createSymbolizers","_altAtGL","_getGeometryAltitude","geoSymbol","getSymbol","regSymbolizers","_hasPoint","getType","_debugSymbolizer","hasPoint","_verifyProjection","_renderPoints","disableClip","ptkey","resolution","pitch","glScale","containerExtent","_getRenderer","mapStateCache","_hitPoint","getResolution","getGLScale","pitched","rotated","_cachedParams","paintAsPath","_paintAsPath","_unsimpledParams","_res","_pitched","_redrawWhenPitch","_rotated","_redrawWhenRotate","_simplified","zoomScale","tr","mapExtent","cPoints","pointPlacement","_aboveCamera","roundPoint","needClip","clipBBoxBufferSize","pointsContainerPoints","viewPoints","alts","pts","_pointsAtResToContainerPoints","getShell","getHoles","clipPts","_points","clipPt","altitude","getAltitude","clipped","_geometry","_clip","inView","clipPoints","alt","altitudeIsNumber","_cring","altArray","cring","_containerBbox","hasAltitude","_2DExtent","glExtent","_get2DExtentAtRes","extent2D","cameraLookAt","cameraPosition","glExtent2D","_glScale","part","_i3","_interpolateSegAlt","clipSegs","orig","cc","segsWithAlt","interpolateAlt","cp","_getInternalSymbol","_isCheck","minAltitude","getMinAltitude","frustumAlt","getFrustumAltitude","_beforePaint","contexts","_prepareShadow","_afterPaint","getSprite","_spriting","_sprite","markerExtent","bak","hitTest","_eachSymbolizer","_isDynamicSize","_zoom","_computeExtent2D","_computeFixedExtent","_this$_fixedExtent","change","isCanvasRender","repaint","refreshSymbol","_removeSymbolizers","_paintParams","propAlt","_propAlt","getMaxAltitude","maxAltitude","MAX_VALUE","MIN_VALUE","_meterToPoint","distanceToPointAtRes","_getProjection","_projCode","w0","w1","TEMP_EXTENT$1","CollectionPainter","isMask","_eachPainter","geometries","_getPainter","MAX_ZOOM","DefaultSpatialReference","resolutions","SpatialReference","_initSpatialRef","getPreset","preset","getAllPresets","getProjectionInstance","prjName","sp1","sp2","fullExtent","bottom","r1","r2","_projection","defaultSpatialRef","isEPSG","_resolutions","_pyramid","_fullExtent","_transformation","getResolutions","getProjection","getFullExtent","getTransformation","getMinZoom","getMaxZoom","getZoomDirection","isPyramid","TEMP_POINT0$3","TEMP_EXTENT$2","Geometry","_JSONAble","opts","setSymbol","_genSizeSymbol","setProperties","setId","getFirstCoordinate","getCoordinates","getLastCoordinate","addTo","fitview","addGeometry","_layer","_id","oldId","_fireEvent","_getParent","_repaint","_symbolUpdated","_prepareSymbol","onSymbolChanged","_compiledSymbol","_symbolHash","updateSymbol","_getSymbol","_eventSymbolProperties","getTextContent","_sizeSymbol","_computeCenter","_getMeasurer","getExtent","prjExt","_computeExtent","extent2d","extent2","groundExtent","_getFixedExtent","_extent2d","_prjToPointAtRes","containsPoint","coordToContainerPoint","_containsPoint","_hitTestTolerance","onHide","getZIndex","zIndex","setZIndexSilently","bringToFront","getGeoMaxZIndex","topZ","bringToBack","getGeoMinZIndex","bottomZ","_silence","translated","setCoordinates","ret","_unbind","toGeoJSONGeometry","gJson","_exportGeoJSONGeometry","toGeoJSON","geoJSON","_exportProperties","other","_exportGraphicOptions","getLength","_computeGeodesicLength","getArea","_computeGeodesicArea","measurer","_getConnectPoints","_initOptions","_bindLayer","_clearCache","_bindInfoWindow","_bindMenu","cookedSymbols","_checkAndCopySymbol","_setExternSymbol","_externSymbol","_extent","_computePrjExtent","_animPlayer","finish","_unbindMenu","_unbindInfoWindow","isEditing","endEdit","_removePainter","onRemoveGeometry","_internalId","_getInternalId","_setInternalId","_clearProjection","_getExternalResources","_painter","getCollectionPainterClass","getPainterClass","_maskPainter","_paint","_dirtyCoords","_pcenter","_coordinates","closeMenu","closeInfoWindow","onShapeChanged","onPositionChanged","dynamicSize","_getSizeSymbol","symbolSize","lineDx","lineDy","_getCompiledSymbol","needRepaint","_setParent","_parent","eventName","_onGeometryEvent","_infoWinOptions","geoProperties","layerOpts","layerAltitude","_genMinMaxAlt","_minAlt","_maxAlt","options$1","Layer","setMask","onLoad","_initRenderer","_renderer","onLoadEnd","addLayer","_zIndex","_sortLayersByZIndex","minZoom","maxZoom","getOpacity","setOpacity","layers","_getLayerList","topLayer","bottomLayer","removeLayer","_isVectorMarker","removeMask","isLoaded","_loaded","getCollisionIndex","_collisionIndex","clearCollisionIndex","onRendererCreate","_bindMap","_switchEvents","_doRemove","emitter","_layers","_getMask2DExtent","_onLayerEvent","TEMP_COORD","options$2","Map$1","_Handlerable","baseLayer","VERSION","writable","_initContainer","_panels","_baseLayer","_zoomLevel","_center","setSpatialReference","_mapViewPoint","_updateMapSize","_getContainerDomSize","setBaseLayer","setMaxExtent","_Load","addOnLoadHook","_onLoadHooks","getContainer","_containerDOM","getSpatialReference","_spatialReference","ref","oldRef","_updateSpatialReference","_resetMapStatus","setCursor","cursor","_cursor","_trySetCursor","resetCursor","_prjCenter","setCenter","pcenter","_verifyExtent","_setPrjCenter","_parseEventFromCoord","visualHeight","maxVisualPitch","_getVisualHeight","visualPitch","fov","getFov","cameraToCenter","cameraCenterDistance","tanB","tanP","visualDistance","_pointToExtent","getProjExtent","_pointToPrj","getPrjExtent","getMaxExtent","maxExt","_prjMaxExtent","_getPrjCenter","_panTo","getZoomForScale","fromZoom","isFraction","_getResolution","targetRes","scaleZoom","getZoomFromRes","_getResolutions","minRes","maxRes","gap","setZoom","_zoomAnimation","getMaxNativeZoom","setMaxZoom","viewMaxZoom","setMinZoom","viewMinZoom","_glRes","zoomIn","zoomOut","_zooming","setCenterAndZoom","animation","getFitZoom","coordToPoint","getView","setView","setPitch","setBearing","getScale","fitExtent","zoomOffset","step","_animateTo","getBaseLayer","isChange","onbaseLayerload","removeBaseLayer","getLayers","_getLayers","_layerCache","mapLayers","removed","_removeLayer","setLayerCanvasUpdated","sortLayers","layersToOrder","minZ","_l","toDataURL","mimeType","file","dataURL","quality","dlLink","download","click","coordinate","coordinateToPoint","coordToPointAtRes","coordinateToPointAtRes","pointToCoord","pointToCoordinate","pointAtResToCoord","pointAtResToCoordinate","coordToViewPoint","coordinateToViewPoint","viewPointToCoord","viewPoint","viewPointToCoordinate","coordinateToContainerPoint","containerPointToCoord","containerPointToCoordinate","containerPointToViewPoint","getViewPoint","viewPointToContainerPoint","force","justStart","_initTime","watched","oldHeight","oldWidth","vh","nwCP","nwCoord","_containerPointToPrj","vhAfter","nwCPAfter","_setPrjCoordAtContainerPoint","_mapViewCoord","hided","_eventSilence","getMainPanel","getPanels","isRemoved","_removeDomEvents","childNodes","_moving","_mapAnimPlayer","_stopAnim","prjCenter","_originCenter","_parseEvent","_dragRotating","isDragRotating","isOffscreen","viewportPadding","screenRightBoundary","screenBottomBoundary","setDevicePixelRatio","getElementById","_priorityCursor","_setCursorToPanel","_setPriorityCursor","hasCursor","panel","layerList","_order","sortLayersByZIndex","_loadAllLayers","_callOnLoadHooks","loadLayer","_eachLayer","layerLists","_calcMatrices","resetContainer","containerDOM","_containerDomContentRect","mSize","updateMapSize","_offsetCenterByPixel","pixel","pCenter","offsetPlatform","_getViewPointFrameOffset","panelOffset","_resetMapViewPoint","_mapRes","pCoord","_prjsToPointsAtRes","pCoords","transformation","_pointToPrjAtRes","_pointToPoint","_pointToPointAtRes","COORD","prjCoord","_prjToViewPoint","_viewPointToPrj","coordinateToContainerPointAtRes","pCoordinate","_prjToContainerPointAtRes","coordinatesToContainerPoints","coordinatesToContainerPointsAtRes","prjOut","centerPoint","_toContainerPoint","containerToExtent","POINT0","POINT1","distanceToPixel","distanceToPoint","paramCenter","POINT","pixelToDistance","COORD0","COORD1","fullExt","pointToDistance","pointAtResToDistance","locateByPoint","px","py","cached","_mapExtent2D","_mapGlRes","_mapGlExtent2D","cExtent","_containerPointToPointAtRes","min2d","max2d","_prjToContainerPoint","_viewPointToPoint","_pointToViewPoint","MapDoubleClickZoomHandler","_onDoubleClick","oldZoom","MapDragHandler","mapWrapper","_dragHandler","_cancelOn","_onDragStart","_onDragging","_onDragEnd","domEvent","_ignore","_ignoreEvent","startDragTime","_mode","ctrlKey","_moveStart","_rotateStart","_isEventOutMap","_rotating","_moveEnd","_rotateEnd","startBearing","_start","preX","preY","startX","startY","_startPrjCenter","_getActualEvent","startPrjCoord","isTouch","mx","my","currentCenter","dxy","_clear","dscale","targetPrjCoord","targetCoord","panTo","_rotateMode","_db","prePitch","preBearing","db","_setBearing","_setPitch","_bearing","EVENTS","MapGeometryEventsHandler","allLayers","_identifyGeometryEvents","oneMoreEvent","isMousedown","_mouseDownTime","downTime","time","geometryCursorStyle","tops","getTopElements","topOnlyEvent","events","onEvent","identify","identifyOptions","eventToFire","_getEventTypeToFire","fireGeometryEvent","_queryIdentifyTimeout","callInNextFrame","identifyAtPoint","propagation","geoMap","iid","_onEvent","_prevOverGeos","geomap","oldTargets","geos","oldTarget","oldTargetId","wheelZoomDelta","defaultZoomRate","wheelZoomRate","maxScalePerFrame","MapScrollWheelZoomHandler","_thisScrollZoom","_scrollZoom","_wheelZoomRate","_defaultZoomRate","_delta","_onWheelScroll","evt","_checkZoomOrigin","_trackPadSuspect","_ensureTrackpad","_seamless","_interval","deltaMode","WheelEvent","DOM_DELTA_LINE","deltaY","shiftKey","_lastWheelEvent","_zoomOrigin","_active","zoomRate","targetZoom","_timeout","_requesting","levelValue","wheelDelta","detail","nextZoom","_checkZoom","_origin","_startZoom","duration","frame","state","playState","MapTouchZoomHandler","_onTouchStart","_startP1","_startP2","_startDist","_startVector","_startBearing","_onTouchMove","_onTouchEnd","d1","d2","vector","mode","_startTouching","_Origin","KEY","Easing","outExpo","outQuint","in","inAndOut","linear","upAndDown","Frame","Player","onFrame","_animation","_onFrame","ready","finished","Animation","speed","_resolveStyles","resolveChild","_styles","resolveVal","isChild","childStyles","framing","dStyles","startStyles","destStyles","easing","deltaStyles","_startStyles","_dStyles","elapsed","_requestAnimFrame","_frameQueue","_a","_animationFrameId","_frameFn","_run","running","animate","player","_prepare","_framer","play","currentTime","startTime","_playStartTime","pause","cancel","reverse","_frame","Animation$1","options$3","Path","_Geometry","animateShow","_showPlayer","_animIdx","_animLenSoFar","isPolygon","animCoords","prjAnimCoords","_prjAniShowCenter","_aniShowCenter","_distance","_tempCoord","_tempPrjCoord","currentCoord","_drawAnimShowFrame","_animTailRatio","prjCoords","targetLength","segLen","lastCoord","_setPrjCoordinates","_animCoords","_prjAnimCoords","_getCenterInExtent","clipFn","meExtent","sumx","sumy","counter","_getPath2DPoints","disableSimplify","isSimplify","_shouldSimplify","isMulti","glPointKey","prjPoints","_prjCoords","_getPrjCoordinates","_projectCoords","_updateCache","_unprojectCoords","shell","rings","hasHoles","_coords2Extent","_getPrjHoles","_get2DLength","vertexes","JSON_TYPE","Polygon","_Path","getOutline","_holes","_projectRings","_trimRing","holes","_copyAndCloseRing","getCenterInExtent","_prjHoles","_cleanRing","_checkRing","isClose","_getPrjShell","_prjShell","CenterMixin","_getCenter2DPoint","TEMP_EXTENT$3","options$4","Marker","_CenterMixin","_CenterMixin$prototyp","sizeSymbol","dynamic","_v","_canEdit","computeExtent","_getSprite","options$5","LineString","TEMP_EXTENT$4","GeometryCollection","setGeometries","_geometries","_checkGeometries","_bindGeometriesToLayer","selected","isFn","is","invalidGeoError","_checkGeo","sumX","sumY","computeExtent$1","anchors","startEdit","_originalSymbol","_draggbleBeforeEdit","_editing","MultiGeometry","_GeometryCollection","geoType","GeometryType","_initData","MultiPoint","_MultiGeometry","findClosest","MultiPath","MultiLineString","_MultiPath","MultiPolygon","types$1","GeoJSON","toGeometry","foreachFn","resultGeos","_convert","resultGeo","features","_result2","mGeos","_result","options$6","Circle","_radius","circle","getRadius","setRadius","numberOfPoints","vertex","se","_getMinMax","pminmax","leftx","rightx","topy","bottomy","options$7","Ellipse","setWidth","setHeight","deg","pps","longer","Rectangle","_Polygon","_width","_height","nw","fExt","_pnw","pnw","sphereExtent","_getSouthEast","prjs","rightPoint","bottomPoint","options$8","Sector","_Circle","getStartAngle","setStartAngle","getEndAngle","setEndAngle","pc","sAngle","eAngle","between","options$9","Curve","_LineString","_arc","ctrlPoint","_quadraticCurve","quadraticCurveTo","_bezierCurve","_getCurveArrowPoints","arrows","segments","arrowStyle","arrow","_getArrowShape","_arrow","options$a","ArcCurve","_Curve","_paintArrow","CubicBezierCurve","curve","_getArrowPoints","QuadBezierCurve","defaultSymbol$1","defaultBoxSymbol","TextMarker","_Marker","getContent","_content","setContent","_refresh","_refreshing","_parseSymbol","setTextStyle","getTextStyle","setTextSymbol","setBoxStyle","_style","getBoxStyle","setBoxSymbol","_getTextSize","_getDefaultTextSymbol","_getDefaultBoxSymbol","_getDefaultPadding","options$b","TextBox","_TextMarker","boxSymbol","textStyle","getBoxSymbol","textBox","maxWidth","hAlign","vAlign","options$c","textSymbol","Label","boxStyle","getTextSymbol","label","sizes","_getBoxSize","boxSize","textAlignPoint","Connectable","_hasConnectors","__connectors","_getConnectors","getConnectSource","_connSource","setConnectSource","_connTarget","getConnectTarget","setConnectTarget","_updateCoordinates","_registerEvents","srcPoints","targetPoints","minDist","oldCoordinates","computeLength","_showConnect","trigger","options$d","showOn","ConnectorLine","_Connectable","ArcConnectorLine","_Connectable2","options$e","OverlayLayer","_Layer","_maxZIndex","_minZIndex","_initCache","getGeometryById","_geoMap","_geoList","filtered","getFirstGeometry","getLastGeometry","getCount","copyOnWrite","fitView","last","_toSort","onGeometryAdd","animateTo","zoomAnimationDuration","_updateZIndex","geoId","internalId","onAddGeometry","_cookedStyles","_styleGeometry","removeGeometry","_clearing","onGeometryRemove","clearImageData","_findInList","getStyle","removeStyle","_sortGeometries","_compare","middle","low","high","_onGeometryIdChange","_onGeometryZIndexChange","_onGeometryPositionChange","_onGeometryShapeChange","_onGeometrySymbolChange","_onGeometryShow","_onGeometryHide","_onGeometryPropertiesChange","onGeometryZIndexChange","onGeometryPositionChange","onGeometryShapeChange","onGeometrySymbolChange","onGeometryShow","onGeometryHide","onGeometryPropertiesChange","TEMP_EXTENT$5","options$f","VectorLayer","_OverlayLayer","_hitGeos","hits","_getArrowStyle","profile","clipExtent","geoJSONs","geoExt","MapTool","_Eventable","_map","onEnable","onDisable","isEnabled","options$g","registeredMode","DrawTool","_MapTool","_checkMode","_events","_clickHandler","_mouseMoveHandler","_doubleClickHandler","_mouseDownHandler","_mouseUpHandler","registerMode","modeAction","getRegisterMode","getMode","setMode","_clearStage","_restoreMapCfg","_saveMapCfg","getCurrentGeometry","_drawToolLayer","_getDrawLayer","_loadResources","_mapAutoPanAtEdge","autoPanAtEdge","_geometryEvents","endDraw","undo","_getRegisterMode","action","_shouldRecordHistory","_historyPointer","_clickCoords","update","redo","actions","_mapDoubleClickZoom","dragging","_mapDraggable","_createGeometry","_prjCoord","drawTool","_addGeometryToStage","_getMouseContainerPoint","_isValidContainerPoint","clickCoords","drawLayer","_ending","mapSize","drawLayerId","drawToolLayer","MapBoxZoomHander","_boxZoom","PANOFFSET","MapAutoPanAtEdgeHandler","_onMouseMove","panBy","interpolate$2","currView","empty","_from","_to","_isInternalAnimation","_prevAnimPlayer","zoomOrigin","framer","_interupted","_endAnim","_startAnim","flyTo","z0","z1","startZoom","startPitch","rho","animMinZoom","wMax","rho2","sinh","cosh","tanh","r0","u","isFinite","newCenter","newZoom","newPitch","newBearing","_center2","isAnimating","_animRotating","endCoord","_endCoord","_resumePrev","prevPlayer","CLICK_TIME_THRESHOLD","isRotatingMap","_domMouseDownView","mouseDownView","perspective","fovy","aspect","near","far","nf","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","rotateX","rotateZ","multiply","a30","a31","a32","a33","b0","b2","b3","invert","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","identity","set$2","subtract","normalize","dot","scale$1","ax","ay","az","bx","by","bz","hypot","transformMat4","applyMatrix","matrixToQuaternion","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","quaternionToMatrix","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","setPosition","lookAt","eye","up","_registerDomEvents","_handleDOMEvent","isMouseDown","_domMouseDownTime","_fireDOMEvent","mimicEvent","mimicClick","_downTime","_time","_clickTime","control","preTarget","srcElement","actualEvent","eventPos","eventParam","isFullScreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullscreenElement","requestFullScreen","_requestFullScreen","cancelFullScreen","_cancelFullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullScreen","availWidth","availHeight","newWin","location","opener","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","_panAnimation","setInfoWindow","layerJSON","layerType","extraLayerOptions","layersJSON","exportOption","_opts","layerJSONs","coord1","coord2","computeGeometryLength","computeGeometryArea","_identify","reqLayers","layerHits","_frameZoom","startScale","_startZoomAnim","endScale","_startZoomVal","_startZoomCoord","frameZoom","_zoomTo","fromRes","originOffset","startZoomVal","RADIAN$1","DEFAULT_FOV","TEMP_COORD$1","createMat4","_fov","setFov","_renderLayers","_angle","_pitch","_frustumAltitude","_calcFrustumAltitude","cameraAlt","scale$$1","altitudes","_this$_get2DExtent","_this$getSize","dxPerPixel","dyPerPixel","altitudeIsArray","_pt","w2","h2","_projIfBehindCamera","cameraForward","projViewMatrix","vectorFromCam","position","cameraPos","camForward","camNormDot","coord0","projViewMatrixInverse","_x","_y","m1","worldMatrix","_getCameraWorldMatrix","farZ","_getCameraFar","cameraFar","cameraNear","projMatrix","viewMatrix","_calcCascadeMatrixes","domCssMatrix","_calcDomMatrix","tanFov","cal","curPitch","cascadePitch0","cascadePitch1","projViewMatrix0","cascadeFrustumMatrix0","projViewMatrix1","cascadeFrustumMatrix1","minusY","cameraToCenterDistance","_getFovZ","_getFovRatio","center2D","cz","cameraUp","cameraWorldMatrix","_onViewChange","_viewHistory","_viewHistoryPointer","_getCurrentView","_fireViewChange","zoomToPreviousView","hasPreviousView","_zoomToView","zoomToNextView","hasNextView","getViewHistory","createCollisionIndex","collisionFrameTime","options$h","DistanceTool","_DrawTool","_afterEnable","_afterDisable","_measureLayers","_lastMeasure","_lastVertex","getMeasureLayers","getLastMeasure","_vertexes","marker","_measureMarkerLayer","_measure","toMeasure","units","_registerMeasureEvents","_msOnDrawStart","_msOnDrawVertex","_msOnMouseMove","_msOnDrawEnd","layerId","markerLayerId","_measureLineLayer","startLabel","_addVertexMarker","ms","_msGetCoordsToMeasure","_tailMarker","_tailLabel","vertexLabel","_clearTailMarker","_clearMeasureLayers","_addClearMarker","dxSymbol","endMarker","measureLineLayer","measureMarkerLayer","options$i","AreaTool","_DistanceTool","sqmi","vertexMarker","endLabel","circleHooks","prjPath","nextCoord","ellipseHooks","rectangleHooks","_firstClick","firstClick","polygonHooks","line","pSymbol","lineStringHooks","arcConf","tileInfo","tileSize","lods","tileSystem","getProjectionCode","newcode","codeArray","strReplace","repArray","rep","template","getTransformValue","isArcgis","isGeoServer","isSuperMap","transformValue","getTileMatrixSet","TileMatrixSets","TileMatrixSetLink","TileMatrixSet","parseWMTSXML","requestUrl","parser","DOMParser","xmlDoc","parseFromString","querySelectorAll","nodeName","layerName","tileMatrixSetLinks","tileMatrixSetLink","tileMatrixSet","resourceURL","attributes","_parseTileMatrixSet","parseTileMatrixSet","levelStr","substr","lastIndexOf","urlTemplate","spatialReference","info","tset","TileMatrixs","supportedCRS","minLevel","TileMatrix","ScaleDenominator","TopLeftCorner","TileWidth","TileHeight","_TopLeftCorner$split$","parseFloat","loadArcgis","getJSON","spatialRef","loadWMTS","xml","options$j","UIComponent","owner","_owner","_coordinate","visible","_getUIContainer","_removePrevDOM","_mapEventsOn","_switchMapEvents","__uiDOM","buildOn","_observerDomSize","_measureSize","_singleton","_uiComponent","_uiDomKey","_setPosition","anim","_getAnimation","ok","fade","getTransformOrigin","_toCSSTranslate","_pos","isSupportZoomFilter","display","_autoPan","transition","getDOM","_domContentRect","_size","getOwner","_roundPoint","getPosition","_getViewPoint","getOffset","o","animations","trimed","mapWidth","mapHeight","containerPoint0","domWidth","domHeight","newContainerPoint","onDomRemove","eventsToStop","hideDom","_resizeObserver","disconnect","_getClassName","_getDefaultEvents","ownerEvents","_getOwnerEvents","positionchange","symbolchange","getOwnerEvents","_updatePosition","onDomSizeChange","entries","contentRect","observe","isSupport","options$k","domEvents","UIMarker","_markerCoord","_registerDOMEvents","_removeDOMEvents","isDragging","_onDomEvents","onZoomFilter","_this$options","EVENTS$1","UIMarkerDragHandler","_startDrag","_endDrag","_lastCoord","_lastPoint","_prepareDragHandler","_dragging","_isDragging","coordOffset","pointOffset","PROPERTY_PATTERN","options$l","EMPTY_SIZE","InfoWindow","_UIComponent","getInfoWindow","removeInfoWindow","_infoWindow","setTitle","title","getTitle","_dom","_replaceTemplate","_getWindowWidth","msgContent","querySelector","_onCloseBtnClick","closeBtn","html","markerSize","fixExtent","_onAutoOpen","_rectifyMouseCoordinte","mouseCoordinate","_rectifyLineStringMouseCoordinate","lineString","dis","mousePt","minDis","coordinateIndex","filterPts","xys","_this$getMap$getSize","pt1","pt2","minPtDis","ptIndex","_len2","_dis","defaultWidth","HIDEDOMEVENTS","options$m","ToolTip","onMouseOut","cssName","containerClass","onMouseOver","defaultOptions","Menu","_menu","removeMenu","setItems","getItems","_getMenuWidth","menuItems","_createMenuItemDom","ul","itemDOM","onMenuClick","_callback","itemTitle","Menuable","setMenu","_menuOptions","_defaultOpenMenu","getMenu","openMenu","setMenuItems","getMenuItems","index$4","Control","controlContainer","__ctrlContainer","_controlDom","_parse","getContainerPoint","positions","addControl","removeControl","options$n","layerEvents","Attribution","_Control","_attributionContainer","_update","attributions","attributionControl","options$o","LayerSwitcher","_show","_hide","_createPanel","toElement","relatedTarget","elm","baseLayers","li","_isExcluded","_renderLayer","_li","_ul","_label","excludeLayers","isBase","checked","onchange","layerSwitcherControl","options$p","Overview","mapContainer","_createOverview","_updateBaseLayer","_onButtonClick","_updateButtonText","_overview","_perspective","maxmize","minimize","getOverviewMap","_getOverviewZoom","_getPerspectiveCoords","showIndex","overviewControl","options$q","Panel","closeButton","onclick","panelContent","draggable","_startPos","_startPosition","startPosition","options$r","Scale","_scaleContainer","_addScales","css","_mScale","_iScale","maxMeters","_updateScales","_updateMetric","_updateImperial","meters","_getRoundNum","_updateScale","maxMiles","miles","feet","maxFeet","num","pow10","scaleControl","options$s","Toolbar","onButtonClick","childIndex","targetDom","_getItems","textAlign","itemSize","dropMenu","_createDropMenu","menuDom","menuUL","liWidth","options$t","UNIT","Zoom","levelDOM","_levelDOM","zoomDOM","zoomInButton","_zoomInButton","reading","_sliderBox","_sliderRuler","_sliderReading","_sliderDot","zoomOutButton","_zoomOutButton","_onZoomInClick","_onZoomOutClick","_onClickRuler","dotDragger","totalRange","zoomRange","_updateText","_onDotDragstart","_onDotDrag","zoomControl","TileSystem","getDefault","semiCircum","TileConfig","prepareTileInfo","_xScale","_yScale","_pointOrigin","_getTileNum","tileX","tileY","getTileIndex","repeatWorld","tileIndex","getNeighorTileIndex","idy","_getTileFullIndex","_tileFullIndex","nwIndex","seIndex","getTilePrjNW","getTilePointNW","getTilePrjSE","getTilePointSE","getTilePrjExtent","DEFAULT_MAXERROR","TEMP_POINT","MAX_ROOT_NODES","isSetAvailable","Set","TileHashset","_table","options$u","URL_PATTERN$1","TEMP_POINT0$4","TEMP_POINT1$1","TEMP_POINT2$1","TEMP_POINT3$1","TEMP_POINT4","TEMP_POINT6","TILE_BOX","TILE_MIN","TILE_MAX","ARR3","TileLayer","getTileSize","_tileSize","getTiles","parentLayer","_coordCache","sr","_disablePyramid","_hasOwnSR","_getPyramidTiles","_getCascadeTiles","_getTileFullExtent","_tileFullExtent","_getRootNodes","offset0","_rootNodes","_this$_rootNodes","_tiles","tiles","_error","_getRootError","tileConfig","_getTileConfig","_tileConfig$tileSyste","extent000","_getTileId","getTileUrl","aspectRatio","cameraZ","heightZ","widthZ","diagonalZ","fov0","_getTileZoom","projectionView","_getTileOffset","mapContainerExtent","mapExtent2D","_convertToExtent2d","rootNodes","visualHeight1","visualContainerExtent","_visitedTiles","tileGrid","_getTiles","offsets","0","_splitNode","tileGrids","gridExtent","parentRenderer","childScale","hasCurrentIn","childX","childY","childIdx","childIdy","tileId","isTileCachedOrLoading","nwx","nwy","swx","swy","childNode","_isTileVisible","_isTileInFrustum","maxError","_getScreenSpaceError","_node$extent2d","geometricError","_node$extent2d2","distanceToCamera","distanceToRect","distance$$1","tileZoom","_currentTiles","visualHeight0","extent0","currentTiles","cascadeTiles1","cascadeTiles2","cascadeHeight","cascadeLevels","extent1","domain","subdomains","length$$1","token","_sr","_srMinZoom","_srMaxZoom","res0","res1","dz","cascadeLevel","ignoreMinZoom","frustumMatrix","hasOffset","emptyGrid","tileOffsets","maskExtent","extentScale","pmin","pmax","centerTile","ltTile","rbTile","allCount","tilePoint","leftVisitEnd","rightVisitEnd","_tileInfo","_unproject","pse","tileExtent","_isTileInExtent","_splitTiles","point0","point1","tileIdx","yOrder","corner","tile","_checkAndAddTile","childExtent","_isSplittedTileInExtent","mapProjection","_initTileConfig","_defaultTileConfig","_tileConfig","_onSpatialReferenceChange","tileCenter","ndc","xyz","workerSource","registerWorkerSource","options$v","DEFAULT_TILESIZE","GroupTileLayer","_TileLayer","_checkChildren","layerMap","_groupChildren","childGrid","getChildLayer","_onLayerShowHide","ids","options$w","crs","uppercase","detectRetina","defaultWmsParams","service","request","transparent","WMSTileLayer","wmsParams","_wmsVersion","projectionKey","getParamString","existingUrl","encodeURIComponent","CanvasTileLayer","drawTile","createGLContext","names","compileShader","shader","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","createProgram","vert","frag","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","attachShader","linkProgram","enableVertexAttrib","FSIZE","Float32Array","BYTES_PER_ELEMENT","STRIDE","attr","getAttribLocation","vertexAttribPointer","enableVertexAttribArray","_attr","shaders","arr16","DEBUG_POINT","ImageGLRenderable","renderable","drawGLImage","debug","useProgram","loadTexture","uMatrix","uniformMatrix4fv","uniform1f","glBuffer","saveImageBuffer","bindBuffer","ARRAY_BUFFER","bufferTileData","drawArrays","TRIANGLE_STRIP","drawDebug","attrib","debugInfo","_debugBuffer","bufferData","DYNAMIC_DRAW","LINE_STRIP","_debugInfoCanvas","_ctx","texImage2D","TEXTURE_2D","RGBA","UNSIGNED_BYTE","set8","buffer","set8Int","loadImageBuffer","Int16Array","drawTinImage","vertices","texCoords","indices","posBuffer","texBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","drawElements","TRIANGLES","UNSIGNED_SHORT","createCanvas2","canvas2","clearColor","DEPTH_TEST","STENCIL_TEST","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","createBuffer","STATIC_DRAW","enableSampler","activeTexture","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","resizeGLCanvas","viewport","clearGLCanvas","COLOR_BUFFER_BIT","STENCIL_BUFFER_BIT","disposeImage","texture","saveTexture","_createTexture","getTexture","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","generateMipmap","_textures","textures","getImageBuffer","_imageBuffers","imageBuffers","createImageBuffer","removeGLCanvas","deleteBuffer","_buffers","deleteTexture","deleteProgram","_createProgram2","numUniforms","getProgramParameter","activeUniforms","getActiveUniform","_initUniforms","sampler","texIdx","uSampler","_getUniform","uniform1i","uniforms","uniform","uniformName","getUniformLocation","a2","a3","a4","a5","a6","a7","options$x","TEMP_POINT$1","ImageLayer","images","_images","_prepareImages","setImages","getImages","_imageData","refreshImages","EMPTY_ARRAY$1","ImageLayerCanvasRenderer","_CanvasRenderer","isDrawable","_imageLoaded","urls","unloaded","retireImage","_drawImages","_drawImage","ImageLayerGLRenderer","_ImageGLRenderable","CanvasLayerRenderer","getPrepareParams","getDrawParams","prepareDrawContext","_drawLayer","_drawLayerOnInteracting","canvasImg","bufferContext","prevent","doubleBuffer","_drawContext","_predrawed","ensureParams","prepareToDraw","_prepareDrawParams","_key2","options$y","CanvasLayer","redraw","isPlaying","requestMapToRender","TEMP_POINT$2","options$z","ParticleLayer","_CanvasLayer","getParticles","_fillCanvas","_shouldClear","trail","_CanvasLayerRenderer","prevX","prevY","EditHandle","_fetchImage","getCursor","markerFile","_img","setContainerPoint","_point","_this$_point","removeTopElement","_dragger","addTopElement","onDragstart","dragHandler","onDragging","onDragend","activeMap","prevCoord","EditOutline","setPoints","allX","allY","EDIT_STAGE_LAYER_PREFIX","createHandleSymbol","options$A","GeometryEditor","prepare","_prepareEditStageLayer","shadowId","_shadowLayer","LayerType","editing","needShadow","_geometryDraggble","_shadow","_switchGeometryEvents","_createOrRefreshOutline","_onMarkerDragEnd","_createCenterHandle","createMarkerEditor","createCircleEditor","createEllipseOrRectEditor","createPolygonEditor","_history","_editOutline","_refreshHooks","_getGeometryEvents","_onGeoSymbolChange","_exeAndReset","oper","_addRefreshHook","cointainerPoint","handle","createHandle","onDown","onMove","onUp","_createHandleInstance","removeVertexOn","onHandleDragstart","_updating","onHandleDragging","_hideContext","onHandleDragEnd","onRefresh","refresh","_createResizeHandles","blackList","onHandleMove","onHandleUp","cursors","axis","isMarker","getResizeAnchors","_ext","resizeHandles","anchorIndexes","handleSymbol","fnLocateHandles","_loop","isBlack","some","ele","geometryToEdit","_recordHistory","getUpdates","verticalAnchor","horizontalAnchor","resizeAbilities","newCoordinates","_updateCoordFromShadow","mirrorHandle","mirror","viewCenter","wh","vr","hr","ability","updates","_this5","handleContainerPoint","wline","hline","_this6","isRect","mouseContainerPoint","pointSub","targetPoint","mirrorContainerPoint","absSub","geoCoord","mirrorCoordinate","mirrorCoord","_mirrorCoord","_mouseCoordinate","_wline","_hline","geoToEdit","verticeLimit","propertyOfVertexIndex","vertexHandles","newVertexHandles","getVertexCoordinates","ringIndex","getVertexPrjCoordinates","onVertexAddOrRemove","removeVertex","_ringIndex","prjCoordinates","nextIndex","isEnd","createNewVertexHandle","moveVertexHandle","handleConatainerPoint","vertice","nVertex","pVertex","hanldeDxdy","compiledSymbol","createVertexHandle","pauseRefresh","nextVertex","vertexCoordinates","vertexIndex","refreshVertex","_vertexCoordinates","_ringIndex2","_ringIndex3","_i4","method","_exeHistory","ignoreRecord","updating","_len3","lastOperation","record","history","TextEditable","startEditText","endEditText","_prepareEditor","_textEditor","innerText","_editUIMarker","onkeyup","isEditingText","getTextEditor","editContainer","_createEditor","_getEditorOffset","_setCursorToLast","labelSize","textColor","spacing","editor","contentEditable","keyCode","range","getSelection","focus","selectAllChildren","collapseToEnd","selection","createRange","moveToElementText","collapse","select","preTranslate","stylesToAnimate","_prepareAnimationStyles","isFocusing","_animationStarted","fnName","toTranslate","dSymbol","_fireAnimateEvent","symbolToAnimate","symbolInStyles","sp","_sp","DRAG_STAGE_LAYER_ID","EVENTS$2","GeometryDragHandler","_prepareDragStageLayer","shadows","_updateShadowSymbol","_prepareShadowConnectors","_dragStageLayer","shadowConnectors","connectors","targetConn","connOptions","connSymbol","conn","_shadowConnectors","_onTargetUpdated","enableAltitude","altitudeProperty","_correctCoord","_startParam","_moved","dragOnScreenAxis","_updateTargetAndRemoveShadow","_editor","redoEdit","undoEdit","cancelEdit","_getEventParams","openInfoWindow","TILE_POINT","TEMP_POINT$3","TEMP_POINT1$2","TEMP_POINT2$2","EMPTY_ARRAY$2","TileWorkerConnection","checkUrl","fetchOptions","BLANK_IMAGE","TileLayerCanvasRenderer","tilesInView","tilesLoading","_parentTiles","_childTiles","tileCache","deleteTile","_tileImageWorkerConn","getCurrentTileZoom","_tileZoom","mask2DExtent","acc","curr","loadingCount","loading","checkedTiles","parentTiles","parentKeys","childTiles","childKeys","placeholders","placeholderKeys","tileQueue","preLoadingCount","_markTiles","loadingLimit","_getLoadLimit","allTiles","placeholder","_generatePlaceHolder","tileLoading","_isLoadingTile","_getCachedTile","getTileOpacity","hitLimit","parentTile","_findParentTile","parentId","_findChildTiles","_drawTiles","loadTileQueue","_retireTiles","t2","onDrawTileStart","_drawTileAndCache","_drawTile","writeZoomStencil","started","resumeZoomStencilTest","startZoomStencilTest","pauseZoomStencilTest","endZoomStencilTest","onDrawTileEnd","_clipByPitch","tileImage","loadTile","loadTime","loadTileImage","onTileLoad","onTileError","referrer","accept","abortTileLoading","falseFn","_addTileToCache","onerrorTick","tileRetryCount","errorUrl","transformed","getDebugInfo","_getLayerOfTile","zoomDiff","_findChildTilesAt","childZoom","dmin","dmax","ex","ey","diff","_tilesLoading$tileId","_tilePlaceHolder","_tile","defaultPlaceholder","cw","ch","TILE_POINT$1","TileLayerGLRenderer","_gl","_bindGLBuffer","stencilFunc","ALWAYS","stencilOp","KEEP","REPLACE","EQUAL","_loadTile","tileCanvas","CanvasRenderer$1","_TileLayerCanvasRende","GLRenderer","_TileLayerGLRenderer","quadVertices","Int8Array","QuadStencil","stencilMask","depthMask","_save","_createBuffer","_createProgram","transformLoc","colorLoc","colorMask","_restore","uniform3fv","random","func","fail","zfail","zpass","resetFunc","_savedProgram","Uint8ClampedArray","OverlayLayerRenderer","_geosToCheck","_resourceChecked","_addGeoToCheckRes","TEMP_EXTENT$6","TEMP_VEC3","TEMP_FIXEDEXTENT","PLACEMENT_CENTER","VectorLayerRenderer","_OverlayLayerCanvasRe","_lastRenderTime","_this$context$canvas","drawGeos","_geosToDraw","_updateMapStateCache","_updateDisplayExtent","_drawnRes","_batchConversionMarkers","_onlyHasPoint","forEachGeo","checkGeo","_sortByDistanceToCamera","_displayExtent","_inCurrentView","inCurrentView","_constructorIsThis","markers","altitudeCache","extentCache","_geo","_pts$_i","symbolkey","meterScale","type0","type1","painter0","painter1","alt0","alt1","dist0","dist1","MapRenderer","_handlerQueue","executeFrameCallbacks","front","panels","hasFront","_frontCount","back","layerDOM","childElementCount","hasBack","_backCount","hasUI","_uiCount","uiDOM","domChanged","frontCount","backCount","uiCount","_frameLoop","MapCanvasRenderer","_MapRenderer","_containerIsCanvas","_thisVisibilitychange","_onVisibilitychange","_loopTime","initContainer","renderFrame","_updateDomPosition","_isViewChanged","updateMapDOM","_getAllLayerToRender","drawLayers","updated","drawLayerCanvas","drawTops","_drawCenterCross","_recordView","_mapview","_getMapView","_spatialRefChanged","_fireLayerLoadEvents","canvasIds","updatedIds","fps","timeLimit","layerLimit","isCanvas","needsRedraw","_checkLayerRedraw","transformMatrix","__zoomTransformMatrix","_drawCanvasLayerOnInteracting","_eventParam","_zoomMatrix","preCanvasIds","_canvasIds","preUpdatedIds","_updatedIds","isLayerCanvasUpdated","sep","isSpatialReferenceChanged","drawTime","inTime","_updateCanvasSize","baseLayerImage","interacting","layerImage","_getLayerImage","targetWidth","targetHeight","_drawLayerCanvasImage","_drawFog","_resizeInterval","clearInterval","_cancelFrameLoop","createContainer","enableSelect","POSITION0","mapAllLayers","backStatic","backLayer","canvasContainer","frontStatic","frontLayer","ui","previous","_frameTimestamp","_resizeCount","_animationFrame","canvasImage","imgOp","_drawContainerExtent","cascadePitches","h30","h60","fogThickness","landscape","topCtx","_checkPositionTime","dTime","_checkSize","_setCheckSizeInterval","_checkSizeInterval","setInterval","_onMapMouseMove","_hitDetectFrame","_getCanvasLayers","visibilityState","_tops","index$6","CanvasTileLayerCanvasRenderer","CanvasTileLayerGLRenderer","OverlayLayerCanvasRenderer","VectorLayerCanvasRenderer","CenterPointRenderer","PolyRenderer","_l2","_ii","_ll","_l3","_l4","_coords","_l5","curretPoint","TEMP_WITHIN","isWithinPixel","_painter$_containerBb","offsetx","offsety","_getRenderSize","prjExtent","arrowStyles","normal","prjVertexes","dasharray","_getArrowPlacement","_getArrows","prjHoles","holePoints","simplified","hole","wellKnownSymbol","V8_VERSION","SPECIES","METHOD_NAME","foo","Boolean","_setPrototypeOf","setPrototypeOf","_inherits","TypeError","_getPrototypeOf","_isNativeReflectConstruct","Reflect","sham","Proxy","valueOf","_typeof","_possibleConstructorReturn","assertThisInitialized","_createSuper","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","Super","NewTarget","possibleConstructorReturn","$","toObject","nativeGetPrototypeOf","CORRECT_PROTOTYPE_GETTER","FAILS_ON_PRIMITIVES","stat","forced","MATCH","getBuiltIn","aConstructor","nativeConstruct","ObjectPrototype","NEW_TARGET_BUG","ARGS_BUG","FORCED","Target","newTarget","$args","instance","getSqDist","getSqSegDist","simplifyRadialDist","sqTolerance","prevPoint","newPoints","simplifyDPStep","maxSqDist","sqDist","simplifyDouglasPeucker","simplify","highestQuality","earcut","holeIndices","dim","invSize","outerLen","outerNode","linkedList","triangles","prev","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","maxZ","prevZ","nextZ","locallyInside","isValidDiagonal","splitPolygon","getLeftmost","compareX","eliminateHole","bridge","findHoleBridge","bridgeReverse","filteredBridge","hx","hy","qx","tanMin","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","intersectsPolygon","middleInside","q1","q2","o1","o2","o3","o4","onSegment","inside","Node","an","bp","sum","deviation","polygonArea","trianglesArea","flatten","dimensions","holeIndex","REVISION","addAttribute","bufferGeomertry","setRaycasterLinePrecision","raycaster","linePrecision","Line","threshold","getVertexColors","super","isLineSegmentsGeometry","uvs","setIndex","instanceStart","instanceEnd","applyToBufferAttribute","needsUpdate","boundingBox","computeBoundingBox","boundingSphere","computeBoundingSphere","lineSegments","instanceBuffer","colors","instanceColorBuffer","setPositions","mesh","fromWireframeGeometry","isGeometry","isBufferGeometry","setFromBufferAttribute","union","maxRadiusSq","il","fromBufferAttribute","distanceToSquared","UniformsLib","ShaderLib","linewidth","dashScale","dashSize","gapSize","common","fog","clone","dashed","isLineMaterial","defineProperties","diffuse","setValues","material","isLineSegments2","lineDistances","instanceDistanceBuffer","isLineGeometry","isLine2","OPTIONS","interactive","asynchronous","isAdd","_mouseover","_visible","_zoomVisible","picked","isBaseObject","addMesh","removeMesh","object3d","assign","getOptions","distanceToVector3","getObject3d","pickObject3d","_baseObjects","heightEnable","supportHeight","vertexColors","infoWindow","removeToolTip","toolTip","_vt","onSelectMesh","_computeLineDistances","computeLineDistances","idx1","mergeBufferGeometries","uv","mergeBufferGeometriesAttribute","attributesLen","mergedGeometry","indexOffset","mergedIndex","Uint32Array","iIndex","mergedAttribute","mergeBufferAttributes","arrayLength","generateBufferGeometry","generatePickBufferGeometry","getAttribute","getIndex","defaultBufferGeometry","getDefaultBufferGeometry","barGeometryCache","defaultBoxGeometry","getDefaultCylinderBufferGeometry","radialSegments","getGeometry","initVertexColors","_topColor","mergeBarGeometry","colorLen","bufferGeometry","dispose","getDefaultBoxGeometry","topColor","bottomColor","_createMesh","coordinateToVector3","TYPES","getGeoJSONType","isGeoJSONPolygon","isGeoJSONLine","isGeoJSONPoint","isGeoJSONMulti","getGeoJSONCoordinates","getGeoJSONCenter","coordLen","spliteGeoJSONMulti","fType","v2Dot","v2Normalize","scaleAndAdd","v2Add","v3Sub","v3Normalize","v3Cross","rel","slerp","cosT","acos","lineIntersection","x4","y4","writeOffset","dx1","dx2","dy1","dy2","tmp1","tmp2","triangulate","innerOffsetPolygon","outStart","removeIntersections","checkMiterLimit","prevOffsetX","prevOffsetY","prevCursor","indicesMap","tmpIntersection","nextIdx","prevIdx","needCheckIntersection","cosA","sinA","miter","isCovex","halfA","innerOffsetPolyline","outOff","offsetPolygon","offsetVertices","exteriorSize","reversePoints","stride","convertToClockwise","polygonVertexCount","normalizeOpts","depth","bevelSize","bevelSegments","smoothBevel","smoothSide","smoothSideThreshold","boundingRect","fitRect","targetX","targetY","generateNormal","v3Set","v21","v32","normals","i1","i2","i3","quadToTriangle","ringDistance","firstX","firstY","addExtrudeSide","topVertices","splittedMap","ringVertexCount","splitBevel","vertexOffset","ringPerimeter","isDuplicateVertex","ringCount","vLen","uLen","rawIdx","prevX2","prevY2","prevZ2","sideStartRingN","addTopAndBottom","indicesLen","excludeBottom","vertexCount","splitVertices","isAutoSmooth","newVertices","newHoles","polysCount","angleCos","innerExtrudeTriangulatedPolygon","preparedData","indexCount","faceEnd","faceStart","sideRingVertexCount","convertPolylineToTriangulatedPolygon","polyline","polylineIdx","pointCount","insidePoints","outsidePoints","outsideIndicesMap","insideIndicesMap","polygonVertices","outsidePointCount","rawVertices","removeClosePointsOfPolygon","epsilon","newPolygon","simplifyPolygon","extrudePolygon","polygons","updateBoundingRect","transformdRect","simplifyTolerance","extrudePolyline","polylines","newPolyline","getCenterOfPoints","lnglats","setBottomHeight","bottomHeight","getGeometriesColorArray","geometriesAttributes","colorsLen","coordiantesToArrayBuffer","coordiantes","Float64Array","getExtrudeGeometry","getExtrudeGeometryParams","centerPt","altCache","datas","getPolygonPositions","shapes","middleZ","isArrayBuff","getSinglePolygonPositions","fs","outer","coordinatiesToGLFloatArray","positons2d","coordinatiesToGLArray","getPolygonArrayBuffer","getSinglePolygonArrayBuffer","isGeoJSON","COMMA","getLinePosition","hasVectorArray","positionsV","positions2d","cent","arrayBuffer","getChunkLinesPosition","chunkLines","positionMap","key1","getExtrudeLineParams","ps","LineStringSplit","lineStrings","getLineSegmentPosition","mergeLinePositions","positionsList","getLineArrayBuffer","defaultGeometry","getDefaultLineGeometry","workerName","getWorkerName","MeshActor","getActor","getDistance","gengerateExtrudePolygons","isMercator","transfer","_properties","gengerateExtrudeLines","lineStringList","multiLineString","gengerateLines","getDatas","queues","baseObject","queueMap","tempQueue","getCurrentTime","deQueueCount","resultQueue","deQueue","resultList","_workerLoad","actor","pushQueue","pushResult","loop","ExtrudePolygonTaskIns","ExtrudePolygonsTaskIns","ExtrudeLineTaskIns","ExtrudeLinesTaskIns","LineTaskIns","LinesTaskIns","FatLineTaskIns","FatLinesTaskIns","BaseObjectTaskManager","isRunning","initColors","cs","positionList","_createLineSegments","extrudeParams","attribute","extrudeH","model","_createGroup","MINLENGTH","formatLineArray","degreesToRadians","getPercentLngLat","percent","lineSlice","lineChunkLength","LEN","totalLen","floorlen","LNGLATSLEN","currentLngLat","currentLen","lines","lls","offsetLen","MAX_POINTS","setExtrudeLineGeometryAttribute","norls","chunkLength","chunkLine","inds","_init","defaultMaterial","MergedMixin","baseObjects","_proxyEvent","_showGeometry","selectMesh","getSelectMesh","indexs","_geometriesAttributes","bufferAttribute","_getHideGeometryIndex","_geometryCache","NaN","isHide","geometryAttributes","buffGeom","_updateAttribute","_getIndex","_datas","faceIndex","pick","getPick","_colorMap","cIndex","getColor","colorIndex","getHex","setPickObject3d","extrudePolygons","psIndex","normalIndex","uvIndex","faceLen","psCount","normalCount","uvCount","_initBaseObjectsEvent","_setPickObject3d","vector2Pixel","world_vector","camera","halfWidth","halfHeight","vs","_createPoints","getCamera","pointSize","ROW","COL","minlng","minlat","maxlng","maxlat","rec","grids","averageX","averageY","ROWS","COLS","roundFun","tempValue","initGrids","vectors","pointMeshes","maxSize","hasColor","hasSize","TEMP_VECTOR","row","col","gridIndex","_grids","_bindMapEvents","_updateGrids","updateBBoxPixel","bs","isRecCross","bars","parray","bar","centers","extrudeLines","le","MAX","waitingQueue","getQueues","currentQueue","vt","loopMessage","outQueue","deleteQueueItem","queArray","nextLoop","DEFAULT_IMAGE","generateImage","getMaterial","_baseObjectKeys","_loadTiles","_layerLaodTime","getTime","loadTiles","baseos","baseobjects","keysMap","_getCurentTileKeys","keys1","offsetTime","threeLayer","tilesInViewLen","loadTilesLen","needsRemoveBaseObjects","baseobject","_getXYZOfIndex","_diffCache","currentCount","needCount","formatBaseObjects","_cachetile","isAsynchronous","_diposeBaseObject","bos","bo","_faceMap","splitstr","_getTileExtent","geojson","_getMaterial","extrudepolygons","toExtrudePolygons","toLines","toPoints","getTileData","_layerOnLoad","getBaseObjects","intervalId","_isLoad","tileinfo","_generateBaseObjects","getPlaneGeometryAttribute","devideW","devideH","tempIndex","uIndex","uvx","uvy","indexArray","getPlaneGeometry","textureLoader","getRGBData","HTMLCanvasElement","imageWidth","imageHeight","vxmin","vymin","vxmax","vymax","rgbImg","imgdata","R","G","B","tileDivisor","_imgQueue","_getTileLngLatExtent","terrain","rgbImage","Intensity","0.25","0.55","0.85","1","minSize","initPalette","setMax","setMin","setMinSize","paletteCtx","lineGradient","getLegend","createCircle","offsetDistance","colorize","pixels","jMin","jMax","maxOpacity","minOpacity","drawGray","dataSet","circleHalfWidth","circleHalfHeight","dataOrderByAlpha","_data","withoutAlpha","strength","shadowCanvas","shadowContext","intensity","absolute","colored","putImageData","gridScale","CANVAS_MAX_SIZE","maxOffset","canvasWidth","canvasHeight","maxAlpha","blackps","alphas","rgb","filterIndex","object3ds","getThreeRenderer","pickingTexture","pickingScene","setHex","pw","ph","setSize","setRenderTarget","pixelBuffer","readRenderTargetPixels","_setMaterialRes","_createLine2","setColors","_colorIndex","newPosition","fetchDataWorkerKey","fetchDataWorkerCode","tasks","taskings","concurrentCount","loopTask","task","abort","fetchData","fetch","postResponse","catch","finally","initialize","onmessage","LINEPRECISIONS","KEY_FBO","_animationBaseObjectMap","_needsUpdate","_mousemoveTimeOut","_delayMeshes","scene","timeStamp","renderScene","coordinaties","array3d","toShape","shape","toExtrudeMesh","amount","geom","fromGeometry","coorindate","getMeshes","getScene","meshes","clearMesh","uuid","delayMeshes","loopRenderCount","_containerPoint","_zoomend","_raycaster","_mouse","_initRaycaster","mouse","setFromCamera","_getLinePrecision","hasidentifyChildren","intersectObjects","intersect","_recursionMesh","renderPickScene","resLevel","precision","geometryEvents","identifyCountOnEvent","outBaseObjects","isOut","baseO","closeToolTip","tooltip","getToolTip","openToolTip","zoomChange","_identifyBaseObjectEvents","_renderTime","_renderTarget","glOptions","antialias","stencil","preserveDrawingBuffer","_createGLContext","_initThreeRenderer","matrix4","autoClear","setClearColor","matrixAutoUpdate","_syncCamera","star","_callbackBaseObjectAnimation","renderTarget","fbo","scissor","depthBuffer","renderTargetProps","threeCreatedFBO","getFramebuffer","elements","projectionMatrix","projectionMatrixInverse","getInverse","getGLZoom","factory","quickselectStep","defaultCompare","sd","newLeft","newRight","swap","UnrealBloomPass","Vector2","Color","pars","minFilter","LinearFilter","magFilter","RGBAFormat","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","resy","renderTargetBright","WebGLRenderTarget","generateMipmaps","renderTargetHorizonal","renderTargetVertical","LuminosityHighPassShader","highPassShader","highPassUniforms","UniformsUtils","materialHighPassFilter","ShaderMaterial","defines","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","bloomFactors","bloomTintColors","Vector3","CopyShader","copyShader","copyUniforms","materialCopy","blending","AdditiveBlending","depthTest","depthWrite","needsSwap","_oldClearColor","oldClearAlpha","basic","MeshBasicMaterial","fsQuad","FullScreenQuad","writeBuffer","readBuffer","deltaTime","maskActive","getClearColor","getClearAlpha","oldAutoClear","setTest","renderToScreen","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius","Pass","wrappedWellKnownSymbolModule","NAME","IS_PURE","DESCRIPTORS","NATIVE_SYMBOL","isCallable","isPrototypeOf","isSymbol","toPropertyKey","$toString","createPropertyDescriptor","nativeObjectCreate","objectKeys","getOwnPropertyNamesModule","getOwnPropertyNamesExternal","getOwnPropertySymbolsModule","getOwnPropertyDescriptorModule","definePropertyModule","definePropertiesModule","propertyIsEnumerableModule","redefine","shared","sharedKey","hiddenKeys","defineWellKnownSymbol","setToStringTag","InternalStateModule","$forEach","HIDDEN","SYMBOL","PROTOTYPE","TO_PRIMITIVE","setInternalState","getInternalState","getterFor","$Symbol","SymbolPrototype","QObject","$stringify","nativeGetOwnPropertyDescriptor","nativeDefineProperty","nativeGetOwnPropertyNames","nativePropertyIsEnumerable","AllSymbols","ObjectPrototypeSymbols","StringToSymbolRegistry","SymbolToStringRegistry","WellKnownSymbolsStore","USE_SETTER","findChild","setSymbolDescriptor","P","Attributes","ObjectPrototypeDescriptor","description","$defineProperty","$defineProperties","Properties","$getOwnPropertySymbols","$propertyIsEnumerable","$create","V","$getOwnPropertyDescriptor","descriptor","IS_OBJECT_PROTOTYPE","setter","unsafe","keyFor","sym","useSetter","useSimple","getOwnPropertySymbols","FORCED_JSON_STRINGIFY","space","$replacer","hint","shaderID","_vm","_h","$createElement","_c","_self","staticClass","attrs","$event","$router","go","staticRenderFns","effectList","ruleForm","views","animateId","roadLine","lineList","methods","createGeometry","createEffect","effect","wireframe","circle1","tweenA","onComplete","Cylinder","createPointGeo","createText","createLineFly","addLines","flyLine","iTime","uRange","uTotal","uColor","uColor1","side","cityRoadLine","st","temp","textList","threeLine","loadMap","initScene","initComposer","composer","EffectComposer","renderPass","RenderPass","addPass","smaaPass","bloomPass","bloomEnable","exposure","getGeoJson","bySubway","replay","way","mounted","render1","destroyed","component","TWEEN","_tweens","getAll","removeAll","tween","numTweens","Tween","_object","_valuesStart","_valuesEnd","_duration","_delayTime","_startTime","_easingFunction","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","delay","interpolation","chain","onStart","onUpdate","numChainedTweens","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce","Utils","Bezier","bn","Bernstein","CatmullRom","fc","Factorial","t3","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callbackfn","copyConstructorProperties","NativeSymbol","EmptyStringDescriptionStore","SymbolWrapper","symbolToString","symbolValueOf","regexp","desc","planes","intersectsBox","setPlanes","plane","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","normalLength","MutationObserver","nextTick","setImmediate","reject","handled","suppressUncaughtRejectionError","timeout","define","amd","Zousan","soon"],"mappings":"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","file":"static/js/chunk-15a65405.e60e7061.js","sourcesContent":["'use strict';\n\nmodule.exports = rbush;\nmodule.exports.default = rbush;\n\nvar quickselect = require('quickselect');\n\nfunction rbush(maxEntries, format) {\n    if (!(this instanceof rbush)) return new rbush(maxEntries, format);\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries || 9);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n\n    if (format) {\n        this._initFormat(format);\n    }\n\n    this.clear();\n}\n\nrbush.prototype = {\n\n    all: function () {\n        return this._all(this.data, []);\n    },\n\n    search: function (bbox) {\n\n        var node = this.data,\n            result = [],\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return result;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    },\n\n    collides: function (bbox) {\n\n        var node = this.data,\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return false;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    },\n\n    load: function (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (var i = 0, len = data.length; i < len; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                var tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    },\n\n    insert: function (item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    },\n\n    clear: function () {\n        this.data = createNode([]);\n        return this;\n    },\n\n    remove: function (item, equalsFn) {\n        if (!item) return this;\n\n        var node = this.data,\n            bbox = this.toBBox(item),\n            path = [],\n            indexes = [],\n            i, parent, index, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    },\n\n    toBBox: function (item) { return item; },\n\n    compareMinX: compareNodeMinX,\n    compareMinY: compareNodeMinY,\n\n    toJSON: function () { return this.data; },\n\n    fromJSON: function (data) {\n        this.data = data;\n        return this;\n    },\n\n    _all: function (node, result) {\n        var nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push.apply(result, node.children);\n            else nodesToSearch.push.apply(nodesToSearch, node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    },\n\n    _build: function (items, left, right, height) {\n\n        var N = right - left + 1,\n            M = this._maxEntries,\n            node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        var N2 = Math.ceil(N / M),\n            N1 = N2 * Math.ceil(Math.sqrt(M)),\n            i, j, right2, right3;\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (i = left; i <= right; i += N1) {\n\n            right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (j = i; j <= right2; j += N2) {\n\n                right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    },\n\n    _chooseSubtree: function (bbox, node, level, path) {\n\n        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;\n\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            minArea = minEnlargement = Infinity;\n\n            for (i = 0, len = node.children.length; i < len; i++) {\n                child = node.children[i];\n                area = bboxArea(child);\n                enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    },\n\n    _insert: function (item, level, isNode) {\n\n        var toBBox = this.toBBox,\n            bbox = isNode ? item : toBBox(item),\n            insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    },\n\n    // split overflowed node into two\n    _split: function (insertPath, level) {\n\n        var node = insertPath[level],\n            M = node.children.length,\n            m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        var splitIndex = this._chooseSplitIndex(node, m, M);\n\n        var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    },\n\n    _splitRoot: function (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    },\n\n    _chooseSplitIndex: function (node, m, M) {\n\n        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;\n\n        minOverlap = minArea = Infinity;\n\n        for (i = m; i <= M - m; i++) {\n            bbox1 = distBBox(node, 0, i, this.toBBox);\n            bbox2 = distBBox(node, i, M, this.toBBox);\n\n            overlap = intersectionArea(bbox1, bbox2);\n            area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index;\n    },\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis: function (node, m, M) {\n\n        var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX,\n            compareMinY = node.leaf ? this.compareMinY : compareNodeMinY,\n            xMargin = this._allDistMargin(node, m, M, compareMinX),\n            yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    },\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin: function (node, m, M, compare) {\n\n        node.children.sort(compare);\n\n        var toBBox = this.toBBox,\n            leftBBox = distBBox(node, 0, m, toBBox),\n            rightBBox = distBBox(node, M - m, M, toBBox),\n            margin = bboxMargin(leftBBox) + bboxMargin(rightBBox),\n            i, child;\n\n        for (i = m; i < M - m; i++) {\n            child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (i = M - m - 1; i >= m; i--) {\n            child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    },\n\n    _adjustParentBBoxes: function (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (var i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    },\n\n    _condense: function (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (var i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    },\n\n    _initFormat: function (format) {\n        // data format (minX, minY, maxX, maxY accessors)\n\n        // uses eval-type function compilation instead of just accepting a toBBox function\n        // because the algorithms are very sensitive to sorting functions performance,\n        // so they should be dead simple and without inner calls\n\n        var compareArr = ['return a', ' - b', ';'];\n\n        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));\n        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));\n\n        this.toBBox = new Function('a',\n            'return {minX: a' + format[0] +\n            ', minY: a' + format[1] +\n            ', maxX: a' + format[2] +\n            ', maxY: a' + format[3] + '};');\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k, child; i < p; i++) {\n        child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX),\n        minY = Math.max(a.minY, b.minY),\n        maxX = Math.min(a.maxX, b.maxX),\n        maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right],\n        mid;\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar arraySlice = require('../internals/array-slice');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar Function = global.Function;\nvar concat = uncurryThis([].concat);\nvar join = uncurryThis([].join);\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!hasOwn(factories, argsLength)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    factories[argsLength] = Function('C,a', 'return new C(' + join(list, ',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = NATIVE_BIND ? Function.bind : function bind(that /* , ...args */) {\n  var F = aCallable(this);\n  var Prototype = F.prototype;\n  var partArgs = arraySlice(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = concat(partArgs, arraySlice(arguments));\n    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);\n  };\n  if (isObject(Prototype)) boundFunction.prototype = Prototype;\n  return boundFunction;\n};\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar classof = require('../internals/classof-raw');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar arraySlice = require('../internals/array-slice-simple');\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return arraySlice(windowNames);\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && classof(it) == 'Window'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","'use strict';\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar arraySlice = require('../internals/array-slice-simple');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar fails = require('../internals/fails');\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\nvar MAX_UINT32 = 0xFFFFFFFF;\nvar min = Math.min;\nvar $push = [].push;\nvar exec = uncurryThis(/./.exec);\nvar push = uncurryThis($push);\nvar stringSlice = uncurryThis(''.slice);\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  // eslint-disable-next-line regexp/no-empty-group -- required for testing\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    // eslint-disable-next-line regexp/no-empty-group -- required for testing\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    // eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = toString(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return call(nativeSplit, string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = call(regexpExec, separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          push(output, stringSlice(string, lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) apply($push, output, arraySlice(match, 1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !exec(separatorCopy, '')) push(output, '');\n      } else push(output, stringSlice(string, lastLastIndex));\n      return output.length > lim ? arraySlice(output, 0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.es/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : getMethod(separator, SPLIT);\n      return splitter\n        ? call(splitter, separator, O, limit)\n        : call(internalSplit, toString(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (string, limit) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);\n\n      if (res.done) return res.value;\n\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (UNSUPPORTED_Y ? 'g' : 'y');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;\n        var z = callRegExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          push(A, stringSlice(S, p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            push(A, z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      push(A, stringSlice(S, p));\n      return A;\n    }\n  ];\n}, !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);\n","/*!\n * maptalks v1.0.0-rc.4\n * LICENSE : BSD-3-Clause\n * (c) 2016-2022 maptalks.org\n */\nimport Zousan from 'zousan';\nimport rbush from 'rbush';\nimport simplify from 'simplify-js';\nimport { intersectsBox } from 'frustum-intersects';\n\nvar version = \"1.0.0-rc.4\";\n\nvar INTERNAL_LAYER_PREFIX = '_maptalks__internal_layer_';\nvar GEOMETRY_COLLECTION_TYPES = ['MultiPoint', 'MultiLineString', 'MultiPolygon', 'GeometryCollection'];\nvar GEOJSON_TYPES = ['FeatureCollection', 'Feature', 'Point', 'LineString', 'Polygon'].concat(GEOMETRY_COLLECTION_TYPES);\nvar RESOURCE_PROPERTIES = ['markerFile', 'polygonPatternFile', 'linePatternFile', 'markerFillPatternFile', 'markerLinePatternFile'];\nvar RESOURCE_SIZE_PROPERTIES = [['markerWidth', 'markerHeight'], [], [null, 'lineWidth'], [], [null, 'markerLineWidth']];\nvar NUMERICAL_PROPERTIES = {\n  'lineWidth': 1,\n  'lineOpacity': 1,\n  'lineDx': 1,\n  'lineDy': 1,\n  'polygonOpacity': 1,\n  'markerWidth': 1,\n  'markerHeight': 1,\n  'markerDx': 1,\n  'markerDy': 1,\n  'markerOpacity': 1,\n  'markerFillOpacity': 1,\n  'markerLineWidth': 1,\n  'markerLineOpacity': 1,\n  'textSize': 1,\n  'textOpacity': 1,\n  'textHaloRadius': 1,\n  'textWrapWidth': 1,\n  'textLineSpacing': 1,\n  'textDx': 1,\n  'textDy': 1\n};\nvar COLOR_PROPERTIES = ['lineColor', 'polygonFill', 'markerFill', 'markerLineColor', 'textFill'];\nvar DEFAULT_TEXT_SIZE = 14;\n\nfunction now() {\n  return Date.now();\n}\nfunction extend(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n\n    for (var k in src) {\n      dest[k] = src[k];\n    }\n  }\n\n  return dest;\n}\nfunction isNil(obj) {\n  return obj == null;\n}\nfunction isNumber(val) {\n  return typeof val === 'number' && !isNaN(val);\n}\nfunction isInteger(n) {\n  return (n | 0) === n;\n}\nfunction isObject(obj) {\n  return typeof obj === 'object' && !!obj;\n}\nfunction isString(obj) {\n  if (isNil(obj)) {\n    return false;\n  }\n\n  return typeof obj === 'string' || obj.constructor !== null && obj.constructor === String;\n}\nfunction isFunction(obj) {\n  if (isNil(obj)) {\n    return false;\n  }\n\n  return typeof obj === 'function' || obj.constructor !== null && obj.constructor === Function;\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn(obj, key) {\n  return hasOwnProperty.call(obj, key);\n}\nfunction join(arr, seperator) {\n  if (arr.join) {\n    return arr.join(seperator || ',');\n  } else {\n    return Array.prototype.join.call(arr, seperator || ',');\n  }\n}\nfunction isEmpty(object) {\n  var property;\n\n  for (property in object) {\n    return false;\n  }\n\n  return !property;\n}\nvar pi = Math.PI / 180;\nfunction toRadian(d) {\n  return d * pi;\n}\nfunction toDegree(r) {\n  return r / pi;\n}\n\nvar IS_NODE = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]' && !process.versions['electron'] && !process.versions['nw'] && !process.versions['node-webkit'];\n\nvar Browser = {};\nvar maps = {};\n\nfunction getDevicePixelRatio() {\n  return window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI;\n}\n\nif (!IS_NODE) {\n  var ua = navigator.userAgent.toLowerCase(),\n      doc = document.documentElement,\n      ie = 'ActiveXObject' in window,\n      webkit = ua.indexOf('webkit') !== -1,\n      phantomjs = ua.indexOf('phantom') !== -1,\n      android23 = ua.search('android [23]') !== -1,\n      chrome = ua.indexOf('chrome') !== -1,\n      gecko = ua.indexOf('gecko') !== -1 && !webkit && !window.opera && !ie,\n      mobile = typeof orientation !== 'undefined' || ua.indexOf('mobile') !== -1,\n      msPointer = !window.PointerEvent && window.MSPointerEvent,\n      pointer = window.PointerEvent && navigator.pointerEnabled || msPointer,\n      ie3d = ie && 'transition' in doc.style,\n      webkit3d = 'WebKitCSSMatrix' in window && 'm11' in new window.WebKitCSSMatrix() && !android23,\n      gecko3d = 'MozPerspective' in doc.style,\n      opera12 = 'OTransition' in doc.style,\n      any3d = (ie3d || webkit3d || gecko3d) && !opera12 && !phantomjs,\n      imageBitMap = typeof window !== 'undefined' && isFunction(window.createImageBitmap),\n      resizeObserver = typeof window !== 'undefined' && isFunction(window.ResizeObserver),\n      btoa = typeof window !== 'undefined' && isFunction(window.btoa);\n  var chromeVersion = 0;\n\n  if (chrome) {\n    chromeVersion = ua.match(/chrome\\/([\\d.]+)/)[1];\n  }\n\n  var touch = !phantomjs && (pointer || 'ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch);\n  var webgl = typeof window !== 'undefined' && 'WebGLRenderingContext' in window;\n  var devicePixelRatio = getDevicePixelRatio();\n  var decodeImageInWorker = false;\n\n  try {\n    var offCanvas = new OffscreenCanvas(2, 2);\n    offCanvas.getContext('2d');\n    decodeImageInWorker = true;\n  } catch (err) {\n    decodeImageInWorker = false;\n  }\n\n  var supportsPassive = false;\n\n  try {\n    window.addEventListener('testPassive', function () {}, {\n      get passive() {\n        supportsPassive = true;\n      }\n\n    });\n  } catch (e) {}\n\n  Browser = {\n    ie: ie,\n    ielt9: ie && !document.addEventListener,\n    edge: 'msLaunchUri' in navigator && !('documentMode' in document),\n    webkit: webkit,\n    gecko: gecko,\n    android: ua.indexOf('android') !== -1,\n    android23: android23,\n    chrome: chrome,\n    chromeVersion: chromeVersion,\n    safari: !chrome && ua.indexOf('safari') !== -1,\n    phantomjs: phantomjs,\n    ie3d: ie3d,\n    webkit3d: webkit3d,\n    gecko3d: gecko3d,\n    opera12: opera12,\n    any3d: any3d,\n    mobile: mobile,\n    mobileWebkit: mobile && webkit,\n    mobileWebkit3d: mobile && webkit3d,\n    mobileOpera: mobile && window.opera,\n    mobileGecko: mobile && gecko,\n    touch: !!touch,\n    msPointer: !!msPointer,\n    pointer: !!pointer,\n    retina: devicePixelRatio > 1,\n    devicePixelRatio: devicePixelRatio,\n    language: navigator.browserLanguage ? navigator.browserLanguage : navigator.language,\n    ie9: ie && document.documentMode === 9,\n    ie10: ie && document.documentMode === 10,\n    webgl: webgl,\n    imageBitMap: imageBitMap,\n    resizeObserver: resizeObserver,\n    btoa: btoa,\n    decodeImageInWorker: decodeImageInWorker,\n    monitorDPRChange: true,\n    supportsPassive: supportsPassive,\n    removeDPRListening: function removeDPRListening(map) {\n      if (map) {\n        delete maps[map.id];\n      }\n    },\n    checkDevicePixelRatio: function checkDevicePixelRatio() {\n      if (typeof window !== 'undefined' && Browser.monitorDPRChange) {\n        var _devicePixelRatio = getDevicePixelRatio();\n\n        var changed = _devicePixelRatio !== Browser.devicePixelRatio;\n\n        if (changed) {\n          Browser.devicePixelRatio = _devicePixelRatio;\n        }\n\n        return changed;\n      }\n\n      return false;\n    },\n    addDPRListening: function addDPRListening(map) {\n      if (map) {\n        maps[map.id] = map;\n      }\n    }\n  };\n\n  if (typeof window !== 'undefined' && window.matchMedia) {\n    for (var i = 1; i < 500; i++) {\n      var dpi = (i * 0.01).toFixed(2);\n      var screen$1 = window.matchMedia(\"screen and (resolution: \" + dpi + \"dppx)\");\n\n      if (screen$1) {\n        if (screen$1.addEventListener) {\n          screen$1.addEventListener('change', Browser.checkDevicePixelRatio);\n        } else if (screen$1.addListener) {\n          screen$1.addListener(Browser.checkDevicePixelRatio);\n        }\n      }\n    }\n  }\n\n  if (Browser.devicePixelRatio) {\n    var tempDPI = Browser.devicePixelRatio;\n    Object.defineProperty(Browser, 'devicePixelRatio', {\n      get: function get() {\n        return tempDPI;\n      },\n      set: function set(value) {\n        if (value === tempDPI) {\n          return;\n        }\n\n        tempDPI = value;\n\n        if (!Browser.monitorDPRChange) {\n          return;\n        }\n\n        for (var mapId in maps) {\n          var map = maps[mapId];\n\n          if (!map || !map.options || map.options['devicePixelRatio'] || !map.checkSize || !map.getRenderer) {\n            continue;\n          }\n\n          var renderer = map.getRenderer();\n\n          if (renderer) {\n            map.checkSize(true);\n          }\n        }\n      }\n    });\n  }\n}\n\nvar Browser$1 = Browser;\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar Position = function () {\n  function Position(x, y) {\n    if (!isNil(x) && !isNil(y)) {\n      this.x = +x;\n      this.y = +y;\n    } else if (!isNil(x.x) && !isNil(x.y)) {\n      this.x = +x.x;\n      this.y = +x.y;\n    } else if (Array.isArray(x)) {\n      this.x = +x[0];\n      this.y = +x[1];\n    }\n\n    if (this._isNaN()) {\n      throw new Error('Position is NaN');\n    }\n  }\n\n  var _proto = Position.prototype;\n\n  _proto.set = function set(x, y) {\n    this.x = x;\n    this.y = y;\n    return this;\n  };\n\n  _proto.abs = function abs() {\n    return new this.constructor(Math.abs(this.x), Math.abs(this.y));\n  };\n\n  _proto._abs = function _abs() {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  };\n\n  _proto._round = function _round() {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    return this;\n  };\n\n  _proto.round = function round() {\n    return new this.constructor(Math.round(this.x), Math.round(this.y));\n  };\n\n  _proto._ceil = function _ceil() {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    return this;\n  };\n\n  _proto.ceil = function ceil() {\n    return new this.constructor(Math.ceil(this.x), Math.ceil(this.y));\n  };\n\n  _proto.distanceTo = function distanceTo(point) {\n    var x = point.x - this.x,\n        y = point.y - this.y;\n    return Math.sqrt(x * x + y * y);\n  };\n\n  _proto.mag = function mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n\n  _proto._floor = function _floor() {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    return this;\n  };\n\n  _proto.floor = function floor() {\n    return new this.constructor(Math.floor(this.x), Math.floor(this.y));\n  };\n\n  _proto.copy = function copy() {\n    return new this.constructor(this.x, this.y);\n  };\n\n  _proto._add = function _add(x, y) {\n    if (!isNil(x.x)) {\n      this.x += x.x;\n      this.y += x.y;\n    } else if (!isNil(x[0])) {\n      this.x += x[0];\n      this.y += x[1];\n    } else {\n      this.x += x;\n      this.y += y;\n    }\n\n    return this;\n  };\n\n  _proto.add = function add(x, y) {\n    var nx, ny;\n\n    if (!isNil(x.x)) {\n      nx = this.x + x.x;\n      ny = this.y + x.y;\n    } else if (!isNil(x[0])) {\n      nx = this.x + x[0];\n      ny = this.y + x[1];\n    } else {\n      nx = this.x + x;\n      ny = this.y + y;\n    }\n\n    return new this.constructor(nx, ny);\n  };\n\n  _proto._sub = function _sub(x, y) {\n    if (!isNil(x.x)) {\n      this.x -= x.x;\n      this.y -= x.y;\n    } else if (!isNil(x[0])) {\n      this.x -= x[0];\n      this.y -= x[1];\n    } else {\n      this.x -= x;\n      this.y -= y;\n    }\n\n    return this;\n  };\n\n  _proto._substract = function _substract() {\n    return this._sub.apply(this, arguments);\n  };\n\n  _proto.sub = function sub(x, y) {\n    var nx, ny;\n\n    if (!isNil(x.x)) {\n      nx = this.x - x.x;\n      ny = this.y - x.y;\n    } else if (!isNil(x[0])) {\n      nx = this.x - x[0];\n      ny = this.y - x[1];\n    } else {\n      nx = this.x - x;\n      ny = this.y - y;\n    }\n\n    return new this.constructor(nx, ny);\n  };\n\n  _proto.substract = function substract() {\n    return this.sub.apply(this, arguments);\n  };\n\n  _proto.multi = function multi(ratio) {\n    return new this.constructor(this.x * ratio, this.y * ratio);\n  };\n\n  _proto._multi = function _multi(ratio) {\n    this.x *= ratio;\n    this.y *= ratio;\n    return this;\n  };\n\n  _proto.div = function div(n) {\n    return this.multi(1 / n);\n  };\n\n  _proto._div = function _div(n) {\n    return this._multi(1 / n);\n  };\n\n  _proto.equals = function equals(c) {\n    if (!(c instanceof this.constructor)) {\n      return false;\n    }\n\n    return this.x === c.x && this.y === c.y;\n  };\n\n  _proto._isNaN = function _isNaN() {\n    return isNaN(this.x) || isNaN(this.y);\n  };\n\n  _proto.isZero = function isZero() {\n    return this.x === 0 && this.y === 0;\n  };\n\n  _proto.toArray = function toArray() {\n    return [this.x, this.y];\n  };\n\n  _proto.toFixed = function toFixed(n) {\n    return new this.constructor(this.x.toFixed(n), this.y.toFixed(n));\n  };\n\n  _proto.toJSON = function toJSON() {\n    return {\n      x: this.x,\n      y: this.y\n    };\n  };\n\n  return Position;\n}();\n\nvar Point = function (_Position) {\n  _inheritsLoose(Point, _Position);\n\n  function Point() {\n    return _Position.apply(this, arguments) || this;\n  }\n\n  var _proto = Point.prototype;\n\n  _proto.closeTo = function closeTo(p, delta) {\n    if (!delta) {\n      delta = 0;\n    }\n\n    return this.x >= p.x - delta && this.x <= p.x + delta && this.y >= p.y - delta && this.y <= p.y + delta;\n  };\n\n  _proto.mag = function mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n\n  _proto.unit = function unit() {\n    return this.copy()._unit();\n  };\n\n  _proto._unit = function _unit() {\n    this._div(this.mag());\n\n    return this;\n  };\n\n  _proto.perp = function perp() {\n    return this.copy()._perp();\n  };\n\n  _proto._perp = function _perp() {\n    var y = this.y;\n    this.y = this.x;\n    this.x = -y;\n    return this;\n  };\n\n  _proto.angleWith = function angleWith(b) {\n    return this.angleWithSep(b.x, b.y);\n  };\n\n  _proto.angleWithSep = function angleWithSep(x, y) {\n    return Math.atan2(this.x * y - this.y * x, this.x * x + this.y * y);\n  };\n\n  _proto._rotate = function _rotate(angle) {\n    var cos = Math.cos(angle),\n        sin = Math.sin(angle),\n        x = cos * this.x - sin * this.y,\n        y = sin * this.x + cos * this.y;\n    this.x = x;\n    this.y = y;\n    return this;\n  };\n\n  _proto.rotate = function rotate(a) {\n    return this.copy()._rotate(a);\n  };\n\n  return Point;\n}(Position);\n\nvar requestAnimFrame, cancelAnimFrame;\n\n(function () {\n  if (IS_NODE) {\n    requestAnimFrame = function requestAnimFrame(fn) {\n      return setTimeout(fn, 16);\n    };\n\n    cancelAnimFrame = clearTimeout;\n    return;\n  }\n\n  var requestFn, cancelFn;\n  var timeToCall = 1000 / 30;\n\n  function timeoutDefer(fn) {\n    return setTimeout(fn, timeToCall);\n  }\n\n  function getPrefixed(name) {\n    return window['webkit' + name] || window['moz' + name] || window['ms' + name];\n  }\n\n  if (typeof window != 'undefined') {\n    requestFn = window['requestAnimationFrame'] || getPrefixed('RequestAnimationFrame') || timeoutDefer;\n\n    cancelFn = window['cancelAnimationFrame'] || getPrefixed('CancelAnimationFrame') || getPrefixed('CancelRequestAnimationFrame') || function (id) {\n      window.clearTimeout(id);\n    };\n  } else {\n    requestFn = timeoutDefer;\n    cancelFn = clearTimeout;\n  }\n\n  requestAnimFrame = function requestAnimFrame(fn) {\n    return requestFn(fn);\n  };\n\n  cancelAnimFrame = function cancelAnimFrame(id) {\n    if (id) {\n      cancelFn(id);\n    }\n  };\n})();\nfunction isSVG(url) {\n  var prefix = 'data:image/svg+xml';\n\n  if (url.length > 4 && url.slice(-4) === '.svg') {\n    return 1;\n  } else if (url.slice(0, prefix.length) === prefix) {\n    return 2;\n  }\n\n  return 0;\n}\nfunction loadImage(img, imgDesc) {\n  if (IS_NODE && loadImage.node) {\n    loadImage.node(img, imgDesc);\n    return;\n  }\n\n  img.src = imgDesc[0];\n}\nvar uid = 0;\nfunction UID() {\n  return uid++;\n}\nvar GUID = UID;\nfunction parseJSON(str) {\n  if (!str || !isString(str)) {\n    return str;\n  }\n\n  return JSON.parse(str);\n}\nfunction pushIn(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n\n    if (src) {\n      for (var ii = 0, ll = src.length; ii < ll; ii++) {\n        dest.push(src[ii]);\n      }\n    }\n  }\n\n  return dest.length;\n}\nfunction removeFromArray(obj, array) {\n  var i = array.indexOf(obj);\n\n  if (i > -1) {\n    array.splice(i, 1);\n  }\n}\nfunction forEachCoord(arr, fn, context) {\n  if (!Array.isArray(arr)) {\n    return context ? fn.call(context, arr) : fn(arr);\n  }\n\n  var result = [];\n  var p, pp;\n\n  for (var i = 0, len = arr.length; i < len; i++) {\n    p = arr[i];\n\n    if (isNil(p)) {\n      result.push(null);\n      continue;\n    }\n\n    if (Array.isArray(p)) {\n      result.push(forEachCoord(p, fn, context));\n    } else {\n      pp = context ? fn.call(context, p) : fn(p);\n      result.push(pp);\n    }\n  }\n\n  return result;\n}\nfunction getValueOrDefault(v, d) {\n  return v === undefined ? d : v;\n}\nfunction sign(x) {\n  if (Math.sign) {\n    return Math.sign(x);\n  }\n\n  x = +x;\n\n  if (x === 0 || isNaN(x)) {\n    return Number(x);\n  }\n\n  return x > 0 ? 1 : -1;\n}\nfunction log2(x) {\n  if (Math.log2) {\n    return Math.log2(x);\n  }\n\n  var v = Math.log(x) * Math.LOG2E;\n  var rounded = Math.round(v);\n\n  if (Math.abs(rounded - v) < 1E-14) {\n    return rounded;\n  } else {\n    return v;\n  }\n}\nfunction interpolate(a, b, t) {\n  return a * (1 - t) + b * t;\n}\nfunction wrap(n, min, max) {\n  if (n === max || n === min) {\n    return n;\n  }\n\n  var d = max - min;\n  var w = ((n - min) % d + d) % d + min;\n  return w;\n}\nfunction clamp(n, min, max) {\n  return Math.min(max, Math.max(min, n));\n}\nfunction isArrayHasData(obj) {\n  return Array.isArray(obj) && obj.length > 0;\n}\nvar urlPattern = /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i;\nfunction isURL(url) {\n  return urlPattern.test(url);\n}\nvar cssUrlReWithQuote = /^url\\((['\"])(.+)\\1\\)$/i;\nvar cssUrlRe = /^url\\(([^'\"].*[^'\"])\\)$/i;\nfunction isCssUrl(str) {\n  if (!isString(str)) {\n    return 0;\n  }\n\n  if (cssUrlRe.test(str)) {\n    return 1;\n  }\n\n  if (cssUrlReWithQuote.test(str)) {\n    return 2;\n  }\n\n  return 3;\n}\nfunction extractCssUrl(str) {\n  var test = isCssUrl(str);\n  var matches;\n\n  if (test === 3) {\n    return str;\n  } else if (test === 1) {\n    matches = cssUrlRe.exec(str);\n    return matches[1];\n  } else if (test === 2) {\n    matches = cssUrlReWithQuote.exec(str);\n    return matches[2];\n  } else {\n    return str;\n  }\n}\nvar b64chrs = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nfunction btoa$1(input) {\n  if (Browser$1.btoa) {\n    return window.btoa(input);\n  }\n\n  var str = String(input);\n  var output = '';\n\n  for (var block, charCode, idx = 0, map = b64chrs; str.charAt(idx | 0) || (map = '=', idx % 1); output += map.charAt(63 & block >> 8 - idx % 1 * 8)) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n\n    if (charCode > 0xFF) {\n      throw new Error('\\'btoa\\' failed: The string to be encoded contains characters outside of the Latin1 range.');\n    }\n\n    block = block << 8 | charCode;\n  }\n\n  return output;\n}\nfunction b64toBlob(b64Data, contentType) {\n  var byteCharacters = atob(b64Data);\n  var arraybuffer = new ArrayBuffer(byteCharacters.length);\n  var view = new Uint8Array(arraybuffer);\n\n  for (var i = 0; i < byteCharacters.length; i++) {\n    view[i] = byteCharacters.charCodeAt(i) & 0xff;\n  }\n\n  var blob = new Blob([arraybuffer], {\n    type: contentType\n  });\n  return blob;\n}\nfunction computeDegree(x0, y0, x1, y1) {\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  return Math.atan2(dy, dx);\n}\nvar emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\nfunction equalMapView(obj1, obj2) {\n  if (!obj1 && !obj2) {\n    return true;\n  } else if (!obj1 || !obj2) {\n    return false;\n  }\n\n  for (var p in obj1) {\n    if (p === 'center') {\n      if (!obj2[p] || !approx(obj1[p][0], obj2[p][0]) || !approx(obj1[p][1], obj2[p][1])) {\n        return false;\n      }\n    } else if (obj1[p] !== obj2[p]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction approx(val, expected, delta) {\n  if (delta == null) {\n    delta = 1e-6;\n  }\n\n  return val >= expected - delta && val <= expected + delta;\n}\n\nfunction flash(interval, count, cb, context) {\n  if (!interval) {\n    interval = 100;\n  }\n\n  if (!count) {\n    count = 4;\n  }\n\n  var me = this;\n  count *= 2;\n\n  if (this._flashTimeout) {\n    clearTimeout(this._flashTimeout);\n  }\n\n  function flashGeo() {\n    if (count === 0) {\n      me.show();\n\n      if (cb) {\n        if (context) {\n          cb.call(context);\n        } else {\n          cb();\n        }\n      }\n\n      return;\n    }\n\n    if (count % 2 === 0) {\n      me.hide();\n    } else {\n      me.show();\n    }\n\n    count--;\n    me._flashTimeout = setTimeout(flashGeo, interval);\n  }\n\n  this._flashTimeout = setTimeout(flashGeo, interval);\n  return this;\n}\nfunction _defaults$1(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\nfunction getPointsResultPts(points, ptKey) {\n  if (points === void 0) {\n    points = [];\n  }\n\n  if (ptKey === void 0) {\n    ptKey = '_pt';\n  }\n\n  var resultPoints = [];\n\n  for (var i = 0, len = points.length; i < len; i++) {\n    var point = points[i];\n\n    if (!point) {\n      resultPoints.push(null);\n      continue;\n    }\n\n    if (!point[ptKey]) {\n      point[ptKey] = new Point(0, 0);\n    }\n\n    var pt = point[ptKey];\n    pt.x = 0;\n    pt.y = 0;\n    resultPoints.push(pt);\n  }\n\n  return resultPoints;\n}\nvar BITMAP_CTX;\n\nif (Browser$1.decodeImageInWorker) {\n  var canvas = document.createElement('canvas');\n  canvas.width = 1;\n  canvas.height = 1;\n  BITMAP_CTX = canvas.getContext('2d');\n}\n\nfunction getImageBitMap(data, cb) {\n  var imageData = BITMAP_CTX.createImageData(data.width, data.height);\n  imageData.data.set(data.data);\n  createImageBitmap(imageData).then(function (bitmap) {\n    cb(bitmap);\n  });\n}\nfunction getAbsoluteURL(url) {\n  if (url && url.indexOf('http://') === 0 || url.indexOf('https://') === 0) {\n    return url;\n  }\n\n  var a = document.createElement('a');\n  a.href = url;\n  url = a.href;\n  a = null;\n  return url;\n}\nvar CANVAS_SIZE_TEMP = {\n  cssWidth: '1px',\n  cssHeight: '1px',\n  width: 1,\n  height: 1\n};\nfunction calCanvasSize(size, devicePixelRatio) {\n  if (devicePixelRatio === void 0) {\n    devicePixelRatio = 1;\n  }\n\n  var width = size.width,\n      height = size.height;\n  CANVAS_SIZE_TEMP.cssWidth = width + 'px';\n  CANVAS_SIZE_TEMP.cssHeight = height + 'px';\n  CANVAS_SIZE_TEMP.width = Math.round(width * devicePixelRatio);\n  CANVAS_SIZE_TEMP.height = Math.round(height * devicePixelRatio);\n  return CANVAS_SIZE_TEMP;\n}\n\nfunction createFunction(parameters, defaultType) {\n  var fun;\n  var isFeatureConstant, isZoomConstant;\n\n  if (!isFunctionDefinition(parameters)) {\n    fun = function fun() {\n      return parameters;\n    };\n\n    isFeatureConstant = true;\n    isZoomConstant = true;\n  } else {\n    var zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n    var featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n    var zoomDependent = zoomAndFeatureDependent || !featureDependent;\n    var type = parameters.type || defaultType || 'exponential';\n    var innerFun;\n\n    if (type === 'exponential') {\n      innerFun = evaluateExponentialFunction;\n    } else if (type === 'interval') {\n      innerFun = evaluateIntervalFunction;\n    } else if (type === 'categorical') {\n      innerFun = evaluateCategoricalFunction;\n    } else if (type === 'identity') {\n      innerFun = evaluateIdentityFunction;\n    } else {\n      throw new Error('Unknown function type \"' + type + '\"');\n    }\n\n    if (zoomAndFeatureDependent) {\n      var featureFunctions = {};\n      var featureFunctionStops = [];\n\n      for (var s = 0; s < parameters.stops.length; s++) {\n        var stop = parameters.stops[s];\n\n        if (featureFunctions[stop[0].zoom] === undefined) {\n          featureFunctions[stop[0].zoom] = {\n            zoom: stop[0].zoom,\n            type: parameters.type,\n            property: parameters.property,\n            default: parameters.default,\n            stops: []\n          };\n        }\n\n        featureFunctions[stop[0].zoom].stops.push([stop[0].value, stop[1]]);\n      }\n\n      for (var z in featureFunctions) {\n        featureFunctionStops.push([featureFunctions[z].zoom, createFunction(featureFunctions[z])]);\n      }\n\n      fun = function fun(zoom, feature) {\n        var value = evaluateExponentialFunction({\n          stops: featureFunctionStops,\n          base: parameters.base\n        }, zoom)(zoom, feature);\n        return typeof value === 'function' ? value(zoom, feature) : value;\n      };\n\n      isFeatureConstant = false;\n      isZoomConstant = false;\n    } else if (zoomDependent) {\n      fun = function fun(zoom) {\n        var value = innerFun(parameters, zoom);\n        return typeof value === 'function' ? value(zoom) : value;\n      };\n\n      isFeatureConstant = true;\n      isZoomConstant = false;\n    } else {\n      fun = function fun(zoom, feature) {\n        var value = innerFun(parameters, feature ? feature[parameters.property] : null);\n        return typeof value === 'function' ? value(zoom, feature) : value;\n      };\n\n      isFeatureConstant = false;\n      isZoomConstant = true;\n    }\n  }\n\n  fun.isZoomConstant = isZoomConstant;\n  fun.isFeatureConstant = isFeatureConstant;\n  return fun;\n}\n\nfunction coalesce(a, b, c) {\n  if (a !== undefined) return a;\n  if (b !== undefined) return b;\n  if (c !== undefined) return c;\n  return null;\n}\n\nfunction evaluateCategoricalFunction(parameters, input) {\n  for (var i = 0; i < parameters.stops.length; i++) {\n    if (input === parameters.stops[i][0]) {\n      return parameters.stops[i][1];\n    }\n  }\n\n  return parameters.default;\n}\n\nfunction evaluateIntervalFunction(parameters, input) {\n  for (var i = 0; i < parameters.stops.length; i++) {\n    if (input < parameters.stops[i][0]) break;\n  }\n\n  return parameters.stops[Math.max(i - 1, 0)][1];\n}\n\nfunction evaluateExponentialFunction(parameters, input) {\n  var base = parameters.base !== undefined ? parameters.base : 1;\n  var i = 0;\n\n  while (true) {\n    if (i >= parameters.stops.length) break;else if (input <= parameters.stops[i][0]) break;else i++;\n  }\n\n  if (i === 0) {\n    return parameters.stops[i][1];\n  } else if (i === parameters.stops.length) {\n    return parameters.stops[i - 1][1];\n  } else {\n    return interpolate$1(input, base, parameters.stops[i - 1][0], parameters.stops[i][0], parameters.stops[i - 1][1], parameters.stops[i][1]);\n  }\n}\n\nfunction evaluateIdentityFunction(parameters, input) {\n  return coalesce(input, parameters.default);\n}\n\nfunction interpolate$1(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  if (typeof outputLower === 'function') {\n    return function () {\n      var evaluatedLower = outputLower.apply(undefined, arguments);\n      var evaluatedUpper = outputUpper.apply(undefined, arguments);\n      return interpolate$1(input, base, inputLower, inputUpper, evaluatedLower, evaluatedUpper);\n    };\n  } else if (outputLower.length) {\n    return interpolateArray(input, base, inputLower, inputUpper, outputLower, outputUpper);\n  } else {\n    return interpolateNumber(input, base, inputLower, inputUpper, outputLower, outputUpper);\n  }\n}\n\nfunction interpolateNumber(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  var difference = inputUpper - inputLower;\n  var progress = input - inputLower;\n  var ratio;\n\n  if (base === 1) {\n    ratio = progress / difference;\n  } else {\n    ratio = (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n  }\n\n  return outputLower * (1 - ratio) + outputUpper * ratio;\n}\n\nfunction interpolateArray(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  var output = [];\n\n  for (var i = 0; i < outputLower.length; i++) {\n    output[i] = interpolateNumber(input, base, inputLower, inputUpper, outputLower[i], outputUpper[i]);\n  }\n\n  return output;\n}\n\nfunction isFunctionDefinition(obj) {\n  return obj && typeof obj === 'object' && (obj.stops || obj.property && obj.type === 'identity');\n}\nfunction hasFunctionDefinition(obj) {\n  for (var p in obj) {\n    if (isFunctionDefinition(obj[p])) {\n      return true;\n    }\n  }\n\n  return false;\n}\nfunction interpolated(parameters) {\n  return createFunction1(parameters, 'exponential');\n}\nfunction piecewiseConstant(parameters) {\n  return createFunction1(parameters, 'interval');\n}\nfunction loadFunctionTypes(obj, argFn) {\n  if (!obj) {\n    return null;\n  }\n\n  var hit = false;\n\n  if (Array.isArray(obj)) {\n    var multResult = [],\n        loaded;\n\n    for (var i = 0; i < obj.length; i++) {\n      loaded = loadFunctionTypes(obj[i], argFn);\n\n      if (!loaded) {\n        multResult.push(obj[i]);\n      } else {\n        multResult.push(loaded);\n        hit = true;\n      }\n    }\n\n    return hit ? multResult : obj;\n  }\n\n  var result = {\n    '__fn_types_loaded': true\n  },\n      props = [],\n      p;\n\n  for (p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      props.push(p);\n    }\n  }\n\n  var buildFn = function buildFn(p) {\n    Object.defineProperty(result, p, {\n      get: function get() {\n        if (!this['__fn_' + p]) {\n          this['__fn_' + p] = interpolated(this['_' + p]);\n        }\n\n        return this['__fn_' + p].apply(this, argFn());\n      },\n      set: function set(v) {\n        this['_' + p] = v;\n      },\n      configurable: true,\n      enumerable: true\n    });\n  };\n\n  for (var _i = 0, len = props.length; _i < len; _i++) {\n    p = props[_i];\n\n    if (isFunctionDefinition(obj[p])) {\n      hit = true;\n      result['_' + p] = obj[p];\n      buildFn(p);\n    } else {\n      result[p] = obj[p];\n    }\n  }\n\n  return hit ? result : obj;\n}\nfunction getFunctionTypeResources(t) {\n  if (!t || !t.stops) {\n    return [];\n  }\n\n  var res = [];\n\n  for (var i = 0, l = t.stops.length; i < l; i++) {\n    res.push(t.stops[i][1]);\n  }\n\n  return res;\n}\n\nfunction createFunction1(parameters, defaultType) {\n  if (!isFunctionDefinition(parameters)) {\n    return function () {\n      return parameters;\n    };\n  }\n\n  parameters = JSON.parse(JSON.stringify(parameters));\n  var isZoomConstant = true;\n  var isFeatureConstant = true;\n  var stops = parameters.stops;\n\n  if (stops) {\n    for (var i = 0; i < stops.length; i++) {\n      if (isFunctionDefinition(stops[i][1])) {\n        var _fn = createFunction1(stops[i][1], defaultType);\n\n        isZoomConstant = isZoomConstant && _fn.isZoomConstant;\n        isFeatureConstant = isFeatureConstant && _fn.isFeatureConstant;\n        stops[i] = [stops[i][0], _fn];\n      }\n    }\n  }\n\n  var fn = createFunction(parameters, defaultType);\n  fn.isZoomConstant = isZoomConstant && fn.isZoomConstant;\n  fn.isFeatureConstant = isFeatureConstant && fn.isFeatureConstant;\n  return fn;\n}\n\nvar types = ['Unknown', 'Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon', 'GeometryCollection'];\nfunction createFilter(filter) {\n  return new Function('f', \"var p = (f && f.properties || {}); return \" + compile(filter));\n}\n\nfunction compile(filter) {\n  if (!filter) return 'true';\n  var op = filter[0];\n  if (filter.length <= 1) return op === 'any' ? 'false' : 'true';\n  var str = op === '==' ? compileComparisonOp(filter[1], filter[2], '===', false) : op === '!=' ? compileComparisonOp(filter[1], filter[2], '!==', false) : op === '<' || op === '>' || op === '<=' || op === '>=' ? compileComparisonOp(filter[1], filter[2], op, true) : op === 'any' ? compileLogicalOp(filter.slice(1), '||') : op === 'all' ? compileLogicalOp(filter.slice(1), '&&') : op === 'none' ? compileNegation(compileLogicalOp(filter.slice(1), '||')) : op === 'in' ? compileInOp(filter[1], filter.slice(2)) : op === '!in' ? compileNegation(compileInOp(filter[1], filter.slice(2))) : op === 'has' ? compileHasOp(filter[1]) : op === '!has' ? compileNegation(compileHasOp(filter[1])) : 'true';\n  return \"(\" + str + \")\";\n}\n\nfunction compilePropertyReference(property) {\n  return property[0] === '$' ? 'f.' + property.substring(1) : 'p[' + JSON.stringify(property) + ']';\n}\n\nfunction compileComparisonOp(property, value, op, checkType) {\n  var left = compilePropertyReference(property);\n  var right = property === '$type' ? types.indexOf(value) : JSON.stringify(value);\n  return (checkType ? \"typeof \" + left + \"=== typeof \" + right + \"&&\" : '') + left + op + right;\n}\n\nfunction compileLogicalOp(expressions, op) {\n  return expressions.map(compile).join(op);\n}\n\nfunction compileInOp(property, values) {\n  if (property === '$type') values = values.map(function (value) {\n    return types.indexOf(value);\n  });\n  var left = JSON.stringify(values.sort(compare));\n  var right = compilePropertyReference(property);\n  if (values.length <= 200) return left + \".indexOf(\" + right + \") !== -1\";\n  return \"function(v, a, i, j) {\\n        while (i <= j) { var m = (i + j) >> 1;\\n            if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;\\n        }\\n    return false; }(\" + right + \", \" + left + \",0,\" + (values.length - 1) + \")\";\n}\n\nfunction compileHasOp(property) {\n  return property === '$id' ? '\"id\" in f' : JSON.stringify(property) + \" in p\";\n}\n\nfunction compileNegation(expression) {\n  return \"!(\" + expression + \")\";\n}\n\nfunction compare(a, b) {\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\nfunction getFilterFeature(geometry) {\n  var json = geometry._toJSON(),\n      g = json['feature'];\n\n  g['type'] = types.indexOf(g['geometry']['type']);\n  g['subType'] = json['subType'];\n  return g;\n}\nfunction compileStyle(styles) {\n  if (!Array.isArray(styles)) {\n    return compileStyle([styles]);\n  }\n\n  var compiled = [];\n\n  for (var i = 0; i < styles.length; i++) {\n    var filter = void 0;\n\n    if (styles[i]['filter'] === true) {\n      filter = function filter() {\n        return true;\n      };\n    } else {\n      filter = createFilter(styles[i]['filter']);\n    }\n\n    compiled.push(extend$1({}, styles[i], {\n      filter: filter\n    }));\n  }\n\n  return compiled;\n}\n\nfunction extend$1(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n\n    for (var k in src) {\n      dest[k] = src[k];\n    }\n  }\n\n  return dest;\n}\n\nvar arr = [],\n    prop = {};\nfunction loadGeoSymbol(symbol, geo) {\n  return loadFunctionTypes(symbol, function () {\n    var map = geo.getMap();\n    return set$1(arr, map ? map.getZoom() : 12, extend({}, geo.getProperties(), setProp(prop, map && map.getBearing() || 0, map && map.getPitch() || 0, map ? map.getZoom() : 10)));\n  });\n}\n\nfunction set$1(arr, a0, a1) {\n  arr[0] = a0;\n  arr[1] = a1;\n  return arr;\n}\n\nfunction setProp(prop, b, p, z) {\n  prop['{bearing}'] = b;\n  prop['{pitch}'] = p;\n  prop['{zoom}'] = z;\n  return prop;\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  loadGeoSymbol: loadGeoSymbol,\n  createFilter: createFilter,\n  getFilterFeature: getFilterFeature,\n  compileStyle: compileStyle,\n  isFunctionDefinition: isFunctionDefinition,\n  hasFunctionDefinition: hasFunctionDefinition,\n  interpolated: interpolated,\n  piecewiseConstant: piecewiseConstant,\n  loadFunctionTypes: loadFunctionTypes,\n  getFunctionTypeResources: getFunctionTypeResources\n});\n\nfunction translateToSVGStyles(s) {\n  var result = {\n    'stroke': {\n      'stroke': s['markerLineColor'],\n      'stroke-width': s['markerLineWidth'],\n      'stroke-opacity': s['markerLineOpacity'],\n      'stroke-dasharray': null,\n      'stroke-linecap': 'butt',\n      'stroke-linejoin': 'round'\n    },\n    'fill': {\n      'fill': s['markerFill'],\n      'fill-opacity': s['markerFillOpacity']\n    }\n  };\n\n  if (result['stroke']['stroke-width'] === 0) {\n    result['stroke']['stroke-opacity'] = 0;\n  }\n\n  return result;\n}\nfunction getMarkerPathBase64(symbol, width, height) {\n  if (!symbol['markerPath']) {\n    return null;\n  }\n\n  var op = 1;\n  var styles = translateToSVGStyles(symbol);\n\n  if (isNumber(symbol['markerOpacity'])) {\n    op = symbol['markerOpacity'];\n  }\n\n  if (isNumber(symbol['opacity'])) {\n    op *= symbol['opacity'];\n  }\n\n  var svgStyles = {};\n\n  if (styles) {\n    for (var p in styles['stroke']) {\n      if (styles['stroke'].hasOwnProperty(p)) {\n        if (!isNil(styles['stroke'][p])) {\n          svgStyles[p] = styles['stroke'][p];\n        }\n      }\n    }\n\n    for (var _p in styles['fill']) {\n      if (styles['fill'].hasOwnProperty(_p)) {\n        if (!isNil(styles['fill'][_p])) {\n          svgStyles[_p] = styles['fill'][_p];\n        }\n      }\n    }\n  }\n\n  var pathes = Array.isArray(symbol['markerPath']) ? symbol['markerPath'] : [symbol['markerPath']];\n  var path;\n  var pathesToRender = [];\n\n  for (var i = 0; i < pathes.length; i++) {\n    path = isString(pathes[i]) ? {\n      'path': pathes[i]\n    } : pathes[i];\n    path = extend({}, path, svgStyles);\n    path['d'] = path['path'];\n    delete path['path'];\n    pathesToRender.push(path);\n  }\n\n  var svg = ['<svg version=\"1.1\"', 'xmlns=\"http://www.w3.org/2000/svg\"'];\n\n  if (op < 1) {\n    svg.push('opacity=\"' + op + '\"');\n  }\n\n  if (symbol['markerPathWidth'] && symbol['markerPathHeight']) {\n    svg.push('viewBox=\"0 0 ' + symbol['markerPathWidth'] + ' ' + symbol['markerPathHeight'] + '\"');\n  }\n\n  svg.push('preserveAspectRatio=\"none\"');\n\n  if (width) {\n    svg.push('width=\"' + width + '\"');\n  }\n\n  if (height) {\n    svg.push('height=\"' + height + '\"');\n  }\n\n  svg.push('><defs></defs>');\n\n  for (var _i = 0; _i < pathesToRender.length; _i++) {\n    var strPath = '<path ';\n\n    for (var _p2 in pathesToRender[_i]) {\n      if (pathesToRender[_i].hasOwnProperty(_p2)) {\n        strPath += ' ' + _p2 + '=\"' + pathesToRender[_i][_p2] + '\"';\n      }\n    }\n\n    strPath += '></path>';\n    svg.push(strPath);\n  }\n\n  svg.push('</svg>');\n  var b64 = 'data:image/svg+xml;base64,' + btoa$1(svg.join(' '));\n  return b64;\n}\nfunction getExternalResources(symbol, toAbsolute) {\n  if (!symbol) {\n    return [];\n  }\n\n  var symbols = symbol;\n\n  if (!Array.isArray(symbol)) {\n    symbols = [symbol];\n  }\n\n  var resources = [];\n  var props = RESOURCE_PROPERTIES;\n  var res, resSizeProp;\n  var w, h;\n\n  for (var i = symbols.length - 1; i >= 0; i--) {\n    symbol = symbols[i];\n\n    if (!symbol) {\n      continue;\n    }\n\n    if (toAbsolute) {\n      symbol = convertResourceUrl(symbol);\n    }\n\n    for (var ii = 0; ii < props.length; ii++) {\n      res = symbol[props[ii]];\n\n      if (isFunctionDefinition(res)) {\n        res = getFunctionTypeResources(res);\n      }\n\n      if (!res) {\n        continue;\n      }\n\n      if (!Array.isArray(res)) {\n        res = [res];\n      }\n\n      for (var iii = 0; iii < res.length; iii++) {\n        if (res[iii].slice(0, 4) === 'url(') {\n          res[iii] = extractCssUrl(res[iii]);\n        }\n\n        resSizeProp = RESOURCE_SIZE_PROPERTIES[ii];\n        resources.push([res[iii], symbol[resSizeProp[0]], symbol[resSizeProp[1]]]);\n      }\n    }\n\n    if (symbol['markerType'] === 'path' && symbol['markerPath']) {\n      w = isFunctionDefinition(symbol['markerWidth']) ? 200 : symbol['markerWidth'];\n      h = isFunctionDefinition(symbol['markerHeight']) ? 200 : symbol['markerHeight'];\n\n      if (isFunctionDefinition(symbol['markerPath'])) {\n        res = getFunctionTypeResources(symbol['markerPath']);\n        var path = symbol['markerPath'];\n\n        for (var _iii = 0; _iii < res.length; _iii++) {\n          symbol['markerPath'] = res[_iii];\n          resources.push([getMarkerPathBase64(symbol), w, h]);\n        }\n\n        symbol['markerPath'] = path;\n      } else {\n        resources.push([getMarkerPathBase64(symbol), w, h]);\n      }\n    }\n  }\n\n  return resources;\n}\nfunction convertResourceUrl(symbol) {\n  if (!symbol) {\n    return null;\n  }\n\n  var s = symbol;\n\n  if (IS_NODE) {\n    return s;\n  }\n\n  var props = RESOURCE_PROPERTIES;\n  var res;\n\n  for (var ii = 0, len = props.length; ii < len; ii++) {\n    res = s[props[ii]];\n\n    if (!res) {\n      continue;\n    }\n\n    s[props[ii]] = _convertUrl(res);\n  }\n\n  return s;\n}\n\nfunction _convertUrl(res) {\n  if (isFunctionDefinition(res)) {\n    var stops = res.stops;\n\n    for (var i = 0; i < stops.length; i++) {\n      stops[i][1] = _convertUrl(stops[i][1]);\n    }\n\n    return res;\n  }\n\n  if (res.slice(0, 4) === 'url(') {\n    res = extractCssUrl(res);\n  }\n\n  return res;\n}\n\nvar Size = function () {\n  function Size(width, height) {\n    if (isNumber(width) && isNumber(height)) {\n      this.width = width;\n      this.height = height;\n    } else if (isNumber(width['width'])) {\n      this.width = width.width;\n      this.height = width.height;\n    } else if (Array.isArray(width)) {\n      this.width = width[0];\n      this.height = width[1];\n    }\n  }\n\n  var _proto = Size.prototype;\n\n  _proto.copy = function copy() {\n    return new Size(this['width'], this['height']);\n  };\n\n  _proto.add = function add(x, y) {\n    var w, h;\n\n    if (x instanceof Size) {\n      w = this.width + x.width;\n      h = this.height + x.height;\n    } else {\n      w = this.width + x;\n      h = this.height + y;\n    }\n\n    return new Size(w, h);\n  };\n\n  _proto.equals = function equals(size) {\n    return this['width'] === size['width'] && this['height'] === size['height'];\n  };\n\n  _proto.multi = function multi(ratio) {\n    return new Size(this['width'] * ratio, this['height'] * ratio);\n  };\n\n  _proto._multi = function _multi(ratio) {\n    this['width'] *= ratio;\n    this['height'] *= ratio;\n    return this;\n  };\n\n  _proto._round = function _round() {\n    this['width'] = Math.round(this['width']);\n    this['height'] = Math.round(this['height']);\n    return this;\n  };\n\n  _proto.toPoint = function toPoint() {\n    return new Point(this['width'], this['height']);\n  };\n\n  _proto.toArray = function toArray() {\n    return [this['width'], this['height']];\n  };\n\n  _proto.toJSON = function toJSON() {\n    return {\n      'width': this['width'],\n      'height': this['height']\n    };\n  };\n\n  return Size;\n}();\n\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\nvar specialPattern = /[\\b\\t\\r\\v\\f]/igm;\nfunction escapeSpecialChars(str) {\n  if (!isString(str)) {\n    return str;\n  }\n\n  return str.replace(specialPattern, '');\n}\nfunction splitWords(chr) {\n  return trim(chr).split(/\\s+/);\n}\nvar rulerCtx = typeof document !== 'undefined' ? document.createElement('canvas').getContext('2d') : null;\nfunction stringWidth(text, font) {\n  if (stringWidth.node) {\n    return stringWidth.node(text, font);\n  }\n\n  rulerCtx.font = font;\n  return rulerCtx.measureText(text).width;\n}\nfunction stringLength(text, font, size) {\n  var w = stringWidth(text, font);\n  return new Size(w, size || DEFAULT_TEXT_SIZE);\n}\nfunction splitContent(content, font, wrapWidth, textWidth) {\n  if (!content || content.length === 0) {\n    return [{\n      'text': '',\n      'width': 0\n    }];\n  }\n\n  var width = isNil(textWidth) ? stringWidth(content, font) : textWidth;\n  var chrWidth = width / content.length,\n      minChrCount = Math.floor(wrapWidth / chrWidth / 2);\n\n  if (chrWidth >= wrapWidth || minChrCount <= 0) {\n    return [{\n      'text': '',\n      'width': wrapWidth\n    }];\n  }\n\n  if (width <= wrapWidth) return [{\n    'text': content,\n    'width': width\n  }];\n  var result = [];\n  var testStr = content.substring(0, minChrCount),\n      prew = chrWidth * minChrCount;\n\n  for (var i = minChrCount, l = content.length; i < l; i++) {\n    var chr = content[i];\n    var w = stringWidth(testStr + chr);\n\n    if (w >= wrapWidth) {\n      result.push({\n        'text': testStr,\n        'width': prew\n      });\n      testStr = content.substring(i, minChrCount + i);\n      i += minChrCount - 1;\n      prew = chrWidth * minChrCount;\n    } else {\n      testStr += chr;\n      prew = w;\n    }\n\n    if (i >= l - 1) {\n      prew = stringWidth(testStr);\n      result.push({\n        'text': testStr,\n        'width': prew\n      });\n    }\n  }\n\n  return result;\n}\nvar contentExpRe = /\\{([\\w_]+)\\}/g;\nfunction replaceVariable(str, props) {\n  if (!isString(str)) {\n    return str;\n  }\n\n  return str.replace(contentExpRe, function (str, key) {\n    if (!props) {\n      return '';\n    }\n\n    var value = props[key];\n\n    if (isNil(value)) {\n      return '';\n    } else if (Array.isArray(value)) {\n      return value.join();\n    }\n\n    return value;\n  });\n}\nfunction describeText(textContent, symbol) {\n  if (isNumber(textContent)) {\n    textContent += '';\n  }\n\n  textContent = textContent || '';\n  var maxHeight = symbol['textMaxHeight'] || 0;\n  var textDesc = splitTextToRow(textContent, symbol);\n\n  if (maxHeight && maxHeight < textDesc.size.height) {\n    textDesc.size.height = maxHeight;\n  }\n\n  return textDesc;\n}\nfunction getAlignPoint(size, horizontalAlignment, verticalAlignment) {\n  var width = size['width'],\n      height = size['height'];\n  var alignW, alignH;\n\n  if (horizontalAlignment === 'left') {\n    alignW = -width;\n  } else if (horizontalAlignment === 'right') {\n    alignW = 0;\n  } else {\n    alignW = -width / 2;\n  }\n\n  if (verticalAlignment === 'top') {\n    alignH = -height;\n  } else if (verticalAlignment === 'bottom') {\n    alignH = 0;\n  } else {\n    alignH = -height / 2;\n  }\n\n  return new Point(alignW, alignH);\n}\nvar DEFAULT_FONT = 'monospace';\nfunction getFont(style) {\n  if (style['textFont']) {\n    return style['textFont'];\n  } else {\n    return (style['textStyle'] && style['textStyle'] !== 'normal' ? style['textStyle'] + ' ' : '') + (style['textWeight'] && style['textWeight'] !== 'normal' ? style['textWeight'] + ' ' : '') + style['textSize'] + 'px ' + (!style['textFaceName'] ? DEFAULT_FONT : style['textFaceName'][0] === '\"' ? style['textFaceName'] : '\"' + style['textFaceName'] + '\"');\n  }\n}\nfunction splitTextToRow(text, style) {\n  var font = getFont(style),\n      lineSpacing = style['textLineSpacing'] || 0,\n      size = stringLength(text, font, style['textSize']),\n      textWidth = size['width'],\n      textHeight = size['height'],\n      wrapChar = style['textWrapCharacter'],\n      textRows = [];\n  var wrapWidth = style['textWrapWidth'];\n\n  if (!wrapWidth || wrapWidth > textWidth) {\n    wrapWidth = textWidth;\n  }\n\n  if (!isString(text)) {\n    text += '';\n  }\n\n  var actualWidth = 0;\n\n  if (wrapChar && text.indexOf(wrapChar) >= 0) {\n    var texts = text.split(wrapChar);\n\n    for (var i = 0, l = texts.length; i < l; i++) {\n      var t = texts[i];\n      var tWidth = stringWidth(t, font);\n\n      if (tWidth > wrapWidth) {\n        var contents = splitContent(t, font, wrapWidth, tWidth);\n\n        for (var ii = 0, ll = contents.length; ii < ll; ii++) {\n          var w = contents[ii].width;\n\n          if (w > actualWidth) {\n            actualWidth = w;\n          }\n\n          textRows.push({\n            'text': contents[ii].text,\n            'size': new Size(w, textHeight)\n          });\n        }\n      } else {\n        if (tWidth > actualWidth) {\n          actualWidth = tWidth;\n        }\n\n        textRows.push({\n          'text': t,\n          'size': new Size(tWidth, textHeight)\n        });\n      }\n    }\n  } else if (textWidth > wrapWidth) {\n    var _contents = splitContent(text, font, wrapWidth, textWidth);\n\n    for (var _i = 0; _i < _contents.length; _i++) {\n      var _w = _contents[_i].width;\n\n      if (_w > actualWidth) {\n        actualWidth = _w;\n      }\n\n      textRows.push({\n        'text': _contents[_i].text,\n        'size': new Size(_w, textHeight)\n      });\n    }\n  } else {\n    if (textWidth > actualWidth) {\n      actualWidth = textWidth;\n    }\n\n    textRows.push({\n      'text': text,\n      'size': size\n    });\n  }\n\n  var rowNum = textRows.length;\n  var textSize = new Size(actualWidth, textHeight * rowNum + lineSpacing * (rowNum - 1));\n  return {\n    'total': rowNum,\n    'size': textSize,\n    'rows': textRows,\n    'rawSize': size\n  };\n}\nfunction hashCode(s) {\n  var hash = 0;\n  var strlen = s && s.length || 0;\n\n  if (!strlen) {\n    return hash;\n  }\n\n  var c;\n\n  for (var i = 0; i < strlen; i++) {\n    c = s.charCodeAt(i);\n    hash = (hash << 5) - hash + c;\n    hash = hash & hash;\n  }\n\n  return hash;\n}\n\nvar strings = /*#__PURE__*/Object.freeze({\n  trim: trim,\n  escapeSpecialChars: escapeSpecialChars,\n  splitWords: splitWords,\n  stringWidth: stringWidth,\n  stringLength: stringLength,\n  splitContent: splitContent,\n  replaceVariable: replaceVariable,\n  describeText: describeText,\n  getAlignPoint: getAlignPoint,\n  getFont: getFont,\n  splitTextToRow: splitTextToRow,\n  hashCode: hashCode\n});\n\nfunction isGradient(g) {\n  return g && g['colorStops'];\n}\nfunction getGradientStamp(g) {\n  var keys = [g['type']];\n\n  if (g['places']) {\n    keys.push(g['places'].join());\n  }\n\n  if (g['colorStops']) {\n    var stops = [];\n\n    for (var i = g['colorStops'].length - 1; i >= 0; i--) {\n      stops.push(g['colorStops'][i].join());\n    }\n\n    keys.push(stops.join(','));\n  }\n\n  return keys.join('_');\n}\nfunction getSymbolStamp(symbol, prefix) {\n  return getSymbolHash(symbol, prefix);\n}\nfunction getSymbolHash(symbol, prefix) {\n  if (!symbol) {\n    return 1;\n  }\n\n  var keys = [];\n\n  if (Array.isArray(symbol)) {\n    for (var i = 0; i < symbol.length; i++) {\n      keys.push(getSymbolHash(symbol[i], prefix));\n    }\n\n    return keys.sort().join(',');\n  }\n\n  var sortedKeys = Object.keys(symbol).sort();\n  var sortedSymbol = sortedKeys.reduce(function (accumulator, curValue) {\n    if (!prefix || curValue.indexOf(prefix) === 0) {\n      accumulator[curValue] = symbol[curValue];\n    }\n\n    return accumulator;\n  }, {});\n  var hash = hashCode(JSON.stringify(sortedSymbol));\n  return hash;\n}\nfunction lowerSymbolOpacity(symbol, ratio) {\n  function s(_symbol, _ratio) {\n    var op = _symbol['opacity'];\n\n    if (isNil(op)) {\n      _symbol['opacity'] = _ratio;\n    } else {\n      _symbol['opacity'] *= _ratio;\n    }\n  }\n\n  var lower;\n\n  if (Array.isArray(symbol)) {\n    lower = [];\n\n    for (var i = 0; i < symbol.length; i++) {\n      var d = extend({}, symbol[i]);\n      s(d, ratio);\n      lower.push(d);\n    }\n  } else {\n    lower = extend({}, symbol);\n    s(lower, ratio);\n  }\n\n  return lower;\n}\nfunction extendSymbol(symbol) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n\n  if (!sources || !sources.length) {\n    sources = [{}];\n  }\n\n  if (Array.isArray(symbol)) {\n    var s, dest;\n    var result = [];\n\n    for (var i = 0, l = symbol.length; i < l; i++) {\n      s = symbol[i];\n      dest = {};\n\n      for (var ii = 0, ll = sources.length; ii < ll; ii++) {\n        if (!Array.isArray(sources[ii])) {\n          extend(dest, s, sources[ii] ? sources[ii] : {});\n        } else if (!isNil(sources[ii][i])) {\n          extend(dest, s, sources[ii][i]);\n        } else {\n          extend(dest, s ? s : {});\n        }\n      }\n\n      result.push(dest);\n    }\n\n    return result;\n  } else {\n    var args = [{}, symbol];\n    args.push.apply(args, sources);\n    return extend.apply(this, args);\n  }\n}\nfunction parseStyleRootPath(style) {\n  if (style.symbol) {\n    style = [style];\n  }\n\n  if (Array.isArray(style)) {\n    return style;\n  }\n\n  var root = style['$root'];\n  var iconset = style['$iconset'];\n  style = style.style;\n\n  if (root || iconset) {\n    if (root && root[root.length - 1] === '/') {\n      root = root.substring(0, root.length - 1);\n    }\n\n    if (iconset && iconset[iconset.length - 1] === '/') {\n      iconset = iconset.substring(0, iconset.length - 1);\n    }\n\n    var replacer = function replacer(match) {\n      if (match === '{$root}') {\n        return root;\n      } else if (match === '{$iconset}') {\n        return iconset;\n      }\n\n      return null;\n    };\n\n    convertStylePath(style, replacer);\n  }\n\n  return style;\n}\nfunction convertStylePath(styles, replacer) {\n  for (var i = 0; i < styles.length; i++) {\n    var symbol = styles[i].symbol;\n\n    if (symbol) {\n      parseSymbolPath(symbol, replacer);\n    }\n  }\n}\nvar URL_PATTERN = /(\\{\\$root\\}|\\{\\$iconset\\})/g;\nfunction parseSymbolPath(symbol, replacer) {\n  for (var p in symbol) {\n    if (symbol.hasOwnProperty(p) && p !== 'textName') {\n      if (isString(symbol[p]) && symbol[p].length > 2) {\n        symbol[p] = symbol[p].replace(URL_PATTERN, replacer);\n      } else if (isFunctionDefinition(symbol[p])) {\n        symbol[p] = parseStops(symbol[p], replacer);\n      } else if (isObject(symbol[p])) {\n        parseSymbolPath(symbol[p], replacer);\n      }\n    }\n  }\n}\n\nfunction parseStops(value, replacer) {\n  var defaultValue = value['default'];\n\n  if (isString(defaultValue)) {\n    value['default'] = defaultValue.replace(URL_PATTERN, replacer);\n  }\n\n  var stops = value.stops;\n\n  for (var i = 0; i < stops.length; i++) {\n    if (!Array.isArray(stops[i])) {\n      continue;\n    }\n\n    if (isString(stops[i][1])) {\n      stops[i][1] = stops[i][1].replace(URL_PATTERN, replacer);\n    } else if (isFunctionDefinition(stops[i][1])) {\n      stops[i][1] = parseStops(stops[i][1], replacer);\n    }\n  }\n\n  return value;\n}\n\nfunction isDashLine(symbolizers) {\n  if (symbolizers === void 0) {\n    symbolizers = [];\n  }\n\n  if (!Array.isArray(symbolizers)) {\n    symbolizers = [symbolizers];\n  }\n\n  var len = symbolizers.length;\n\n  for (var i = 0; i < len; i++) {\n    var symbolizer = symbolizers[i];\n\n    if (!symbolizer.style) {\n      continue;\n    }\n\n    var _symbolizer$style = symbolizer.style,\n        lineDasharray = _symbolizer$style.lineDasharray,\n        lineWidth = _symbolizer$style.lineWidth;\n\n    if (lineWidth && isNumber(lineWidth) && lineWidth > 0 && lineDasharray && Array.isArray(lineDasharray) && lineDasharray.length) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n\n\nvar index$1 = /*#__PURE__*/Object.freeze({\n  now: now,\n  extend: extend,\n  isNil: isNil,\n  isNumber: isNumber,\n  isInteger: isInteger,\n  isObject: isObject,\n  isString: isString,\n  isFunction: isFunction,\n  hasOwn: hasOwn,\n  join: join,\n  isEmpty: isEmpty,\n  toRadian: toRadian,\n  toDegree: toDegree,\n  IS_NODE: IS_NODE,\n  get requestAnimFrame () { return requestAnimFrame; },\n  get cancelAnimFrame () { return cancelAnimFrame; },\n  isSVG: isSVG,\n  loadImage: loadImage,\n  UID: UID,\n  GUID: GUID,\n  parseJSON: parseJSON,\n  pushIn: pushIn,\n  removeFromArray: removeFromArray,\n  forEachCoord: forEachCoord,\n  getValueOrDefault: getValueOrDefault,\n  sign: sign,\n  log2: log2,\n  interpolate: interpolate,\n  wrap: wrap,\n  clamp: clamp,\n  isArrayHasData: isArrayHasData,\n  isURL: isURL,\n  isCssUrl: isCssUrl,\n  extractCssUrl: extractCssUrl,\n  btoa: btoa$1,\n  b64toBlob: b64toBlob,\n  computeDegree: computeDegree,\n  emptyImageUrl: emptyImageUrl,\n  equalMapView: equalMapView,\n  flash: flash,\n  _defaults: _defaults$1,\n  getPointsResultPts: getPointsResultPts,\n  getImageBitMap: getImageBitMap,\n  getAbsoluteURL: getAbsoluteURL,\n  calCanvasSize: calCanvasSize,\n  translateToSVGStyles: translateToSVGStyles,\n  getMarkerPathBase64: getMarkerPathBase64,\n  getExternalResources: getExternalResources,\n  convertResourceUrl: convertResourceUrl,\n  isGradient: isGradient,\n  getGradientStamp: getGradientStamp,\n  getSymbolStamp: getSymbolStamp,\n  getSymbolHash: getSymbolHash,\n  lowerSymbolOpacity: lowerSymbolOpacity,\n  extendSymbol: extendSymbol,\n  parseStyleRootPath: parseStyleRootPath,\n  convertStylePath: convertStylePath,\n  parseSymbolPath: parseSymbolPath,\n  isDashLine: isDashLine\n});\n\nvar first = function first(props) {\n  return props[0];\n};\n\nvar testProp = IS_NODE ? first : function (props) {\n  var style = document.documentElement.style;\n\n  for (var i = 0; i < props.length; i++) {\n    if (props[i] in style) {\n      return props[i];\n    }\n  }\n\n  return false;\n};\nvar TRANSFORM = testProp(['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nvar TRANSFORMORIGIN = testProp(['transformOrigin', 'WebkitTransformOrigin', 'OTransformOrigin', 'MozTransformOrigin', 'msTransformOrigin']);\nvar TRANSITION = testProp(['transition', 'WebkitTransition', 'OTransition', 'MozTransition', 'msTransition']);\nvar CSSFILTER = testProp(['filter', 'WebkitFilter', 'OFilter', 'MozFilter', 'msFilter']);\nfunction createEl(tagName, className) {\n  var el = document.createElement(tagName);\n\n  if (className) {\n    setClass(el, className);\n  }\n\n  return el;\n}\nfunction createElOn(tagName, style, container) {\n  var el = createEl(tagName);\n\n  if (style) {\n    setStyle(el, style);\n  }\n\n  if (container) {\n    container.appendChild(el);\n  }\n\n  return el;\n}\nfunction removeDomNode(node) {\n  if (!node) {\n    return this;\n  }\n\n  if (Browser$1.ielt9 || Browser$1.ie9) {\n    var d = createEl('div');\n    d.appendChild(node);\n    d.innerHTML = '';\n    d = null;\n  } else if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n\n  return this;\n}\nfunction addDomEvent(obj, typeArr, handler, context) {\n  if (!obj || !obj.addEventListener || !typeArr || !handler) {\n    return this;\n  }\n\n  var eventHandler = function eventHandler(e) {\n    if (!e) {\n      e = window.event;\n    }\n\n    handler.call(context || obj, e);\n    return;\n  };\n\n  var types = typeArr.split(' ');\n\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n\n    if (!type) {\n      continue;\n    }\n\n    if (!obj['Z__' + type]) {\n      obj['Z__' + type] = [];\n    }\n\n    var hit = listensDomEvent(obj, type, handler);\n\n    if (hit >= 0) {\n      removeDomEvent(obj, type, handler);\n    }\n\n    obj['Z__' + type].push({\n      callback: eventHandler,\n      src: handler\n    });\n    obj.addEventListener(type, eventHandler, Browser$1.supportsPassive ? {\n      capture: false,\n      passive: false\n    } : false);\n  }\n\n  return this;\n}\nfunction removeDomEvent(obj, typeArr, handler) {\n  function doRemove(type, callback) {\n    if (type === 'mousewheel' && Browser$1.gecko) {\n      type = 'DOMMouseScroll';\n    }\n\n    obj.removeEventListener(type, callback, false);\n  }\n\n  if (!obj || !obj.removeEventListener || !typeArr) {\n    return this;\n  }\n\n  var types = typeArr.split(' ');\n\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n\n    if (!type) {\n      continue;\n    }\n\n    if (!handler && obj['Z__' + type]) {\n      var handlers = obj['Z__' + type];\n\n      for (var j = 0, jlen = handlers.length; j < jlen; j++) {\n        doRemove(handlers[j].callback);\n      }\n\n      delete obj['Z__' + type];\n      return this;\n    }\n\n    var hit = listensDomEvent(obj, type, handler);\n\n    if (hit < 0) {\n      return this;\n    }\n\n    var hitHandler = obj['Z__' + type][hit];\n    doRemove(type, hitHandler.callback);\n    obj['Z__' + type].splice(hit, 1);\n  }\n\n  return this;\n}\nfunction listensDomEvent(obj, type, handler) {\n  if (!obj || !obj['Z__' + type] || !handler) {\n    return -1;\n  }\n\n  var handlers = obj['Z__' + type];\n\n  for (var i = 0, len = handlers.length; i < len; i++) {\n    if (handlers[i].src === handler) {\n      return i;\n    }\n  }\n\n  return -1;\n}\nfunction preventDefault(event) {\n  if (event.preventDefault) {\n    event.preventDefault();\n  } else {\n    event.returnValue = false;\n  }\n\n  return this;\n}\nfunction stopPropagation(e) {\n  if (e.stopPropagation) {\n    e.stopPropagation();\n  } else {\n    e.cancelBubble = true;\n  }\n\n  return this;\n}\nfunction preventSelection(dom) {\n  dom.onselectstart = function () {\n    return false;\n  };\n\n  dom.ondragstart = function () {\n    return false;\n  };\n\n  dom.setAttribute('unselectable', 'on');\n  return this;\n}\nfunction offsetDom(dom, offset) {\n  if (!dom) {\n    return null;\n  }\n\n  if (Browser$1.any3d) {\n    setTransform(dom, offset);\n  } else {\n    dom.style.left = offset.x + 'px';\n    dom.style.top = offset.y + 'px';\n  }\n\n  return offset;\n}\nfunction computeDomPosition(dom) {\n  var style = window.getComputedStyle(dom);\n  var padding = [parseInt(style['padding-left']), parseInt(style['padding-top'])];\n  var rect = dom.getBoundingClientRect();\n  var offsetWidth = dom.offsetWidth,\n      offsetHeight = dom.offsetHeight;\n  var scaleX = offsetWidth ? rect.width / offsetWidth : 1,\n      scaleY = offsetHeight ? rect.height / offsetHeight : 1;\n  dom.__position = [rect.left + padding[0], rect.top + padding[1], scaleX, scaleY];\n  return dom.__position;\n}\nfunction getEventContainerPoint(ev, dom) {\n  if (!ev) {\n    ev = window.event;\n  }\n\n  var domPos = dom.__position;\n\n  if (!domPos) {\n    domPos = computeDomPosition(dom);\n  }\n\n  return new Point((ev.clientX - domPos[0] - dom.clientLeft) / domPos[2], (ev.clientY - domPos[1] - dom.clientTop) / domPos[3]);\n}\n\nfunction endsWith(str, suffix) {\n  var l = str.length - suffix.length;\n  return l >= 0 && str.indexOf(suffix, l) === l;\n}\n\nfunction setStyle(dom, strCss) {\n  var cssText = dom.style.cssText;\n\n  if (!endsWith(cssText, ';')) {\n    cssText += ';';\n  }\n\n  dom.style.cssText = cssText + strCss;\n  return this;\n}\nfunction hasClass(el, name) {\n  if (el.classList !== undefined) {\n    return el.classList.contains(name);\n  }\n\n  var className = getClass(el);\n  return className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\n}\nfunction addClass(el, name) {\n  if (el.classList !== undefined && !hasClass(el, name)) {\n    var classes = splitWords(name);\n\n    for (var i = 0, len = classes.length; i < len; i++) {\n      el.classList.add(classes[i]);\n    }\n  } else {\n    var className = getClass(el);\n    setClass(el, (className ? className + ' ' : '') + name);\n  }\n\n  return this;\n}\nfunction setClass(el, name) {\n  if (isNil(el.className.baseVal)) {\n    el.className = name;\n  } else {\n    el.className.baseVal = name;\n  }\n\n  return this;\n}\nfunction getClass(el) {\n  return isNil(el.className.baseVal) ? el.className : el.className.baseVal;\n}\nfunction setOpacity(el, value) {\n  el.style.opacity = value;\n  return this;\n}\nfunction setTransform(el, offset) {\n  var pos = offset || new Point(0, 0);\n  el.style[TRANSFORM] = Browser$1.any3d ? 'translate3d(' + pos.x + 'px,' + pos.y + 'px,0px)' : 'translate(' + pos.x + 'px,' + pos.y + 'px)';\n  return this;\n}\nfunction setTransformMatrix(el, m) {\n  var text = 'matrix(' + (isString(m) ? m : m.join()) + ')';\n\n  if (el.style[TRANSFORM] !== text) {\n    el.style[TRANSFORM] = text;\n  }\n\n  return this;\n}\nfunction removeTransform(el) {\n  if (el.style[TRANSFORM]) {\n    el.style[TRANSFORM] = '';\n  }\n\n  return this;\n}\nfunction isHTML(str) {\n  return /<[a-z\\][\\s\\S]*>/i.test(str);\n}\nfunction measureDom(parentTag, dom) {\n  var ruler = getDomRuler(parentTag);\n\n  if (isString(dom)) {\n    ruler.innerHTML = dom;\n  } else {\n    ruler.appendChild(dom);\n  }\n\n  var result = new Size(ruler.clientWidth, ruler.clientHeight);\n  removeDomNode(ruler);\n  return result;\n}\nfunction getDomRuler(tag) {\n  var span = document.createElement(tag);\n  span.style.cssText = 'position:absolute;left:-10000px;top:-10000px;';\n  document.body.appendChild(span);\n  return span;\n}\nvar on = addDomEvent;\nvar off = removeDomEvent;\n\nvar dom = /*#__PURE__*/Object.freeze({\n  TRANSFORM: TRANSFORM,\n  TRANSFORMORIGIN: TRANSFORMORIGIN,\n  TRANSITION: TRANSITION,\n  CSSFILTER: CSSFILTER,\n  createEl: createEl,\n  createElOn: createElOn,\n  removeDomNode: removeDomNode,\n  addDomEvent: addDomEvent,\n  removeDomEvent: removeDomEvent,\n  listensDomEvent: listensDomEvent,\n  preventDefault: preventDefault,\n  stopPropagation: stopPropagation,\n  preventSelection: preventSelection,\n  offsetDom: offsetDom,\n  computeDomPosition: computeDomPosition,\n  getEventContainerPoint: getEventContainerPoint,\n  setStyle: setStyle,\n  hasClass: hasClass,\n  addClass: addClass,\n  setClass: setClass,\n  getClass: getClass,\n  setOpacity: setOpacity,\n  setTransform: setTransform,\n  setTransformMatrix: setTransformMatrix,\n  removeTransform: removeTransform,\n  isHTML: isHTML,\n  measureDom: measureDom,\n  getDomRuler: getDomRuler,\n  on: on,\n  off: off\n});\n\nvar isMapSupported = typeof Map === 'function';\n\nvar ArrayLRUCache = function () {\n  function ArrayLRUCache(max, onRemove) {\n    this.max = max;\n    this.onRemove = onRemove;\n    this.reset();\n  }\n\n  var _proto = ArrayLRUCache.prototype;\n\n  _proto.reset = function reset() {\n    for (var key in this.data) {\n      this.onRemove(this.data[key]);\n    }\n\n    this.data = {};\n    this.order = [];\n    return this;\n  };\n\n  _proto.clear = function clear() {\n    this.reset();\n    delete this.onRemove;\n  };\n\n  _proto.add = function add(key, data) {\n    if (this.has(key)) {\n      this.order.splice(this.order.indexOf(key), 1);\n      this.data[key] = data;\n      this.order.push(key);\n    } else {\n      this.data[key] = data;\n      this.order.push(key);\n\n      if (this.order.length > this.max) {\n        var removedData = this.getAndRemove(this.order[0]);\n        if (removedData) this.onRemove(removedData);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.has = function has(key) {\n    return key in this.data;\n  };\n\n  _proto.keys = function keys() {\n    return this.order;\n  };\n\n  _proto.getAndRemove = function getAndRemove(key) {\n    if (!this.has(key)) {\n      return null;\n    }\n\n    var data = this.data[key];\n    delete this.data[key];\n    this.order.splice(this.order.indexOf(key), 1);\n    return data;\n  };\n\n  _proto.get = function get(key) {\n    if (!this.has(key)) {\n      return null;\n    }\n\n    var data = this.data[key];\n    return data;\n  };\n\n  _proto.remove = function remove(key) {\n    if (!this.has(key)) {\n      return this;\n    }\n\n    var data = this.data[key];\n    delete this.data[key];\n    this.onRemove(data);\n    this.order.splice(this.order.indexOf(key), 1);\n    return this;\n  };\n\n  _proto.setMaxSize = function setMaxSize(max) {\n    this.max = max;\n\n    while (this.order.length > this.max) {\n      var removedData = this.getAndRemove(this.order[0]);\n      if (removedData) this.onRemove(removedData);\n    }\n\n    return this;\n  };\n\n  return ArrayLRUCache;\n}();\n\nvar MapLRUCache;\n\nif (isMapSupported) {\n  MapLRUCache = function () {\n    function MapLRUCache(max, onRemove) {\n      this.max = max;\n      this.onRemove = onRemove;\n      this.reset();\n    }\n\n    var _proto2 = MapLRUCache.prototype;\n\n    _proto2.reset = function reset() {\n      if (this.data) {\n        var values = this.data.values();\n\n        for (var _iterator = values, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n          var _ref;\n\n          if (_isArray) {\n            if (_i >= _iterator.length) break;\n            _ref = _iterator[_i++];\n          } else {\n            _i = _iterator.next();\n            if (_i.done) break;\n            _ref = _i.value;\n          }\n\n          var p = _ref;\n          this.onRemove(p);\n        }\n      }\n\n      this.data = new Map();\n      return this;\n    };\n\n    _proto2.clear = function clear() {\n      this.reset();\n      delete this.onRemove;\n    };\n\n    _proto2.add = function add(key, data) {\n      if (!data) {\n        return this;\n      }\n\n      if (this.has(key)) {\n        this.data.delete(key);\n        this.data.set(key, data);\n\n        if (this.data.size > this.max) {\n          this.shrink();\n        }\n      } else {\n        this.data.set(key, data);\n      }\n\n      return this;\n    };\n\n    _proto2.keys = function keys() {\n      var keys = new Array(this.data.size);\n      var i = 0;\n      var iterator = this.data.keys();\n\n      for (var _iterator2 = iterator, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) break;\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) break;\n          _ref2 = _i2.value;\n        }\n\n        var k = _ref2;\n        keys[i++] = k;\n      }\n\n      return keys;\n    };\n\n    _proto2.shrink = function shrink() {\n      var iterator = this.data.keys();\n      var item = iterator.next();\n\n      while (this.data.size > this.max) {\n        var removedData = this.getAndRemove(item.value);\n\n        if (removedData) {\n          this.onRemove(removedData);\n        }\n\n        item = iterator.next();\n      }\n    };\n\n    _proto2.has = function has(key) {\n      return this.data.has(key);\n    };\n\n    _proto2.getAndRemove = function getAndRemove(key) {\n      if (!this.has(key)) {\n        return null;\n      }\n\n      var data = this.data.get(key);\n      this.data.delete(key);\n      return data;\n    };\n\n    _proto2.get = function get(key) {\n      if (!this.has(key)) {\n        return null;\n      }\n\n      var data = this.data.get(key);\n      return data;\n    };\n\n    _proto2.remove = function remove(key) {\n      if (!this.has(key)) {\n        return this;\n      }\n\n      var data = this.data.get(key);\n      this.data.delete(key);\n      this.onRemove(data);\n      return this;\n    };\n\n    _proto2.setMaxSize = function setMaxSize(max) {\n      this.max = max;\n\n      if (this.data.size > this.max) {\n        this.shrink();\n      }\n\n      return this;\n    };\n\n    return MapLRUCache;\n  }();\n}\n\nvar LRUCache = isMapSupported ? MapLRUCache : ArrayLRUCache;\n\nvar Ajax = {\n  jsonp: function jsonp(url, callback) {\n    var name = '_maptalks_jsonp_' + UID();\n    if (url.match(/\\?/)) url += '&callback=' + name;else url += '?callback=' + name;\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = url;\n\n    window[name] = function (data) {\n      callback(null, data);\n      document.getElementsByTagName('head')[0].removeChild(script);\n      script = null;\n      delete window[name];\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n    return this;\n  },\n  get: function get(url, options, cb) {\n    if (isFunction(options)) {\n      var t = cb;\n      cb = options;\n      options = t;\n    }\n\n    if (IS_NODE && Ajax.get.node) {\n      return Ajax.get.node(url, cb, options);\n    }\n\n    var client = Ajax._getClient(cb);\n\n    client.open('GET', url, true);\n\n    if (options) {\n      for (var k in options.headers) {\n        client.setRequestHeader(k, options.headers[k]);\n      }\n\n      client.withCredentials = options.credentials === 'include';\n\n      if (options['responseType']) {\n        client.responseType = options['responseType'];\n      }\n    }\n\n    client.send(null);\n    return client;\n  },\n  post: function post(url, options, cb) {\n    var postData;\n\n    if (!isString(url)) {\n      var t = cb;\n      postData = options;\n      options = url;\n      url = options.url;\n      cb = t;\n    } else {\n      if (isFunction(options)) {\n        var _t = cb;\n        cb = options;\n        options = _t;\n      }\n\n      options = options || {};\n      postData = options.postData;\n    }\n\n    if (IS_NODE && Ajax.post.node) {\n      options.url = url;\n      return Ajax.post.node(options, postData, cb);\n    }\n\n    var client = Ajax._getClient(cb);\n\n    client.open('POST', options.url, true);\n\n    if (!options.headers) {\n      options.headers = {};\n    }\n\n    if (!options.headers['Content-Type']) {\n      options.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n\n    if ('setRequestHeader' in client) {\n      for (var p in options.headers) {\n        if (options.headers.hasOwnProperty(p)) {\n          client.setRequestHeader(p, options.headers[p]);\n        }\n      }\n    }\n\n    if (!isString(postData)) {\n      postData = JSON.stringify(postData);\n    }\n\n    client.send(postData);\n    return client;\n  },\n  _wrapCallback: function _wrapCallback(client, cb) {\n    return function () {\n      if (client.readyState === 4) {\n        if (client.status === 200) {\n          if (client.responseType === 'arraybuffer') {\n            var response = client.response;\n\n            if (response.byteLength === 0) {\n              cb(new Error('http status 200 returned without content.'));\n            } else {\n              cb(null, {\n                data: client.response,\n                cacheControl: client.getResponseHeader('Cache-Control'),\n                expires: client.getResponseHeader('Expires'),\n                contentType: client.getResponseHeader('Content-Type')\n              });\n            }\n          } else {\n            cb(null, client.responseText);\n          }\n        } else {\n          cb(new Error(client.statusText + ',' + client.status));\n        }\n      }\n    };\n  },\n  _getClient: function _getClient(cb) {\n    var client;\n\n    try {\n      client = new XMLHttpRequest();\n    } catch (e) {\n      try {\n        client = new ActiveXObject('Msxml2.XMLHTTP');\n      } catch (e) {\n        try {\n          client = new ActiveXObject('Microsoft.XMLHTTP');\n        } catch (e) {}\n      }\n    }\n\n    client.onreadystatechange = Ajax._wrapCallback(client, cb);\n    return client;\n  },\n  getArrayBuffer: function getArrayBuffer(url, options, cb) {\n    if (isFunction(options)) {\n      var t = cb;\n      cb = options;\n      options = t;\n    }\n\n    if (!options) {\n      options = {};\n    }\n\n    options['responseType'] = 'arraybuffer';\n    return Ajax.get(url, options, cb);\n  },\n  getImage: function getImage(img, url, options) {\n    return Ajax.getArrayBuffer(url, options, function (err, imgData) {\n      if (err) {\n        if (img.onerror) {\n          img.onerror(err);\n        }\n      } else if (imgData) {\n        var URL = window.URL || window.webkitURL;\n        var onload = img.onload;\n\n        img.onload = function () {\n          if (onload) {\n            onload();\n          }\n\n          URL.revokeObjectURL(img.src);\n        };\n\n        var blob = new Blob([new Uint8Array(imgData.data)], {\n          type: imgData.contentType\n        });\n        img.cacheControl = imgData.cacheControl;\n        img.expires = imgData.expires;\n        img.src = imgData.data.byteLength ? URL.createObjectURL(blob) : emptyImageUrl;\n      }\n    });\n  }\n};\n\nAjax.getJSON = function (url, options, cb) {\n  if (isFunction(options)) {\n    var t = cb;\n    cb = options;\n    options = t;\n  }\n\n  var callback = function callback(err, resp) {\n    var data = resp ? parseJSON(resp) : null;\n    cb(err, data);\n  };\n\n  if (options && options['jsonp']) {\n    return Ajax.jsonp(url, callback);\n  }\n\n  return Ajax.get(url, options, callback);\n};\n\nvar DEFAULT_STROKE_COLOR = '#000';\nvar DEFAULT_FILL_COLOR = 'rgba(255,255,255,0)';\nvar DEFAULT_TEXT_COLOR = '#000';\nvar hitTesting = false;\nvar TEMP_CANVAS = null;\nvar RADIAN = Math.PI / 180;\nvar textOffsetY = 1;\nvar Canvas = {\n  setHitTesting: function setHitTesting(testing) {\n    hitTesting = testing;\n  },\n  createCanvas: function createCanvas(width, height, canvasClass) {\n    var canvas;\n\n    if (!IS_NODE) {\n      canvas = createEl('canvas');\n      canvas.width = width;\n      canvas.height = height;\n    } else {\n      canvas = new canvasClass(width, height);\n    }\n\n    return canvas;\n  },\n  prepareCanvasFont: function prepareCanvasFont(ctx, style) {\n    ctx.textBaseline = 'top';\n    ctx.font = getFont(style);\n    var fill = style['textFill'];\n\n    if (!fill) {\n      fill = DEFAULT_TEXT_COLOR;\n    }\n\n    ctx.fillStyle = Canvas.getRgba(fill, style['textOpacity']);\n  },\n  prepareCanvas: function prepareCanvas(ctx, style, resources, testing) {\n    if (!style) {\n      return;\n    }\n\n    var strokeWidth = style['lineWidth'];\n\n    if (!isNil(strokeWidth) && ctx.lineWidth !== strokeWidth) {\n      ctx.lineWidth = strokeWidth;\n    }\n\n    var strokePattern = style['linePatternFile'];\n    var strokeColor = style['lineColor'] || DEFAULT_STROKE_COLOR;\n\n    if (testing) {\n      ctx.strokeStyle = '#000';\n    } else if (strokePattern && resources) {\n      var patternOffset;\n\n      if (style['linePatternDx'] || style['linePatternDy']) {\n        patternOffset = [style['linePatternDx'], style['linePatternDy']];\n      }\n\n      Canvas._setStrokePattern(ctx, strokePattern, strokeWidth, patternOffset, resources);\n\n      style['lineDasharray'] = [];\n    } else if (isGradient(strokeColor)) {\n      if (style['lineGradientExtent']) {\n        ctx.strokeStyle = Canvas._createGradient(ctx, strokeColor, style['lineGradientExtent']);\n      } else {\n        ctx.strokeStyle = DEFAULT_STROKE_COLOR;\n      }\n    } else {\n        if (Array.isArray(strokeColor)) {\n          strokeColor = Canvas.normalizeColorToRGBA(strokeColor);\n        }\n\n        ctx.strokeStyle = strokeColor;\n      }\n\n    if (style['lineJoin']) {\n      ctx.lineJoin = style['lineJoin'];\n    }\n\n    if (style['lineCap']) {\n      ctx.lineCap = style['lineCap'];\n    }\n\n    if (ctx.setLineDash && isArrayHasData(style['lineDasharray'])) {\n      ctx.setLineDash(style['lineDasharray']);\n    }\n\n    var polygonPattern = style['polygonPatternFile'];\n    var fill = style['polygonFill'] || DEFAULT_FILL_COLOR;\n\n    if (testing) {\n      ctx.fillStyle = '#000';\n    } else if (polygonPattern && resources) {\n      var fillImgUrl = extractImageUrl(polygonPattern);\n      var fillTexture = resources.getImage([fillImgUrl, null, null]);\n\n      if (!fillTexture) {\n        fillTexture = resources.getImage([fillImgUrl + '-texture', null, strokeWidth]);\n      }\n\n      if (isSVG(fillImgUrl) && fillTexture instanceof Image && (Browser$1.edge || Browser$1.ie)) {\n        var w = fillTexture.width || 20,\n            h = fillTexture.height || 20;\n        var canvas = Canvas.createCanvas(w, h);\n        Canvas.image(canvas.getContext('2d'), fillTexture, 0, 0, w, h);\n        fillTexture = canvas;\n      }\n\n      if (!fillTexture) {\n        if (typeof console !== 'undefined') {\n          console.warn('img not found for', fillImgUrl);\n        }\n      } else {\n        ctx.fillStyle = ctx.createPattern(fillTexture, 'repeat');\n\n        if (style['polygonPatternDx'] || style['polygonPatternDy']) {\n          ctx.fillStyle['polygonPatternOffset'] = [style['polygonPatternDx'], style['polygonPatternDy']];\n        }\n      }\n    } else if (isGradient(fill)) {\n      if (style['polygonGradientExtent']) {\n        ctx.fillStyle = Canvas._createGradient(ctx, fill, style['polygonGradientExtent']);\n      } else {\n        ctx.fillStyle = 'rgba(255,255,255,0)';\n      }\n    } else {\n        if (Array.isArray(fill)) {\n          fill = Canvas.normalizeColorToRGBA(fill);\n        }\n\n        ctx.fillStyle = fill;\n      }\n  },\n  _createGradient: function _createGradient(ctx, g, extent) {\n    var gradient = null,\n        places = g['places'];\n    var min = extent.getMin(),\n        max = extent.getMax(),\n        width = extent.getWidth(),\n        height = extent.getHeight();\n\n    if (!g['type'] || g['type'] === 'linear') {\n      if (!places) {\n        places = [min.x, min.y, max.x, min.y];\n      } else {\n        if (places.length !== 4) {\n          throw new Error('A linear gradient\\'s places should have 4 numbers.');\n        }\n\n        places = [min.x + places[0] * width, min.y + places[1] * height, min.x + places[2] * width, min.y + places[3] * height];\n      }\n\n      gradient = ctx.createLinearGradient.apply(ctx, places);\n    } else if (g['type'] === 'radial') {\n      if (!places) {\n        var c = extent.getCenter()._round();\n\n        places = [c.x, c.y, Math.abs(c.x - min.x), c.x, c.y, 0];\n      } else {\n        if (places.length !== 6) {\n          throw new Error('A radial gradient\\'s places should have 6 numbers.');\n        }\n\n        places = [min.x + places[0] * width, min.y + places[1] * height, width * places[2], min.x + places[3] * width, min.y + places[4] * height, width * places[5]];\n      }\n\n      gradient = ctx.createRadialGradient.apply(ctx, places);\n    }\n\n    g['colorStops'].forEach(function (stop) {\n      gradient.addColorStop.apply(gradient, stop);\n    });\n    return gradient;\n  },\n  _setStrokePattern: function _setStrokePattern(ctx, strokePattern, strokeWidth, linePatternOffset, resources) {\n    var imgUrl = extractImageUrl(strokePattern);\n    var imageTexture;\n\n    if (IS_NODE) {\n      imageTexture = resources.getImage([imgUrl, null, strokeWidth]);\n    } else {\n      var key = imgUrl + '-texture-' + strokeWidth;\n      imageTexture = resources.getImage(key);\n\n      if (!imageTexture) {\n        var imageRes = resources.getImage([imgUrl, null, null]);\n\n        if (imageRes) {\n          var w;\n\n          if (!imageRes.width || !imageRes.height) {\n            w = strokeWidth;\n          } else {\n            w = Math.round(imageRes.width * strokeWidth / imageRes.height);\n          }\n\n          var patternCanvas = Canvas.createCanvas(w, strokeWidth, ctx.canvas.constructor);\n          Canvas.image(patternCanvas.getContext('2d'), imageRes, 0, 0, w, strokeWidth);\n          resources.addResource([key, null, strokeWidth], patternCanvas);\n          imageTexture = patternCanvas;\n        }\n      }\n    }\n\n    if (imageTexture) {\n      ctx.strokeStyle = ctx.createPattern(imageTexture, 'repeat');\n      ctx.strokeStyle['linePatternOffset'] = linePatternOffset;\n    } else if (typeof console !== 'undefined') {\n      console.warn('img not found for', imgUrl);\n    }\n  },\n  clearRect: function clearRect(ctx, x1, y1, x2, y2) {\n    ctx.canvas._drawn = false;\n    ctx.clearRect(x1, y1, x2, y2);\n  },\n  fillCanvas: function fillCanvas(ctx, fillOpacity, x, y) {\n    if (hitTesting) {\n      fillOpacity = 1;\n    }\n\n    ctx.canvas._drawn = true;\n\n    if (fillOpacity === 0) {\n      return;\n    }\n\n    var isPattern = Canvas._isPattern(ctx.fillStyle);\n\n    var offset = ctx.fillStyle && ctx.fillStyle['polygonPatternOffset'];\n    var dx = offset ? offset[0] : 0,\n        dy = offset ? offset[1] : 0;\n\n    if (isNil(fillOpacity)) {\n      fillOpacity = 1;\n    }\n\n    var alpha;\n\n    if (fillOpacity < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= fillOpacity;\n    }\n\n    if (isPattern) {\n      x = x || 0;\n      y = y || 0;\n      ctx.translate(x + dx, y + dy);\n    }\n\n    ctx.fill();\n\n    if (isPattern) {\n      ctx.translate(-x - dx, -y - dy);\n    }\n\n    if (fillOpacity < 1) {\n      ctx.globalAlpha = alpha;\n    }\n  },\n  getRgba: function getRgba(color, op) {\n    if (isNil(op)) {\n      op = 1;\n    }\n\n    if (color[0] !== '#') {\n      if (Array.isArray(color)) {\n        color = Canvas.normalizeColorToRGBA(color, op);\n      }\n\n      return color;\n    }\n\n    var r, g, b;\n\n    if (color.length === 7) {\n      r = parseInt(color.substring(1, 3), 16);\n      g = parseInt(color.substring(3, 5), 16);\n      b = parseInt(color.substring(5, 7), 16);\n    } else {\n      r = parseInt(color.substring(1, 2), 16) * 17;\n      g = parseInt(color.substring(2, 3), 16) * 17;\n      b = parseInt(color.substring(3, 4), 16) * 17;\n    }\n\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + op + ')';\n  },\n  normalizeColorToRGBA: function normalizeColorToRGBA(fill, opacity) {\n    if (opacity === void 0) {\n      opacity = 1;\n    }\n\n    return \"rgba(\" + fill[0] * 255 + \",\" + fill[1] * 255 + \",\" + fill[2] * 255 + \",\" + (fill.length === 4 ? fill[3] : 1) * opacity + \")\";\n  },\n  image: function image(ctx, img, x, y, width, height) {\n    ctx.canvas._drawn = true;\n\n    try {\n      if (isNumber(width) && isNumber(height)) {\n        ctx.drawImage(img, x, y, width, height);\n      } else {\n        ctx.drawImage(img, x, y);\n      }\n    } catch (error) {\n      if (console) {\n        console.warn('error when drawing image on canvas:', error);\n        console.warn(img);\n      }\n    }\n  },\n  text: function text(ctx, _text, pt, style, textDesc) {\n    Canvas._textOnMultiRow(ctx, textDesc['rows'], style, pt, textDesc['size'], textDesc['rawSize']);\n  },\n  _textOnMultiRow: function _textOnMultiRow(ctx, texts, style, point, splitTextSize, textSize) {\n    var ptAlign = getAlignPoint(splitTextSize, style['textHorizontalAlignment'], style['textVerticalAlignment']),\n        lineHeight = textSize['height'] + style['textLineSpacing'],\n        basePoint = point.add(0, ptAlign.y),\n        maxHeight = style['textMaxHeight'];\n    var text,\n        rowAlign,\n        height = 0;\n\n    for (var i = 0, len = texts.length; i < len; i++) {\n      text = texts[i]['text'];\n      rowAlign = getAlignPoint(texts[i]['size'], style['textHorizontalAlignment'], style['textVerticalAlignment']);\n\n      Canvas._textOnLine(ctx, text, basePoint.add(rowAlign.x, i * lineHeight), style['textHaloRadius'], style['textHaloFill'], style['textHaloOpacity']);\n\n      if (maxHeight > 0) {\n        height += lineHeight;\n\n        if (height + textSize['height'] >= maxHeight) {\n          break;\n        }\n      }\n    }\n  },\n  _textOnLine: function _textOnLine(ctx, text, pt, textHaloRadius, textHaloFill, textHaloAlpha) {\n    if (hitTesting) {\n      textHaloAlpha = 1;\n    }\n\n    var drawHalo = textHaloAlpha !== 0 && textHaloRadius !== 0;\n    ctx.textBaseline = 'top';\n    var gco, fill;\n    var shadowBlur = ctx.shadowBlur,\n        shadowOffsetX = ctx.shadowOffsetX,\n        shadowOffsetY = ctx.shadowOffsetY;\n\n    if (drawHalo) {\n      var alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= textHaloAlpha;\n      ctx.miterLimit = 2;\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.lineWidth = textHaloRadius * 2;\n\n      if (Array.isArray(textHaloFill)) {\n        textHaloFill = Canvas.normalizeColorToRGBA(textHaloFill);\n      }\n\n      ctx.strokeStyle = textHaloFill;\n      ctx.strokeText(text, pt.x, pt.y + textOffsetY);\n      ctx.miterLimit = 10;\n      ctx.globalAlpha = alpha;\n      gco = ctx.globalCompositeOperation;\n      ctx.globalCompositeOperation = 'destination-out';\n      fill = ctx.fillStyle;\n      ctx.fillStyle = '#000';\n    }\n\n    if (shadowBlur && drawHalo) {\n      ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n    }\n\n    Canvas.fillText(ctx, text, pt);\n\n    if (gco) {\n      ctx.globalCompositeOperation = gco;\n      Canvas.fillText(ctx, text, pt, fill);\n\n      if (shadowBlur) {\n        ctx.shadowBlur = shadowBlur;\n        ctx.shadowOffsetX = shadowOffsetX;\n        ctx.shadowOffsetY = shadowOffsetY;\n      }\n    }\n  },\n  fillText: function fillText(ctx, text, pt, rgba) {\n    ctx.canvas._drawn = true;\n\n    if (rgba) {\n      ctx.fillStyle = rgba;\n    }\n\n    ctx.fillText(text, pt.x, pt.y + textOffsetY);\n  },\n  _stroke: function _stroke(ctx, strokeOpacity, x, y) {\n    if (hitTesting) {\n      strokeOpacity = 1;\n    }\n\n    ctx.canvas._drawn = true;\n\n    if (strokeOpacity === 0) {\n      return;\n    }\n\n    var offset = ctx.strokeStyle && ctx.strokeStyle['linePatternOffset'];\n    var dx = offset ? offset[0] : 0,\n        dy = offset ? offset[1] : 0;\n    var isPattern = Canvas._isPattern(ctx.strokeStyle) && (!isNil(x) && !isNil(y) || !isNil(dx) && !isNil(dy));\n\n    if (isNil(strokeOpacity)) {\n      strokeOpacity = 1;\n    }\n\n    var alpha;\n\n    if (strokeOpacity < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= strokeOpacity;\n    }\n\n    if (isPattern) {\n      x = x || 0;\n      y = y || 0;\n      ctx.translate(x + dx, y + dy);\n    }\n\n    ctx.stroke();\n\n    if (isPattern) {\n      ctx.translate(-x - dx, -y - dy);\n    }\n\n    if (strokeOpacity < 1) {\n      ctx.globalAlpha = alpha;\n    }\n  },\n  _path: function _path(ctx, points, lineDashArray, lineOpacity, ignoreStrokePattern) {\n    if (!isArrayHasData(points)) {\n      return;\n    }\n\n    function fillWithPattern(p1, p2) {\n      var degree = computeDegree(p1.x, p1.y, p2.x, p2.y);\n      ctx.save();\n      var cosd = Math.cos(degree);\n\n      if (Math.abs(cosd) < 1E-7) {\n        ctx.translate(p1.x - ctx.lineWidth / 2, p1.y);\n      } else {\n        ctx.translate(p1.x, p1.y - ctx.lineWidth / 2 / cosd);\n      }\n\n      ctx.rotate(degree);\n\n      Canvas._stroke(ctx, lineOpacity);\n\n      ctx.restore();\n    }\n\n    var isDashed = isArrayHasData(lineDashArray);\n    var isPatternLine = ignoreStrokePattern === true ? false : Canvas._isPattern(ctx.strokeStyle);\n    var point, prePoint, nextPoint;\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      point = points[i];\n\n      if (!isDashed || ctx.setLineDash) {\n        ctx.lineTo(point.x, point.y);\n\n        if (isPatternLine && i > 0) {\n          prePoint = points[i - 1];\n          fillWithPattern(prePoint, point);\n          ctx.beginPath();\n          ctx.moveTo(point.x, point.y);\n        }\n      } else if (isDashed) {\n        if (i === len - 1) {\n          break;\n        }\n\n        nextPoint = points[i + 1];\n        drawDashLine(ctx, point, nextPoint, lineDashArray, isPatternLine);\n      }\n    }\n  },\n  path: function path(ctx, points, lineOpacity, fillOpacity, lineDashArray) {\n    if (!isArrayHasData(points)) {\n      return;\n    }\n\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n\n    Canvas._path(ctx, points, lineDashArray, lineOpacity);\n\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _multiClip: function _multiClip(ctx, points) {\n    if (!points || points.length === 0) return;\n    points = points[0];\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      var point = points[i];\n      var x = point.x,\n          y = point.y;\n\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n\n      if (i === len - 1) {\n        x = points[0].x;\n        y = points[0].y;\n        ctx.lineTo(x, y);\n      }\n    }\n  },\n  polygon: function polygon(ctx, points, lineOpacity, fillOpacity, lineDashArray, smoothness) {\n    if (ctx.isMultiClip) {\n      Canvas._multiClip(ctx, points);\n\n      return;\n    }\n\n    if (!isArrayHasData(points)) {\n      return;\n    }\n\n    var isPatternLine = Canvas._isPattern(ctx.strokeStyle),\n        fillFirst = isArrayHasData(lineDashArray) && !ctx.setLineDash || isPatternLine && !smoothness;\n\n    if (!isArrayHasData(points[0])) {\n      points = [points];\n    }\n\n    var savedCtx = ctx;\n\n    if (points.length > 1 && !IS_NODE) {\n      if (!TEMP_CANVAS) {\n        TEMP_CANVAS = Canvas.createCanvas(1, 1);\n      }\n\n      ctx.canvas._drawn = false;\n      TEMP_CANVAS.width = ctx.canvas.width;\n      TEMP_CANVAS.height = ctx.canvas.height;\n      ctx = TEMP_CANVAS.getContext('2d');\n      copyProperties(ctx, savedCtx);\n    }\n\n    var op, i, len;\n\n    if (fillFirst) {\n      ctx.save();\n\n      for (i = 0, len = points.length; i < len; i++) {\n        if (!isArrayHasData(points[i])) {\n          continue;\n        }\n\n        Canvas._ring(ctx, points[i], null, 0, true);\n\n        op = fillOpacity;\n\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'destination-out';\n          op = 1;\n        }\n\n        Canvas.fillCanvas(ctx, op, points[i][0].x, points[i][0].y);\n\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'source-over';\n        } else if (len > 1) {\n          ctx.fillStyle = '#fff';\n        }\n\n        Canvas._stroke(ctx, 0);\n      }\n\n      ctx.restore();\n    }\n\n    var fillStyle = ctx.fillStyle;\n\n    for (i = 0, len = points.length; i < len; i++) {\n      if (!isArrayHasData(points[i])) {\n        continue;\n      }\n\n      if (smoothness) {\n        Canvas.paintSmoothLine(ctx, points[i], lineOpacity, smoothness, true);\n        ctx.closePath();\n      } else {\n        Canvas._ring(ctx, points[i], lineDashArray, lineOpacity);\n      }\n\n      if (!fillFirst) {\n        op = fillOpacity;\n\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'destination-out';\n          op = 1;\n        }\n\n        Canvas.fillCanvas(ctx, op, points[i][0].x, points[i][0].y);\n\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'source-over';\n        } else if (len > 1) {\n          ctx.fillStyle = '#fff';\n        }\n      }\n\n      Canvas._stroke(ctx, lineOpacity);\n    }\n\n    if (ctx.fillStyle !== fillStyle) {\n      ctx.fillStyle = fillStyle;\n    }\n\n    if (points.length > 1 && !IS_NODE) {\n      savedCtx.drawImage(TEMP_CANVAS, 0, 0);\n      savedCtx.canvas._drawn = ctx.canvas._drawn;\n      copyProperties(savedCtx, ctx);\n    }\n  },\n  _ring: function _ring(ctx, ring, lineDashArray, lineOpacity, ignorePattern) {\n    var isPattern = Canvas._isPattern(ctx.strokeStyle);\n\n    if (!ignorePattern && isPattern && !ring[0].equals(ring[ring.length - 1])) {\n      ring = ring.concat([ring[0]]);\n    }\n\n    ctx.beginPath();\n    ctx.moveTo(ring[0].x, ring[0].y);\n\n    Canvas._path(ctx, ring, lineDashArray, lineOpacity, ignorePattern);\n\n    if (!isPattern) {\n      ctx.closePath();\n    }\n  },\n  paintSmoothLine: function paintSmoothLine(ctx, points, lineOpacity, smoothValue, close, tailIdx, tailRatio) {\n    if (!points) {\n      return;\n    }\n\n    if (points.length <= 2 || !smoothValue) {\n      Canvas.path(ctx, points, lineOpacity);\n      return;\n    }\n\n    function interpolate$$1(t0, t1, x1, y1, bx1, by1, bx2, by2, x2, y2) {\n      var u0 = 1.0 - t0;\n      var u1 = 1.0 - t1;\n      var qxa = x1 * u0 * u0 + bx1 * 2 * t0 * u0 + bx2 * t0 * t0;\n      var qxb = x1 * u1 * u1 + bx1 * 2 * t1 * u1 + bx2 * t1 * t1;\n      var qxc = bx1 * u0 * u0 + bx2 * 2 * t0 * u0 + x2 * t0 * t0;\n      var qxd = bx1 * u1 * u1 + bx2 * 2 * t1 * u1 + x2 * t1 * t1;\n      var qya = y1 * u0 * u0 + by1 * 2 * t0 * u0 + by2 * t0 * t0;\n      var qyb = y1 * u1 * u1 + by1 * 2 * t1 * u1 + by2 * t1 * t1;\n      var qyc = by1 * u0 * u0 + by2 * 2 * t0 * u0 + y2 * t0 * t0;\n      var qyd = by1 * u1 * u1 + by2 * 2 * t1 * u1 + y2 * t1 * t1;\n      var xb = qxa * u1 + qxc * t1;\n      var xc = qxb * u0 + qxd * t0;\n      var xd = qxb * u1 + qxd * t1;\n      var yb = qya * u1 + qyc * t1;\n      var yc = qyb * u0 + qyd * t0;\n      var yd = qyb * u1 + qyd * t1;\n      return [xb, yb, xc, yc, xd, yd];\n    }\n\n    function getCubicControlPoints(x0, y0, x1, y1, x2, y2, x3, y3, smoothValue, t) {\n      var xc1 = (x0 + x1) / 2.0,\n          yc1 = (y0 + y1) / 2.0;\n      var xc2 = (x1 + x2) / 2.0,\n          yc2 = (y1 + y2) / 2.0;\n      var xc3 = (x2 + x3) / 2.0,\n          yc3 = (y2 + y3) / 2.0;\n      var len1 = Math.sqrt((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0));\n      var len2 = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      var len3 = Math.sqrt((x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2));\n      var k1 = len1 / (len1 + len2);\n      var k2 = len2 / (len2 + len3);\n      var xm1 = xc1 + (xc2 - xc1) * k1,\n          ym1 = yc1 + (yc2 - yc1) * k1;\n      var xm2 = xc2 + (xc3 - xc2) * k2,\n          ym2 = yc2 + (yc3 - yc2) * k2;\n      var ctrl1X = xm1 + (xc2 - xm1) * smoothValue + x1 - xm1,\n          ctrl1Y = ym1 + (yc2 - ym1) * smoothValue + y1 - ym1,\n          ctrl2X = xm2 + (xc2 - xm2) * smoothValue + x2 - xm2,\n          ctrl2Y = ym2 + (yc2 - ym2) * smoothValue + y2 - ym2;\n      var ctrlPoints = [ctrl1X, ctrl1Y, ctrl2X, ctrl2Y];\n\n      if (t < 1) {\n        return interpolate$$1(0, t, x1, y1, ctrl1X, ctrl1Y, ctrl2X, ctrl2Y, x2, y2);\n      } else {\n        return ctrlPoints;\n      }\n    }\n\n    var count = points.length;\n    var l = close ? count : count - 1;\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    if (tailRatio !== undefined) l -= Math.max(l - tailIdx - 1, 0);\n    var preCtrlPoints;\n\n    for (var i = 0; i < l; i++) {\n      var x1 = points[i].x,\n          y1 = points[i].y;\n      var x0 = void 0,\n          y0 = void 0,\n          x2 = void 0,\n          y2 = void 0,\n          x3 = void 0,\n          y3 = void 0;\n\n      if (i - 1 < 0) {\n        if (!close) {\n          x0 = points[i + 1].x;\n          y0 = points[i + 1].y;\n        } else {\n          x0 = points[l - 1].x;\n          y0 = points[l - 1].y;\n        }\n      } else {\n        x0 = points[i - 1].x;\n        y0 = points[i - 1].y;\n      }\n\n      if (i + 1 < count) {\n        x2 = points[i + 1].x;\n        y2 = points[i + 1].y;\n      } else {\n        x2 = points[i + 1 - count].x;\n        y2 = points[i + 1 - count].y;\n      }\n\n      if (i + 2 < count) {\n        x3 = points[i + 2].x;\n        y3 = points[i + 2].y;\n      } else if (!close) {\n        x3 = points[i].x;\n        y3 = points[i].y;\n      } else {\n        x3 = points[i + 2 - count].x;\n        y3 = points[i + 2 - count].y;\n      }\n\n      var ctrlPoints = getCubicControlPoints(x0, y0, x1, y1, x2, y2, x3, y3, smoothValue, i === l - 1 ? tailRatio : 1);\n\n      if (i === l - 1 && tailRatio >= 0 && tailRatio < 1) {\n        ctx.bezierCurveTo(ctrlPoints[0], ctrlPoints[1], ctrlPoints[2], ctrlPoints[3], ctrlPoints[4], ctrlPoints[5]);\n        points.splice(l - 1, count - (l - 1) - 1);\n        var lastPoint = new Point(ctrlPoints[4], ctrlPoints[5]);\n        lastPoint.prevCtrlPoint = new Point(ctrlPoints[2], ctrlPoints[3]);\n        points.push(lastPoint);\n        count = points.length;\n      } else {\n        ctx.bezierCurveTo(ctrlPoints[0], ctrlPoints[1], ctrlPoints[2], ctrlPoints[3], x2, y2);\n      }\n\n      points[i].nextCtrlPoint = ctrlPoints.slice(0, 2);\n      points[i].prevCtrlPoint = preCtrlPoints ? preCtrlPoints.slice(2) : null;\n      preCtrlPoints = ctrlPoints;\n    }\n\n    if (!close && points[1].prevCtrlPoint) {\n      points[0].nextCtrlPoint = points[1].prevCtrlPoint;\n      delete points[0].prevCtrlPoint;\n    }\n\n    if (!points[count - 1].prevCtrlPoint) {\n      points[count - 1].prevCtrlPoint = points[count - 2].nextCtrlPoint;\n    }\n\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _arcBetween: function _arcBetween(ctx, p1, p2, degree) {\n    var a = degree,\n        dist = p1.distanceTo(p2),\n        r = dist / 2 / Math.sin(a / 2);\n    var p1p2 = Math.asin((p2.y - p1.y) / dist);\n\n    if (p1.x > p2.x) {\n      p1p2 = Math.PI - p1p2;\n    }\n\n    var cp2 = 90 * RADIAN - a / 2,\n        da = p1p2 - cp2;\n    var dx = Math.cos(da) * r,\n        dy = Math.sin(da) * r,\n        cx = p1.x + dx,\n        cy = p1.y + dy;\n    var startAngle = Math.asin((p2.y - cy) / r);\n\n    if (cx > p2.x) {\n      startAngle = Math.PI - startAngle;\n    }\n\n    var endAngle = startAngle + a;\n    ctx.beginPath();\n    ctx.arc(cx, cy, r, startAngle, endAngle);\n    return [cx, cy];\n  },\n  _lineTo: function _lineTo(ctx, p) {\n    ctx.lineTo(p.x, p.y);\n  },\n  bezierCurveAndFill: function bezierCurveAndFill(ctx, points, lineOpacity, fillOpacity) {\n    ctx.beginPath();\n    var start = points[0];\n    ctx.moveTo(start.x, start.y);\n    var args = [ctx];\n    args.push.apply(args, points.splice(1));\n\n    Canvas._bezierCurveTo.apply(Canvas, args);\n\n    Canvas.fillCanvas(ctx, fillOpacity);\n\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _bezierCurveTo: function _bezierCurveTo(ctx, p1, p2, p3) {\n    ctx.bezierCurveTo(p1.x, p1.y, p2.x, p2.y, p3.x, p3.y);\n  },\n  ellipse: function ellipse(ctx, pt, width, heightTop, heightBottom, lineOpacity, fillOpacity) {\n    function bezierEllipse(x, y, a, b, b1) {\n      var k = 0.5522848,\n          ox = a * k,\n          oy = b * k,\n          oy1 = b1 * k;\n      ctx.moveTo(x - a, y);\n      ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n      ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n      ctx.bezierCurveTo(x + a, y + oy1, x + ox, y + b1, x, y + b1);\n      ctx.bezierCurveTo(x - ox, y + b1, x - a, y + oy1, x - a, y);\n      ctx.closePath();\n    }\n\n    ctx.beginPath();\n\n    if (width === heightTop && width === heightBottom) {\n      ctx.arc(pt.x, pt.y, width, 0, 2 * Math.PI);\n    } else if (ctx.ellipse) {\n      if (heightTop !== heightBottom) {\n        ctx.ellipse(pt.x, pt.y, width, heightTop, 0, RADIAN * 180, RADIAN * 360, false);\n        ctx.ellipse(pt.x, pt.y, width, heightBottom, 0, 0, RADIAN * 180, false);\n      } else {\n        ctx.ellipse(pt.x, pt.y, width, heightTop, 0, 0, RADIAN * 360, false);\n      }\n    } else {\n      bezierEllipse(pt.x, pt.y, width, heightTop, heightBottom);\n    }\n\n    Canvas.fillCanvas(ctx, fillOpacity, pt.x - width, pt.y - heightTop);\n\n    Canvas._stroke(ctx, lineOpacity, pt.x - width, pt.y - heightTop);\n  },\n  rectangle: function rectangle(ctx, pt, size, lineOpacity, fillOpacity) {\n    var x = pt.x,\n        y = pt.y;\n    ctx.beginPath();\n    ctx.rect(x, y, size['width'], size['height']);\n    Canvas.fillCanvas(ctx, fillOpacity, x, y);\n\n    Canvas._stroke(ctx, lineOpacity, x, y);\n  },\n  sector: function sector(ctx, pt, size, angles, lineOpacity, fillOpacity) {\n    var rad = RADIAN;\n    var startAngle = angles[0],\n        endAngle = angles[1];\n\n    function sector(ctx, x, y, radius, startAngle, endAngle) {\n      var sDeg = rad * -endAngle;\n      var eDeg = rad * -startAngle;\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n      ctx.arc(x, y, radius, sDeg, eDeg);\n      ctx.lineTo(x, y);\n      Canvas.fillCanvas(ctx, fillOpacity, x - radius, y - radius);\n\n      Canvas._stroke(ctx, lineOpacity, x - radius, y - radius);\n    }\n\n    sector(ctx, pt.x, pt.y, size, startAngle, endAngle);\n  },\n  _isPattern: function _isPattern(style) {\n    return !isString(style) && !('addColorStop' in style);\n  },\n  drawCross: function drawCross(ctx, x, y, lineWidth, color) {\n    ctx.canvas._drawn = true;\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.beginPath();\n    ctx.moveTo(x - 5, y);\n    ctx.lineTo(x + 5, y);\n    ctx.moveTo(x, y - 5);\n    ctx.lineTo(x, y + 5);\n    ctx.stroke();\n  },\n  copy: function copy(canvas, c) {\n    var target = c || createEl('canvas');\n    target.width = canvas.width;\n    target.height = canvas.height;\n    target.getContext('2d').drawImage(canvas, 0, 0);\n    return target;\n  },\n  pixelRect: function pixelRect(ctx, point, lineOpacity, fillOpacity) {\n    var lineWidth = ctx.lineWidth;\n    var alpha = ctx.globalAlpha;\n    var isStroke = false;\n\n    if (lineWidth > 0 && lineOpacity > 0) {\n      isStroke = true;\n\n      if (lineOpacity < 1) {\n        ctx.globalAlpha *= lineOpacity;\n      }\n    } else if (fillOpacity > 0) {\n      if (fillOpacity < 1) {\n        ctx.globalAlpha *= fillOpacity;\n      }\n    } else {\n      return;\n    }\n\n    ctx.canvas._drawn = true;\n\n    if (isStroke) {\n      ctx.strokeRect(point[0], point[1], 1, 1);\n    } else {\n      ctx.fillRect(point[0], point[1], 1, 1);\n    }\n\n    if (ctx.globalAlpha !== alpha) {\n      ctx.globalAlpha = alpha;\n    }\n  }\n};\n\nfunction drawDashLine(ctx, startPoint, endPoint, dashArray) {\n  var fromX = startPoint.x,\n      fromY = startPoint.y,\n      toX = endPoint.x,\n      toY = endPoint.y;\n  var pattern = dashArray;\n\n  var lt = function lt(a, b) {\n    return a <= b;\n  };\n\n  var gt = function gt(a, b) {\n    return a >= b;\n  };\n\n  var capmin = function capmin(a, b) {\n    return Math.min(a, b);\n  };\n\n  var capmax = function capmax(a, b) {\n    return Math.max(a, b);\n  };\n\n  var checkX = {\n    thereYet: gt,\n    cap: capmin\n  };\n  var checkY = {\n    thereYet: gt,\n    cap: capmin\n  };\n\n  if (fromY - toY > 0) {\n    checkY.thereYet = lt;\n    checkY.cap = capmax;\n  }\n\n  if (fromX - toX > 0) {\n    checkX.thereYet = lt;\n    checkX.cap = capmax;\n  }\n\n  ctx.moveTo(fromX, fromY);\n  var offsetX = fromX;\n  var offsetY = fromY;\n  var idx = 0,\n      dash = true;\n  var ang, len;\n\n  while (!(checkX.thereYet(offsetX, toX) && checkY.thereYet(offsetY, toY))) {\n    ang = Math.atan2(toY - fromY, toX - fromX);\n    len = pattern[idx];\n    offsetX = checkX.cap(toX, offsetX + Math.cos(ang) * len);\n    offsetY = checkY.cap(toY, offsetY + Math.sin(ang) * len);\n\n    if (dash) {\n      ctx.lineTo(offsetX, offsetY);\n    } else {\n      ctx.moveTo(offsetX, offsetY);\n    }\n\n    idx = (idx + 1) % pattern.length;\n    dash = !dash;\n  }\n}\n\nvar prefix = 'data:image/';\n\nfunction extractImageUrl(url) {\n  if (url.substring(0, prefix.length) === prefix) {\n    return url;\n  }\n\n  return extractCssUrl(url);\n}\n\nfunction copyProperties(ctx, savedCtx) {\n  ctx.filter = savedCtx.filter;\n  ctx.fillStyle = savedCtx.fillStyle;\n  ctx.globalAlpha = savedCtx.globalAlpha;\n  ctx.lineCap = savedCtx.lineCap;\n  ctx.lineDashOffset = savedCtx.lineDashOffset;\n  ctx.lineJoin = savedCtx.lineJoin;\n  ctx.lineWidth = savedCtx.lineWidth;\n  ctx.shadowBlur = savedCtx.shadowBlur;\n  ctx.shadowColor = savedCtx.shadowColor;\n  ctx.shadowOffsetX = savedCtx.shadowOffsetX;\n  ctx.shadowOffsetY = savedCtx.shadowOffsetY;\n  ctx.strokeStyle = savedCtx.strokeStyle;\n}\n\nvar promise;\n\nif (typeof Promise !== 'undefined') {\n  promise = Promise;\n} else {\n  promise = Zousan;\n}\n\nvar Promise$1 = promise;\n\nvar Eventable = function Eventable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    var _proto = _class.prototype;\n\n    _proto.on = function on$$1(eventsOn, handler, context) {\n      if (!eventsOn) {\n        return this;\n      }\n\n      if (!isString(eventsOn)) {\n        return this._switch('on', eventsOn, handler);\n      }\n\n      if (!handler) {\n        return this;\n      }\n\n      if (!this._eventMap) {\n        this._eventMap = {};\n      }\n\n      var eventTypes = eventsOn.toLowerCase().split(' ');\n      var evtType;\n\n      if (!context) {\n        context = this;\n      }\n\n      var handlerChain;\n\n      for (var ii = 0, ll = eventTypes.length; ii < ll; ii++) {\n        evtType = eventTypes[ii];\n        handlerChain = this._eventMap[evtType];\n\n        if (!handlerChain) {\n          handlerChain = [];\n          this._eventMap[evtType] = handlerChain;\n        }\n\n        var l = handlerChain.length;\n\n        if (l > 0) {\n          for (var i = 0; i < l; i++) {\n            if (handler === handlerChain[i].handler && handlerChain[i].context === context) {\n              return this;\n            }\n          }\n        }\n\n        handlerChain.push({\n          handler: handler,\n          context: context\n        });\n      }\n\n      return this;\n    };\n\n    _proto.addEventListener = function addEventListener() {\n      return this.on.apply(this, arguments);\n    };\n\n    _proto.once = function once(eventTypes, handler, context) {\n      if (!isString(eventTypes)) {\n        var once = {};\n\n        for (var p in eventTypes) {\n          if (eventTypes.hasOwnProperty(p)) {\n            once[p] = this._wrapOnceHandler(p, eventTypes[p], context);\n          }\n        }\n\n        return this._switch('on', once);\n      }\n\n      var evetTypes = eventTypes.split(' ');\n\n      for (var i = 0, l = evetTypes.length; i < l; i++) {\n        this.on(evetTypes[i], this._wrapOnceHandler(evetTypes[i], handler, context));\n      }\n\n      return this;\n    };\n\n    _proto.off = function off$$1(eventsOff, handler, context) {\n      if (!this._eventMap || !eventsOff) {\n        return this;\n      }\n\n      if (!isString(eventsOff)) {\n        return this._switch('off', eventsOff, handler);\n      }\n\n      if (!handler) {\n        return this;\n      }\n\n      var eventTypes = eventsOff.split(' ');\n      var eventType, listeners, wrapKey;\n\n      if (!context) {\n        context = this;\n      }\n\n      for (var j = 0, jl = eventTypes.length; j < jl; j++) {\n        eventType = eventTypes[j].toLowerCase();\n        wrapKey = 'Z__' + eventType;\n        listeners = this._eventMap[eventType];\n\n        if (!listeners) {\n          return this;\n        }\n\n        for (var i = listeners.length - 1; i >= 0; i--) {\n          var listener = listeners[i];\n\n          if ((handler === listener.handler || handler === listener.handler[wrapKey]) && listener.context === context) {\n            delete listener.handler[wrapKey];\n            listeners.splice(i, 1);\n          }\n        }\n\n        if (!listeners.length) {\n          delete this._eventMap[eventType];\n        }\n      }\n\n      return this;\n    };\n\n    _proto.removeEventListener = function removeEventListener() {\n      return this.off.apply(this, arguments);\n    };\n\n    _proto.listens = function listens(eventType, handler, context) {\n      if (!this._eventMap || !isString(eventType)) {\n        return 0;\n      }\n\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n\n      if (!handlerChain || !handlerChain.length) {\n        return 0;\n      }\n\n      if (!handler) {\n        return handlerChain.length;\n      }\n\n      for (var i = 0, len = handlerChain.length; i < len; i++) {\n        if (handler === handlerChain[i].handler && (isNil(context) || handlerChain[i].context === context)) {\n          return 1;\n        }\n      }\n\n      return 0;\n    };\n\n    _proto.getListeningEvents = function getListeningEvents() {\n      if (!this._eventMap) {\n        return [];\n      }\n\n      return Object.keys(this._eventMap);\n    };\n\n    _proto.copyEventListeners = function copyEventListeners(target) {\n      var eventMap = target._eventMap;\n\n      if (!eventMap) {\n        return this;\n      }\n\n      var handlerChain;\n\n      for (var eventType in eventMap) {\n        handlerChain = eventMap[eventType];\n\n        for (var i = 0, len = handlerChain.length; i < len; i++) {\n          this.on(eventType, handlerChain[i].handler, handlerChain[i].context);\n        }\n      }\n\n      return this;\n    };\n\n    _proto.fire = function fire() {\n      if (this._eventParent) {\n        return this._eventParent.fire.apply(this._eventParent, arguments);\n      }\n\n      return this._fire.apply(this, arguments);\n    };\n\n    _proto._wrapOnceHandler = function _wrapOnceHandler(evtType, handler, context) {\n      var me = this;\n      var key = 'Z__' + evtType;\n      var called = false;\n\n      var fn = function onceHandler() {\n        if (called) {\n          return;\n        }\n\n        delete fn[key];\n        called = true;\n\n        if (context) {\n          handler.apply(context, arguments);\n        } else {\n          handler.apply(this, arguments);\n        }\n\n        me.off(evtType, onceHandler, this);\n      };\n\n      fn[key] = handler;\n      return fn;\n    };\n\n    _proto._switch = function _switch(to, eventKeys, context) {\n      for (var p in eventKeys) {\n        if (eventKeys.hasOwnProperty(p)) {\n          this[to](p, eventKeys[p], context);\n        }\n      }\n\n      return this;\n    };\n\n    _proto._clearListeners = function _clearListeners(eventType) {\n      if (!this._eventMap || !isString(eventType)) {\n        return;\n      }\n\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n\n      if (!handlerChain) {\n        return;\n      }\n\n      this._eventMap[eventType] = null;\n    };\n\n    _proto._clearAllListeners = function _clearAllListeners() {\n      this._eventMap = null;\n    };\n\n    _proto._setEventParent = function _setEventParent(parent) {\n      this._eventParent = parent;\n      return this;\n    };\n\n    _proto._setEventTarget = function _setEventTarget(target) {\n      this._eventTarget = target;\n      return this;\n    };\n\n    _proto._fire = function _fire(eventType, param) {\n      if (!this._eventMap) {\n        return this;\n      }\n\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n\n      if (!handlerChain) {\n        return this;\n      }\n\n      if (!param) {\n        param = {};\n      }\n\n      param['type'] = eventType;\n      param['target'] = this._eventTarget || this;\n      var queue = handlerChain.slice(0);\n      var context, bubble, passed;\n\n      for (var i = 0, len = queue.length; i < len; i++) {\n        if (!queue[i]) {\n          continue;\n        }\n\n        context = queue[i].context;\n        bubble = true;\n        passed = extend({}, param);\n\n        if (context) {\n          bubble = queue[i].handler.call(context, passed);\n        } else {\n          bubble = queue[i].handler(passed);\n        }\n\n        if (bubble === false) {\n          if (param['domEvent']) {\n            stopPropagation(param['domEvent']);\n          }\n        }\n      }\n\n      return this;\n    };\n\n    return _class;\n  }(Base);\n};\n\nvar Handler = function () {\n  function Handler(target) {\n    this.target = target;\n  }\n\n  var _proto = Handler.prototype;\n\n  _proto.enable = function enable() {\n    if (this._enabled) {\n      return this;\n    }\n\n    this._enabled = true;\n    this.addHooks();\n    return this;\n  };\n\n  _proto.disable = function disable() {\n    if (!this._enabled) {\n      return this;\n    }\n\n    this._enabled = false;\n    this.removeHooks();\n    return this;\n  };\n\n  _proto.enabled = function enabled() {\n    return !!this._enabled;\n  };\n\n  _proto.remove = function remove() {\n    this.disable();\n    delete this.target;\n    delete this.dom;\n  };\n\n  return Handler;\n}();\n\nvar Handler$1 = Eventable(Handler);\n\nvar Class = function () {\n  function Class(options) {\n    if (!this || !this.setOptions) {\n      throw new Error('Class instance is being created without \"new\" operator.');\n    }\n\n    this.setOptions(options);\n    this.callInitHooks();\n  }\n\n  var _proto = Class.prototype;\n\n  _proto.callInitHooks = function callInitHooks() {\n    var proto = Object.getPrototypeOf(this);\n\n    this._visitInitHooks(proto);\n\n    return this;\n  };\n\n  _proto.setOptions = function setOptions(options) {\n    if (!this.hasOwnProperty('options')) {\n      this.options = this.options ? Object.create(this.options) : {};\n    }\n\n    if (!options) {\n      return this;\n    }\n\n    for (var i in options) {\n      this.options[i] = options[i];\n    }\n\n    return this;\n  };\n\n  _proto.config = function config(conf) {\n    if (!conf) {\n      var config = {};\n\n      for (var p in this.options) {\n        if (this.options.hasOwnProperty(p)) {\n          config[p] = this.options[p];\n        }\n      }\n\n      return config;\n    } else {\n      if (arguments.length === 2) {\n        var t = {};\n        t[conf] = arguments[1];\n        conf = t;\n      }\n\n      for (var i in conf) {\n        this.options[i] = conf[i];\n\n        if (this[i] && this[i] instanceof Handler$1) {\n          if (conf[i]) {\n            this[i].enable();\n          } else {\n            this[i].disable();\n          }\n        }\n      }\n\n      this.onConfig(conf);\n    }\n\n    return this;\n  };\n\n  _proto.onConfig = function onConfig() {};\n\n  _proto._visitInitHooks = function _visitInitHooks(proto) {\n    if (this._initHooksCalled) {\n      return;\n    }\n\n    var parentProto = Object.getPrototypeOf(proto);\n\n    if (parentProto._visitInitHooks) {\n      parentProto._visitInitHooks.call(this, parentProto);\n    }\n\n    this._initHooksCalled = true;\n    var hooks = proto._initHooks;\n\n    if (hooks && hooks !== parentProto._initHooks) {\n      for (var i = 0; i < hooks.length; i++) {\n        hooks[i].call(this);\n      }\n    }\n  };\n\n  Class.addInitHook = function addInitHook(fn) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var init = typeof fn === 'function' ? fn : function () {\n      this[fn].apply(this, args);\n    };\n    var proto = this.prototype;\n    var parentProto = Object.getPrototypeOf(proto);\n\n    if (!proto._initHooks || proto._initHooks === parentProto._initHooks) {\n      proto._initHooks = [];\n    }\n\n    proto._initHooks.push(init);\n\n    return this;\n  };\n\n  Class.include = function include() {\n    for (var i = 0; i < arguments.length; i++) {\n      extend(this.prototype, i < 0 || arguments.length <= i ? undefined : arguments[i]);\n    }\n\n    return this;\n  };\n\n  Class.mergeOptions = function mergeOptions(options) {\n    var proto = this.prototype;\n    var parentProto = Object.getPrototypeOf(proto);\n\n    if (!proto.options || proto.options === parentProto.options) {\n      proto.options = proto.options ? Object.create(proto.options) : {};\n    }\n\n    extend(proto.options, options);\n    return this;\n  };\n\n  return Class;\n}();\n\nvar registeredTypes = {};\nvar JSONAble = (function (Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    _class.registerJSONType = function registerJSONType(type) {\n      if (!type) {\n        return this;\n      }\n\n      registeredTypes[type] = this;\n      return this;\n    };\n\n    _class.getJSONClass = function getJSONClass(type) {\n      if (!type) {\n        return null;\n      }\n\n      return registeredTypes[type];\n    };\n\n    var _proto = _class.prototype;\n\n    _proto.getJSONType = function getJSONType() {\n      if (this._jsonType === undefined) {\n        var clazz = Object.getPrototypeOf(this).constructor;\n\n        for (var p in registeredTypes) {\n          if (registeredTypes[p] === clazz) {\n            this._jsonType = p;\n            break;\n          }\n        }\n      }\n\n      if (!this._jsonType) {\n        throw new Error('Found an unregistered geometry class!');\n      }\n\n      return this._jsonType;\n    };\n\n    return _class;\n  }(Base);\n});\n\nvar search = {};\n\nvar CollisionIndex = function () {\n  function CollisionIndex() {\n    this._tree = rbush(9, ['[0]', '[1]', '[2]', '[3]']);\n  }\n\n  var _proto = CollisionIndex.prototype;\n\n  _proto.collides = function collides(box) {\n    search.minX = box[0];\n    search.minY = box[1];\n    search.maxX = box[2];\n    search.maxY = box[3];\n    return this._tree.collides(search);\n  };\n\n  _proto.insertBox = function insertBox(box) {\n    var tree = this._tree;\n    tree.insert(box);\n    return this;\n  };\n\n  _proto.bulkInsertBox = function bulkInsertBox(boxes) {\n    this._tree.load(boxes);\n\n    return this;\n  };\n\n  _proto.clear = function clear() {\n    this._tree.clear();\n\n    return this;\n  };\n\n  return CollisionIndex;\n}();\n\nfunction Handlerable (Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    var _proto = _class.prototype;\n\n    _proto.addHandler = function addHandler(name, handlerClass) {\n      if (!handlerClass) {\n        return this;\n      }\n\n      if (!this._handlers) {\n        this._handlers = [];\n      }\n\n      if (this[name]) {\n        this[name].enable();\n        return this;\n      }\n\n      var handler = this[name] = new handlerClass(this);\n\n      this._handlers.push(handler);\n\n      if (this.options[name]) {\n        handler.enable();\n      }\n\n      return this;\n    };\n\n    _proto.removeHandler = function removeHandler(name) {\n      if (!name) {\n        return this;\n      }\n\n      var handler = this[name];\n\n      if (handler) {\n        var hit = this._handlers.indexOf(handler);\n\n        if (hit >= 0) {\n          this._handlers.splice(hit, 1);\n        }\n\n        this[name].remove();\n        delete this[name];\n      }\n\n      return this;\n    };\n\n    _proto._clearHandlers = function _clearHandlers() {\n      for (var i = 0, len = this._handlers.length; i < len; i++) {\n        this._handlers[i].remove();\n      }\n\n      this._handlers = [];\n    };\n\n    return _class;\n  }(Base);\n}\n\nvar START_EVENTS = 'touchstart mousedown';\nvar MOVE_EVENTS = {\n  mousedown: 'mousemove',\n  touchstart: 'touchmove',\n  pointerdown: 'touchmove',\n  MSPointerDown: 'touchmove'\n};\nvar END_EVENTS = {\n  mousedown: 'mouseup',\n  touchstart: 'touchend',\n  pointerdown: 'touchend',\n  MSPointerDown: 'touchend'\n};\n\nvar DragHandler = function (_Handler) {\n  _inheritsLoose(DragHandler, _Handler);\n\n  function DragHandler(dom, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _Handler.call(this, null) || this;\n    _this.dom = dom;\n    _this.options = options;\n    return _this;\n  }\n\n  var _proto = DragHandler.prototype;\n\n  _proto.enable = function enable() {\n    if (!this.dom) {\n      return this;\n    }\n\n    this._onMouseDown = function (e) {\n      return this.onMouseDown(e);\n    };\n\n    on(this.dom, START_EVENTS, this._onMouseDown, this);\n    return this;\n  };\n\n  _proto.disable = function disable() {\n    if (!this.dom) {\n      return this;\n    }\n\n    this._offEvents();\n\n    off(this.dom, START_EVENTS, this._onMouseDown);\n    delete this._onMouseDown;\n    return this;\n  };\n\n  _proto.onMouseDown = function onMouseDown(event) {\n    if (!this.options['rightclick'] && event.button === 2) {\n      return;\n    }\n\n    if (event.touches && event.touches.length > 1) {\n      return;\n    }\n\n    if (this.options['cancelOn'] && this.options['cancelOn'](event) === true) {\n      return;\n    }\n\n    var dom = this.dom;\n\n    if (dom.setCapture) {\n      dom.setCapture();\n    } else if (window.captureEvents) {\n      window.captureEvents(window['Event'].MOUSEMOVE | window['Event'].MOUSEUP);\n    }\n\n    dom['ondragstart'] = function () {\n      return false;\n    };\n\n    delete this.moved;\n    var actual = event.touches ? event.touches[0] : event;\n    this.startPos = new Point(actual.clientX, actual.clientY);\n    on(document, MOVE_EVENTS[event.type], this.onMouseMove, this);\n    on(document, END_EVENTS[event.type], this.onMouseUp, this);\n\n    if (!this.options['ignoreMouseleave']) {\n      on(this.dom, 'mouseleave', this.onMouseUp, this);\n    }\n\n    this.fire('mousedown', {\n      'domEvent': event,\n      'mousePos': new Point(actual.clientX, actual.clientY)\n    });\n  };\n\n  _proto.onMouseMove = function onMouseMove(event) {\n    if (event.touches && event.touches.length > 1) {\n      if (this.moved) {\n        this.interupted = true;\n        this.onMouseUp(event);\n      }\n\n      return;\n    }\n\n    var actual = event.touches ? event.touches[0] : event;\n    var newPos = new Point(actual.clientX, actual.clientY),\n        offset = newPos.sub(this.startPos);\n\n    if (!offset.x && !offset.y) {\n      return;\n    }\n\n    if (!this.moved) {\n      this.fire('dragstart', {\n        'domEvent': event,\n        'mousePos': this.startPos.copy()\n      });\n      this.moved = true;\n    } else {\n      this.fire('dragging', {\n        'domEvent': event,\n        'mousePos': new Point(actual.clientX, actual.clientY)\n      });\n    }\n  };\n\n  _proto.onMouseUp = function onMouseUp(event) {\n    var actual = event.changedTouches ? event.changedTouches[0] : event;\n\n    this._offEvents();\n\n    var param = {\n      'domEvent': event\n    };\n\n    if (isNumber(actual.clientX)) {\n      param['mousePos'] = new Point(parseInt(actual.clientX, 0), parseInt(actual.clientY, 0));\n    }\n\n    if (this.moved) {\n        param.interupted = this.interupted;\n        this.fire('dragend', param);\n        delete this.interupted;\n        delete this.moved;\n      }\n\n    this.fire('mouseup', param);\n  };\n\n  _proto._offEvents = function _offEvents() {\n    var dom = this.dom;\n    off(dom, 'mouseleave', this.onMouseUp, this);\n\n    if (typeof document === 'undefined' || typeof window === 'undefined') {\n      return;\n    }\n\n    for (var i in MOVE_EVENTS) {\n      off(document, MOVE_EVENTS[i], this.onMouseMove, this);\n      off(document, END_EVENTS[i], this.onMouseUp, this);\n    }\n\n    if (dom['releaseCapture']) {\n      dom['releaseCapture']();\n    } else if (window.captureEvents) {\n      window.captureEvents(window['Event'].MOUSEMOVE | window['Event'].MOUSEUP);\n    }\n  };\n\n  return DragHandler;\n}(Handler$1);\n\nvar Coordinate = function (_Position) {\n  _inheritsLoose(Coordinate, _Position);\n\n  function Coordinate() {\n    return _Position.apply(this, arguments) || this;\n  }\n\n  Coordinate.toNumberArrays = function toNumberArrays(coordinates) {\n    if (!Array.isArray(coordinates)) {\n      return [coordinates.x, coordinates.y];\n    }\n\n    return forEachCoord(coordinates, function (coord) {\n      return [coord.x, coord.y];\n    });\n  };\n\n  Coordinate.toCoordinates = function toCoordinates(coordinates) {\n    if (isNumber(coordinates[0]) && isNumber(coordinates[1])) {\n      return new Coordinate(coordinates);\n    }\n\n    if (coordinates instanceof Coordinate) {\n      return coordinates;\n    }\n\n    var result = [];\n\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      var child = coordinates[i];\n\n      if (Array.isArray(child)) {\n        if (isNumber(child[0])) {\n          result.push(new Coordinate(child));\n        } else {\n          result.push(Coordinate.toCoordinates(child));\n        }\n      } else if (child instanceof Coordinate) {\n        result.push(child);\n      } else {\n        result.push(new Coordinate(child));\n      }\n    }\n\n    return result;\n  };\n\n  return Coordinate;\n}(Position);\n\nvar CRS = function () {\n  function CRS(type, properties) {\n    this.type = type;\n    this.properties = properties;\n  }\n\n  CRS.createProj4 = function createProj4(proj) {\n    return new CRS('proj4', {\n      'proj': proj\n    });\n  };\n\n  CRS.fromProjectionCode = function fromProjectionCode(code) {\n    if (!code) {\n      return null;\n    }\n\n    code = code.toUpperCase().replace(':', '');\n    return CRS[code] || null;\n  };\n\n  return CRS;\n}();\n\nCRS.WGS84 = CRS.createProj4('+proj=longlat +datum=WGS84 +no_defs');\nCRS.EPSG4326 = CRS.WGS84;\nCRS.EPSG3857 = CRS.createProj4('+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs');\nCRS.IDENTITY = CRS.createProj4('+proj=identity +no_defs');\nCRS.CGCS2000 = CRS.createProj4('+proj=longlat +datum=CGCS2000');\nCRS.EPSG4490 = CRS.CGCS2000;\nCRS.BD09LL = CRS.createProj4('+proj=longlat +datum=BD09');\nCRS.GCJ02 = CRS.createProj4('+proj=longlat +datum=GCJ02');\n\nvar TEMP_POINT0 = new Point(0, 0);\nvar TEMP_COORD0 = new Coordinate(0, 0);\nvar TEMP_COORD1 = new Coordinate(0, 0);\nvar TEMP_COORD2 = new Coordinate(0, 0);\nvar TEMP_COORD3 = new Coordinate(0, 0);\nvar TEMP_COORD4 = new Coordinate(0, 0);\nvar TEMP_COORD5 = new Coordinate(0, 0);\nvar TEMP_COORD6 = new Coordinate(0, 0);\nvar TEMP_COORD7 = new Coordinate(0, 0);\nvar MINMAX = [];\nvar TEMP_EXTENT;\nvar TEMP_COMBINE = [];\n\nvar Extent = function () {\n  function Extent(p1, p2, p3, p4) {\n    this._clazz = Coordinate;\n    var l = arguments.length;\n    var proj = l > 0 ? arguments[l - 1] : null;\n\n    if (proj && proj.unproject) {\n      this.projection = arguments[l - 1];\n    }\n\n    this._dirty = true;\n\n    this._initialize(p1, p2, p3, p4);\n  }\n\n  var _proto = Extent.prototype;\n\n  _proto._initialize = function _initialize(p1, p2, p3, p4) {\n    this.xmin = null;\n    this.xmax = null;\n    this.ymin = null;\n    this.ymax = null;\n\n    if (isNil(p1)) {\n      return;\n    }\n\n    var projection = this.projection;\n\n    if (isNumber(p1) && isNumber(p2) && isNumber(p3) && isNumber(p4)) {\n      if (projection) {\n        this.set(p1, p2, p3, p4);\n      } else {\n        this.set(Math.min(p1, p3), Math.min(p2, p4), Math.max(p1, p3), Math.max(p2, p4));\n      }\n\n      return;\n    } else if (Array.isArray(p1)) {\n      if (projection) {\n        this.set(p1[0], p1[1], p1[2], p1[3]);\n      } else {\n        this.set(Math.min(p1[0], p1[2]), Math.min(p1[1], p1[3]), Math.max(p1[0], p1[2]), Math.max(p1[1], p1[3]));\n      }\n    } else if (isNumber(p1.x) && isNumber(p2.x) && isNumber(p1.y) && isNumber(p2.y)) {\n      if (projection) {\n        this.set(p1.x, p1.y, p2.x, p2.y);\n      } else {\n        if (p1.x > p2.x) {\n          this['xmin'] = p2.x;\n          this['xmax'] = p1.x;\n        } else {\n          this['xmin'] = p1.x;\n          this['xmax'] = p2.x;\n        }\n\n        if (p1.y > p2.y) {\n          this['ymin'] = p2.y;\n          this['ymax'] = p1.y;\n        } else {\n          this['ymin'] = p1.y;\n          this['ymax'] = p2.y;\n        }\n      }\n    } else if (isNumber(p1['xmin']) && isNumber(p1['xmax']) && isNumber(p1['ymin']) && isNumber(p1['ymax'])) {\n      this.set(p1['xmin'], p1['ymin'], p1['xmax'], p1['ymax']);\n    }\n  };\n\n  _proto._add = function _add(p) {\n    this._dirty = true;\n\n    if (!isNil(p.x)) {\n      this['xmin'] += p.x;\n      this['ymin'] += p.y;\n      this['xmax'] += p.x;\n      this['ymax'] += p.y;\n    } else if (!isNil(p.xmin)) {\n      this['xmin'] += p.xmin;\n      this['ymin'] += p.ymin;\n      this['xmax'] += p.xmax;\n      this['ymax'] += p.ymax;\n    } else if (!isNil(p[0])) {\n      this['xmin'] += p[0];\n      this['ymin'] += p[1];\n      this['xmax'] += p[0];\n      this['ymax'] += p[1];\n    }\n\n    return this;\n  };\n\n  _proto.add = function add() {\n    var e = new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n    return e._add.apply(e, arguments);\n  };\n\n  _proto._scale = function _scale(s) {\n    this._dirty = true;\n    this['xmin'] *= s;\n    this['ymin'] *= s;\n    this['xmax'] *= s;\n    this['ymax'] *= s;\n    return this;\n  };\n\n  _proto._sub = function _sub(p) {\n    this._dirty = true;\n\n    if (!isNil(p.x)) {\n      this['xmin'] -= p.x;\n      this['ymin'] -= p.y;\n      this['xmax'] -= p.x;\n      this['ymax'] -= p.y;\n    } else if (!isNil(p.xmin)) {\n      this['xmin'] -= p.xmin;\n      this['ymin'] -= p.ymin;\n      this['xmax'] -= p.xmax;\n      this['ymax'] -= p.ymax;\n    } else if (!isNil(p[0])) {\n      this['xmin'] -= p[0];\n      this['ymin'] -= p[1];\n      this['xmax'] -= p[0];\n      this['ymax'] -= p[1];\n    }\n\n    return this;\n  };\n\n  _proto._substract = function _substract() {\n    return this._sub.apply(this, arguments);\n  };\n\n  _proto.sub = function sub() {\n    var e = new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n    return e._sub.apply(e, arguments);\n  };\n\n  _proto.substract = function substract() {\n    return this.sub.apply(this, arguments);\n  };\n\n  _proto.round = function round() {\n    return new this.constructor(Math.round(this['xmin']), Math.round(this['ymin']), Math.round(this['xmax']), Math.round(this['ymax']), this.projection);\n  };\n\n  _proto._round = function _round() {\n    this._dirty = true;\n    this['xmin'] = Math.round(this['xmin']);\n    this['ymin'] = Math.round(this['ymin']);\n    this['xmax'] = Math.round(this['xmax']);\n    this['ymax'] = Math.round(this['ymax']);\n    return this;\n  };\n\n  _proto.getMin = function getMin(out) {\n    if (out) {\n      out.set(this['xmin'], this['ymin']);\n      return out;\n    }\n\n    return new this._clazz(this['xmin'], this['ymin']);\n  };\n\n  _proto.getMax = function getMax(out) {\n    if (out) {\n      out.set(this['xmax'], this['ymax']);\n      return out;\n    }\n\n    return new this._clazz(this['xmax'], this['ymax']);\n  };\n\n  _proto.getCenter = function getCenter(out) {\n    var x = (this['xmin'] + this['xmax']) / 2;\n    var y = (this['ymin'] + this['ymax']) / 2;\n\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n\n    return new this._clazz(x, y);\n  };\n\n  _proto.isValid = function isValid() {\n    return !isNil(this['xmin']) && !isNil(this['ymin']) && !isNil(this['xmax']) && !isNil(this['ymax']);\n  };\n\n  _proto.equals = function equals(ext2) {\n    return this['xmin'] === ext2['xmin'] && this['xmax'] === ext2['xmax'] && this['ymin'] === ext2['ymin'] && this['ymax'] === ext2['ymax'];\n  };\n\n  _proto.intersects = function intersects(ext2) {\n    this._project(this);\n\n    this._project(ext2);\n\n    var rxmin = Math.max(this['pxmin'], ext2['pxmin']);\n    var rymin = Math.max(this['pymin'], ext2['pymin']);\n    var rxmax = Math.min(this['pxmax'], ext2['pxmax']);\n    var rymax = Math.min(this['pymax'], ext2['pymax']);\n    var intersects = !(rxmin > rxmax || rymin > rymax);\n    return intersects;\n  };\n\n  _proto.within = function within(extent) {\n    this._project(this);\n\n    this._project(extent);\n\n    return this.pxmin >= extent.pxmin && this.pxmax <= extent.pxmax && this.pymin >= extent.pymin && this.pymax <= extent.pymax;\n  };\n\n  _proto.contains = function contains(c) {\n    if (!c) {\n      return false;\n    }\n\n    this._project(this);\n\n    var proj = this.projection;\n\n    if (proj) {\n      if (c.x !== undefined) {\n        var coord = TEMP_COORD0;\n\n        if (Array.isArray(c)) {\n          coord.x = c[0];\n          coord.y = c[1];\n        } else {\n          coord.x = c.x;\n          coord.y = c.y;\n        }\n\n        c = proj.project(coord, coord);\n      } else if (c.xmin !== undefined) {\n        this._project(c);\n      }\n    }\n\n    return (c.x || c.pxmin || 0) >= this.pxmin && (c.x || c.pxmax || 0) <= this.pxmax && (c.y || c.pymin || 0) >= this.pymin && (c.y || c.pymax || 0) <= this.pymax;\n  };\n\n  _proto.getWidth = function getWidth() {\n    return Math.abs(this['xmax'] - this['xmin']);\n  };\n\n  _proto.getHeight = function getHeight() {\n    return Math.abs(this['ymax'] - this['ymin']);\n  };\n\n  _proto.getSize = function getSize() {\n    return new Size(this.getWidth(), this.getHeight());\n  };\n\n  _proto.set = function set(xmin, ymin, xmax, ymax) {\n    this.xmin = xmin;\n    this.ymin = ymin;\n    this.xmax = xmax;\n    this.ymax = ymax;\n    this._dirty = true;\n    return this;\n  };\n\n  _proto.__combine = function __combine(extent) {\n    if (extent.x !== undefined) {\n      TEMP_EXTENT.xmin = TEMP_EXTENT.xmax = extent.x;\n      TEMP_EXTENT.ymin = TEMP_EXTENT.ymax = extent.y;\n      extent = TEMP_EXTENT;\n    }\n\n    this._project(extent);\n\n    this._project(this);\n\n    var inited = isNumber(this.pxmin);\n    var xmin, ymin, xmax, ymax;\n\n    if (!inited) {\n      xmin = extent['pxmin'];\n      ymin = extent['pymin'];\n      xmax = extent['pxmax'];\n      ymax = extent['pymax'];\n    } else {\n      xmin = Math.min(this['pxmin'], extent['pxmin']);\n      ymin = Math.min(this['pymin'], extent['pymin']);\n      xmax = Math.max(this['pxmax'], extent['pxmax']);\n      ymax = Math.max(this['pymax'], extent['pymax']);\n    }\n\n    var proj = this.projection;\n\n    if (proj) {\n      TEMP_COORD1.set(xmin, ymin);\n      TEMP_COORD2.set(xmax, ymax);\n      var min = proj.unproject(TEMP_COORD1, TEMP_COORD1),\n          max = proj.unproject(TEMP_COORD2, TEMP_COORD2);\n      xmin = min.x;\n      ymin = min.y;\n      xmax = max.x;\n      ymax = max.y;\n    }\n\n    TEMP_COMBINE[0] = xmin;\n    TEMP_COMBINE[1] = ymin;\n    TEMP_COMBINE[2] = xmax;\n    TEMP_COMBINE[3] = ymax;\n    return TEMP_COMBINE;\n  };\n\n  _proto._combine = function _combine(extent) {\n    if (!extent || extent.isValid && !extent.isValid()) {\n      return this;\n    }\n\n    var ext = this.__combine(extent);\n\n    this.set(ext[0], ext[1], ext[2], ext[3]);\n    this._dirty = true;\n    return this;\n  };\n\n  _proto.combine = function combine(extent) {\n    if (!extent || extent.isValid && !extent.isValid()) {\n      return this;\n    }\n\n    var ext = this.__combine(extent);\n\n    return new this.constructor(ext[0], ext[1], ext[2], ext[3], this.projection);\n  };\n\n  _proto.intersection = function intersection(extent) {\n    if (!this.intersects(extent)) {\n      return null;\n    }\n\n    TEMP_COORD3.x = Math.max(this['pxmin'], extent['pxmin']);\n    TEMP_COORD3.y = Math.max(this['pymin'], extent['pymin']);\n    TEMP_COORD4.x = Math.min(this['pxmax'], extent['pxmax']);\n    TEMP_COORD4.y = Math.min(this['pymax'], extent['pymax']);\n    var min = TEMP_COORD3,\n        max = TEMP_COORD4;\n    var proj = this.projection;\n\n    if (proj) {\n      min = proj.unproject(min, min);\n      max = proj.unproject(max, max);\n    }\n\n    return new this.constructor(min, max, proj);\n  };\n\n  _proto.expand = function expand(distance) {\n    var w, h;\n\n    if (!isNumber(distance)) {\n      w = distance['width'] || distance['x'] || distance[0] || 0;\n      h = distance['height'] || distance['y'] || distance[1] || 0;\n    } else {\n      w = h = distance;\n    }\n\n    return new this.constructor(this['xmin'] - w, this['ymin'] - h, this['xmax'] + w, this['ymax'] + h, this.projection);\n  };\n\n  _proto._expand = function _expand(distance) {\n    var w, h;\n\n    if (!isNumber(distance)) {\n      w = distance['width'] || distance['x'] || distance[0] || 0;\n      h = distance['height'] || distance['y'] || distance[1] || 0;\n    } else {\n      w = h = distance;\n    }\n\n    this['xmin'] -= w;\n    this['ymin'] -= h;\n    this['xmax'] += w;\n    this['ymax'] += h;\n    this._dirty = true;\n    return this;\n  };\n\n  _proto.toJSON = function toJSON() {\n    return {\n      'xmin': this['xmin'],\n      'ymin': this['ymin'],\n      'xmax': this['xmax'],\n      'ymax': this['ymax']\n    };\n  };\n\n  _proto.toArray = function toArray(out) {\n    var xmin = this['xmin'],\n        ymin = this['ymin'],\n        xmax = this['xmax'],\n        ymax = this['ymax'];\n\n    if (!out) {\n      return [new this._clazz([xmin, ymax]), new this._clazz([xmax, ymax]), new this._clazz([xmax, ymin]), new this._clazz([xmin, ymin]), new this._clazz([xmin, ymax])];\n    } else {\n      out[0].x = xmin;\n      out[0].y = ymax;\n      out[1].x = xmax;\n      out[1].y = ymax;\n      out[2].x = xmax;\n      out[2].y = ymin;\n      out[3].x = xmin;\n      out[3].y = ymin;\n      out[4].x = xmin;\n      out[4].y = ymax;\n      return out;\n    }\n  };\n\n  _proto.toString = function toString() {\n    return this.xmin + \",\" + this.ymin + \",\" + this.xmax + \",\" + this.ymax;\n  };\n\n  _proto.copy = function copy() {\n    return new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n  };\n\n  _proto.convertTo = function convertTo(fn, out) {\n    if (!this.isValid()) {\n      return null;\n    }\n\n    var e = out || new this.constructor();\n\n    if (out) {\n      e.set(null, null, null, null);\n    }\n\n    var coord;\n\n    if (this._clazz === Coordinate) {\n      coord = TEMP_COORD5;\n    } else if (this._clazz === Point) {\n      coord = TEMP_POINT0;\n    }\n\n    coord.x = this.xmin;\n    coord.y = this.ymax;\n\n    e._combine(fn(coord));\n\n    coord.x = this.xmax;\n\n    e._combine(fn(coord));\n\n    coord.y = this.ymin;\n\n    e._combine(fn(coord));\n\n    coord.x = this.xmin;\n\n    e._combine(fn(coord));\n\n    return e;\n  };\n\n  _proto._project = function _project(ext) {\n    if (!ext || !ext.isValid()) {\n      if (ext) {\n        ext.pxmin = ext.pxmax = ext.pymin = ext.pymax = null;\n      }\n\n      return;\n    }\n\n    var proj = this.projection;\n\n    if (proj) {\n      if (ext._dirty) {\n        TEMP_COORD6.set(ext.xmax, ext.ymin);\n        TEMP_COORD7.set(ext.xmin, ext.ymax);\n        MINMAX[0] = TEMP_COORD6;\n        MINMAX[1] = TEMP_COORD7;\n        var minmax = proj.projectCoords(MINMAX);\n        var min = minmax[0],\n            max = minmax[1];\n        ext.pxmin = Math.min(min.x, max.x);\n        ext.pymin = Math.min(min.y, max.y);\n        ext.pxmax = Math.max(min.x, max.x);\n        ext.pymax = Math.max(min.y, max.y);\n      }\n\n      delete ext._dirty;\n    } else {\n      ext.pxmin = ext.xmin;\n      ext.pxmax = ext.xmax;\n      ext.pymin = ext.ymin;\n      ext.pymax = ext.ymax;\n    }\n  };\n\n  return Extent;\n}();\n\nTEMP_EXTENT = new Extent(0, 0, 0, 0);\n\nvar PointExtent = function (_Extent) {\n  _inheritsLoose(PointExtent, _Extent);\n\n  function PointExtent(p1, p2, p3, p4) {\n    var _this;\n\n    _this = _Extent.call(this, p1, p2, p3, p4) || this;\n    _this._clazz = Point;\n    return _this;\n  }\n\n  return PointExtent;\n}(Extent);\n\nvar Transformation = function () {\n  function Transformation(matrix) {\n    this.matrix = matrix;\n  }\n\n  var _proto = Transformation.prototype;\n\n  _proto.transform = function transform(coordinates, scale, out) {\n    var x = this.matrix[0] * (coordinates.x - this.matrix[2]) / scale;\n    var y = -this.matrix[1] * (coordinates.y - this.matrix[3]) / scale;\n\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n\n    return new Point(x, y);\n  };\n\n  _proto.untransform = function untransform(point, scale, out) {\n    var x = point.x * scale / this.matrix[0] + this.matrix[2];\n    var y = point.y * scale / -this.matrix[1] + this.matrix[3];\n\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n\n    return new Coordinate(x, y);\n  };\n\n  return Transformation;\n}();\n\nvar Common = {\n  project: function project() {},\n  unproject: function unproject() {},\n  projectCoords: function projectCoords(coordinates) {\n    var _this = this;\n\n    if (!coordinates) {\n      return [];\n    }\n\n    if (!Array.isArray(coordinates)) {\n      return this.project(coordinates);\n    }\n\n    if (coordinates.length === 0) {\n      return [];\n    }\n\n    if (!this.isSphere()) {\n      return forEachCoord(coordinates, this.project, this);\n    }\n\n    if (Array.isArray(coordinates[0])) {\n      return coordinates.map(function (coords) {\n        return _this.projectCoords(coords);\n      });\n    } else {\n      var circum = this.getCircum();\n      var extent = this.getSphereExtent(),\n          sx = extent.sx,\n          sy = extent.sy;\n      var wrapX, wrapY;\n      var pre = coordinates[0],\n          current,\n          dx,\n          dy,\n          p;\n      var prj = [this.project(pre)];\n\n      for (var i = 1, l = coordinates.length; i < l; i++) {\n        current = coordinates[i];\n        dx = current.x - pre.x;\n        dy = current.y - pre.y;\n        p = this.project(current);\n\n        if (Math.abs(dx) > 180) {\n          if (wrapX === undefined) {\n            wrapX = current.x > pre.x;\n          }\n\n          if (wrapX) {\n            p._add(-circum.x * sign(dx) * sx, 0);\n\n            current._add(-360 * sign(dx), 0);\n          }\n        }\n\n        if (Math.abs(dy) > 90) {\n          if (wrapY === undefined) {\n            wrapY = current.y < pre.y;\n          }\n\n          if (wrapY) {\n            p._add(0, -circum.y * sign(dy) * sy);\n\n            current._add(0, -180 * sign(dy));\n          }\n        }\n\n        pre = current;\n        prj.push(p);\n      }\n\n      return prj;\n    }\n  },\n  unprojectCoords: function unprojectCoords(projCoords) {\n    if (!projCoords) {\n      return [];\n    }\n\n    if (!Array.isArray(projCoords)) {\n      return this.unproject(projCoords);\n    }\n\n    return forEachCoord(projCoords, this.unproject, this);\n  },\n  isSphere: function isSphere() {\n    return !!this.sphere;\n  },\n  isOutSphere: function isOutSphere(pcoord) {\n    if (!this.isSphere()) {\n      return false;\n    }\n\n    var extent = this.getSphereExtent();\n    return !extent.contains(pcoord);\n  },\n  wrapCoord: function wrapCoord(pcoord) {\n    if (!this.isSphere()) {\n      return pcoord;\n    }\n\n    var extent = this.getSphereExtent();\n    var wrapped = new Coordinate(pcoord);\n\n    if (!extent.contains(wrapped)) {\n      wrapped.x = wrap(pcoord.x, extent.xmin, extent.xmax);\n      wrapped.y = wrap(pcoord.y, extent.ymin, extent.ymax);\n    }\n\n    return wrapped;\n  },\n  getCircum: function getCircum() {\n    if (!this.circum && this.isSphere()) {\n      var extent = this.getSphereExtent();\n      this.circum = {\n        x: extent.getWidth(),\n        y: extent.getHeight()\n      };\n    }\n\n    return this.circum;\n  },\n  getSphereExtent: function getSphereExtent() {\n    if (!this.extent && this.isSphere()) {\n      var max = this.project(new Coordinate(180, 90)),\n          min = this.project(new Coordinate(-180, -90));\n      this.extent = new Extent(min, max, this);\n      this.extent.sx = max.x > min.x ? 1 : -1;\n      this.extent.sy = max.y > min.y ? 1 : -1;\n    }\n\n    return this.extent;\n  }\n};\n\nvar Common$1 = {\n  measureLength: function measureLength(c1, c2) {\n    if (!Array.isArray(c1)) {\n      return this.measureLenBetween(c1, c2);\n    }\n\n    var len = 0;\n\n    for (var i = 0, l = c1.length; i < l - 1; i++) {\n      len += this.measureLenBetween(c1[i], c1[i + 1]);\n    }\n\n    return len;\n  }\n};\n\nvar Identity = extend({\n  'measure': 'IDENTITY',\n  measureLenBetween: function measureLenBetween(c1, c2) {\n    if (!c1 || !c2) {\n      return 0;\n    }\n\n    try {\n      return Math.sqrt(Math.pow(c1.x - c2.x, 2) + Math.pow(c1.y - c2.y, 2));\n    } catch (err) {\n      return 0;\n    }\n  },\n  measureArea: function measureArea(coordinates) {\n    if (!Array.isArray(coordinates)) {\n      return 0;\n    }\n\n    var area = 0;\n\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      var c1 = coordinates[i];\n      var c2 = null;\n\n      if (i === len - 1) {\n        c2 = coordinates[0];\n      } else {\n        c2 = coordinates[i + 1];\n      }\n\n      area += c1.x * c2.y - c1.y * c2.x;\n    }\n\n    return Math.abs(area / 2);\n  },\n  locate: function locate(c, xDist, yDist) {\n    c = new Coordinate(c.x, c.y);\n    return this._locate(c, xDist, yDist);\n  },\n  _locate: function _locate(c, xDist, yDist) {\n    if (!c) {\n      return null;\n    }\n\n    if (!xDist) {\n      xDist = 0;\n    }\n\n    if (!yDist) {\n      yDist = 0;\n    }\n\n    if (!xDist && !yDist) {\n      return c;\n    }\n\n    c.x = c.x + xDist;\n    c.y = c.y + yDist;\n    return c;\n  },\n  rotate: function rotate(c, pivot, angle) {\n    c = new Coordinate(c.x, c.y);\n    return this._rotate(c, pivot, angle);\n  },\n  _rotate: function () {\n    var tmp = new Point(0, 0);\n    return function (c, pivot, angle) {\n      tmp.x = c.x - pivot.x;\n      tmp.y = c.y - pivot.y;\n\n      tmp._rotate(angle * Math.PI / 180);\n\n      c.x = pivot.x + tmp.x;\n      c.y = pivot.y + tmp.y;\n      return c;\n    };\n  }()\n}, Common$1);\n\nvar Sphere = function () {\n  function Sphere(radius) {\n    this.radius = radius;\n  }\n\n  var _proto = Sphere.prototype;\n\n  _proto.measureLenBetween = function measureLenBetween(c1, c2) {\n    if (!c1 || !c2) {\n      return 0;\n    }\n\n    var b = toRadian(c1.y);\n    var d = toRadian(c2.y),\n        e = b - d,\n        f = toRadian(c1.x) - toRadian(c2.x);\n    b = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(e / 2), 2) + Math.cos(b) * Math.cos(d) * Math.pow(Math.sin(f / 2), 2)));\n    b *= this.radius;\n    return Math.round(b * 1E5) / 1E5;\n  };\n\n  _proto.measureArea = function measureArea(coordinates) {\n    var a = toRadian(this.radius);\n    var b = 0,\n        c = coordinates,\n        d = c.length;\n\n    if (d < 3) {\n      return 0;\n    }\n\n    var i;\n\n    for (i = 0; i < d - 1; i++) {\n      var e = c[i],\n          f = c[i + 1];\n      b += e.x * a * Math.cos(toRadian(e.y)) * f.y * a - f.x * a * Math.cos(toRadian(f.y)) * e.y * a;\n    }\n\n    d = c[i];\n    c = c[0];\n    b += d.x * a * Math.cos(toRadian(d.y)) * c.y * a - c.x * a * Math.cos(toRadian(c.y)) * d.y * a;\n    return 0.5 * Math.abs(b);\n  };\n\n  _proto.locate = function locate(c, xDist, yDist) {\n    c = new Coordinate(c.x, c.y);\n    return this._locate(c, xDist, yDist);\n  };\n\n  _proto._locate = function _locate(c, xDist, yDist) {\n    if (!c) {\n      return null;\n    }\n\n    if (!xDist) {\n      xDist = 0;\n    }\n\n    if (!yDist) {\n      yDist = 0;\n    }\n\n    if (!xDist && !yDist) {\n      return c;\n    }\n\n    var x, y;\n    var ry = toRadian(c.y);\n\n    if (yDist !== 0) {\n      var dy = Math.abs(yDist);\n      var sy = Math.sin(dy / (2 * this.radius)) * 2;\n      ry = ry + sy * (yDist > 0 ? 1 : -1);\n      y = wrap(ry * 180 / Math.PI, -90, 90);\n    } else {\n      y = c.y;\n    }\n\n    if (xDist !== 0) {\n      var dx = Math.abs(xDist);\n      var rx = toRadian(c.x);\n      var sx = 2 * Math.sqrt(Math.pow(Math.sin(dx / (2 * this.radius)), 2) / Math.pow(Math.cos(ry), 2));\n      rx = rx + sx * (xDist > 0 ? 1 : -1);\n      x = wrap(rx * 180 / Math.PI, -180, 180);\n    } else {\n      x = c.x;\n    }\n\n    c.x = x;\n    c.y = y;\n    return c;\n  };\n\n  _proto.rotate = function rotate(c, pivot, angle) {\n    c = new Coordinate(c);\n    return this._rotate(c, pivot, angle);\n  };\n\n  _proto._rotate = function _rotate(c, pivot, angle) {\n    var initialAngle = rhumbBearing(pivot, c);\n    var finalAngle = initialAngle - angle;\n    var distance = this.measureLenBetween(pivot, c);\n    c.x = pivot.x;\n    c.y = pivot.y;\n    return calculateRhumbDestination(c, distance, finalAngle, this.radius);\n  };\n\n  return Sphere;\n}();\n\nfunction rhumbBearing(start, end, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var bear360;\n  if (options.final) bear360 = calculateRhumbBearing(end, start);else bear360 = calculateRhumbBearing(start, end);\n  var bear180 = bear360 > 180 ? -(360 - bear360) : bear360;\n  return bear180;\n}\n\nfunction calculateRhumbBearing(from, to) {\n  var phi1 = toRadian(from.y);\n  var phi2 = toRadian(to.y);\n  var deltaLambda = toRadian(to.x - from.x);\n  if (deltaLambda > Math.PI) deltaLambda -= 2 * Math.PI;\n  if (deltaLambda < -Math.PI) deltaLambda += 2 * Math.PI;\n  var deltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n  var theta = Math.atan2(deltaLambda, deltaPsi);\n  return (toDegree(theta) + 360) % 360;\n}\n\nfunction calculateRhumbDestination(origin, distance, bearing, radius) {\n  var delta = distance / radius;\n  var lambda1 = origin.x * Math.PI / 180;\n  var phi1 = toRadian(origin.y);\n  var theta = toRadian(bearing);\n  var DeltaPhi = delta * Math.cos(theta);\n  var phi2 = phi1 + DeltaPhi;\n  if (Math.abs(phi2) > Math.PI / 2) phi2 = phi2 > 0 ? Math.PI - phi2 : -Math.PI - phi2;\n  var DeltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n  var q = Math.abs(DeltaPsi) > 10e-12 ? DeltaPhi / DeltaPsi : Math.cos(phi1);\n  var DeltaLambda = delta * Math.sin(theta) / q;\n  var lambda2 = lambda1 + DeltaLambda;\n  origin.x = (lambda2 * 180 / Math.PI + 540) % 360 - 180;\n  origin.y = phi2 * 180 / Math.PI;\n  return origin;\n}\n\nvar WGS84Sphere = extend({\n  'measure': 'EPSG:4326',\n  sphere: new Sphere(6378137),\n  measureLenBetween: function measureLenBetween() {\n    return this.sphere.measureLenBetween.apply(this.sphere, arguments);\n  },\n  measureArea: function measureArea() {\n    return this.sphere.measureArea.apply(this.sphere, arguments);\n  },\n  _locate: function _locate() {\n    return this.sphere._locate.apply(this.sphere, arguments);\n  },\n  locate: function locate() {\n    return this.sphere.locate.apply(this.sphere, arguments);\n  },\n  _rotate: function _rotate() {\n    return this.sphere._rotate.apply(this.sphere, arguments);\n  },\n  rotate: function rotate() {\n    return this.sphere.rotate.apply(this.sphere, arguments);\n  }\n}, Common$1);\nvar BaiduSphere = extend({\n  'measure': 'BAIDU',\n  sphere: new Sphere(6370996.81),\n  measureLenBetween: function measureLenBetween() {\n    return this.sphere.measureLenBetween.apply(this.sphere, arguments);\n  },\n  measureArea: function measureArea() {\n    return this.sphere.measureArea.apply(this.sphere, arguments);\n  },\n  _locate: function _locate() {\n    return this.sphere._locate.apply(this.sphere, arguments);\n  },\n  locate: function locate() {\n    return this.sphere.locate.apply(this.sphere, arguments);\n  },\n  _rotate: function _rotate() {\n    return this.sphere._rotate.apply(this.sphere, arguments);\n  },\n  rotate: function rotate() {\n    return this.sphere.rotate.apply(this.sphere, arguments);\n  }\n}, Common$1);\n\nvar DEFAULT = WGS84Sphere;\nvar measurers = {};\n\nfunction registerMeasurer(m) {\n  measurers[m.measure] = m;\n}\n\nregisterMeasurer(Identity);\nregisterMeasurer(WGS84Sphere);\nregisterMeasurer(BaiduSphere);\nvar Measurer = {\n  getInstance: function getInstance(name) {\n    if (!name) {\n      return DEFAULT;\n    }\n\n    for (var p in measurers) {\n      if (hasOwn(measurers, p)) {\n        var mName = measurers[p]['measure'];\n\n        if (!mName) {\n          continue;\n        }\n\n        if (name.toLowerCase() === mName.toLowerCase()) {\n          return measurers[p];\n        }\n      }\n    }\n\n    return null;\n  }\n};\n\nvar index$2 = /*#__PURE__*/Object.freeze({\n  Identity: Identity,\n  DEFAULT: DEFAULT,\n  Measurer: Measurer,\n  WGS84Sphere: WGS84Sphere,\n  BaiduSphere: BaiduSphere\n});\n\nvar delta = 1E-7;\nvar EPSG3857 = extend({}, Common, {\n  code: 'EPSG:3857',\n  rad: Math.PI / 180,\n  metersPerDegree: 6378137 * Math.PI / 180,\n  maxLatitude: 85.0511287798,\n  project: function project(lnglat, out) {\n    var rad = this.rad,\n        metersPerDegree = this.metersPerDegree,\n        max = this.maxLatitude;\n    var lng = lnglat.x,\n        lat = Math.max(Math.min(max, lnglat.y), -max);\n    var c;\n\n    if (lat === 0) {\n      c = 0;\n    } else {\n      c = Math.log(Math.tan((90 + lat) * rad / 2)) / rad;\n    }\n\n    var x = lng * metersPerDegree;\n    var y = c * metersPerDegree;\n\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n\n    return new Coordinate(x, y);\n  },\n  unproject: function unproject(pLnglat, out) {\n    var rad = this.rad;\n    var metersPerDegree = this.metersPerDegree;\n    var x = pLnglat.x / metersPerDegree;\n    var y = pLnglat.y;\n    var c;\n\n    if (y === 0) {\n      c = 0;\n    } else {\n      c = y / metersPerDegree;\n      c = (2 * Math.atan(Math.exp(c * rad)) - Math.PI / 2) / rad;\n    }\n\n    if (Math.abs(Math.abs(x) - 180) < delta) {\n      x = sign(x) * 180;\n    }\n\n    if (Math.abs(Math.abs(c) - this.maxLatitude) < delta) {\n      c = sign(c) * this.maxLatitude;\n    }\n\n    var rx = wrap(x, -180, 180);\n    var ry = wrap(c, -this.maxLatitude, this.maxLatitude);\n\n    if (out) {\n      out.x = rx;\n      out.y = ry;\n      return out;\n    }\n\n    return new Coordinate(rx, ry);\n  }\n}, WGS84Sphere);\n\nvar PROJ4326 = extend({}, Common, {\n  code: 'EPSG:4326',\n  project: function project(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n\n    return new Coordinate(p);\n  },\n  unproject: function unproject(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n\n    return new Coordinate(p);\n  }\n}, WGS84Sphere);\n\nvar Projection_EPSG4490 = extend({}, PROJ4326, {\n  code: 'EPSG:4490'\n});\n\nvar Projection_Baidu = extend({}, Common, {\n  code: 'BAIDU',\n  project: function project(p, out) {\n    return this.convertLL2MC(p, out);\n  },\n  unproject: function unproject(p, out) {\n    return this.convertMC2LL(p, out);\n  }\n}, BaiduSphere, {\n  EARTHRADIUS: 6370996.81,\n  MCBAND: [12890594.86, 8362377.87, 5591021, 3481989.83, 1678043.12, 0],\n  LLBAND: [75, 60, 45, 30, 15, 0],\n  MC2LL: [[1.410526172116255e-8, 0.00000898305509648872, -1.9939833816331, 200.9824383106796, -187.2403703815547, 91.6087516669843, -23.38765649603339, 2.57121317296198, -0.03801003308653, 17337981.2], [-7.435856389565537e-9, 0.000008983055097726239, -0.78625201886289, 96.32687599759846, -1.85204757529826, -59.36935905485877, 47.40033549296737, -16.50741931063887, 2.28786674699375, 10260144.86], [-3.030883460898826e-8, 0.00000898305509983578, 0.30071316287616, 59.74293618442277, 7.357984074871, -25.38371002664745, 13.45380521110908, -3.29883767235584, 0.32710905363475, 6856817.37], [-1.981981304930552e-8, 0.000008983055099779535, 0.03278182852591, 40.31678527705744, 0.65659298677277, -4.44255534477492, 0.85341911805263, 0.12923347998204, -0.04625736007561, 4482777.06], [3.09191371068437e-9, 0.000008983055096812155, 0.00006995724062, 23.10934304144901, -0.00023663490511, -0.6321817810242, -0.00663494467273, 0.03430082397953, -0.00466043876332, 2555164.4], [2.890871144776878e-9, 0.000008983055095805407, -3.068298e-8, 7.47137025468032, -0.00000353937994, -0.02145144861037, -0.00001234426596, 0.00010322952773, -0.00000323890364, 826088.5]],\n  LL2MC: [[-0.0015702102444, 111320.7020616939, 1704480524535203, -10338987376042340, 26112667856603880, -35149669176653700, 26595700718403920, -10725012454188240, 1800819912950474, 82.5], [0.0008277824516172526, 111320.7020463578, 647795574.6671607, -4082003173.641316, 10774905663.51142, -15171875531.51559, 12053065338.62167, -5124939663.577472, 913311935.9512032, 67.5], [0.00337398766765, 111320.7020202162, 4481351.045890365, -23393751.19931662, 79682215.47186455, -115964993.2797253, 97236711.15602145, -43661946.33752821, 8477230.501135234, 52.5], [0.00220636496208, 111320.7020209128, 51751.86112841131, 3796837.749470245, 992013.7397791013, -1221952.21711287, 1340652.697009075, -620943.6990984312, 144416.9293806241, 37.5], [-0.0003441963504368392, 111320.7020576856, 278.2353980772752, 2485758.690035394, 6070.750963243378, 54821.18345352118, 9540.606633304236, -2710.55326746645, 1405.483844121726, 22.5], [-0.0003218135878613132, 111320.7020701615, 0.00369383431289, 823725.6402795718, 0.46104986909093, 2351.343141331292, 1.58060784298199, 8.77738589078284, 0.37238884252424, 7.45]],\n  convertMC2LL: function convertMC2LL(cB, out) {\n    var cE;\n\n    for (var cD = 0, len = this.MCBAND.length; cD < len; cD++) {\n      if (Math.abs(cB.y) >= this.MCBAND[cD]) {\n        cE = this.MC2LL[cD];\n        break;\n      }\n    }\n\n    var T = this.convertor(cB, cE, out);\n    return T;\n  },\n  convertLL2MC: function convertLL2MC(T, out) {\n    var cD, cC, len;\n    T.x = this.getLoop(T.x, -180, 180);\n    T.y = this.getRange(T.y, -74, 74);\n    var cB = new Coordinate(T.x, T.y);\n\n    for (cC = 0, len = this.LLBAND.length; cC < len; cC++) {\n      if (cB.y >= this.LLBAND[cC]) {\n        cD = this.LL2MC[cC];\n        break;\n      }\n    }\n\n    if (!cD) {\n      for (cC = this.LLBAND.length - 1; cC >= 0; cC--) {\n        if (cB.y <= -this.LLBAND[cC]) {\n          cD = this.LL2MC[cC];\n          break;\n        }\n      }\n    }\n\n    var cE = this.convertor(T, cD, out);\n    return cE;\n  },\n  convertor: function convertor(cC, cD, out) {\n    if (!cC || !cD) {\n      return null;\n    }\n\n    var T = cD[0] + cD[1] * Math.abs(cC.x);\n    var cB = Math.abs(cC.y) / cD[9];\n    var cE = cD[2] + cD[3] * cB + cD[4] * cB * cB + cD[5] * cB * cB * cB + cD[6] * cB * cB * cB * cB + cD[7] * cB * cB * cB * cB * cB + cD[8] * cB * cB * cB * cB * cB * cB;\n    T *= cC.x < 0 ? -1 : 1;\n    cE *= cC.y < 0 ? -1 : 1;\n\n    if (out) {\n      out.x = T;\n      out.y = cE;\n      return out;\n    }\n\n    return new Coordinate(T, cE);\n  },\n  toRadians: function toRadians(T) {\n    return Math.PI * T / 180;\n  },\n  toDegrees: function toDegrees(T) {\n    return 180 * T / Math.PI;\n  },\n  getRange: function getRange(cC, cB, T) {\n    if (cB != null) {\n      cC = Math.max(cC, cB);\n    }\n\n    if (T != null) {\n      cC = Math.min(cC, T);\n    }\n\n    return cC;\n  },\n  getLoop: function getLoop(cC, cB, T) {\n    if (cC === Infinity) {\n      return T;\n    } else if (cC === -Infinity) {\n      return cB;\n    }\n\n    while (cC > T) {\n      cC -= T - cB;\n    }\n\n    while (cC < cB) {\n      cC += T - cB;\n    }\n\n    return cC;\n  }\n});\n\nvar Projection_IDENTITY = extend({}, Common, {\n  code: 'IDENTITY',\n  project: function project(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n\n    return p.copy();\n  },\n  unproject: function unproject(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n\n    return p.copy();\n  }\n}, Identity);\n\nvar DEFAULT$1 = EPSG3857;\n\nvar projections = /*#__PURE__*/Object.freeze({\n  EPSG3857: EPSG3857,\n  DEFAULT: DEFAULT$1,\n  EPSG4326: PROJ4326,\n  EPSG4490: Projection_EPSG4490,\n  BAIDU: Projection_Baidu,\n  IDENTITY: Projection_IDENTITY,\n  Common: Common\n});\n\nvar Renderable = (function (Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    _class.registerRenderer = function registerRenderer(name, clazz) {\n      var proto = this.prototype;\n      var parentProto = Object.getPrototypeOf(proto);\n\n      if (!proto._rendererClasses || proto._rendererClasses === parentProto._rendererClasses) {\n        proto._rendererClasses = proto._rendererClasses ? Object.create(proto._rendererClasses) : {};\n      }\n\n      proto._rendererClasses[name.toLowerCase()] = clazz;\n      return this;\n    };\n\n    _class.getRendererClass = function getRendererClass(name) {\n      var proto = this.prototype;\n\n      if (!proto._rendererClasses) {\n        return null;\n      }\n\n      return proto._rendererClasses[name.toLowerCase()];\n    };\n\n    return _class;\n  }(Base);\n});\n\nvar adapters = {};\nfunction registerWorkerAdapter(workerKey, adapter) {\n  adapters[workerKey] = adapter;\n}\nvar header = \"\\n    var adapters = {};\\n    onmessage = function (msg) {\\n        msg = msg.data;\\n        if (msg.messageType === 'batch') {\\n            const messages = msg.messages;\\n            if (messages) {\\n                for (let i = 0; i < messages.length; i++) {\\n                    dispatch(messages[i]);\\n                }\\n            }\\n        } else {\\n            dispatch(msg);\\n        }\\n    };\\n\\n    function dispatch(msg) {\\n        var workerKey = msg.workerKey;\\n        var adapter = adapters[workerKey];\\n        if (!adapter) {\\n            post(msg.callback, 'Unregistered worker adapters for ' + workerKey);\\n            return;\\n        }\\n        try {\\n            adapter.onmessage(msg, wrap(msg.callback));\\n        } catch (err) {\\n            post(msg.callback, workerKey + ':' + err.message);\\n            console.error(err);\\n            throw err;\\n        }\\n    }\\n\\n    function post(callback, err, data, buffers) {\\n        var msg = {\\n            callback : callback\\n        };\\n        if (err) {\\n            msg.error = err;\\n        } else {\\n            msg.data = data;\\n        }\\n        if (buffers && buffers.length > 0) {\\n            postMessage(msg, buffers);\\n        } else {\\n            postMessage(msg);\\n        }\\n    }\\n    function wrap(callback) {\\n        return function (err, data, buffers) {\\n            post(callback, err, data, buffers);\\n        };\\n    }\\n    var workerExports;\\n\";\nvar footer = \"\\n    workerExports = null;\\n\";\n\nfunction compileWorkerSource() {\n  var source = header;\n\n  for (var p in adapters) {\n    var adapter = adapters[p];\n\n    if (isFunction(adapter)) {\n      if (adapter.length === 0) {\n        adapter = adapter();\n      }\n    }\n\n    source += \"\\n    workerExports = {};\\n    (\" + adapter + \")(workerExports, self);\\n    adapters['\" + p + \"'] = workerExports\";\n    source += \"\\n    workerExports.initialize && workerExports.initialize(self);\\n        \";\n  }\n\n  source += footer;\n  return source;\n}\n\nvar url;\nfunction getWorkerSourcePath() {\n  if (typeof window === 'undefined') {\n    return null;\n  }\n\n  if (!url) {\n    var source = compileWorkerSource();\n    url = window.URL.createObjectURL(new Blob([source], {\n      type: 'text/javascript'\n    }));\n    adapters = null;\n  }\n\n  return url;\n}\n\nvar hardwareConcurrency = typeof window !== 'undefined' ? window.navigator.hardwareConcurrency || 4 : 0;\nvar workerCount = Math.max(Math.floor(hardwareConcurrency / 2), 1);\n\nvar MessageBatch = function () {\n  function MessageBatch(limit) {\n    if (limit === void 0) {\n      limit = 50;\n    }\n\n    this._limit = limit;\n    this._messages = [];\n    this.buffers = [];\n  }\n\n  var _proto = MessageBatch.prototype;\n\n  _proto.addMessage = function addMessage(msg, buffers) {\n    this._messages.push(msg);\n\n    if (!Array.isArray(buffers)) {\n      return;\n    }\n\n    for (var i = 0; i < buffers.length; i++) {\n      if (this.buffers.indexOf(buffers[i]) < 0) {\n        this.buffers.push(buffers[i]);\n      }\n    }\n  };\n\n  _proto.isFull = function isFull() {\n    return this._messages.length >= this._limit;\n  };\n\n  _proto.getMessage = function getMessage() {\n    return {\n      messageType: 'batch',\n      messages: this._messages\n    };\n  };\n\n  return MessageBatch;\n}();\n\nvar WorkerPool = function () {\n  function WorkerPool() {\n    this.active = {};\n    this.workerCount = typeof window !== 'undefined' ? window.MAPTALKS_WORKER_COUNT || workerCount : 0;\n    this._messages = [];\n    this._messageBuffers = [];\n  }\n\n  var _proto2 = WorkerPool.prototype;\n\n  _proto2.acquire = function acquire(id) {\n    if (!this.workers) {\n      this.workers = [];\n      var url = getWorkerSourcePath();\n\n      for (var i = 0; i < this.workerCount; i++) {\n        var worker = new Worker(url);\n        worker.id = i;\n        this.workers.push(worker);\n      }\n\n      URL.revokeObjectURL(url);\n    }\n\n    this.active[id] = true;\n    return this.workers.slice();\n  };\n\n  _proto2.release = function release(id) {\n    delete this.active[id];\n\n    if (Object.keys(this.active).length === 0) {\n      this.workers.forEach(function (w) {\n        w.terminate();\n      });\n      this.workers = null;\n    }\n  };\n\n  _proto2.addMessage = function addMessage(workerId, data, buffers) {\n    var batches = this._messages[workerId];\n\n    if (!batches || !batches.length) {\n      batches = this._messages[workerId] = [new MessageBatch()];\n    }\n\n    var batch = batches[batches.length - 1];\n\n    if (batch.isFull()) {\n      batch = new MessageBatch();\n\n      this._messages[workerId].push(batch);\n    }\n\n    batch.addMessage(data, buffers);\n  };\n\n  _proto2.commit = function commit() {\n    if (this._messages.length) {\n      for (var i = 0; i < this._messages.length; i++) {\n        if (!this._messages[i] || !this._messages[i].length) {\n          continue;\n        }\n\n        var batch = this._messages[i].shift();\n\n        this.workers[i].postMessage(batch.getMessage(), batch.buffers);\n      }\n    }\n  };\n\n  return WorkerPool;\n}();\nvar globalWorkerPool;\nfunction getGlobalWorkerPool() {\n  if (!globalWorkerPool) {\n    globalWorkerPool = new WorkerPool();\n  }\n\n  return globalWorkerPool;\n}\n\nvar dedicatedWorker = 0;\nvar EMPTY_BUFFERS = [];\n\nvar Actor = function () {\n  function Actor(workerKey) {\n    var _this = this;\n\n    this.workerKey = workerKey;\n    this.workerPool = getGlobalWorkerPool();\n    this.currentActor = 0;\n    this.actorId = UID();\n    this.workers = this.workerPool.acquire(this.actorId);\n    this.callbacks = {};\n    this.callbackID = 0;\n    this.receiveFn = this.receive.bind(this);\n    this.workers.forEach(function (w) {\n      w.addEventListener('message', _this.receiveFn, false);\n    });\n  }\n\n  var _proto = Actor.prototype;\n\n  _proto.isActive = function isActive() {\n    return !!this.workers;\n  };\n\n  _proto.broadcast = function broadcast(data, buffers, cb) {\n    var _this2 = this;\n\n    cb = cb || function () {};\n\n    asyncAll(this.workers, function (worker, done) {\n      _this2.send(data, buffers, done, worker.id);\n    }, cb);\n    return this;\n  };\n\n  _proto.send = function send(data, buffers, cb, workerId) {\n    var id = cb ? this.actorId + \":\" + this.callbackID++ : null;\n    if (cb) this.callbacks[id] = cb;\n    this.post({\n      data: data,\n      callback: String(id)\n    }, buffers, workerId);\n    return this;\n  };\n\n  _proto.receive = function receive(message) {\n    var _this3 = this;\n\n    var data = message.data,\n        id = data.callback;\n    var callback = this.callbacks[id];\n    delete this.callbacks[id];\n\n    if (data.type === '<request>') {\n      if (this.actorId === data.actorId) {\n        this[data.command](data.params, function (err, cbData, buffers) {\n          var message = {\n            type: '<response>',\n            callback: data.callback\n          };\n\n          if (err) {\n            message.error = err.message;\n          } else {\n            message.data = cbData;\n          }\n\n          _this3.post(message, buffers || EMPTY_BUFFERS, data.workerId);\n        });\n      }\n    } else if (callback && data.error) {\n      callback(data.error);\n    } else if (callback) {\n      callback(null, data.data);\n    }\n  };\n\n  _proto.remove = function remove() {\n    var _this4 = this;\n\n    this.workers.forEach(function (w) {\n      w.removeEventListener('message', _this4.receiveFn, false);\n    });\n    this.workerPool.release(this.actorId);\n    delete this.receiveFn;\n    delete this.workers;\n    delete this.callbacks;\n    delete this.workerPool;\n  };\n\n  _proto.post = function post(data, buffers, targetID) {\n    if (typeof targetID !== 'number' || isNaN(targetID)) {\n      targetID = this.currentActor = (this.currentActor + 1) % this.workerPool.workerCount;\n    }\n\n    data.workerId = targetID;\n    data.workerKey = this.workerKey;\n    data.actorId = this.actorId;\n    this.workerPool.addMessage(targetID, data, buffers || EMPTY_BUFFERS);\n    return targetID;\n  };\n\n  _proto.getDedicatedWorker = function getDedicatedWorker() {\n    dedicatedWorker = (dedicatedWorker + 1) % this.workerPool.workerCount;\n    return dedicatedWorker;\n  };\n\n  return Actor;\n}();\n\nfunction asyncAll(array, fn, callback) {\n  if (!array.length) {\n    callback(null, []);\n  }\n\n  var remaining = array.length;\n  var results = new Array(array.length);\n  var error = null;\n  array.forEach(function (item, i) {\n    fn(item, function (err, result) {\n      if (err) error = err;\n      results[i] = result;\n      if (--remaining === 0) callback(error, results);\n    });\n  });\n}\n\nvar imageFetchWorkerKey = 'core-fetch-image';\n\nvar EMPTY_ARRAY = [];\n\nvar ResourceWorkerConnection = function (_Actor) {\n  _inheritsLoose(ResourceWorkerConnection, _Actor);\n\n  function ResourceWorkerConnection() {\n    return _Actor.call(this, imageFetchWorkerKey) || this;\n  }\n\n  var _proto = ResourceWorkerConnection.prototype;\n\n  _proto.fetchImage = function fetchImage(url, cb) {\n    var data = {\n      url: url\n    };\n    this.send(data, EMPTY_ARRAY, cb);\n  };\n\n  return ResourceWorkerConnection;\n}(Actor);\n\nvar CanvasRenderer = function (_Class) {\n  _inheritsLoose(CanvasRenderer, _Class);\n\n  function CanvasRenderer(layer) {\n    var _this;\n\n    _this = _Class.call(this) || this;\n    _this.layer = layer;\n    _this._painted = false;\n    _this._drawTime = 0;\n\n    if (Browser$1.decodeImageInWorker) {\n      _this._resWorkerConn = new ResourceWorkerConnection();\n    }\n\n    _this.setToRedraw();\n\n    return _this;\n  }\n\n  var _proto2 = CanvasRenderer.prototype;\n\n  _proto2.render = function render(framestamp) {\n    this.prepareRender();\n\n    if (!this.getMap() || !this.layer.isVisible()) {\n      return;\n    }\n\n    if (!this.resources) {\n      this.resources = new ResourceCache();\n    }\n\n    this.checkAndDraw(this._tryToDraw, framestamp);\n  };\n\n  _proto2.checkAndDraw = function checkAndDraw(drawFn) {\n    var _this2 = this;\n\n    this._toRedraw = false;\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (this.checkResources) {\n      var resources = this.checkResources();\n\n      if (resources.length > 0) {\n        this._loadingResource = true;\n        this.loadResources(resources).then(function () {\n          _this2._loadingResource = false;\n\n          if (_this2.layer) {\n            _this2.layer.fire('resourceload');\n\n            _this2.setToRedraw();\n          }\n        });\n      } else {\n        drawFn.call.apply(drawFn, [this].concat(args));\n      }\n    } else {\n      drawFn.call.apply(drawFn, [this].concat(args));\n    }\n  };\n\n  _proto2.testIfNeedRedraw = function testIfNeedRedraw() {\n    var map = this.getMap();\n\n    if (this._loadingResource) {\n      return false;\n    }\n\n    if (this._toRedraw) {\n      return true;\n    }\n\n    if (map.isInteracting() && !this.drawOnInteracting) {\n      return false;\n    }\n\n    if (this.needToRedraw()) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto2.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (map.isInteracting() || map.getRenderer().isViewChanged()) {\n      return !(!map.getPitch() && map.isMoving() && !map.isZooming() && !map.isRotating() && !this.layer.options['forceRenderOnMoving']);\n    }\n\n    return false;\n  };\n\n  _proto2.onSkipDrawOnInteracting = function onSkipDrawOnInteracting() {};\n\n  _proto2.isLoadingResource = function isLoadingResource() {\n    return this._loadingResource;\n  };\n\n  _proto2.isRenderComplete = function isRenderComplete() {\n    return !!this._renderComplete;\n  };\n\n  _proto2.mustRenderOnInteracting = function mustRenderOnInteracting() {\n    return !this._painted;\n  };\n\n  _proto2.setToRedraw = function setToRedraw() {\n    this._toRedraw = true;\n    return this;\n  };\n\n  _proto2.setCanvasUpdated = function setCanvasUpdated() {\n    this._canvasUpdated = true;\n    return this;\n  };\n\n  _proto2.isCanvasUpdated = function isCanvasUpdated() {\n    return !!this._canvasUpdated;\n  };\n\n  _proto2.remove = function remove() {\n    this.onRemove();\n    delete this._loadingResource;\n    delete this.southWest;\n    delete this.canvas;\n    delete this.context;\n    delete this.canvasExtent2D;\n    delete this._extent2D;\n\n    if (this.resources) {\n      this.resources.remove();\n    }\n\n    delete this.resources;\n    delete this.layer;\n  };\n\n  _proto2.onRemove = function onRemove() {};\n\n  _proto2.onAdd = function onAdd() {};\n\n  _proto2.getMap = function getMap() {\n    if (!this.layer) {\n      return null;\n    }\n\n    return this.layer.getMap();\n  };\n\n  _proto2.getCanvasImage = function getCanvasImage() {\n    var map = this.getMap();\n    this._canvasUpdated = false;\n\n    if (this._renderZoom !== map.getZoom() || !this.canvas || !this._extent2D) {\n      return null;\n    }\n\n    if (this.isBlank()) {\n      return null;\n    }\n\n    if (this.layer.isEmpty && this.layer.isEmpty()) {\n      return null;\n    }\n\n    var containerPoint = map._pointToContainerPoint(this.southWest)._add(0, -map.height);\n\n    return {\n      'image': this.canvas,\n      'layer': this.layer,\n      'point': containerPoint\n    };\n  };\n\n  _proto2.clear = function clear() {\n    this.clearCanvas();\n  };\n\n  _proto2.isBlank = function isBlank() {\n    if (!this._painted) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto2.show = function show() {\n    this.setToRedraw();\n  };\n\n  _proto2.hide = function hide() {\n    this.clear();\n    this.setToRedraw();\n  };\n\n  _proto2.setZIndex = function setZIndex() {\n    this.setToRedraw();\n  };\n\n  _proto2.hitDetect = function hitDetect(point) {\n    if (!this.context || this.layer.isEmpty && this.layer.isEmpty() || this.isBlank() || this._errorThrown) {\n      return false;\n    }\n\n    var map = this.getMap();\n    var r = map.getDevicePixelRatio();\n    var size = map.getSize();\n\n    if (point.x < 0 || point.x > size['width'] * r || point.y < 0 || point.y > size['height'] * r) {\n      return false;\n    }\n\n    var imageData = this.getImageData && this.getImageData();\n\n    if (imageData) {\n      var x = r * point.x,\n          y = r * point.y;\n      var idx = y * imageData.width * 4 + x * 4;\n      return imageData.data[idx + 3] > 0;\n    }\n\n    try {\n      var imgData = this.context.getImageData(r * point.x, r * point.y, 1, 1).data;\n\n      if (imgData[3] > 0) {\n        return true;\n      }\n    } catch (error) {\n      if (!this._errorThrown) {\n        if (console) {\n          console.warn('hit detect failed with tainted canvas, some geometries have external resources in another domain:\\n', error);\n        }\n\n        this._errorThrown = true;\n      }\n\n      return false;\n    }\n\n    return false;\n  };\n\n  _proto2.loadResources = function loadResources(resourceUrls) {\n    if (!this.resources) {\n      this.resources = new ResourceCache();\n    }\n\n    var resources = this.resources,\n        promises = [];\n\n    if (isArrayHasData(resourceUrls)) {\n      var cache = {};\n\n      for (var i = resourceUrls.length - 1; i >= 0; i--) {\n        var url = resourceUrls[i];\n\n        if (!url || !url.length || cache[url.join('-')]) {\n          continue;\n        }\n\n        cache[url.join('-')] = 1;\n\n        if (!resources.isResourceLoaded(url, true)) {\n          promises.push(new Promise$1(this._promiseResource(url)));\n        }\n      }\n    }\n\n    return Promise$1.all(promises);\n  };\n\n  _proto2.prepareRender = function prepareRender() {\n    delete this._renderComplete;\n    var map = this.getMap();\n    this._renderZoom = map.getZoom();\n    this.canvasExtent2D = this._extent2D = map._get2DExtent();\n    this.southWest = map._containerPointToPoint(new Point(0, map.height));\n  };\n\n  _proto2.createCanvas = function createCanvas() {\n    if (this.canvas) {\n      return;\n    }\n\n    var map = this.getMap();\n    var size = map.getSize();\n    var r = map.getDevicePixelRatio(),\n        w = Math.round(r * size.width),\n        h = Math.round(r * size.height);\n\n    if (this.layer._canvas) {\n      var canvas = this.layer._canvas;\n      canvas.width = w;\n      canvas.height = h;\n\n      if (canvas.style) {\n        canvas.style.width = size.width + 'px';\n        canvas.style.height = size.height + 'px';\n      }\n\n      this.canvas = this.layer._canvas;\n    } else {\n      this.canvas = Canvas.createCanvas(w, h, map.CanvasClass);\n    }\n\n    this.onCanvasCreate();\n  };\n\n  _proto2.onCanvasCreate = function onCanvasCreate() {};\n\n  _proto2.createContext = function createContext() {\n    if (this.gl && this.gl.canvas === this.canvas || this.context) {\n      return;\n    }\n\n    this.context = this.canvas.getContext('2d');\n\n    if (!this.context) {\n      return;\n    }\n\n    if (this.layer.options['globalCompositeOperation']) {\n      this.context.globalCompositeOperation = this.layer.options['globalCompositeOperation'];\n    }\n\n    var dpr = this.getMap().getDevicePixelRatio();\n\n    if (dpr !== 1) {\n      this.context.scale(dpr, dpr);\n    }\n  };\n\n  _proto2.resetCanvasTransform = function resetCanvasTransform() {\n    if (!this.context) {\n      return;\n    }\n\n    var dpr = this.getMap().getDevicePixelRatio();\n    this.context.setTransform(dpr, 0, 0, dpr, 0, 0);\n  };\n\n  _proto2.resizeCanvas = function resizeCanvas(canvasSize) {\n    var canvas = this.canvas;\n\n    if (!canvas) {\n      return;\n    }\n\n    var size = canvasSize || this.getMap().getSize();\n    var r = this.getMap().getDevicePixelRatio();\n\n    var _calCanvasSize = calCanvasSize(size, r),\n        width = _calCanvasSize.width,\n        height = _calCanvasSize.height,\n        cssWidth = _calCanvasSize.cssWidth,\n        cssHeight = _calCanvasSize.cssHeight;\n\n    if (this.layer._canvas && (canvas.style.width !== cssWidth || canvas.style.height !== cssHeight)) {\n      canvas.style.width = cssWidth;\n      canvas.style.height = cssHeight;\n    }\n\n    if (canvas.width === width && canvas.height === height) {\n      return;\n    }\n\n    canvas.height = height;\n    canvas.width = width;\n\n    if (r !== 1 && this.context) {\n      this.context.scale(r, r);\n    }\n  };\n\n  _proto2.clearCanvas = function clearCanvas() {\n    if (!this.context || !this.getMap()) {\n      return;\n    }\n\n    var r = this.getMap().getDevicePixelRatio();\n    var rScale = 1 / r;\n    var w = this.canvas.width * rScale,\n        h = this.canvas.height * rScale;\n    Canvas.clearRect(this.context, 0, 0, Math.max(w, this.canvas.width), Math.max(h, this.canvas.height));\n  };\n\n  _proto2.prepareCanvas = function prepareCanvas() {\n    if (!this.canvas) {\n      this.createCanvas();\n      this.createContext();\n      this.layer.onCanvasCreate();\n      this.layer.fire('canvascreate', {\n        'context': this.context,\n        'gl': this.gl\n      });\n    } else {\n      this.resetCanvasTransform();\n      this.clearCanvas();\n      this.resizeCanvas();\n    }\n\n    delete this._maskExtent;\n    var mask = this.layer.getMask();\n\n    if (!mask) {\n      this.layer.fire('renderstart', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      return null;\n    }\n\n    var maskExtent2D = this._maskExtent = mask._getMaskPainter().get2DExtent();\n\n    if (!maskExtent2D.intersects(this._extent2D)) {\n      this.layer.fire('renderstart', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      return maskExtent2D;\n    }\n\n    this.layer.fire('renderstart', {\n      'context': this.context,\n      'gl': this.gl\n    });\n    return maskExtent2D;\n  };\n\n  _proto2.clipCanvas = function clipCanvas(context) {\n    var mask = this.layer.getMask();\n\n    if (!mask) {\n      return false;\n    }\n\n    var old = this.southWest;\n    var map = this.getMap();\n    this.southWest = map._containerPointToPoint(new Point(0, map.height));\n    context.save();\n    var dpr = map.getDevicePixelRatio();\n\n    if (dpr !== 1) {\n      context.save();\n      context.scale(dpr, dpr);\n    }\n\n    if (mask.getGeometries) {\n      context.isMultiClip = true;\n      var masks = mask.getGeometries() || [];\n      context.beginPath();\n      masks.forEach(function (_mask) {\n        var painter = _mask._getMaskPainter();\n\n        painter.paint(null, context);\n      });\n      context.stroke();\n      delete context.isMultiClip;\n    } else {\n      var painter = mask._getMaskPainter();\n\n      painter.paint(null, context);\n    }\n\n    if (dpr !== 1) {\n      context.restore();\n    }\n\n    context.clip();\n    this.southWest = old;\n    return true;\n  };\n\n  _proto2.getViewExtent = function getViewExtent() {\n    return {\n      'extent': this._extent2D,\n      'maskExtent': this._maskExtent,\n      'zoom': this._renderZoom,\n      'southWest': this.southWest\n    };\n  };\n\n  _proto2.completeRender = function completeRender() {\n    if (this.getMap()) {\n      this._renderComplete = true;\n      this.layer.fire('renderend', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      this.setCanvasUpdated();\n    }\n  };\n\n  _proto2.getEvents = function getEvents() {\n    return {\n      '_zoomstart': this.onZoomStart,\n      '_zooming': this.onZooming,\n      '_zoomend': this.onZoomEnd,\n      '_resize': this.onResize,\n      '_movestart': this.onMoveStart,\n      '_moving': this.onMoving,\n      '_moveend': this.onMoveEnd,\n      '_dragrotatestart': this.onDragRotateStart,\n      '_dragrotating': this.onDragRotating,\n      '_dragrotateend': this.onDragRotateEnd,\n      '_spatialreferencechange': this.onSpatialReferenceChange\n    };\n  };\n\n  _proto2.onZoomStart = function onZoomStart() {};\n\n  _proto2.onZoomEnd = function onZoomEnd() {\n    this.setToRedraw();\n  };\n\n  _proto2.onZooming = function onZooming() {};\n\n  _proto2.onMoveStart = function onMoveStart() {};\n\n  _proto2.onMoving = function onMoving() {};\n\n  _proto2.onMoveEnd = function onMoveEnd() {\n    this.setToRedraw();\n  };\n\n  _proto2.onResize = function onResize() {\n    delete this._extent2D;\n    this.resizeCanvas();\n    this.setToRedraw();\n  };\n\n  _proto2.onDragRotateStart = function onDragRotateStart() {};\n\n  _proto2.onDragRotating = function onDragRotating() {};\n\n  _proto2.onDragRotateEnd = function onDragRotateEnd() {\n    this.setToRedraw();\n  };\n\n  _proto2.onSpatialReferenceChange = function onSpatialReferenceChange() {};\n\n  _proto2.getDrawTime = function getDrawTime() {\n    return this._drawTime;\n  };\n\n  _proto2._tryToDraw = function _tryToDraw(framestamp) {\n    this._toRedraw = false;\n\n    if (!this.canvas && this.layer.isEmpty && this.layer.isEmpty()) {\n      this._renderComplete = true;\n      return;\n    }\n\n    this._drawAndRecord(framestamp);\n  };\n\n  _proto2._drawAndRecord = function _drawAndRecord(framestamp) {\n    if (!this.getMap()) {\n      return;\n    }\n\n    var painted = this._painted;\n    this._painted = true;\n    var t = now();\n    this.draw(framestamp);\n    t = now() - t;\n    this._drawTime = painted ? t : t / 2;\n\n    if (painted && this.layer && this.layer.options['logDrawTime']) {\n      console.log(this.layer.getId(), 'frameTimeStamp:', framestamp, 'drawTime:', this._drawTime);\n    }\n  };\n\n  _proto2._promiseResource = function _promiseResource(url) {\n    var me = this,\n        resources = this.resources,\n        crossOrigin = this.layer.options['crossOrigin'];\n    var renderer = this.layer.options['renderer'] || '';\n    return function (resolve) {\n      if (resources.isResourceLoaded(url, true)) {\n        resolve(url);\n        return;\n      }\n\n      if (!isSVG(url[0]) && Browser$1.decodeImageInWorker) {\n        var uri = getAbsoluteURL(url[0]);\n\n        me._resWorkerConn.fetchImage(uri, function (err, data) {\n          if (err) {\n            if (err && typeof console !== 'undefined') {\n              console.warn(err);\n            }\n\n            resolve(url);\n            return;\n          }\n\n          getImageBitMap(data, function (bitmap) {\n            me._cacheResource(url, bitmap);\n\n            resolve(url);\n          });\n        });\n      } else {\n        var img = new Image();\n\n        if (!isNil(crossOrigin)) {\n          img['crossOrigin'] = crossOrigin;\n        } else if (renderer !== 'canvas') {\n          img['crossOrigin'] = '';\n        }\n\n        if (isSVG(url[0]) && !IS_NODE) {\n          if (url[1]) {\n            url[1] *= 2;\n          }\n\n          if (url[2]) {\n            url[2] *= 2;\n          }\n        }\n\n        img.onload = function () {\n          me._cacheResource(url, img);\n\n          resolve(url);\n        };\n\n        img.onabort = function (err) {\n          if (console) {\n            console.warn('image loading aborted: ' + url[0]);\n          }\n\n          if (err) {\n            if (console) {\n              console.warn(err);\n            }\n          }\n\n          resolve(url);\n        };\n\n        img.onerror = function (err) {\n          if (err && typeof console !== 'undefined') {\n            console.warn(err);\n          }\n\n          resources.markErrorResource(url);\n          resolve(url);\n        };\n\n        loadImage(img, url);\n      }\n    };\n  };\n\n  _proto2._cacheResource = function _cacheResource(url, img) {\n    if (!this.layer || !this.resources) {\n      return;\n    }\n\n    var w = url[1],\n        h = url[2];\n\n    if (this.layer.options['cacheSvgOnCanvas'] && isSVG(url[0]) === 1 && (Browser$1.edge || Browser$1.ie)) {\n      if (isNil(w)) {\n        w = img.width || this.layer.options['defaultIconSize'][0];\n      }\n\n      if (isNil(h)) {\n        h = img.height || this.layer.options['defaultIconSize'][1];\n      }\n\n      var canvas = Canvas.createCanvas(w, h);\n      Canvas.image(canvas.getContext('2d'), img, 0, 0, w, h);\n      img = canvas;\n    }\n\n    this.resources.addResource(url, img);\n  };\n\n  return CanvasRenderer;\n}(Class);\nvar ResourceCache = function () {\n  function ResourceCache() {\n    this.resources = {};\n    this._errors = {};\n  }\n\n  var _proto3 = ResourceCache.prototype;\n\n  _proto3.addResource = function addResource(url, img) {\n    var _this3 = this;\n\n    this.resources[url[0]] = {\n      image: img,\n      width: +url[1],\n      height: +url[2],\n      refCnt: 0\n    };\n\n    if (img && !img.close && Browser$1.imageBitMap) {\n      if (img.src && isSVG(img.src)) {\n        return;\n      }\n\n      createImageBitmap(img).then(function (imageBitmap) {\n        if (!_this3.resources[url[0]]) {\n          return;\n        }\n\n        _this3.resources[url[0]].image = imageBitmap;\n      });\n    }\n  };\n\n  _proto3.isResourceLoaded = function isResourceLoaded(url, checkSVG) {\n    if (!url) {\n      return false;\n    }\n\n    var imgUrl = this._getImgUrl(url);\n\n    if (this._errors[imgUrl]) {\n      return true;\n    }\n\n    var img = this.resources[imgUrl];\n\n    if (!img) {\n      return false;\n    }\n\n    if (checkSVG && isSVG(url[0]) && (+url[1] > img.width || +url[2] > img.height)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto3.login = function login(url) {\n    var res = this.resources[url];\n\n    if (res) {\n      res.refCnt++;\n    }\n  };\n\n  _proto3.logout = function logout(url) {\n    var res = this.resources[url];\n\n    if (res && res.refCnt-- <= 0) {\n      delete this.resources[url];\n    }\n  };\n\n  _proto3.getImage = function getImage(url) {\n    var imgUrl = this._getImgUrl(url);\n\n    if (!this.isResourceLoaded(url) || this._errors[imgUrl]) {\n      return null;\n    }\n\n    return this.resources[imgUrl].image;\n  };\n\n  _proto3.markErrorResource = function markErrorResource(url) {\n    this._errors[this._getImgUrl(url)] = 1;\n  };\n\n  _proto3.merge = function merge(res) {\n    if (!res) {\n      return this;\n    }\n\n    for (var p in res.resources) {\n      var img = res.resources[p];\n      this.addResource([p, img.width, img.height], img.image);\n    }\n\n    return this;\n  };\n\n  _proto3.forEach = function forEach(fn) {\n    if (!this.resources) {\n      return this;\n    }\n\n    for (var p in this.resources) {\n      if (hasOwn(this.resources, p)) {\n        fn(p, this.resources[p]);\n      }\n    }\n\n    return this;\n  };\n\n  _proto3._getImgUrl = function _getImgUrl(url) {\n    if (!Array.isArray(url)) {\n      return url;\n    }\n\n    return url[0];\n  };\n\n  _proto3.remove = function remove() {\n    for (var p in this.resources) {\n      var res = this.resources[p];\n\n      if (res && res.image && res.image.close) {\n        res.image.close();\n      }\n    }\n\n    this.resources = {};\n  };\n\n  return ResourceCache;\n}();\n\nvar DEFAULT_MARKER_SYMBOLS = {\n  markerWidth: 10,\n  markerHeight: 10,\n  markerLineWidth: 1\n};\n\nfunction getVectorPadding() {\n  return 0.5;\n}\n\nvar DXDY = new Point(0, 0);\n\nfunction getFixedExtent(out, dx, dy, rotation, alignPoint, w, h) {\n  var dxdy = DXDY.set(dx, dy);\n  var result = out.set(dxdy.x, dxdy.y, dxdy.x + w, dxdy.y + h);\n\n  result._add(alignPoint);\n\n  if (rotation) {\n    rotateExtent(result, rotation);\n  }\n\n  return result;\n}\n\nvar SIZE = [];\nfunction getVectorMarkerFixedExtent(out, symbol, size) {\n  size = size || calVectorMarkerSize(SIZE, symbol);\n  var alignPoint = getVectorMarkerAnchor(symbol, size[0], size[1]);\n  return getFixedExtent(out, symbol['markerDx'] || 0, symbol['markerDy'] || 0, getMarkerRotation(symbol), alignPoint, size[0], size[1]);\n}\nfunction getDefaultHAlign(markerType) {\n  if (markerType === 'rectangle') {\n    return 'right';\n  } else {\n    return 'middle';\n  }\n}\nfunction getDefaultVAlign(markerType) {\n  if (markerType === 'bar' || markerType === 'pie' || markerType === 'pin') {\n    return 'top';\n  } else if (markerType === 'rectangle') {\n    return 'bottom';\n  } else {\n    return 'middle';\n  }\n}\nvar TEMP_SIZE = new Size(0, 0);\nfunction getVectorMarkerAnchor(symbol, w, h) {\n  var padding = getVectorPadding();\n  var shadow = 2 * (symbol['shadowBlur'] || 0),\n      margin = shadow + padding;\n  TEMP_SIZE.width = w;\n  TEMP_SIZE.height = h;\n  var markerType = symbol['markerType'];\n  var p = getAlignPoint(TEMP_SIZE, symbol['markerHorizontalAlignment'] || getDefaultHAlign(markerType), symbol['markerVerticalAlignment'] || getDefaultVAlign(markerType));\n\n  if (p.x !== -w / 2) {\n    p.x -= sign(p.x + w / 2) * margin;\n  }\n\n  if (p.y !== -h / 2) {\n    p.y -= sign(p.y + h / 2) * margin;\n  }\n\n  return p;\n}\nfunction calVectorMarkerSize(out, symbol) {\n  var padding = getVectorPadding(symbol);\n  var width = getValueOrDefault(symbol['markerWidth'], DEFAULT_MARKER_SYMBOLS.markerWidth);\n  var height = getValueOrDefault(symbol['markerHeight'], DEFAULT_MARKER_SYMBOLS.markerHeight);\n  var lineWidth = getValueOrDefault(symbol['markerLineWidth'], DEFAULT_MARKER_SYMBOLS.markerLineWidth),\n      shadow = 2 * ((symbol['shadowBlur'] || 0) + Math.max(Math.abs(symbol['shadowOffsetX'] || 0) + Math.abs(symbol['shadowOffsetY'] || 0))),\n      w = Math.round(width + lineWidth + shadow + padding * 2),\n      h = Math.round(height + lineWidth + shadow + padding * 2);\n  out[0] = w;\n  out[1] = h;\n  return out;\n}\nvar ROTATE_EXTENT = new PointExtent();\n\nfunction rotateExtent(fixedExtent, angle) {\n  var xmin = fixedExtent.xmin,\n      ymin = fixedExtent.ymin,\n      xmax = fixedExtent.xmax,\n      ymax = fixedExtent.ymax;\n  ROTATE_EXTENT.set(xmin, ymin, xmax, ymax);\n  return ROTATE_EXTENT.convertTo(function (p) {\n    return p._rotate(angle);\n  }, fixedExtent);\n}\n\nfunction getMarkerRotation(symbol, prop) {\n  if (prop === void 0) {\n    prop = 'markerRotation';\n  }\n\n  var r = symbol[prop];\n\n  if (!isNumber(r)) {\n    return 0;\n  }\n\n  return -r * Math.PI / 180;\n}\nfunction getImageMarkerFixedExtent(out, symbol, resources) {\n  var url = symbol['markerFile'],\n      img = resources ? resources.getImage(url) : null;\n  var width = symbol['markerWidth'] || (img ? img.width : 0),\n      height = symbol['markerHeight'] || (img ? img.height : 0);\n  TEMP_SIZE.width = width;\n  TEMP_SIZE.height = height;\n  var alignPoint = getAlignPoint(TEMP_SIZE, symbol['markerHorizontalAlignment'] || 'middle', symbol['markerVerticalAlignment'] || 'top');\n  return getFixedExtent(out, symbol['markerDx'] || 0, symbol['markerDy'] || 0, getMarkerRotation(symbol), alignPoint, width, height);\n}\nfunction getTextMarkerFixedExtent(out, symbol, textDesc) {\n  var size = textDesc['size'];\n  var alignPoint = getAlignPoint(size, symbol['textHorizontalAlignment'], symbol['textVerticalAlignment']);\n\n  if (symbol['textHaloRadius']) {\n    var r = symbol['textHaloRadius'];\n    size = size.add(r * 2, r * 2);\n  }\n\n  return getFixedExtent(out, symbol['textDx'] || 0, symbol['textDy'] || 0, getMarkerRotation(symbol, 'textRotation'), alignPoint, size.width, size.height);\n}\nvar FIXED_EXTENT = new PointExtent();\nfunction getMarkerFixedExtent(out, symbol, resources, textDesc) {\n  var extent = out || new PointExtent();\n\n  if (Array.isArray(symbol)) {\n    var symbols = symbol;\n\n    for (var i = 0; i < symbols.length; i++) {\n      getMarkerFixedExtent(extent, symbols[i], resources, textDesc[i]);\n    }\n\n    return extent;\n  }\n\n  if (isTextSymbol(symbol)) {\n    extent._combine(getTextMarkerFixedExtent(FIXED_EXTENT, symbol, textDesc));\n  }\n\n  if (isImageSymbol(symbol)) {\n    extent._combine(getImageMarkerFixedExtent(FIXED_EXTENT, symbol, resources));\n  }\n\n  if (isVectorSymbol(symbol)) {\n    extent._combine(getVectorMarkerFixedExtent(FIXED_EXTENT, symbol));\n  }\n\n  if (isPathSymbol(symbol)) {\n    extent._combine(getImageMarkerFixedExtent(FIXED_EXTENT, symbol));\n  }\n\n  return extent;\n}\nfunction isTextSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n\n  if (!isNil(symbol['textName'])) {\n    return true;\n  }\n\n  return false;\n}\nfunction isImageSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n\n  if (!isNil(symbol['markerFile'])) {\n    return true;\n  }\n\n  return false;\n}\nfunction isVectorSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n\n  if (isNil(symbol['markerFile']) && !isNil(symbol['markerType']) && symbol['markerType'] !== 'path') {\n    return true;\n  }\n\n  return false;\n}\nfunction isPathSymbol(symbol) {\n  if (!symbol) {\n    return false;\n  }\n\n  if (isNil(symbol['markerFile']) && symbol['markerType'] === 'path') {\n    return true;\n  }\n\n  return false;\n}\nvar DYNAMIC_SYMBOL_PROPS = ['markerWidth', 'markerHeight', 'markerHorizontalAlignment', 'markerVerticalAlignment', 'markerDx', 'markerDy', 'textName', 'textSize', 'textDx', 'textDy', 'textVerticalAlignment', 'textHorizontalAlignment', 'textRotation'];\nvar SIZE_SYMBOL_PROPS = ['textName', 'markerType', 'markerFile', 'textHaloRadius', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\nfunction clipLine(points, bounds, round, noCut) {\n  var parts = [];\n  var k = 0,\n      segment;\n\n  for (var j = 0, l = points.length; j < l - 1; j++) {\n    segment = clipSegment(points[j], points[j + 1], bounds, j, round, noCut);\n\n    if (!segment) {\n      continue;\n    }\n\n    parts[k] = parts[k] || [];\n    parts[k].push({\n      'point': segment[0],\n      'index': j\n    });\n\n    if (segment[1] !== points[j + 1] || j === l - 2) {\n      parts[k].push({\n        'point': segment[1],\n        'index': j + 1\n      });\n      k++;\n    }\n  }\n\n  return parts;\n}\n\nvar _lastCode;\n\nfunction clipSegment(a, b, bounds, useLastCode, round, noCut) {\n  var codeA = useLastCode ? _lastCode : _getBitCode(a, bounds),\n      codeB = _getBitCode(b, bounds),\n      codeOut,\n      p,\n      newCode;\n\n  _lastCode = codeB;\n\n  while (true) {\n    if (!(codeA | codeB)) {\n      return [a, b];\n    }\n\n    if (codeA & codeB) {\n      return false;\n    }\n\n    if (noCut) {\n      return [a, b];\n    }\n\n    codeOut = codeA || codeB;\n    p = _getEdgeIntersection(a, b, codeOut, bounds, round);\n    newCode = _getBitCode(p, bounds);\n\n    if (codeOut === codeA) {\n      a = p;\n      codeA = newCode;\n    } else {\n      b = p;\n      codeB = newCode;\n    }\n  }\n}\nfunction clipPolygon(points, bounds, round) {\n  var edges = [1, 4, 2, 8];\n  var clippedPoints, i, j, k, a, b, len, edge, p;\n\n  for (i = 0, len = points.length; i < len; i++) {\n    points[i]._code = _getBitCode(points[i], bounds);\n  }\n\n  for (k = 0; k < 4; k++) {\n    edge = edges[k];\n    clippedPoints = [];\n\n    for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n      a = points[i];\n      b = points[j];\n\n      if (!(a._code & edge)) {\n        if (b._code & edge) {\n          p = _getEdgeIntersection(b, a, edge, bounds, round);\n          p._code = _getBitCode(p, bounds);\n          clippedPoints.push(p);\n        }\n\n        clippedPoints.push(a);\n      } else if (!(b._code & edge)) {\n        p = _getEdgeIntersection(b, a, edge, bounds, round);\n        p._code = _getBitCode(p, bounds);\n        clippedPoints.push(p);\n      }\n    }\n\n    points = clippedPoints;\n  }\n\n  return points;\n}\n\nfunction _getEdgeIntersection(a, b, code, bounds, round) {\n  var dx = b.x - a.x,\n      dy = b.y - a.y,\n      min = bounds.getMin(),\n      max = bounds.getMax();\n  var x, y;\n\n  if (code & 8) {\n    x = a.x + dx * (max.y - a.y) / dy;\n    y = max.y;\n  } else if (code & 4) {\n    x = a.x + dx * (min.y - a.y) / dy;\n    y = min.y;\n  } else if (code & 2) {\n    x = max.x;\n    y = a.y + dy * (max.x - a.x) / dx;\n  } else if (code & 1) {\n    x = min.x;\n    y = a.y + dy * (min.x - a.x) / dx;\n  }\n\n  var p = new Point(x, y);\n\n  if (round) {\n    p._round();\n  }\n\n  return p;\n}\n\nfunction _getBitCode(p, bounds) {\n  var code = 0;\n\n  if (p.x < bounds.getMin().x) {\n    code |= 1;\n  } else if (p.x > bounds.getMax().x) {\n    code |= 2;\n  }\n\n  if (p.y < bounds.getMin().y) {\n    code |= 4;\n  } else if (p.y > bounds.getMax().y) {\n    code |= 8;\n  }\n\n  return code;\n}\n\nfunction withInEllipse(point, center, southeast, tolerance) {\n  point = new Point(point);\n  var a = Math.abs(southeast.x - center.x),\n      b = Math.abs(southeast.y - center.y),\n      c = Math.sqrt(Math.abs(a * a - b * b)),\n      xfocus = a >= b;\n  var f1, f2, d;\n\n  if (xfocus) {\n    f1 = new Point(center.x - c, center.y);\n    f2 = new Point(center.x + c, center.y);\n    d = a * 2;\n  } else {\n    f1 = new Point(center.x, center.y - c);\n    f2 = new Point(center.x, center.y + c);\n    d = b * 2;\n  }\n\n  return point.distanceTo(f1) + point.distanceTo(f2) <= d + 2 * tolerance;\n}\n\nvar Symbolizer = function () {\n  function Symbolizer() {}\n\n  var _proto = Symbolizer.prototype;\n\n  _proto.getMap = function getMap() {\n    return this.geometry.getMap();\n  };\n\n  _proto.getPainter = function getPainter() {\n    return this.painter;\n  };\n\n  _proto.isDynamicSize = function isDynamicSize() {\n    return false;\n  };\n\n  Symbolizer.testColor = function testColor(prop) {\n    if (!prop || !isString(prop)) {\n      return false;\n    }\n\n    if (COLOR_PROPERTIES.indexOf(prop) >= 0) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return Symbolizer;\n}();\n\nvar CanvasSymbolizer = function (_Symbolizer) {\n  _inheritsLoose(CanvasSymbolizer, _Symbolizer);\n\n  function CanvasSymbolizer() {\n    return _Symbolizer.apply(this, arguments) || this;\n  }\n\n  var _proto = CanvasSymbolizer.prototype;\n\n  _proto._prepareContext = function _prepareContext(ctx) {\n    if (isFunctionDefinition(this.symbol['opacity'])) {\n      if (!this._opacityFn) {\n        this._opacityFn = interpolated(this.symbol['opacity']);\n      }\n    } else {\n      delete this._opacityFn;\n    }\n\n    if (isNumber(this.symbol['opacity'])) {\n      if (ctx.globalAlpha !== this.symbol['opacity']) {\n        ctx.globalAlpha = this.symbol['opacity'];\n      }\n    } else if (this._opacityFn) {\n      var map = this.getMap();\n      ctx.globalAlpha = this._opacityFn(map.getZoom());\n    } else if (ctx.globalAlpha !== 1) {\n      ctx.globalAlpha = 1;\n    }\n  };\n\n  _proto.prepareCanvas = function prepareCanvas(ctx, style, resources) {\n    if (ctx.setLineDash && isArrayHasData(style['lineDasharray'])) {\n      ctx.setLineDash(style['lineDasharray']);\n    }\n\n    var isHitTesting = this.getPainter().isHitTesting();\n    Canvas.prepareCanvas(ctx, style, resources, isHitTesting);\n  };\n\n  _proto.remove = function remove() {};\n\n  _proto.setZIndex = function setZIndex() {};\n\n  _proto.show = function show() {};\n\n  _proto.hide = function hide() {};\n\n  _proto._defineStyle = function _defineStyle(style) {\n    return loadGeoSymbol(style, this.geometry);\n  };\n\n  return CanvasSymbolizer;\n}(Symbolizer);\n\nfunction getImage(resources, url) {\n  var img = resources && resources.getImage(url);\n  return img || null;\n}\nfunction drawVectorMarker(ctx, point, symbol, resources) {\n  var strokeAndFill = translateMarkerLineAndFill(symbol);\n  var style = symbol,\n      markerType = style['markerType'].toLowerCase(),\n      vectorArray = getVectorMarkerPoints(markerType, style['markerWidth'], style['markerHeight']),\n      lineOpacity = strokeAndFill['lineOpacity'],\n      fillOpacity = strokeAndFill['polygonOpacity'];\n  var gradient = isGradient(strokeAndFill['polygonFill']);\n\n  if (gradient) {\n    var gradientExtent;\n\n    if (isGradient(strokeAndFill['polygonFill'])) {\n      if (!gradientExtent) {\n        gradientExtent = getGraidentExtent(point, style.markerWidth, style.markerHeight);\n      }\n\n      strokeAndFill['polygonGradientExtent'] = gradientExtent;\n    }\n  }\n\n  Canvas.prepareCanvas(ctx, strokeAndFill, resources);\n  var width = style['markerWidth'],\n      height = style['markerHeight'],\n      hLineWidth = style['markerLineWidth'] / 2;\n\n  if (markerType === 'ellipse') {\n    Canvas.ellipse(ctx, point, width / 2, height / 2, height / 2, lineOpacity, fillOpacity);\n  } else if (markerType === 'cross' || markerType === 'x') {\n    for (var j = vectorArray.length - 1; j >= 0; j--) {\n      vectorArray[j]._add(point);\n    }\n\n    Canvas.path(ctx, vectorArray.slice(0, 2), lineOpacity);\n    Canvas.path(ctx, vectorArray.slice(2, 4), lineOpacity);\n  } else if (markerType === 'diamond' || markerType === 'bar' || markerType === 'square' || markerType === 'rectangle' || markerType === 'triangle') {\n    if (markerType === 'bar') {\n      point = point.add(0, -hLineWidth);\n    } else if (markerType === 'rectangle') {\n      point = point.add(hLineWidth, hLineWidth);\n    }\n\n    for (var _j = vectorArray.length - 1; _j >= 0; _j--) {\n      vectorArray[_j]._add(point);\n    }\n\n    Canvas.polygon(ctx, vectorArray, lineOpacity, fillOpacity);\n  } else if (markerType === 'pin') {\n    point = point.add(0, -hLineWidth);\n\n    for (var _j2 = vectorArray.length - 1; _j2 >= 0; _j2--) {\n      vectorArray[_j2]._add(point);\n    }\n\n    var lineCap = ctx.lineCap;\n    ctx.lineCap = 'round';\n    Canvas.bezierCurveAndFill(ctx, vectorArray, lineOpacity, fillOpacity);\n    ctx.lineCap = lineCap;\n  } else if (markerType === 'pie') {\n    point = point.add(0, -hLineWidth);\n    var angle = Math.atan(width / 2 / height) * 180 / Math.PI;\n    var _lineCap = ctx.lineCap;\n    ctx.lineCap = 'round';\n    Canvas.sector(ctx, point, height, [90 - angle, 90 + angle], lineOpacity, fillOpacity);\n    ctx.lineCap = _lineCap;\n  } else {\n    throw new Error('unsupported markerType: ' + markerType);\n  }\n\n  return ctx.canvas;\n}\n\nfunction getGraidentExtent(point, w, h) {\n  var e = new PointExtent();\n\n  e._combine(point);\n\n  e['xmin'] += -w / 2;\n  e['ymin'] += -h / 2;\n  e['xmax'] += w / 2;\n  e['ymax'] += h / 2;\n  return e;\n}\n\nfunction translateMarkerLineAndFill(s) {\n  var result = {\n    'lineColor': s['markerLineColor'],\n    'linePatternFile': s['markerLinePatternFile'],\n    'lineWidth': s['markerLineWidth'],\n    'lineOpacity': s['markerLineOpacity'],\n    'lineDasharray': s['markerLineDasharray'],\n    'lineCap': 'butt',\n    'lineJoin': 'round',\n    'polygonFill': s['markerFill'],\n    'polygonPatternFile': s['markerFillPatternFile'],\n    'polygonOpacity': s['markerFillOpacity']\n  };\n\n  if (result['lineWidth'] === 0) {\n    result['lineOpacity'] = 0;\n  }\n\n  return result;\n}\nfunction getVectorMarkerPoints(markerType, width, height) {\n  var hh = height / 2,\n      hw = width / 2;\n  var left = 0,\n      top = 0;\n  var v0, v1, v2, v3;\n\n  if (markerType === 'triangle') {\n    v0 = new Point(left, top - hh);\n    v1 = new Point(left - hw, top + hh);\n    v2 = new Point(left + hw, top + hh);\n    return [v0, v1, v2];\n  } else if (markerType === 'cross') {\n    v0 = new Point(left - hw, top);\n    v1 = new Point(left + hw, top);\n    v2 = new Point(left, top - hh);\n    v3 = new Point(left, top + hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'diamond') {\n    v0 = new Point(left - hw, top);\n    v1 = new Point(left, top - hh);\n    v2 = new Point(left + hw, top);\n    v3 = new Point(left, top + hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'square') {\n    v0 = new Point(left - hw, top + hh);\n    v1 = new Point(left + hw, top + hh);\n    v2 = new Point(left + hw, top - hh);\n    v3 = new Point(left - hw, top - hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'rectangle') {\n    v0 = new Point(left, top);\n    v1 = v0.add(width, 0);\n    v2 = v0.add(width, height);\n    v3 = v0.add(0, height);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'x') {\n    v0 = new Point(left - hw, top + hh);\n    v1 = new Point(left + hw, top - hh);\n    v2 = new Point(left + hw, top + hh);\n    v3 = new Point(left - hw, top - hh);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'bar') {\n    v0 = new Point(left - hw, top - height);\n    v1 = new Point(left + hw, top - height);\n    v2 = new Point(left + hw, top);\n    v3 = new Point(left - hw, top);\n    return [v0, v1, v2, v3];\n  } else if (markerType === 'pin' || markerType === 'pie') {\n    var extWidth = height * Math.atan(hw / hh);\n    v0 = new Point(left, top);\n    v1 = new Point(left - extWidth, top - height);\n    v2 = new Point(left + extWidth, top - height);\n    v3 = new Point(left, top);\n    return [v0, v1, v2, v3];\n  }\n\n  return [];\n}\n\nvar TEMP_POINT0$1 = new Point(0, 0);\nvar TEMP_POINT1 = new Point(0, 0);\nvar TEMP_POINT2 = new Point(0, 0);\nvar TEMP_POINT3 = new Point(0, 0);\n\nvar PointSymbolizer = function (_CanvasSymbolizer) {\n  _inheritsLoose(PointSymbolizer, _CanvasSymbolizer);\n\n  function PointSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _CanvasSymbolizer.call(this) || this;\n    _this.symbol = symbol;\n    _this.geometry = geometry;\n    _this.painter = painter;\n    return _this;\n  }\n\n  var _proto = PointSymbolizer.prototype;\n\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    var extent = new PointExtent();\n\n    var renderPoints = this._getRenderPoints()[0];\n\n    for (var i = renderPoints.length - 1; i >= 0; i--) {\n      if (renderPoints[i]) {\n        extent._combine(map._pointAtResToPoint(renderPoints[i], glRes));\n      }\n    }\n\n    return extent;\n  };\n\n  _proto.isDynamicSize = function isDynamicSize() {\n    var symbol = this.symbol;\n    return isFunctionDefinition(symbol['markerWidth']) || isFunctionDefinition(symbol['markerHeight']) || isFunctionDefinition(symbol['textSize']);\n  };\n\n  _proto._rotateExtent = function _rotateExtent(fixedExtent, angle) {\n    return fixedExtent.convertTo(function (p) {\n      return p._rotate(angle);\n    });\n  };\n\n  _proto._getRenderPoints = function _getRenderPoints() {\n    var painter = this.getPainter();\n    var placement = painter.isSpriting() ? 'center' : this.getPlacement();\n    return this.getPainter().getRenderPoints(placement);\n  };\n\n  _proto._getRenderContainerPoints = function _getRenderContainerPoints(ignoreAltitude) {\n    var painter = this.getPainter();\n\n    if (painter.isSpriting()) {\n      return this._getRenderPoints()[0];\n    }\n\n    var geometry = this.geometry;\n    var dxdy = this.getDxDy();\n    var cpoints;\n\n    if (geometry._cPoint && !ignoreAltitude) {\n      var p = ignoreAltitude ? TEMP_POINT2 : TEMP_POINT3;\n      p.set(geometry._cPoint.x, geometry._cPoint.y);\n      var containerOffset = painter.containerOffset;\n\n      p._sub(containerOffset);\n\n      var dx = dxdy.x,\n          dy = dxdy.y;\n\n      if (dx || dy) {\n        p._add(dx || 0, dy || 0);\n      }\n\n      cpoints = [p];\n    } else {\n      var points = this._getRenderPoints()[0];\n\n      cpoints = this.painter._pointContainerPoints(points, dxdy.x, dxdy.y, ignoreAltitude, true, this.getPlacement());\n    }\n\n    if (!cpoints || !Array.isArray(cpoints[0])) {\n      return cpoints;\n    }\n\n    var flat = [];\n\n    for (var i = 0, l = cpoints.length; i < l; i++) {\n      for (var ii = 0, ll = cpoints[i].length; ii < ll; ii++) {\n        flat.push(cpoints[i][ii]);\n      }\n    }\n\n    return flat;\n  };\n\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['markerPlacement'];\n  };\n\n  _proto.getRotation = function getRotation() {\n    return getMarkerRotation(this.style);\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    var dx = s['markerDx'],\n        dy = s['markerDy'];\n    return new Point(dx, dy);\n  };\n\n  _proto._getRotationAt = function _getRotationAt(i) {\n    var r = this.getRotation();\n\n    if (!r) {\n      r = 0;\n    }\n\n    var rotations = this._getRenderPoints()[1];\n\n    if (!rotations || !rotations[i]) {\n      return r;\n    }\n\n    var map = this.getMap();\n    var p0 = rotations[i][0],\n        p1 = rotations[i][1];\n\n    if (map.isTransforming()) {\n      var glRes = map.getGLRes();\n      p0 = map._pointAtResToContainerPoint(rotations[i][0], glRes, 0, TEMP_POINT0$1);\n      p1 = map._pointAtResToContainerPoint(rotations[i][1], glRes, 0, TEMP_POINT1);\n      return r + computeDegree(p0.x, p0.y, p1.x, p1.y);\n    } else {\n      return r + -computeDegree(p0.x, p0.y, p1.x, p1.y);\n    }\n  };\n\n  _proto._rotate = function _rotate(ctx, origin, rotation) {\n    if (rotation) {\n      var dxdy = this.getDxDy();\n      var p = origin.sub(dxdy);\n      ctx.save();\n      ctx.translate(p.x, p.y);\n      ctx.rotate(rotation);\n      return dxdy;\n    }\n\n    return null;\n  };\n\n  return PointSymbolizer;\n}(CanvasSymbolizer);\n\nvar DebugSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(DebugSymbolizer, _PointSymbolizer);\n\n  function DebugSymbolizer() {\n    return _PointSymbolizer.apply(this, arguments) || this;\n  }\n\n  var _proto = DebugSymbolizer.prototype;\n\n  _proto.getPlacement = function getPlacement() {\n    return 'point';\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    return new Point(0, 0);\n  };\n\n  _proto.symbolize = function symbolize(ctx) {\n    var geometry = this.geometry,\n        layer = geometry.getLayer();\n\n    if (!geometry.options['debug'] && layer && !layer.options['debug']) {\n      return;\n    }\n\n    var map = this.getMap();\n\n    if (!map || map.isZooming()) {\n      return;\n    }\n\n    var color = layer.options['debugOutline'],\n        op = 1;\n    ctx.strokeStyle = color;\n    ctx.fillStyle = color;\n    var outline = geometry.getContainerExtent().toArray();\n    Canvas.polygon(ctx, [outline], op, 0);\n\n    var points = this._getRenderContainerPoints(),\n        id = this.geometry.getId(),\n        cross = getVectorMarkerPoints('cross', 10, 10);\n\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n\n      if (!isNil(id)) {\n        Canvas.fillText(ctx, id, p.add(8, -4), color);\n      }\n\n      var c = [];\n\n      for (var ii = 0; ii < cross.length; ii++) {\n        c.push(cross[ii].add(p));\n      }\n\n      Canvas.path(ctx, c.slice(0, 2), op);\n      Canvas.path(ctx, c.slice(2, 4), op);\n    }\n  };\n\n  return DebugSymbolizer;\n}(PointSymbolizer);\n\nvar TEMP_SIZE$1 = new Size(1, 1);\n\nvar ImageMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(ImageMarkerSymbolizer, _PointSymbolizer);\n\n  ImageMarkerSymbolizer.test = function test(symbol) {\n    return isImageSymbol(symbol);\n  };\n\n  function ImageMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this.style = _this._defineStyle(_this.translate());\n    return _this;\n  }\n\n  var _proto = ImageMarkerSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n\n    if (!this.painter.isHitTesting() && (style['markerWidth'] === 0 || style['markerHeight'] === 0 || style['markerOpacity'] === 0)) {\n      return;\n    }\n\n    var cookedPoints = this._getRenderContainerPoints();\n\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n\n    var img = this._getImage(resources);\n\n    if (!img) {\n      if (typeof console !== 'undefined') {\n        console.warn('no img found for ' + (this.style['markerFile'] || this._url[0]));\n      }\n\n      return;\n    }\n\n    this._prepareContext(ctx);\n\n    var width = style['markerWidth'];\n    var height = style['markerHeight'];\n\n    if (!isNumber(width) || !isNumber(height)) {\n      width = img.width;\n      height = img.height;\n      style['markerWidth'] = width;\n      style['markerHeight'] = height;\n      var imgURL = style['markerFile'];\n\n      if (!resources.isResourceLoaded(imgURL)) {\n        resources.addResource(imgURL, img);\n      }\n\n      var painter = this.getPainter();\n\n      if (!painter.isSpriting()) {\n        painter.removeCache();\n      }\n    }\n\n    var alpha;\n\n    if (this.symbol['markerType'] !== 'path' && isNumber(style['markerOpacity']) && style['markerOpacity'] < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= style['markerOpacity'];\n    }\n\n    TEMP_SIZE$1.width = width;\n    TEMP_SIZE$1.height = height;\n    var alignPoint = getAlignPoint(TEMP_SIZE$1, style['markerHorizontalAlignment'], style['markerVerticalAlignment']);\n\n    for (var i = 0, len = cookedPoints.length; i < len; i++) {\n      var p = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, p, this._getRotationAt(i)) : null;\n\n      if (origin) {\n        p = origin;\n      }\n\n      Canvas.image(ctx, img, p.x + alignPoint.x, p.y + alignPoint.y, width, height);\n\n      if (origin) {\n        ctx.restore();\n      }\n    }\n\n    if (alpha !== undefined) {\n      ctx.globalAlpha = alpha;\n    }\n  };\n\n  _proto._getImage = function _getImage(resources) {\n    return getImage(resources, this.style['markerFile']);\n  };\n\n  _proto.getFixedExtent = function getFixedExtent(resources) {\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    return getImageMarkerFixedExtent(this._fixedExtent, this.style, resources);\n  };\n\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    return {\n      'markerFile': s['markerFile'],\n      'markerOpacity': getValueOrDefault(s['markerOpacity'], 1),\n      'markerWidth': getValueOrDefault(s['markerWidth'], null),\n      'markerHeight': getValueOrDefault(s['markerHeight'], null),\n      'markerRotation': getValueOrDefault(s['markerRotation'], 0),\n      'markerDx': getValueOrDefault(s['markerDx'], 0),\n      'markerDy': getValueOrDefault(s['markerDy'], 0),\n      'markerHorizontalAlignment': getValueOrDefault(s['markerHorizontalAlignment'], 'middle'),\n      'markerVerticalAlignment': getValueOrDefault(s['markerVerticalAlignment'], 'top')\n    };\n  };\n\n  return ImageMarkerSymbolizer;\n}(PointSymbolizer);\n\nvar TEMP_COORD0$1 = new Coordinate(0, 0);\nvar TEMP_COORD1$1 = new Coordinate(0, 0);\n\nvar StrokeAndFillSymbolizer = function (_CanvasSymbolizer) {\n  _inheritsLoose(StrokeAndFillSymbolizer, _CanvasSymbolizer);\n\n  StrokeAndFillSymbolizer.test = function test(symbol, geometry) {\n    if (!symbol) {\n      return false;\n    }\n\n    if (geometry && geometry.type === 'Point') {\n      return false;\n    }\n\n    for (var p in symbol) {\n      var f = p.slice(0, 4);\n\n      if (f === 'line' || f === 'poly') {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  function StrokeAndFillSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _CanvasSymbolizer.call(this) || this;\n    _this.symbol = symbol;\n    _this.geometry = geometry;\n    _this.painter = painter;\n\n    if (geometry.type === 'Point') {\n      return _assertThisInitialized(_this);\n    }\n\n    _this.style = _this._defineStyle(_this.translate());\n    return _this;\n  }\n\n  var _proto = StrokeAndFillSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n\n    if (style['polygonOpacity'] === 0 && style['lineOpacity'] === 0 && !this.painter.isHitTesting()) {\n      return;\n    }\n\n    var paintParams = this._getPaintParams();\n\n    if (!paintParams) {\n      return;\n    }\n\n    this._prepareContext(ctx);\n\n    var isGradient$$1 = isGradient(style['lineColor']),\n        isPath = this.geometry.getJSONType() === 'Polygon' || this.geometry.type === 'LineString';\n\n    if (isGradient$$1 && (style['lineColor']['places'] || !isPath)) {\n      style['lineGradientExtent'] = this.geometry.getContainerExtent()._expand(style['lineWidth']);\n    }\n\n    if (isGradient(style['polygonFill'])) {\n      style['polygonGradientExtent'] = this.geometry.getContainerExtent();\n    }\n\n    var points = paintParams[0],\n        isSplitted = this.geometry.getJSONType() === 'Polygon' && points.length > 0 && Array.isArray(points[0][0]) || this.geometry.type === 'LineString' && points.length > 0 && Array.isArray(points[0]);\n\n    if (isSplitted) {\n      for (var i = 0; i < points.length; i++) {\n        this.prepareCanvas(ctx, style, resources);\n\n        if (isGradient$$1 && isPath && !style['lineColor']['places']) {\n          this._createGradient(ctx, points[i], style['lineColor']);\n        }\n\n        var params = [ctx, points[i]];\n\n        if (paintParams.length > 1) {\n          params.push.apply(params, paintParams.slice(1));\n        }\n\n        params.push(style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n\n        this.geometry._paintOn.apply(this.geometry, params);\n      }\n    } else {\n      this.prepareCanvas(ctx, style, resources);\n\n      if (isGradient$$1 && isPath && !style['lineColor']['places']) {\n        this._createGradient(ctx, points, style['lineColor']);\n      }\n\n      var _params = [ctx];\n\n      _params.push.apply(_params, paintParams);\n\n      _params.push(style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n\n      this.geometry._paintOn.apply(this.geometry, _params);\n    }\n\n    if (ctx.setLineDash && Array.isArray(style['lineDasharray'])) {\n      ctx.setLineDash([]);\n    }\n  };\n\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n\n    var extent = this.geometry._getPrjExtent();\n\n    if (!extent) {\n      return null;\n    }\n\n    if (!this._extMin || !this._extMax) {\n      this._extMin = new Coordinate(0, 0);\n      this._extMax = new Coordinate(0, 0);\n    }\n\n    this._extMin.x = extent['xmin'];\n    this._extMin.y = extent['ymin'];\n    this._extMax.x = extent['xmax'];\n    this._extMax.y = extent['ymax'];\n\n    var min = map._prjToPoint(this._extMin, undefined, TEMP_COORD0$1),\n        max = map._prjToPoint(this._extMax, undefined, TEMP_COORD1$1);\n\n    if (!this._pxExtent) {\n      this._pxExtent = new PointExtent(min, max);\n    } else {\n      this._pxExtent.set(Math.min(min.x, max.x), Math.min(min.y, max.y), Math.max(min.x, max.x), Math.max(min.y, max.y));\n    }\n\n    return this._pxExtent;\n  };\n\n  _proto.getFixedExtent = function getFixedExtent() {\n    var t = this.style['lineWidth'] / 2;\n    return new PointExtent(-t, -t, t, t);\n  };\n\n  _proto._getPaintParams = function _getPaintParams() {\n    return this.getPainter().getPaintParams(this.style['lineDx'], this.style['lineDy']);\n  };\n\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'lineColor': getValueOrDefault(s['lineColor'], '#000'),\n      'lineWidth': getValueOrDefault(s['lineWidth'], 2),\n      'lineOpacity': getValueOrDefault(s['lineOpacity'], 1),\n      'lineDasharray': getValueOrDefault(s['lineDasharray'], []),\n      'lineCap': getValueOrDefault(s['lineCap'], 'butt'),\n      'lineJoin': getValueOrDefault(s['lineJoin'], 'miter'),\n      'linePatternFile': getValueOrDefault(s['linePatternFile'], null),\n      'lineDx': getValueOrDefault(s['lineDx'], 0),\n      'lineDy': getValueOrDefault(s['lineDy'], 0),\n      'polygonFill': getValueOrDefault(s['polygonFill'], null),\n      'polygonOpacity': getValueOrDefault(s['polygonOpacity'], 1),\n      'polygonPatternFile': getValueOrDefault(s['polygonPatternFile'], null),\n      'polygonPatternDx': getValueOrDefault(s['polygonPatternDx'], 0),\n      'polygonPatternDy': getValueOrDefault(s['polygonPatternDy'], 0),\n      'linePatternDx': getValueOrDefault(s['linePatternDx'], 0),\n      'linePatternDy': getValueOrDefault(s['linePatternDy'], 0)\n    };\n\n    if (result['lineWidth'] === 0) {\n      result['lineOpacity'] = 0;\n    }\n\n    if (this.geometry.type === 'LineString' && !result['polygonFill']) {\n      result['polygonFill'] = result['lineColor'];\n    }\n\n    return result;\n  };\n\n  _proto._createGradient = function _createGradient(ctx, points, lineColor) {\n    if (!Array.isArray(points) || !points.length) {\n      return;\n    }\n\n    var len = points.length;\n    var grad = ctx.createLinearGradient(points[0].x, points[0].y, points[len - 1].x, points[len - 1].y);\n    lineColor['colorStops'].forEach(function (stop) {\n      grad.addColorStop.apply(grad, stop);\n    });\n    ctx.strokeStyle = grad;\n  };\n\n  return StrokeAndFillSymbolizer;\n}(CanvasSymbolizer);\n\nvar TextMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(TextMarkerSymbolizer, _PointSymbolizer);\n\n  TextMarkerSymbolizer.test = function test(symbol) {\n    return isTextSymbol(symbol);\n  };\n\n  function TextMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n\n    var style = _this.translate();\n\n    _this._dynamic = hasFunctionDefinition(style);\n    _this.style = _this._defineStyle(style);\n\n    if (_this.style['textWrapWidth'] === 0) {\n      return _assertThisInitialized(_this);\n    }\n\n    _this.strokeAndFill = _this._defineStyle(_this.translateLineAndFill(_this.style));\n    return _this;\n  }\n\n  var _proto = TextMarkerSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx, resources) {\n    if (!this.painter.isHitTesting() && (this.style['textSize'] === 0 || !this.style['textOpacity'] && (!this.style['textHaloRadius'] || !this.style['textHaloOpacity']) || this.style['textWrapWidth'] === 0)) {\n      return;\n    }\n\n    var cookedPoints = this._getRenderContainerPoints();\n\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n\n    var style = this.style,\n        strokeAndFill = this.strokeAndFill;\n    var textContent = replaceVariable(this.style['textName'], this.geometry.getProperties());\n\n    if (this._dynamic) {\n      delete this._textDesc;\n    }\n\n    var textDesc = this._textDesc = this._textDesc || describeText(textContent, this.style);\n\n    this._prepareContext(ctx);\n\n    this.prepareCanvas(ctx, strokeAndFill, resources);\n    Canvas.prepareCanvasFont(ctx, style);\n\n    for (var i = 0, len = cookedPoints.length; i < len; i++) {\n      var p = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, p, this._getRotationAt(i)) : null;\n\n      if (origin) {\n        p = origin;\n      }\n\n      Canvas.text(ctx, textContent, p, style, textDesc);\n\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['textPlacement'];\n  };\n\n  _proto.getRotation = function getRotation() {\n    var r = this.style['textRotation'];\n\n    if (!isNumber(r)) {\n      return null;\n    }\n\n    return -r * Math.PI / 180;\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    return new Point(s['textDx'], s['textDy']);\n  };\n\n  _proto.getFixedExtent = function getFixedExtent() {\n    var textDesc = this.geometry.getTextDesc();\n\n    if (Array.isArray(textDesc)) {\n      textDesc = textDesc[this._index];\n    }\n\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n\n    if (!textDesc) {\n      return this._fixedExtent;\n    }\n\n    return getTextMarkerFixedExtent(this._fixedExtent, this.style, textDesc);\n  };\n\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'textName': s['textName'],\n      'textFaceName': getValueOrDefault(s['textFaceName'], 'monospace'),\n      'textWeight': getValueOrDefault(s['textWeight'], 'normal'),\n      'textStyle': getValueOrDefault(s['textStyle'], 'normal'),\n      'textSize': getValueOrDefault(s['textSize'], DEFAULT_TEXT_SIZE),\n      'textFont': getValueOrDefault(s['textFont'], null),\n      'textFill': getValueOrDefault(s['textFill'], '#000'),\n      'textOpacity': getValueOrDefault(s['textOpacity'], 1),\n      'textHaloFill': getValueOrDefault(s['textHaloFill'], '#ffffff'),\n      'textHaloRadius': getValueOrDefault(s['textHaloRadius'], 0),\n      'textHaloOpacity': getValueOrDefault(s['textHaloOpacity'], 1),\n      'textWrapWidth': getValueOrDefault(s['textWrapWidth'], null),\n      'textWrapCharacter': getValueOrDefault(s['textWrapCharacter'], '\\n'),\n      'textLineSpacing': getValueOrDefault(s['textLineSpacing'], 0),\n      'textDx': getValueOrDefault(s['textDx'], 0),\n      'textDy': getValueOrDefault(s['textDy'], 0),\n      'textHorizontalAlignment': getValueOrDefault(s['textHorizontalAlignment'], 'middle'),\n      'textVerticalAlignment': getValueOrDefault(s['textVerticalAlignment'], 'middle'),\n      'textAlign': getValueOrDefault(s['textAlign'], 'center'),\n      'textRotation': getValueOrDefault(s['textRotation'], 0),\n      'textMaxWidth': getValueOrDefault(s['textMaxWidth'], 0),\n      'textMaxHeight': getValueOrDefault(s['textMaxHeight'], 0)\n    };\n\n    if (result['textMaxWidth'] > 0 && (!result['textWrapWidth'] || result['textWrapWidth'] > result['textMaxWidth'])) {\n      if (!result['textWrapWidth']) {\n        result['textMaxHeight'] = 1;\n      }\n\n      result['textWrapWidth'] = result['textMaxWidth'];\n    }\n\n    return result;\n  };\n\n  _proto.translateLineAndFill = function translateLineAndFill(s) {\n    return {\n      'lineColor': s['textHaloRadius'] ? s['textHaloFill'] : s['textFill'],\n      'lineWidth': s['textHaloRadius'],\n      'lineOpacity': s['textOpacity'],\n      'lineDasharray': null,\n      'lineCap': 'butt',\n      'lineJoin': 'round',\n      'polygonFill': s['textFill'],\n      'polygonOpacity': s['textOpacity']\n    };\n  };\n\n  return TextMarkerSymbolizer;\n}(PointSymbolizer);\n\nvar MARKER_SIZE = [];\n\nvar VectorMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(VectorMarkerSymbolizer, _PointSymbolizer);\n\n  VectorMarkerSymbolizer.test = function test(symbol) {\n    return isVectorSymbol(symbol);\n  };\n\n  function VectorMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n\n    var style = _this.translate();\n\n    _this._dynamic = hasFunctionDefinition(style);\n    _this.style = _this._defineStyle(style);\n    _this.strokeAndFill = _this._defineStyle(translateMarkerLineAndFill(_this.style));\n    _this.padding = 0;\n    return _this;\n  }\n\n  var _proto = VectorMarkerSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n\n    if (!this.painter.isHitTesting() && (style['markerWidth'] === 0 || style['markerHeight'] === 0 || style['polygonOpacity'] === 0 && style['lineOpacity'] === 0)) {\n      return;\n    }\n\n    var cookedPoints = this._getRenderContainerPoints();\n\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n\n    this._prepareContext(ctx);\n\n    if (this.getPainter().isSpriting() || this.geometry.getLayer().getMask() === this.geometry || this._dynamic || this.geometry.getLayer().options['cacheVectorOnCanvas'] === false) {\n      this._drawMarkers(ctx, cookedPoints, resources);\n    } else {\n      this._drawMarkersWithCache(ctx, cookedPoints, resources);\n    }\n  };\n\n  _proto._drawMarkers = function _drawMarkers(ctx, cookedPoints, resources) {\n    for (var i = cookedPoints.length - 1; i >= 0; i--) {\n      var point = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, point, this._getRotationAt(i)) : null;\n\n      if (origin) {\n        point = origin;\n      }\n\n      this._drawVectorMarker(ctx, point, resources);\n\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n\n  _proto._drawMarkersWithCache = function _drawMarkersWithCache(ctx, cookedPoints, resources) {\n    var stamp = this._stampSymbol();\n\n    var image = resources.getImage(stamp);\n\n    if (!image) {\n      image = this._createMarkerImage(ctx, resources);\n      resources.addResource([stamp, image.width, image.height], image);\n    }\n\n    var anchor = getVectorMarkerAnchor(this.style, image.width, image.height);\n\n    for (var i = cookedPoints.length - 1; i >= 0; i--) {\n      var point = cookedPoints[i];\n      var origin = this.getRotation() ? this._rotate(ctx, point, this._getRotationAt(i)) : null;\n\n      if (origin) {\n        point = origin;\n      }\n\n      Canvas.image(ctx, image, point.x + anchor.x, point.y + anchor.y);\n\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n\n  _proto._createMarkerImage = function _createMarkerImage(ctx, resources) {\n    var canvasClass = ctx.canvas.constructor,\n        size = calVectorMarkerSize(MARKER_SIZE, this.style),\n        canvas = Canvas.createCanvas(size[0], size[1], canvasClass),\n        point = this._getCacheImageAnchor(size[0], size[1]);\n\n    var context = canvas.getContext('2d');\n\n    this._drawVectorMarker(context, point, resources);\n\n    return canvas;\n  };\n\n  _proto._stampSymbol = function _stampSymbol() {\n    if (!this._stamp) {\n      this._stamp = hashCode([this.style['markerType'], isGradient(this.style['markerFill']) ? getGradientStamp(this.style['markerFill']) : this.style['markerFill'], this.style['markerFillOpacity'], this.style['markerFillPatternFile'], isGradient(this.style['markerLineColor']) ? getGradientStamp(this.style['markerLineColor']) : this.style['markerLineColor'], this.style['markerLineWidth'], this.style['markerLineOpacity'], this.style['markerLineDasharray'] ? this.style['markerLineDasharray'].join(',') : '', this.style['markerLinePatternFile'], this.style['markerWidth'], this.style['markerHeight'], this.style['markerHorizontalAlignment'], this.style['markerVerticalAlignment']].join('_'));\n    }\n\n    return this._stamp;\n  };\n\n  _proto._getCacheImageAnchor = function _getCacheImageAnchor(w, h) {\n    var shadow = 2 * (this.symbol['shadowBlur'] || 0),\n        margin = shadow + this.padding;\n    var markerType = this.style['markerType'];\n\n    if (markerType === 'bar' || markerType === 'pie' || markerType === 'pin') {\n      return new Point(w / 2, h - margin);\n    } else if (markerType === 'rectangle') {\n      return new Point(margin, margin);\n    } else {\n      return new Point(w / 2, h / 2);\n    }\n  };\n\n  _proto._getGraidentExtent = function _getGraidentExtent(points) {\n    var e = new PointExtent(),\n        dxdy = this.getDxDy(),\n        m = this.getFixedExtent();\n\n    if (Array.isArray(points)) {\n      for (var i = points.length - 1; i >= 0; i--) {\n        e._combine(points[i]);\n      }\n    } else {\n      e._combine(points);\n    }\n\n    e['xmin'] += m['xmin'] - dxdy.x;\n    e['ymin'] += m['ymin'] - dxdy.y;\n    e['xmax'] += m['xmax'] - dxdy.x;\n    e['ymax'] += m['ymax'] - dxdy.y;\n    return e;\n  };\n\n  _proto._drawVectorMarker = function _drawVectorMarker(ctx, point, resources) {\n    drawVectorMarker(ctx, point, this.style, resources);\n  };\n\n  _proto.getFixedExtent = function getFixedExtent() {\n    var isDynamic = this.isDynamicSize();\n    var w = this.style.markerWidth;\n    var h = this.style.markerHeight;\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n    return getVectorMarkerFixedExtent(this._fixedExtent, this.style, isDynamic ? [128, 128 * h / w] : null);\n  };\n\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'markerType': getValueOrDefault(s['markerType'], 'ellipse'),\n      'markerFill': getValueOrDefault(s['markerFill'], '#00f'),\n      'markerFillOpacity': getValueOrDefault(s['markerFillOpacity'], 1),\n      'markerFillPatternFile': getValueOrDefault(s['markerFillPatternFile'], null),\n      'markerLineColor': getValueOrDefault(s['markerLineColor'], '#000'),\n      'markerLineWidth': getValueOrDefault(s['markerLineWidth'], DEFAULT_MARKER_SYMBOLS.markerLineWidth),\n      'markerLineOpacity': getValueOrDefault(s['markerLineOpacity'], 1),\n      'markerLineDasharray': getValueOrDefault(s['markerLineDasharray'], []),\n      'markerLinePatternFile': getValueOrDefault(s['markerLinePatternFile'], null),\n      'markerDx': getValueOrDefault(s['markerDx'], 0),\n      'markerDy': getValueOrDefault(s['markerDy'], 0),\n      'markerWidth': getValueOrDefault(s['markerWidth'], DEFAULT_MARKER_SYMBOLS.markerWidth),\n      'markerHeight': getValueOrDefault(s['markerHeight'], DEFAULT_MARKER_SYMBOLS.markerHeight),\n      'markerRotation': getValueOrDefault(s['markerRotation'], 0),\n      'shadowBlur': getValueOrDefault(s['shadowBlur'], 0),\n      'shadowOffsetX': getValueOrDefault(s['shadowOffsetX'], 0),\n      'shadowOffsetY': getValueOrDefault(s['shadowOffsetY'], 0)\n    };\n    var markerType = result['markerType'];\n    var ha = getDefaultHAlign(markerType);\n    var va = getDefaultVAlign(markerType);\n    result['markerHorizontalAlignment'] = getValueOrDefault(s['markerHorizontalAlignment'], ha);\n    result['markerVerticalAlignment'] = getValueOrDefault(s['markerVerticalAlignment'], va);\n\n    if (isNumber(s['markerOpacity'])) {\n      if (isNumber(s['markerFillOpacity'])) {\n        result['markerFillOpacity'] *= s['markerOpacity'];\n      }\n\n      if (isNumber(s['markerLineOpacity'])) {\n        result['markerLineOpacity'] *= s['markerOpacity'];\n      }\n    }\n\n    return result;\n  };\n\n  return VectorMarkerSymbolizer;\n}(PointSymbolizer);\n\nvar VectorPathMarkerSymbolizer = function (_ImageMarkerSymbolize) {\n  _inheritsLoose(VectorPathMarkerSymbolizer, _ImageMarkerSymbolize);\n\n  VectorPathMarkerSymbolizer.test = function test(symbol) {\n    return isPathSymbol(symbol);\n  };\n\n  function VectorPathMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    if (isNil(symbol['markerWidth'])) {\n      symbol['markerWidth'] = 80;\n    }\n\n    if (isNil(symbol['markerHeight'])) {\n      symbol['markerHeight'] = 80;\n    }\n\n    _this = _ImageMarkerSymbolize.call(this, symbol, geometry, painter) || this;\n    symbol = extend(symbol, _this.translate());\n\n    var style = _this.style = _this._defineStyle(symbol);\n\n    if (Browser$1.gecko) {\n      _this._url = [getMarkerPathBase64(style, style['markerWidth'], style['markerHeight']), style['markerWidth'], style['markerHeight']];\n    } else {\n      _this._url = [getMarkerPathBase64(style), style['markerWidth'], style['markerHeight']];\n    }\n\n    return _this;\n  }\n\n  var _proto = VectorPathMarkerSymbolizer.prototype;\n\n  _proto._prepareContext = function _prepareContext() {};\n\n  _proto._getImage = function _getImage(resources) {\n    var _this2 = this;\n\n    if (resources && resources.isResourceLoaded(this._url)) {\n      return resources.getImage(this._url);\n    }\n\n    var painter = this.painter;\n    var image = new Image();\n\n    image.onload = function () {\n      var renderer = painter.getLayer() && painter.getLayer().getRenderer();\n\n      if (renderer) {\n        renderer.setToRedraw();\n      }\n    };\n\n    image.onerror = function (err) {\n      if (err && typeof console !== 'undefined') {\n        console.warn(err);\n      }\n\n      resources.markErrorResource(_this2._url);\n    };\n\n    image.src = this._url[0];\n\n    if (resources) {\n      resources.addResource(this._url, image);\n    }\n\n    return image;\n  };\n\n  return VectorPathMarkerSymbolizer;\n}(ImageMarkerSymbolizer);\n\nvar defaultSymbol = {\n  lineWidth: 1,\n  polygonFill: '#fff',\n  polygonOpacity: 0.5\n};\n\nvar DrawAltitudeSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(DrawAltitudeSymbolizer, _PointSymbolizer);\n\n  DrawAltitudeSymbolizer.test = function test(symbol, geometry) {\n    var layer = geometry.getLayer();\n\n    if (!layer) {\n      return false;\n    }\n\n    var type = geometry.getJSONType();\n    return type === 'Marker' || type === 'LineString';\n  };\n\n  function DrawAltitudeSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this.style = geometry.getLayer().options['drawAltitude'];\n\n    if (!_this.style || !isObject(_this.style)) {\n      _this.style = {\n        'lineWidth': 2\n      };\n    }\n\n    if (!_this.style['lineWidth']) {\n      _this.style['lineWidth'] = 0;\n    }\n\n    _this.dxdy = _this._defineStyle({\n      'dx': symbol['textDx'] || symbol['markerDx'],\n      'dy': symbol['textDy'] || symbol['markerDy']\n    });\n    return _this;\n  }\n\n  var _proto = DrawAltitudeSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx) {\n    var layer = this.geometry.getLayer();\n\n    if (!layer.options['drawAltitude']) {\n      return;\n    }\n\n    var properties = this.geometry.getProperties();\n\n    if (!properties || !properties[layer.options['altitudeProperty']]) {\n      return;\n    }\n\n    var style = this._getStyle();\n\n    this._prepareContext(ctx);\n\n    if (this.geometry.type === 'LineString') {\n      var paintParams = this._getPaintParams(style['lineDx'], style['lineDy'], false, true);\n\n      if (!paintParams) {\n        return;\n      }\n\n      var groundPoints = this.getPainter().getPaintParams(style['lineDx'], style['lineDy'], true, true, '_groundpt')[0];\n\n      this._drawLineAltitude(ctx, paintParams[0], groundPoints);\n    } else {\n      var point = this._getRenderContainerPoints(),\n          groundPoint = this._getRenderContainerPoints(true);\n\n      if (!point || point.length === 0) {\n        return;\n      }\n\n      this._drawMarkerAltitude(ctx, point[0], groundPoint[0]);\n    }\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    var s = this.dxdy;\n    return new Point(s['dx'] || 0, s['dy'] || 0);\n  };\n\n  _proto.get2DExtent = function get2DExtent() {\n    if (this.geometry.type === 'LineString') {\n      return StrokeAndFillSymbolizer.prototype.get2DExtent.apply(this);\n    } else {\n      return _PointSymbolizer.prototype.get2DExtent.call(this);\n    }\n  };\n\n  _proto.getPlacement = function getPlacement() {\n    return 'point';\n  };\n\n  _proto._getPaintParams = function _getPaintParams(dx, dy) {\n    return this.getPainter().getPaintParams(dx || 0, dy || 0, null, true, '_altpt');\n  };\n\n  _proto._drawMarkerAltitude = function _drawMarkerAltitude(ctx, point, groundPoint) {\n    var style = this._getStyle();\n\n    this.prepareCanvas(ctx, style);\n    Canvas.path(ctx, [point, groundPoint], style['lineOpacity'], null, style['lineDasharray']);\n  };\n\n  _proto._drawLineAltitude = function _drawLineAltitude(ctx, points, groundPoints) {\n    var style = this._getStyle();\n\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n\n    if (isSplitted) {\n      for (var i = 0; i < points.length; i++) {\n        this._drawLine(ctx, points[i], groundPoints[i]);\n      }\n    } else {\n      this._drawLine(ctx, points, groundPoints);\n    }\n\n    if (ctx.setLineDash && Array.isArray(style['lineDasharray'])) {\n      ctx.setLineDash([]);\n    }\n  };\n\n  _proto._drawLine = function _drawLine(ctx, points, groundPoints) {\n    var style = this._getStyle();\n\n    this.prepareCanvas(ctx, style);\n\n    for (var i = 0, l = points.length - 1; i < l; i++) {\n      Canvas.polygon(ctx, [points[i], points[i + 1], groundPoints[i + 1], groundPoints[i]], style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n    }\n  };\n\n  _proto._getStyle = function _getStyle() {\n    var style = this.geometry.getLayer().options['drawAltitude'];\n\n    if (!isObject(style)) {\n      style = defaultSymbol;\n    }\n\n    if (!style['lineWidth']) {\n      style['lineWidth'] = 0;\n      style['lineOpacity'] = 0;\n    }\n\n    return style;\n  };\n\n  return DrawAltitudeSymbolizer;\n}(PointSymbolizer);\n\n\n\nvar index$3 = /*#__PURE__*/Object.freeze({\n  Symbolizer: Symbolizer,\n  CanvasSymbolizer: CanvasSymbolizer,\n  DebugSymbolizer: DebugSymbolizer,\n  ImageMarkerSymbolizer: ImageMarkerSymbolizer,\n  PointSymbolizer: PointSymbolizer,\n  StrokeAndFillSymbolizer: StrokeAndFillSymbolizer,\n  TextMarkerSymbolizer: TextMarkerSymbolizer,\n  VectorMarkerSymbolizer: VectorMarkerSymbolizer,\n  VectorPathMarkerSymbolizer: VectorPathMarkerSymbolizer,\n  DrawAltitudeSymbolizer: DrawAltitudeSymbolizer\n});\n\nvar registerSymbolizers = [DrawAltitudeSymbolizer, StrokeAndFillSymbolizer, ImageMarkerSymbolizer, VectorPathMarkerSymbolizer, VectorMarkerSymbolizer, TextMarkerSymbolizer];\nvar testCanvas;\nvar TEMP_POINT0$2 = new Point(0, 0);\nvar TEMP_PAINT_EXTENT = new PointExtent();\nvar TEMP_FIXED_EXTENT = new PointExtent();\nvar TEMP_CLIP_EXTENT0 = new PointExtent();\nvar TEMP_CLIP_EXTENT1 = new PointExtent();\nvar TEMP_CLIP_EXTENT2 = new PointExtent();\nvar PROJECTION = {};\nvar TEMP_BBOX = {\n  minx: Infinity,\n  miny: Infinity,\n  maxx: -Infinity,\n  maxy: -Infinity\n};\n\nvar Painter = function (_Class) {\n  _inheritsLoose(Painter, _Class);\n\n  function Painter(geometry) {\n    var _this;\n\n    _this = _Class.call(this) || this;\n    _this.geometry = geometry;\n    _this.symbolizers = _this._createSymbolizers();\n    _this._altAtGL = _this._getGeometryAltitude();\n    return _this;\n  }\n\n  var _proto = Painter.prototype;\n\n  _proto.getMap = function getMap() {\n    return this.geometry.getMap();\n  };\n\n  _proto.getLayer = function getLayer() {\n    return this.geometry.getLayer();\n  };\n\n  _proto._createSymbolizers = function _createSymbolizers() {\n    var geoSymbol = this.getSymbol(),\n        symbolizers = [],\n        regSymbolizers = registerSymbolizers;\n    var symbols = geoSymbol;\n\n    if (!Array.isArray(geoSymbol)) {\n      symbols = [geoSymbol];\n    }\n\n    for (var ii = symbols.length - 1; ii >= 0; ii--) {\n      var symbol = symbols[ii];\n\n      for (var i = regSymbolizers.length - 1; i >= 0; i--) {\n        if (regSymbolizers[i].test(symbol, this.geometry)) {\n          var symbolizer = new regSymbolizers[i](symbol, this.geometry, this);\n          symbolizer._index = ii;\n          symbolizers.push(symbolizer);\n\n          if (symbolizer instanceof PointSymbolizer) {\n            this._hasPoint = true;\n          }\n        }\n      }\n    }\n\n    if (!symbolizers.length) {\n      if (console) {\n        var id = this.geometry.getId();\n        console.warn('invalid symbol for geometry(' + (this.geometry ? this.geometry.getType() + (id ? ':' + id : '') : '') + ') to draw : ' + JSON.stringify(geoSymbol));\n      }\n    }\n\n    this._debugSymbolizer = new DebugSymbolizer(geoSymbol, this.geometry, this);\n    return symbolizers;\n  };\n\n  _proto.hasPoint = function hasPoint() {\n    return !!this._hasPoint;\n  };\n\n  _proto.getRenderPoints = function getRenderPoints(placement) {\n    this._verifyProjection();\n\n    if (!this._renderPoints) {\n      this._renderPoints = {};\n    }\n\n    if (!placement) {\n      placement = 'center';\n    }\n\n    if (!this._renderPoints[placement]) {\n      this._renderPoints[placement] = this.geometry._getRenderPoints(placement);\n    }\n\n    return this._renderPoints[placement];\n  };\n\n  _proto.getPaintParams = function getPaintParams(dx, dy, ignoreAltitude, disableClip, ptkey) {\n    if (ptkey === void 0) {\n      ptkey = '_pt';\n    }\n\n    var renderer = this.getLayer()._getRenderer();\n\n    var mapStateCache = renderer.mapStateCache;\n    var resolution, pitch, bearing, glScale, containerExtent;\n    var map = this.getMap();\n\n    if (mapStateCache && !this._hitPoint) {\n      resolution = mapStateCache.resolution;\n      pitch = mapStateCache.pitch;\n      bearing = mapStateCache.bearing;\n      glScale = mapStateCache.glScale;\n      containerExtent = mapStateCache.containerExtent;\n    } else {\n      resolution = map.getResolution();\n      pitch = map.getPitch();\n      bearing = map.getBearing();\n      glScale = map.getGLScale();\n      containerExtent = map.getContainerExtent();\n    }\n\n    var geometry = this.geometry,\n        res = resolution,\n        pitched = pitch !== 0,\n        rotated = bearing !== 0;\n    var params = this._cachedParams;\n\n    var paintAsPath = geometry._paintAsPath && geometry._paintAsPath();\n\n    if (paintAsPath && this._unsimpledParams && res <= this._unsimpledParams._res) {\n      params = this._unsimpledParams;\n    } else if (!params || params._res !== resolution || this._pitched !== pitched && geometry._redrawWhenPitch() || this._rotated !== rotated && geometry._redrawWhenRotate()) {\n      params = geometry._getPaintParams();\n\n      if (!params) {\n        return null;\n      }\n\n      params._res = res;\n\n      if (!geometry._simplified && paintAsPath) {\n        if (!this._unsimpledParams) {\n          this._unsimpledParams = params;\n        }\n\n        if (res > this._unsimpledParams._res) {\n          this._unsimpledParams._res = res;\n        }\n      }\n\n      this._cachedParams = params;\n    }\n\n    if (!params) {\n      return null;\n    }\n\n    this._pitched = pitched;\n    this._rotated = rotated;\n    var zoomScale = glScale,\n        tr = [],\n        points = params[0];\n    var mapExtent = containerExtent;\n\n    var cPoints = this._pointContainerPoints(points, dx, dy, ignoreAltitude, disableClip || this._hitPoint && !mapExtent.contains(this._hitPoint), null, ptkey);\n\n    if (!cPoints) {\n      return null;\n    }\n\n    tr.push(cPoints);\n\n    for (var i = 1, l = params.length; i < l; i++) {\n      if (isNumber(params[i]) || params[i] instanceof Size) {\n        if (isNumber(params[i])) {\n          tr.push(params[i] / zoomScale);\n        } else {\n          tr.push(params[i].multi(1 / zoomScale));\n        }\n      } else {\n        tr.push(params[i]);\n      }\n    }\n\n    return tr;\n  };\n\n  _proto._pointContainerPoints = function _pointContainerPoints(points, dx, dy, ignoreAltitude, disableClip, pointPlacement, ptkey) {\n    if (ptkey === void 0) {\n      ptkey = '_pt';\n    }\n\n    if (this._aboveCamera()) {\n      return null;\n    }\n\n    var renderer = this.getLayer()._getRenderer();\n\n    var mapStateCache = renderer.mapStateCache;\n    var map = this.getMap(),\n        geometry = this.geometry,\n        containerOffset = this.containerOffset;\n    var glRes, containerExtent;\n\n    if (mapStateCache) {\n      glRes = mapStateCache.glRes;\n      containerExtent = mapStateCache.containerExtent;\n    } else {\n      glRes = map.getGLRes();\n      containerExtent = map.getContainerExtent();\n    }\n\n    var cPoints;\n    var roundPoint = this.getLayer().options['roundPoint'];\n    var minx = Infinity,\n        miny = Infinity,\n        maxx = -Infinity,\n        maxy = -Infinity;\n    var needClip = !disableClip;\n    var clipBBoxBufferSize = renderer.layer.options['clipBBoxBufferSize'] || 3;\n    var symbolizers = this.symbolizers;\n\n    function pointsContainerPoints(viewPoints, alts) {\n      if (viewPoints === void 0) {\n        viewPoints = [];\n      }\n\n      if (alts === void 0) {\n        alts = [];\n      }\n\n      var pts = getPointsResultPts(viewPoints, ptkey);\n      pts = map._pointsAtResToContainerPoints(viewPoints, glRes, alts, pts);\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var p = pts[i];\n\n        p._sub(containerOffset);\n\n        if (dx || dy) {\n          p._add(dx || 0, dy || 0);\n        }\n\n        if (roundPoint) {\n          p.x = Math.ceil(p.x);\n          p.y = Math.ceil(p.y);\n        }\n\n        minx = Math.min(p.x, minx);\n        miny = Math.min(p.y, miny);\n        maxx = Math.max(p.x, maxx);\n        maxy = Math.max(p.y, maxy);\n      }\n\n      if (needClip && isDashLine(symbolizers)) {\n        TEMP_CLIP_EXTENT2.ymin = containerExtent.ymin;\n\n        if (TEMP_CLIP_EXTENT2.ymin < clipBBoxBufferSize) {\n          TEMP_CLIP_EXTENT2.ymin = containerExtent.ymin - clipBBoxBufferSize;\n        }\n\n        TEMP_CLIP_EXTENT2.xmin = containerExtent.xmin - clipBBoxBufferSize;\n        TEMP_CLIP_EXTENT2.xmax = containerExtent.xmax + clipBBoxBufferSize;\n        TEMP_CLIP_EXTENT2.ymax = containerExtent.ymax + clipBBoxBufferSize;\n\n        if (geometry.getShell && geometry.getHoles) {\n          return clipPolygon(pts, TEMP_CLIP_EXTENT2);\n        }\n\n        var clipPts = clipLine(pts, TEMP_CLIP_EXTENT2, false);\n\n        if (clipPts.length) {\n          var _points = [];\n          clipPts.forEach(function (clipPt) {\n            for (var _i = 0, _len = clipPt.length; _i < _len; _i++) {\n              _points.push(clipPt[_i].point);\n            }\n          });\n          return _points;\n        }\n      }\n\n      return pts;\n    }\n\n    var altitude = this.getAltitude();\n\n    if (Array.isArray(points)) {\n      var _geometry = this.geometry;\n      var clipped;\n\n      if (!disableClip && _geometry.options['enableClip']) {\n        clipped = this._clip(points, altitude);\n\n        if (clipped.inView) {\n          needClip = false;\n        }\n      } else {\n        clipped = {\n          points: points,\n          altitude: altitude\n        };\n      }\n\n      var clipPoints = clipped.points;\n      altitude = clipped.altitude;\n\n      if (ignoreAltitude) {\n        altitude = 0;\n      }\n\n      var alt = altitude;\n      cPoints = [];\n      var alts = [];\n      var altitudeIsNumber = isNumber(altitude);\n\n      for (var i = 0, l = clipPoints.length; i < l; i++) {\n        var c = clipPoints[i];\n\n        if (Array.isArray(c)) {\n          if (altitudeIsNumber) {\n            var _cring = pointsContainerPoints(c, altitude);\n\n            cPoints.push(_cring);\n            continue;\n          }\n\n          var altArray = [];\n\n          for (var ii = 0, ll = c.length; ii < ll; ii++) {\n            if (Array.isArray(altitude)) {\n              if (altitude[i]) {\n                alt = altitude[i][ii];\n              } else {\n                alt = 0;\n              }\n            }\n\n            altArray.push(alt);\n          }\n\n          var cring = pointsContainerPoints(c, altArray);\n          cPoints.push(cring);\n        } else {\n          if (Array.isArray(altitude)) {\n            if (pointPlacement === 'vertex-last') {\n              alt = altitude[altitude.length - 1 - i];\n            } else if (pointPlacement === 'line') {\n              alt = (altitude[i] + altitude[i + 1]) / 2;\n            } else {\n              alt = altitude[i];\n            }\n          }\n\n          alts.push(alt);\n        }\n      }\n\n      if (alts.length) {\n        cPoints = pointsContainerPoints(clipPoints, alts);\n      }\n    } else if (points instanceof Point) {\n      if (ignoreAltitude) {\n        altitude = 0;\n      }\n\n      cPoints = map._pointAtResToContainerPoint(points, glRes, altitude)._sub(containerOffset);\n\n      if (dx || dy) {\n        cPoints._add(dx, dy);\n      }\n    }\n\n    TEMP_BBOX.minx = minx;\n    TEMP_BBOX.miny = miny;\n    TEMP_BBOX.maxx = maxx;\n    TEMP_BBOX.maxy = maxy;\n    this._containerBbox = TEMP_BBOX;\n    return cPoints;\n  };\n\n  _proto._clip = function _clip(points, altitude) {\n    if (isNumber(altitude) && altitude !== 0) {\n      return {\n        points: points,\n        altitude: altitude\n      };\n    }\n\n    if (Array.isArray(altitude)) {\n      var hasAltitude = false;\n\n      for (var i = 0, len = altitude.length; i < len; i++) {\n        if (altitude[i] !== 0) {\n          hasAltitude = true;\n          break;\n        }\n      }\n\n      if (hasAltitude) {\n        return {\n          points: points,\n          altitude: altitude\n        };\n      }\n    }\n\n    var map = this.getMap(),\n        geometry = this.geometry;\n    var lineWidth = this.getSymbol()['lineWidth'];\n\n    if (!isNumber(lineWidth)) {\n      lineWidth = 4;\n    }\n\n    var renderer = this.getLayer()._getRenderer();\n\n    var mapStateCache = renderer.mapStateCache;\n\n    var _2DExtent, glExtent, pitch;\n\n    if (mapStateCache) {\n      _2DExtent = mapStateCache._2DExtent;\n      glExtent = mapStateCache.glExtent;\n      pitch = mapStateCache.pitch;\n    } else {\n      _2DExtent = map._get2DExtent();\n      glExtent = map._get2DExtentAtRes(map.getGLRes());\n      pitch = map.getPitch();\n    }\n\n    var extent2D = _2DExtent._expand(lineWidth);\n\n    if (pitch > 0 && altitude) {\n      var c = map.cameraLookAt;\n      var pos = map.cameraPosition;\n      TEMP_POINT0$2.set(pos.x, pos.y);\n      extent2D = extent2D._combine(TEMP_POINT0$2._add(sign(c[0] - pos[0]), sign(c[1] - pos[1])));\n    }\n\n    var e = this.get2DExtent(null, TEMP_CLIP_EXTENT1);\n    var clipPoints = points;\n\n    if (e.within(extent2D)) {\n      return {\n        points: clipPoints,\n        altitude: altitude,\n        inView: true\n      };\n    }\n\n    var glExtent2D = glExtent._expand(lineWidth * map._glScale);\n\n    TEMP_CLIP_EXTENT0.xmin = glExtent2D.xmin;\n    TEMP_CLIP_EXTENT0.xmax = glExtent2D.xmax;\n    TEMP_CLIP_EXTENT0.ymin = glExtent2D.ymin;\n    TEMP_CLIP_EXTENT0.ymax = glExtent2D.ymax;\n    var smoothness = geometry.options['smoothness'];\n\n    if (geometry.getShell && this.geometry.getHoles && !smoothness) {\n      var xmin = glExtent2D.xmin,\n          ymin = glExtent2D.ymin,\n          xmax = glExtent2D.xmax,\n          ymax = glExtent2D.ymax;\n      var dx = Math.abs(xmax - xmin),\n          dy = Math.abs(ymax - ymin);\n      var r = Math.sqrt(dx * dx + dy * dy);\n      var rx = (r - dx) / 2,\n          ry = (r - dy) / 2;\n      TEMP_CLIP_EXTENT0.xmin = glExtent2D.xmin - rx;\n      TEMP_CLIP_EXTENT0.xmax = glExtent2D.xmax + rx;\n      TEMP_CLIP_EXTENT0.ymin = glExtent2D.ymin - ry;\n      TEMP_CLIP_EXTENT0.ymax = glExtent2D.ymax + ry;\n\n      if (!Array.isArray(points[0])) {\n        clipPoints = clipPolygon(points, TEMP_CLIP_EXTENT0);\n      } else {\n        clipPoints = [];\n\n        for (var _i2 = 0; _i2 < points.length; _i2++) {\n          var part = clipPolygon(points[_i2], TEMP_CLIP_EXTENT0);\n\n          if (part.length) {\n            clipPoints.push(part);\n          }\n        }\n      }\n    } else if (geometry.getJSONType() === 'LineString' && !smoothness) {\n      if (!Array.isArray(points[0])) {\n        clipPoints = clipLine(points, TEMP_CLIP_EXTENT0, false, !!smoothness);\n      } else {\n        clipPoints = [];\n\n        for (var _i3 = 0; _i3 < points.length; _i3++) {\n          pushIn(clipPoints, clipLine(points[_i3], TEMP_CLIP_EXTENT0, false, !!smoothness));\n        }\n      }\n\n      return this._interpolateSegAlt(clipPoints, points, altitude);\n    }\n\n    return {\n      points: clipPoints,\n      altitude: altitude\n    };\n  };\n\n  _proto._interpolateSegAlt = function _interpolateSegAlt(clipSegs, orig, altitude) {\n    if (!Array.isArray(altitude)) {\n      var fn = function fn(cc) {\n        return cc.point;\n      };\n\n      return {\n        points: clipSegs.map(function (c) {\n          if (Array.isArray(c)) {\n            return c.map(fn);\n          }\n\n          return c.point;\n        }),\n        altitude: altitude\n      };\n    }\n\n    var segsWithAlt = interpolateAlt(clipSegs, orig, altitude);\n    altitude = [];\n    var points = segsWithAlt.map(function (p) {\n      if (Array.isArray(p)) {\n        var alt = [];\n        var cp = p.map(function (pp) {\n          alt.push(pp.altitude);\n          return pp.point;\n        });\n        altitude.push(alt);\n        return cp;\n      }\n\n      altitude.push(p.altitude);\n      return p.point;\n    });\n    return {\n      points: points,\n      altitude: altitude\n    };\n  };\n\n  _proto.getSymbol = function getSymbol() {\n    return this.geometry._getInternalSymbol();\n  };\n\n  _proto.paint = function paint(extent, context, offset) {\n    if (!this.symbolizers) {\n      return;\n    }\n\n    var layer = this.getLayer();\n\n    var renderer = layer._getRenderer();\n\n    if (!renderer || !renderer.context && !context) {\n      return;\n    }\n\n    var mapStateCache = renderer.mapStateCache || {};\n\n    if (!this.geometry._isCheck) {\n      if (extent && !extent.intersects(this.get2DExtent(renderer.resources, TEMP_PAINT_EXTENT))) {\n        return;\n      }\n    }\n\n    var map = this.getMap();\n    var minAltitude = this.getMinAltitude();\n    var frustumAlt = map.getFrustumAltitude();\n\n    if (minAltitude && frustumAlt && frustumAlt < minAltitude) {\n      return;\n    }\n\n    this.containerOffset = offset || mapStateCache.offset || map._pointToContainerPoint(renderer.southWest)._add(0, -map.height);\n\n    this._beforePaint();\n\n    var ctx = context || renderer.context;\n    var contexts = [ctx, renderer.resources];\n\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      if (ctx.shadowBlur || this.symbolizers[i].symbol['shadowBlur']) {\n        this._prepareShadow(ctx, this.symbolizers[i].symbol);\n      }\n\n      this.symbolizers[i].symbolize.apply(this.symbolizers[i], contexts);\n    }\n\n    this._afterPaint();\n\n    this._painted = true;\n\n    if (this.geometry.options['debug'] || layer.options['debug']) {\n      this._debugSymbolizer.symbolize.apply(this._debugSymbolizer, contexts);\n    }\n  };\n\n  _proto.getSprite = function getSprite(resources, canvasClass) {\n    if (this.geometry.type !== 'Point') {\n      return null;\n    }\n\n    this._spriting = true;\n\n    if (!this._sprite && this.symbolizers.length > 0) {\n      var extent = new PointExtent();\n      this.symbolizers.forEach(function (s) {\n        var markerExtent = s.getFixedExtent(resources);\n\n        extent._combine(markerExtent);\n      });\n      var origin = extent.getMin().multi(-1);\n      var clazz = canvasClass || (this.getMap() ? this.getMap().CanvasClass : null);\n      var canvas = Canvas.createCanvas(extent.getWidth(), extent.getHeight(), clazz);\n      var bak;\n\n      if (this._renderPoints) {\n        bak = this._renderPoints;\n      }\n\n      var ctx = canvas.getContext('2d');\n      var contexts = [ctx, resources];\n\n      for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n        var dxdy = this.symbolizers[i].getDxDy();\n        this._renderPoints = {\n          'center': [[origin.add(dxdy)]]\n        };\n\n        this._prepareShadow(ctx, this.symbolizers[i].symbol);\n\n        this.symbolizers[i].symbolize.apply(this.symbolizers[i], contexts);\n      }\n\n      if (bak) {\n        this._renderPoints = bak;\n      }\n\n      this._sprite = {\n        'canvas': canvas,\n        'offset': extent.getCenter()\n      };\n    }\n\n    this._spriting = false;\n    return this._sprite;\n  };\n\n  _proto.isSpriting = function isSpriting() {\n    return !!this._spriting;\n  };\n\n  _proto.hitTest = function hitTest(cp, tolerance) {\n    if (!tolerance || tolerance < 0.5) {\n      tolerance = 0.5;\n    }\n\n    this._hitPoint = cp.sub(tolerance, tolerance);\n\n    if (!testCanvas) {\n      var canvasClass = this.getMap() ? this.getMap().CanvasClass : null;\n      testCanvas = Canvas.createCanvas(1, 1, canvasClass);\n    }\n\n    Canvas.setHitTesting(true);\n    testCanvas.width = testCanvas.height = 2 * tolerance;\n    var ctx = testCanvas.getContext('2d');\n\n    try {\n      this.paint(null, ctx, this._hitPoint);\n    } catch (e) {\n      throw e;\n    } finally {\n      Canvas.setHitTesting(false);\n    }\n\n    delete this._hitPoint;\n    var imgData = ctx.getImageData(0, 0, testCanvas.width, testCanvas.height).data;\n\n    for (var i = 3, l = imgData.length; i < l; i += 4) {\n      if (imgData[i] > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.isHitTesting = function isHitTesting() {\n    return !!this._hitPoint;\n  };\n\n  _proto._prepareShadow = function _prepareShadow(ctx, symbol) {\n    if (symbol['shadowBlur']) {\n      ctx.shadowBlur = this.isHitTesting() ? 0 : symbol['shadowBlur'];\n      ctx.shadowColor = symbol['shadowColor'] || '#000';\n      ctx.shadowOffsetX = symbol['shadowOffsetX'] || 0;\n      ctx.shadowOffsetY = symbol['shadowOffsetY'] || 0;\n    } else if (ctx.shadowBlur) {\n      ctx.shadowBlur = null;\n      ctx.shadowColor = null;\n      ctx.shadowOffsetX = null;\n      ctx.shadowOffsetY = null;\n    }\n  };\n\n  _proto._eachSymbolizer = function _eachSymbolizer(fn, context) {\n    if (!this.symbolizers) {\n      return;\n    }\n\n    if (!context) {\n      context = this;\n    }\n\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      fn.apply(context, [this.symbolizers[i]]);\n    }\n  };\n\n  _proto.get2DExtent = function get2DExtent(resources, out) {\n    this._verifyProjection();\n\n    var map = this.getMap();\n    resources = resources || this.getLayer()._getRenderer().resources;\n    var zoom = map.getZoom();\n\n    var isDynamicSize = this._isDynamicSize();\n\n    if (!this._extent2D || this._extent2D._zoom !== zoom || !this._fixedExtent) {\n      if (this._extent2D && this._extent2D._zoom !== zoom) {\n        delete this._extent2D;\n      }\n\n      if (this.symbolizers) {\n        if (!this._extent2D) {\n          this._extent2D = this._computeExtent2D(new PointExtent());\n          this._extent2D._zoom = zoom;\n        }\n\n        if (!this._fixedExtent) {\n          this._fixedExtent = this._computeFixedExtent(resources, new PointExtent());\n        }\n      }\n    }\n\n    if (!this._extent2D) {\n      if (isDynamicSize) {\n        delete this._fixedExtent;\n      }\n\n      return null;\n    }\n\n    var _this$_fixedExtent = this._fixedExtent,\n        xmin = _this$_fixedExtent.xmin,\n        ymin = _this$_fixedExtent.ymin,\n        xmax = _this$_fixedExtent.xmax,\n        ymax = _this$_fixedExtent.ymax;\n\n    if (isDynamicSize) {\n      delete this._fixedExtent;\n    }\n\n    TEMP_FIXED_EXTENT.set(xmin, -ymax, xmax, -ymin);\n\n    if (out) {\n      out.set(this._extent2D['xmin'], this._extent2D['ymin'], this._extent2D['xmax'], this._extent2D['ymax']);\n\n      out._add(TEMP_FIXED_EXTENT);\n\n      return out;\n    }\n\n    return this._extent2D.add(TEMP_FIXED_EXTENT);\n  };\n\n  _proto._computeExtent2D = function _computeExtent2D(extent) {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n\n      extent._combine(symbolizer.get2DExtent());\n    }\n\n    return extent;\n  };\n\n  _proto._computeFixedExtent = function _computeFixedExtent(resources, extent) {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n\n      if (symbolizer.getFixedExtent) {\n        extent._combine(symbolizer.getFixedExtent(resources));\n      }\n    }\n\n    return extent;\n  };\n\n  _proto._isDynamicSize = function _isDynamicSize() {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n\n      if (symbolizer.isDynamicSize()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto._aboveCamera = function _aboveCamera() {\n    var altitude = this.getMinAltitude();\n    var map = this.getMap();\n    var frustumAlt = map.getFrustumAltitude();\n    return altitude && frustumAlt && frustumAlt < altitude;\n  };\n\n  _proto.getFixedExtent = function getFixedExtent() {\n    var map = this.getMap();\n    var zoom = map.getZoom();\n\n    if (this._isDynamicSize()) {\n      return this._computeFixedExtent(null, new PointExtent());\n    }\n\n    if (!this._extent2D || this._extent2D._zoom !== zoom) {\n      this.get2DExtent(null, TEMP_FIXED_EXTENT);\n    }\n\n    return this._fixedExtent;\n  };\n\n  _proto.setZIndex = function setZIndex(change) {\n    this._eachSymbolizer(function (symbolizer) {\n      symbolizer.setZIndex(change);\n    });\n  };\n\n  _proto.show = function show() {\n    if (!this._painted) {\n      var layer = this.getLayer();\n\n      if (!layer.isCanvasRender()) {\n        this.paint();\n      }\n    } else {\n      this.removeCache();\n\n      this._eachSymbolizer(function (symbolizer) {\n        symbolizer.show();\n      });\n    }\n  };\n\n  _proto.hide = function hide() {\n    this._eachSymbolizer(function (symbolizer) {\n      symbolizer.hide();\n    });\n  };\n\n  _proto.repaint = function repaint() {\n    this._altAtGL = this._getGeometryAltitude();\n    this.removeCache();\n    var layer = this.getLayer();\n\n    if (!layer) {\n      return;\n    }\n\n    var renderer = layer.getRenderer();\n\n    if (!renderer || !renderer.setToRedraw()) {\n      return;\n    }\n\n    renderer.setToRedraw();\n  };\n\n  _proto.refreshSymbol = function refreshSymbol() {\n    this.removeCache();\n\n    this._removeSymbolizers();\n\n    this.symbolizers = this._createSymbolizers();\n  };\n\n  _proto.remove = function remove() {\n    this.removeCache();\n\n    this._removeSymbolizers();\n  };\n\n  _proto._removeSymbolizers = function _removeSymbolizers() {\n    this._eachSymbolizer(function (symbolizer) {\n      delete symbolizer.painter;\n      symbolizer.remove();\n    });\n\n    delete this.symbolizers;\n  };\n\n  _proto.removeCache = function removeCache() {\n    delete this._renderPoints;\n    delete this._paintParams;\n    delete this._sprite;\n    delete this._extent2D;\n    delete this._fixedExtent;\n    delete this._cachedParams;\n    delete this._unsimpledParams;\n  };\n\n  _proto.getAltitude = function getAltitude() {\n    var propAlt = this.geometry.getAltitude();\n\n    if (propAlt !== this._propAlt) {\n      this._altAtGL = this._getGeometryAltitude();\n    }\n\n    if (!this._altAtGL) {\n      return 0;\n    }\n\n    return this._altAtGL;\n  };\n\n  _proto.getMinAltitude = function getMinAltitude() {\n    if (!this.minAltitude) {\n      return 0;\n    }\n\n    return this.minAltitude;\n  };\n\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    if (!this.maxAltitude) {\n      return 0;\n    }\n\n    return this.maxAltitude;\n  };\n\n  _proto._getGeometryAltitude = function _getGeometryAltitude() {\n    var _this2 = this;\n\n    var map = this.getMap();\n\n    if (!map) {\n      return 0;\n    }\n\n    var altitude = this.geometry.getAltitude();\n    this._propAlt = altitude;\n\n    if (!altitude) {\n      this.minAltitude = this.maxAltitude = 0;\n      return 0;\n    }\n\n    var center = this.geometry.getCenter();\n\n    if (!center) {\n      return 0;\n    }\n\n    if (Array.isArray(altitude)) {\n      this.minAltitude = Number.MAX_VALUE;\n      this.maxAltitude = Number.MIN_VALUE;\n      return altitude.map(function (alt) {\n        var a = _this2._meterToPoint(center, alt);\n\n        if (a < _this2.minAltitude) {\n          _this2.minAltitude = a;\n        }\n\n        if (a > _this2.maxAltitude) {\n          _this2.maxAltitude = a;\n        }\n\n        return a;\n      });\n    } else {\n      this.minAltitude = this.maxAltitude = this._meterToPoint(center, altitude);\n      return this.minAltitude;\n    }\n  };\n\n  _proto._meterToPoint = function _meterToPoint(center, altitude) {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    return map.distanceToPointAtRes(altitude, 0, glRes, center).x * sign(altitude);\n  };\n\n  _proto._verifyProjection = function _verifyProjection() {\n    var projection = this.geometry._getProjection() || PROJECTION;\n\n    if (this._projCode && this._projCode !== projection.code) {\n      this.removeCache();\n    }\n\n    this._projCode = projection.code;\n  };\n\n  _proto._beforePaint = function _beforePaint() {};\n\n  _proto._afterPaint = function _afterPaint() {};\n\n  return Painter;\n}(Class);\n\nfunction interpolateAlt(points, orig, altitude) {\n  if (!Array.isArray(altitude)) {\n    return points;\n  }\n\n  var parts = [];\n\n  for (var i = 0, l = points.length; i < l; i++) {\n    if (Array.isArray(points[i])) {\n      parts.push(interpolateAlt(points[i], orig, altitude));\n    } else {\n      var p = points[i];\n\n      if (!p.point.equals(orig[p.index])) {\n        var w0 = void 0,\n            w1 = void 0;\n\n        if (p.index === 0) {\n          w0 = p.index;\n          w1 = p.index + 1;\n        } else {\n          w0 = p.index - 1;\n          w1 = p.index;\n        }\n\n        var t0 = p.point.distanceTo(orig[w1]);\n        var t = t0 / (t0 + orig[w0].distanceTo(p.point));\n        var alt = interpolate(altitude[w0], altitude[w1], 1 - t);\n        p.altitude = alt;\n        parts.push(p);\n      } else {\n        p.altitude = altitude[p.index];\n        parts.push(p);\n      }\n    }\n  }\n\n  return parts;\n}\n\nvar TEMP_EXTENT$1 = new PointExtent();\n\nvar CollectionPainter = function (_Class) {\n  _inheritsLoose(CollectionPainter, _Class);\n\n  function CollectionPainter(geometry, isMask) {\n    var _this;\n\n    _this = _Class.call(this) || this;\n    _this.geometry = geometry;\n    _this.isMask = isMask;\n    return _this;\n  }\n\n  var _proto = CollectionPainter.prototype;\n\n  _proto._eachPainter = function _eachPainter(fn) {\n    var geometries = this.geometry.getGeometries();\n    var painter;\n\n    for (var i = 0, len = geometries.length; i < len; i++) {\n      painter = this.isMask ? geometries[i]._getMaskPainter() : geometries[i]._getPainter();\n\n      if (!painter) {\n        continue;\n      }\n\n      if (painter) {\n        if (fn.call(this, painter) === false) {\n          break;\n        }\n      }\n    }\n  };\n\n  _proto.paint = function paint(extent) {\n    if (!this.geometry) {\n      return;\n    }\n\n    this._eachPainter(function (painter) {\n      painter.paint(extent);\n    });\n  };\n\n  _proto.get2DExtent = function get2DExtent(resources, out) {\n    if (out) {\n      out.set(null, null, null, null);\n    }\n\n    var extent = out || new PointExtent();\n\n    this._eachPainter(function (painter) {\n      extent = extent._combine(painter.get2DExtent(resources, TEMP_EXTENT$1));\n    });\n\n    return extent;\n  };\n\n  _proto.remove = function remove() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.remove.apply(painter, args);\n    });\n  };\n\n  _proto.setZIndex = function setZIndex() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.setZIndex.apply(painter, args);\n    });\n  };\n\n  _proto.show = function show() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.show.apply(painter, args);\n    });\n  };\n\n  _proto.hide = function hide() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.hide.apply(painter, args);\n    });\n  };\n\n  _proto.repaint = function repaint() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.repaint.apply(painter, args);\n    });\n  };\n\n  _proto.refreshSymbol = function refreshSymbol() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.refreshSymbol.apply(painter, args);\n    });\n  };\n\n  _proto.hasPoint = function hasPoint() {\n    var result = false;\n\n    this._eachPainter(function (painter) {\n      if (painter.hasPoint()) {\n        result = true;\n        return false;\n      }\n\n      return true;\n    });\n\n    return result;\n  };\n\n  _proto.getMinAltitude = function getMinAltitude() {\n    var first = true;\n    var result = 0;\n\n    this._eachPainter(function (painter) {\n      var alt = painter.getMinAltitude();\n\n      if (first || alt < result) {\n        first = false;\n        result = alt;\n      }\n    });\n\n    return result;\n  };\n\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    var result = 0;\n\n    this._eachPainter(function (painter) {\n      var alt = painter.getMaxAltitude();\n\n      if (alt > result) {\n        result = alt;\n      }\n    });\n\n    return result;\n  };\n\n  return CollectionPainter;\n}(Class);\n\nvar MAX_ZOOM = 23;\nvar DefaultSpatialReference = {\n  'EPSG:3857': {\n    'projection': 'EPSG:3857',\n    'resolutions': function () {\n      var resolutions = [];\n      var d = 2 * 6378137 * Math.PI;\n\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = d / (256 * Math.pow(2, i));\n      }\n\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 6378137 * Math.PI,\n      'left': -6378137 * Math.PI,\n      'bottom': -6378137 * Math.PI,\n      'right': 6378137 * Math.PI\n    }\n  },\n  'EPSG:4326': {\n    'projection': 'EPSG:4326',\n    'fullExtent': {\n      'top': 90,\n      'left': -180,\n      'bottom': -90,\n      'right': 180\n    },\n    'resolutions': function () {\n      var resolutions = [];\n\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = 180 / (Math.pow(2, i) * 128);\n      }\n\n      return resolutions;\n    }()\n  },\n  'BAIDU': {\n    'projection': 'baidu',\n    'resolutions': function () {\n      var res = Math.pow(2, 18);\n      var resolutions = [];\n\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = res;\n        res *= 0.5;\n      }\n\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 33554432,\n      'left': -33554432,\n      'bottom': -33554432,\n      'right': 33554432\n    }\n  },\n  'IDENTITY': {\n    'projection': 'identity',\n    'resolutions': function () {\n      var res = Math.pow(2, 8);\n      var resolutions = [];\n\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = res;\n        res *= 0.5;\n      }\n\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 200000,\n      'left': -200000,\n      'bottom': -200000,\n      'right': 200000\n    }\n  },\n  'PRESET-VT-3857': {\n    'projection': 'EPSG:3857',\n    'resolutions': function () {\n      var resolutions = [];\n      var d = 6378137 * Math.PI;\n\n      for (var i = 0; i < MAX_ZOOM; i++) {\n        resolutions[i] = d / (256 * Math.pow(2, i));\n      }\n\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 6378137 * Math.PI,\n      'left': -6378137 * Math.PI,\n      'bottom': -6378137 * Math.PI,\n      'right': 6378137 * Math.PI\n    }\n  }\n};\nDefaultSpatialReference['EPSG:4490'] = DefaultSpatialReference['EPSG:4326'];\n\nvar SpatialReference = function () {\n  function SpatialReference(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.options = options;\n\n    this._initSpatialRef();\n  }\n\n  SpatialReference.getPreset = function getPreset(preset) {\n    return DefaultSpatialReference[preset.toUpperCase()];\n  };\n\n  SpatialReference.getAllPresets = function getAllPresets() {\n    return Object.keys(DefaultSpatialReference);\n  };\n\n  SpatialReference.getProjectionInstance = function getProjectionInstance(prjName) {\n    if (!prjName) {\n      return null;\n    }\n\n    if (isObject(prjName)) {\n      if (!prjName.locate) {\n        prjName = extend({}, prjName);\n\n        if (prjName.measure === 'identity') {\n          extend(prjName, Measurer.getInstance('IDENTITY'));\n        } else {\n          extend(prjName, Measurer.getInstance('EPSG:4326'));\n        }\n      }\n\n      return prjName;\n    }\n\n    prjName = (prjName + '').toLowerCase();\n\n    for (var p in projections) {\n      if (hasOwn(projections, p)) {\n        var code = projections[p]['code'];\n\n        if (code && code.toLowerCase() === prjName) {\n          return projections[p];\n        }\n      }\n    }\n\n    return null;\n  };\n\n  SpatialReference.equals = function equals(sp1, sp2) {\n    if (isString(sp1) || isString(sp2)) {\n      return sp1 === sp2;\n    }\n\n    if (!sp1 && !sp2) {\n      return true;\n    } else if (!sp1 || !sp2) {\n      return false;\n    }\n\n    if (sp1.projection !== sp2.projection) {\n      return false;\n    }\n\n    var f1 = sp1.fullExtent,\n        f2 = sp2.fullExtent;\n\n    if (f1 && !f2 || !f1 && f2) {\n      return false;\n    }\n\n    if (f1 && f2) {\n      if (f1.top !== f2.top || f1.bottom !== f2.bottom || f1.left !== f2.left || f1.right !== f2.right) {\n        return false;\n      }\n    }\n\n    var r1 = sp1.resolutions,\n        r2 = sp2.resolutions;\n\n    if (r1 && r2) {\n      if (r1.length !== r2.length) {\n        return false;\n      }\n\n      for (var i = 0; i < r1.length; i++) {\n        if (r1[i] !== r2[i]) {\n          return false;\n        }\n      }\n    } else if (r1 || r2) {\n      return false;\n    }\n\n    return true;\n  };\n\n  var _proto = SpatialReference.prototype;\n\n  _proto._initSpatialRef = function _initSpatialRef() {\n    var projection = this.options['projection'];\n\n    if (projection) {\n      projection = SpatialReference.getProjectionInstance(projection);\n    } else {\n      projection = DEFAULT$1;\n    }\n\n    if (!projection) {\n      throw new Error('must provide a valid projection in map\\'s spatial reference.');\n    }\n\n    projection = extend({}, Common, projection);\n\n    if (!projection.measureLength) {\n      extend(projection, Measurer.DEFAULT);\n    }\n\n    this._projection = projection;\n    var defaultSpatialRef,\n        resolutions = this.options['resolutions'];\n\n    if (!resolutions) {\n      if (projection['code']) {\n        defaultSpatialRef = DefaultSpatialReference[projection['code'].toUpperCase()];\n\n        if (defaultSpatialRef) {\n          resolutions = defaultSpatialRef['resolutions'];\n          this.isEPSG = projection['code'] !== 'IDENTITY';\n        }\n      }\n\n      if (!resolutions) {\n        throw new Error('must provide valid resolutions in map\\'s spatial reference.');\n      }\n    }\n\n    this._resolutions = resolutions;\n    this._pyramid = true;\n\n    if (this._pyramid) {\n      for (var i = 0; i < resolutions.length; i++) {\n        if (resolutions[i] && resolutions[i - 1]) {\n          if (resolutions[i - 1] / resolutions[i] !== 2) {\n            this._pyramid = false;\n            break;\n          }\n        }\n      }\n    }\n\n    var fullExtent = this.options['fullExtent'];\n\n    if (!fullExtent) {\n      if (projection['code']) {\n        defaultSpatialRef = DefaultSpatialReference[projection['code'].toUpperCase()];\n\n        if (defaultSpatialRef) {\n          fullExtent = defaultSpatialRef['fullExtent'];\n        }\n      }\n\n      if (!fullExtent) {\n        throw new Error('must provide a valid fullExtent in map\\'s spatial reference.');\n      }\n    }\n\n    if (!isNil(fullExtent['left'])) {\n      this._fullExtent = new Extent(new Coordinate(fullExtent['left'], fullExtent['top']), new Coordinate(fullExtent['right'], fullExtent['bottom']));\n    } else {\n      this._fullExtent = new Extent(fullExtent);\n      fullExtent['left'] = fullExtent['xmin'];\n      fullExtent['right'] = fullExtent['xmax'];\n      fullExtent['top'] = fullExtent['ymax'];\n      fullExtent['bottom'] = fullExtent['ymin'];\n    }\n\n    if (isNil(fullExtent['top']) || isNil(fullExtent['bottom']) || isNil(fullExtent['left']) || isNil(fullExtent['right'])) {\n      throw new Error('must provide valid top/bottom/left/right in fullExtent.');\n    }\n\n    extend(this._fullExtent, fullExtent);\n    this._projection.fullExtent = fullExtent;\n    var a = fullExtent['right'] >= fullExtent['left'] ? 1 : -1,\n        b = fullExtent['top'] >= fullExtent['bottom'] ? -1 : 1;\n    this._transformation = new Transformation([a, b, 0, 0]);\n  };\n\n  _proto.getResolutions = function getResolutions() {\n    return this._resolutions || [];\n  };\n\n  _proto.getResolution = function getResolution(zoom) {\n    var z = zoom | 0;\n\n    if (z < 0) {\n      z = 0;\n    } else if (z > this._resolutions.length - 1) {\n      z = this._resolutions.length - 1;\n    }\n\n    var res = this._resolutions[z];\n\n    if (z !== zoom && zoom > 0 && z < this._resolutions.length - 1) {\n      var next = this._resolutions[z + 1];\n      return res + (next - res) * (zoom - z);\n    }\n\n    return res;\n  };\n\n  _proto.getProjection = function getProjection() {\n    return this._projection;\n  };\n\n  _proto.getFullExtent = function getFullExtent() {\n    return this._fullExtent;\n  };\n\n  _proto.getTransformation = function getTransformation() {\n    return this._transformation;\n  };\n\n  _proto.getMinZoom = function getMinZoom() {\n    for (var i = 0; i < this._resolutions.length; i++) {\n      if (!isNil(this._resolutions[i])) {\n        return i;\n      }\n    }\n\n    return 0;\n  };\n\n  _proto.getMaxZoom = function getMaxZoom() {\n    for (var i = this._resolutions.length - 1; i >= 0; i--) {\n      if (!isNil(this._resolutions[i])) {\n        return i;\n      }\n    }\n\n    return this._resolutions.length - 1;\n  };\n\n  _proto.getZoomDirection = function getZoomDirection() {\n    return sign(this._resolutions[this.getMinZoom()] - this._resolutions[this.getMaxZoom()]);\n  };\n\n  _proto.toJSON = function toJSON() {\n    if (!this.json) {\n      this.json = {\n        'resolutions': this._resolutions,\n        'fullExtent': {\n          'top': this._fullExtent.top,\n          'left': this._fullExtent.left,\n          'bottom': this._fullExtent.bottom,\n          'right': this._fullExtent.right\n        },\n        'projection': this._projection.code\n      };\n    }\n\n    return this.json;\n  };\n\n  _proto.isPyramid = function isPyramid() {\n    return this._pyramid;\n  };\n\n  return SpatialReference;\n}();\n\nvar TEMP_POINT0$3 = new Point(0, 0);\nvar TEMP_EXTENT$2 = new PointExtent();\nvar options = {\n  'id': null,\n  'visible': true,\n  'interactive': true,\n  'editable': true,\n  'cursor': null,\n  'defaultProjection': 'EPSG:4326'\n};\n\nvar Geometry = function (_JSONAble) {\n  _inheritsLoose(Geometry, _JSONAble);\n\n  function Geometry(options) {\n    var _this;\n\n    var opts = extend({}, options);\n    var symbol = opts['symbol'];\n    var properties = opts['properties'];\n    var id = opts['id'];\n    delete opts['symbol'];\n    delete opts['id'];\n    delete opts['properties'];\n    _this = _JSONAble.call(this, opts) || this;\n\n    if (symbol) {\n      _this.setSymbol(symbol);\n    } else {\n      _this._genSizeSymbol();\n    }\n\n    if (properties) {\n      _this.setProperties(properties);\n    }\n\n    if (!isNil(id)) {\n      _this.setId(id);\n    }\n\n    return _this;\n  }\n\n  var _proto = Geometry.prototype;\n\n  _proto.getFirstCoordinate = function getFirstCoordinate() {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n\n      if (!geometries.length) {\n        return null;\n      }\n\n      return geometries[0].getFirstCoordinate();\n    }\n\n    var coordinates = this.getCoordinates();\n\n    if (!Array.isArray(coordinates)) {\n      return coordinates;\n    }\n\n    do {\n      coordinates = coordinates[0];\n    } while (Array.isArray(coordinates) && coordinates.length > 0);\n\n    return coordinates;\n  };\n\n  _proto.getLastCoordinate = function getLastCoordinate() {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n\n      if (!geometries.length) {\n        return null;\n      }\n\n      return geometries[geometries.length - 1].getLastCoordinate();\n    }\n\n    var coordinates = this.getCoordinates();\n\n    if (!Array.isArray(coordinates)) {\n      return coordinates;\n    }\n\n    do {\n      coordinates = coordinates[coordinates.length - 1];\n    } while (Array.isArray(coordinates) && coordinates.length > 0);\n\n    return coordinates;\n  };\n\n  _proto.addTo = function addTo(layer, fitview) {\n    layer.addGeometry(this, fitview);\n    return this;\n  };\n\n  _proto.getLayer = function getLayer() {\n    if (!this._layer) {\n      return null;\n    }\n\n    return this._layer;\n  };\n\n  _proto.getMap = function getMap() {\n    if (!this._layer) {\n      return null;\n    }\n\n    return this._layer.getMap();\n  };\n\n  _proto.getId = function getId() {\n    return this._id;\n  };\n\n  _proto.setId = function setId(id) {\n    var oldId = this.getId();\n    this._id = id;\n\n    this._fireEvent('idchange', {\n      'old': oldId,\n      'new': id\n    });\n\n    return this;\n  };\n\n  _proto.getProperties = function getProperties() {\n    if (!this.properties) {\n      if (this._getParent()) {\n        return this._getParent().getProperties();\n      }\n\n      return null;\n    }\n\n    return this.properties;\n  };\n\n  _proto.setProperties = function setProperties(properties) {\n    var old = this.properties;\n    this.properties = isObject(properties) ? extend({}, properties) : properties;\n\n    this._repaint();\n\n    this._fireEvent('propertieschange', {\n      'old': old,\n      'new': properties\n    });\n\n    return this;\n  };\n\n  _proto.getType = function getType() {\n    return this.type;\n  };\n\n  _proto.getSymbol = function getSymbol() {\n    var s = this._symbol;\n\n    if (s) {\n      if (!Array.isArray(s)) {\n        return extend({}, s);\n      } else {\n        return extendSymbol(s);\n      }\n    }\n\n    return null;\n  };\n\n  _proto.setSymbol = function setSymbol(symbol) {\n    this._symbolUpdated = symbol;\n    this._symbol = this._prepareSymbol(symbol);\n    this.onSymbolChanged();\n    delete this._compiledSymbol;\n    delete this._symbolHash;\n    return this;\n  };\n\n  _proto.getSymbolHash = function getSymbolHash$$1() {\n    if (!this._symbolHash) {\n      this._symbolHash = getSymbolHash(this._symbolUpdated);\n    }\n\n    return this._symbolHash;\n  };\n\n  _proto.updateSymbol = function updateSymbol(props) {\n    if (!props) {\n      return this;\n    }\n\n    var s = this._getSymbol();\n\n    if (Array.isArray(s)) {\n      if (!Array.isArray(props)) {\n        throw new Error('Parameter of updateSymbol is not an array.');\n      }\n\n      for (var i = 0; i < props.length; i++) {\n        if (isTextSymbol(props[i])) {\n          delete this._textDesc;\n        }\n\n        if (s[i] && props[i]) {\n          s[i] = extendSymbol(s[i], props[i]);\n        }\n      }\n    } else if (Array.isArray(props)) {\n      throw new Error('Geometry\\'s symbol is not an array to update.');\n    } else {\n      if (isTextSymbol(s)) {\n        delete this._textDesc;\n      }\n\n      if (s) {\n        s = extendSymbol(s, props);\n      } else {\n        s = extendSymbol(this._getInternalSymbol(), props);\n      }\n    }\n\n    this._eventSymbolProperties = props;\n    delete this._compiledSymbol;\n    return this.setSymbol(s);\n  };\n\n  _proto.getTextContent = function getTextContent() {\n    var symbol = this._getInternalSymbol();\n\n    if (Array.isArray(symbol)) {\n      var contents = [];\n      var has = false;\n\n      for (var i = 0; i < symbol.length; i++) {\n        contents[i] = replaceVariable(symbol[i] && symbol[i]['textName'], this.getProperties());\n\n        if (!isNil(contents[i])) {\n          has = true;\n        }\n      }\n\n      return has ? contents : null;\n    }\n\n    return replaceVariable(symbol && symbol['textName'], this.getProperties());\n  };\n\n  _proto.getTextDesc = function getTextDesc() {\n    if (!this._textDesc) {\n      var textContent = this.getTextContent();\n      var symbol = this._sizeSymbol;\n      var isArray = Array.isArray(textContent);\n\n      if (Array.isArray(symbol)) {\n        this._textDesc = symbol.map(function (s, i) {\n          return describeText(isArray ? textContent[i] : '', s);\n        });\n      } else {\n        this._textDesc = describeText(textContent, symbol);\n      }\n    }\n\n    return this._textDesc;\n  };\n\n  _proto.getCenter = function getCenter() {\n    return this._computeCenter(this._getMeasurer());\n  };\n\n  _proto.getExtent = function getExtent() {\n    var prjExt = this._getPrjExtent();\n\n    var projection = this._getProjection();\n\n    if (prjExt && projection) {\n      var min = projection.unproject(new Coordinate(prjExt['xmin'], prjExt['ymin'])),\n          max = projection.unproject(new Coordinate(prjExt['xmax'], prjExt['ymax']));\n      return new Extent(min, max, projection);\n    } else {\n      return this._computeExtent(this._getMeasurer());\n    }\n  };\n\n  _proto.getContainerExtent = function getContainerExtent(out) {\n    var extent2d = this.get2DExtent();\n\n    if (!extent2d || !extent2d.isValid()) {\n      return null;\n    }\n\n    var map = this.getMap();\n    var center = this.getCenter();\n    var glRes = map.getGLRes();\n    var minAltitude = this.getMinAltitude();\n    var altitude = map.distanceToPointAtRes(minAltitude, 0, glRes, center).x * sign(minAltitude);\n    var extent = extent2d.convertTo(function (c) {\n      return map._pointAtResToContainerPoint(c, glRes, altitude, TEMP_POINT0$3);\n    }, out);\n    var maxAltitude = this.getMaxAltitude();\n\n    if (maxAltitude !== minAltitude) {\n      maxAltitude = map.distanceToPointAtRes(maxAltitude, 0, glRes, center).x * sign(maxAltitude);\n      var extent2 = extent2d.convertTo(function (c) {\n        return map._pointAtResToContainerPoint(c, glRes, maxAltitude, TEMP_POINT0$3);\n      }, TEMP_EXTENT$2);\n\n      extent._combine(extent2);\n    }\n\n    var layer = this.getLayer();\n\n    if (layer && this.type === 'LineString' && maxAltitude && layer.options['drawAltitude']) {\n      var groundExtent = extent2d.convertTo(function (c) {\n        return map._pointAtResToContainerPoint(c, glRes, 0, TEMP_POINT0$3);\n      }, TEMP_EXTENT$2);\n\n      extent._combine(groundExtent);\n    }\n\n    if (extent) {\n      extent._add(this._getFixedExtent());\n    }\n\n    var smoothness = this.options['smoothness'];\n\n    if (smoothness) {\n      extent._expand(extent.getWidth() * 0.15);\n    }\n\n    return extent;\n  };\n\n  _proto._getFixedExtent = function _getFixedExtent() {\n    if (!this._fixedExtent) {\n      this._fixedExtent = new PointExtent();\n    }\n\n    var symbol = this._sizeSymbol;\n    var t = (symbol && symbol['lineWidth'] || 1) / 2;\n\n    this._fixedExtent.set(-t, -t, t, t);\n\n    var dx = symbol && symbol['lineDx'] || 0;\n\n    this._fixedExtent._add([dx, 0]);\n\n    var dy = symbol && symbol['lineDy'] || 0;\n\n    this._fixedExtent._add([0, dy]);\n\n    return this._fixedExtent;\n  };\n\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n\n    if (!map) {\n      return null;\n    }\n\n    if (this._extent2d) {\n      return this._extent2d;\n    }\n\n    var extent = this._getPrjExtent();\n\n    if (!extent || !extent.isValid()) {\n      return null;\n    }\n\n    var min = extent.getMin();\n    var max = extent.getMax();\n    var glRes = map.getGLRes();\n\n    map._prjToPointAtRes(min, glRes, min);\n\n    map._prjToPointAtRes(max, glRes, max);\n\n    this._extent2d = new PointExtent(min, max);\n    this._extent2d.z = map.getZoom();\n    return this._extent2d;\n  };\n\n  _proto.getSize = function getSize() {\n    var extent = this.getContainerExtent();\n    return extent ? extent.getSize() : null;\n  };\n\n  _proto.containsPoint = function containsPoint(containerPoint, t) {\n    if (!this.getMap()) {\n      throw new Error('The geometry is required to be added on a map to perform \"containsPoint\".');\n    }\n\n    if (containerPoint instanceof Coordinate) {\n      containerPoint = this.getMap().coordToContainerPoint(containerPoint);\n    }\n\n    return this._containsPoint(containerPoint, t);\n  };\n\n  _proto._containsPoint = function _containsPoint(containerPoint, t) {\n    var painter = this._getPainter();\n\n    if (!painter) {\n      return false;\n    }\n\n    if (isNil(t) && this._hitTestTolerance) {\n      t = this._hitTestTolerance();\n    }\n\n    return painter.hitTest(containerPoint, t);\n  };\n\n  _proto.show = function show() {\n    this.options['visible'] = true;\n\n    if (this.getMap()) {\n      var painter = this._getPainter();\n\n      if (painter) {\n        painter.show();\n      }\n\n      this._fireEvent('show');\n    }\n\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    this.options['visible'] = false;\n\n    if (this.getMap()) {\n      this.onHide();\n\n      var painter = this._getPainter();\n\n      if (painter) {\n        painter.hide();\n      }\n\n      this._fireEvent('hide');\n    }\n\n    return this;\n  };\n\n  _proto.isVisible = function isVisible() {\n    if (!this.options['visible']) {\n      return false;\n    }\n\n    var symbol = this._getInternalSymbol();\n\n    if (!symbol) {\n      return true;\n    }\n\n    if (Array.isArray(symbol)) {\n      if (!symbol.length) {\n        return true;\n      }\n\n      for (var i = 0, l = symbol.length; i < l; i++) {\n        if (isNil(symbol[i]['opacity']) || symbol[i]['opacity'] > 0) {\n          return true;\n        }\n      }\n\n      return false;\n    } else {\n      return isNil(symbol['opacity']) || isObject(symbol['opacity']) || isNumber(symbol['opacity']) && symbol['opacity'] > 0;\n    }\n  };\n\n  _proto.getZIndex = function getZIndex() {\n    return this.options['zIndex'] || 0;\n  };\n\n  _proto.setZIndex = function setZIndex(zIndex) {\n    var old = this.options['zIndex'];\n    this.options['zIndex'] = zIndex;\n\n    this._fireEvent('zindexchange', {\n      'old': old,\n      'new': zIndex\n    });\n\n    return this;\n  };\n\n  _proto.setZIndexSilently = function setZIndexSilently(zIndex) {\n    this.options['zIndex'] = zIndex;\n    return this;\n  };\n\n  _proto.bringToFront = function bringToFront() {\n    var layer = this.getLayer();\n\n    if (!layer || !layer.getGeoMaxZIndex) {\n      return this;\n    }\n\n    var topZ = layer.getGeoMaxZIndex();\n    this.setZIndex(topZ + 1);\n    return this;\n  };\n\n  _proto.bringToBack = function bringToBack() {\n    var layer = this.getLayer();\n\n    if (!layer || !layer.getGeoMinZIndex) {\n      return this;\n    }\n\n    var bottomZ = layer.getGeoMinZIndex();\n    this.setZIndex(bottomZ - 1);\n    return this;\n  };\n\n  _proto.translate = function translate(x, y) {\n    if (isNil(x)) {\n      return this;\n    }\n\n    var offset = new Coordinate(x, y);\n\n    if (offset.x === 0 && offset.y === 0) {\n      return this;\n    }\n\n    var coordinates = this.getCoordinates();\n    this._silence = true;\n\n    if (coordinates) {\n      if (Array.isArray(coordinates)) {\n        var translated = forEachCoord(coordinates, function (coord) {\n          return coord.add(offset);\n        });\n        this.setCoordinates(translated);\n      } else {\n        this.setCoordinates(coordinates.add(offset));\n      }\n    }\n\n    this._silence = false;\n\n    this._fireEvent('positionchange');\n\n    return this;\n  };\n\n  _proto.flash = function flash$$1(interval, count, cb, context) {\n    return flash.call(this, interval, count, cb, context);\n  };\n\n  _proto.copy = function copy() {\n    var json = this.toJSON();\n    var ret = Geometry.fromJSON(json);\n    ret.options['visible'] = true;\n    return ret;\n  };\n\n  _proto.remove = function remove() {\n    var layer = this.getLayer();\n\n    if (!layer) {\n      return this;\n    }\n\n    this._fireEvent('removestart');\n\n    this._unbind();\n\n    this._fireEvent('removeend');\n\n    this._fireEvent('remove');\n\n    return this;\n  };\n\n  _proto.toGeoJSONGeometry = function toGeoJSONGeometry() {\n    var gJson = this._exportGeoJSONGeometry();\n\n    return gJson;\n  };\n\n  _proto.toGeoJSON = function toGeoJSON(opts) {\n    if (!opts) {\n      opts = {};\n    }\n\n    var feature = {\n      'type': 'Feature',\n      'geometry': null\n    };\n\n    if (isNil(opts['geometry']) || opts['geometry']) {\n      var geoJSON = this._exportGeoJSONGeometry();\n\n      feature['geometry'] = geoJSON;\n    }\n\n    var id = this.getId();\n\n    if (!isNil(id)) {\n      feature['id'] = id;\n    }\n\n    var properties;\n\n    if (isNil(opts['properties']) || opts['properties']) {\n      properties = this._exportProperties();\n    }\n\n    feature['properties'] = properties;\n    return feature;\n  };\n\n  _proto.toJSON = function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var json = this._toJSON(options);\n\n    var other = this._exportGraphicOptions(options);\n\n    extend(json, other);\n    return json;\n  };\n\n  _proto.getLength = function getLength() {\n    return this._computeGeodesicLength(this._getMeasurer());\n  };\n\n  _proto.getArea = function getArea() {\n    return this._computeGeodesicArea(this._getMeasurer());\n  };\n\n  _proto.rotate = function rotate(angle, pivot) {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n      geometries.forEach(function (g) {\n        return g.rotate(angle, pivot);\n      });\n      return this;\n    }\n\n    if (!pivot) {\n      pivot = this.getCenter();\n    } else {\n      pivot = new Coordinate(pivot);\n    }\n\n    var measurer = this._getMeasurer();\n\n    var coordinates = this.getCoordinates();\n\n    if (!Array.isArray(coordinates)) {\n      if (pivot.x !== coordinates.x || pivot.y !== coordinates.y) {\n        var c = measurer._rotate(coordinates, pivot, angle);\n\n        this.setCoordinates(c);\n      }\n\n      return this;\n    }\n\n    forEachCoord(coordinates, function (c) {\n      return measurer._rotate(c, pivot, angle);\n    });\n    this.setCoordinates(coordinates);\n    return this;\n  };\n\n  _proto._getConnectPoints = function _getConnectPoints() {\n    return [this.getCenter()];\n  };\n\n  _proto._initOptions = function _initOptions(options) {\n    var opts = extend({}, options);\n    var symbol = opts['symbol'];\n    var properties = opts['properties'];\n    var id = opts['id'];\n    delete opts['symbol'];\n    delete opts['id'];\n    delete opts['properties'];\n    this.setOptions(opts);\n\n    if (symbol) {\n      this.setSymbol(symbol);\n    }\n\n    if (properties) {\n      this.setProperties(properties);\n    }\n\n    if (!isNil(id)) {\n      this.setId(id);\n    }\n  };\n\n  _proto._bindLayer = function _bindLayer(layer) {\n    if (this.getLayer()) {\n      throw new Error('Geometry cannot be added to two or more layers at the same time.');\n    }\n\n    this._layer = layer;\n\n    this._clearCache();\n\n    this._bindInfoWindow();\n\n    this._bindMenu();\n  };\n\n  _proto._prepareSymbol = function _prepareSymbol(symbol) {\n    if (Array.isArray(symbol)) {\n      var cookedSymbols = [];\n\n      for (var i = 0; i < symbol.length; i++) {\n        cookedSymbols.push(convertResourceUrl(this._checkAndCopySymbol(symbol[i])));\n      }\n\n      return cookedSymbols;\n    } else if (symbol) {\n      symbol = this._checkAndCopySymbol(symbol);\n      return convertResourceUrl(symbol);\n    }\n\n    return null;\n  };\n\n  _proto._checkAndCopySymbol = function _checkAndCopySymbol(symbol) {\n    var s = {};\n\n    for (var i in symbol) {\n      if (NUMERICAL_PROPERTIES[i] && isString(symbol[i])) {\n        s[i] = +symbol[i];\n      } else {\n        s[i] = symbol[i];\n      }\n    }\n\n    return s;\n  };\n\n  _proto._getSymbol = function _getSymbol() {\n    return this._symbol;\n  };\n\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    this._eventSymbolProperties = symbol;\n\n    if (!this._symbol) {\n      delete this._textDesc;\n    }\n\n    this._externSymbol = this._prepareSymbol(symbol);\n    this.onSymbolChanged();\n    return this;\n  };\n\n  _proto._getInternalSymbol = function _getInternalSymbol() {\n    if (this._symbol) {\n      return this._symbol;\n    } else if (this._externSymbol) {\n      return this._externSymbol;\n    } else if (this.options['symbol']) {\n      return this.options['symbol'];\n    }\n\n    return null;\n  };\n\n  _proto._getPrjExtent = function _getPrjExtent() {\n    var p = this._getProjection();\n\n    this._verifyProjection();\n\n    if (!this._extent && p) {\n      this._extent = this._computePrjExtent(p);\n    }\n\n    return this._extent;\n  };\n\n  _proto._unbind = function _unbind() {\n    var layer = this.getLayer();\n\n    if (!layer) {\n      return;\n    }\n\n    if (this._animPlayer) {\n      this._animPlayer.finish();\n    }\n\n    this._unbindMenu();\n\n    this._unbindInfoWindow();\n\n    if (this.isEditing()) {\n      this.endEdit();\n    }\n\n    this._removePainter();\n\n    if (this.onRemove) {\n      this.onRemove();\n    }\n\n    if (layer.onRemoveGeometry) {\n      layer.onRemoveGeometry(this);\n    }\n\n    delete this._layer;\n    delete this._internalId;\n    delete this._extent;\n  };\n\n  _proto._getInternalId = function _getInternalId() {\n    return this._internalId;\n  };\n\n  _proto._setInternalId = function _setInternalId(id) {\n    this._internalId = id;\n  };\n\n  _proto._getMeasurer = function _getMeasurer() {\n    if (this._getProjection()) {\n      return this._getProjection();\n    }\n\n    return SpatialReference.getProjectionInstance(this.options['defaultProjection']);\n  };\n\n  _proto._getProjection = function _getProjection() {\n    var map = this.getMap();\n\n    if (map) {\n      return map.getProjection();\n    }\n\n    return null;\n  };\n\n  _proto._verifyProjection = function _verifyProjection() {\n    var projection = this._getProjection();\n\n    if (this._projCode && projection && this._projCode !== projection.code) {\n      this._clearProjection();\n    }\n\n    this._projCode = projection ? projection.code : this._projCode;\n  };\n\n  _proto._getExternalResources = function _getExternalResources() {\n    var symbol = this._getInternalSymbol();\n\n    return getExternalResources(symbol);\n  };\n\n  _proto._getPainter = function _getPainter() {\n    var layer = this.getLayer();\n\n    if (!this._painter && layer) {\n      if (GEOMETRY_COLLECTION_TYPES.indexOf(this.type) !== -1) {\n        if (layer.constructor.getCollectionPainterClass) {\n          var clazz = layer.constructor.getCollectionPainterClass();\n\n          if (clazz) {\n            this._painter = new clazz(this);\n          }\n        }\n      } else if (layer.constructor.getPainterClass) {\n        var _clazz = layer.constructor.getPainterClass();\n\n        if (_clazz) {\n          this._painter = new _clazz(this);\n        }\n      }\n    }\n\n    return this._painter;\n  };\n\n  _proto._getMaskPainter = function _getMaskPainter() {\n    if (this._maskPainter) {\n      return this._maskPainter;\n    }\n\n    this._maskPainter = this.getGeometries && this.getGeometries() ? new CollectionPainter(this, true) : new Painter(this);\n    return this._maskPainter;\n  };\n\n  _proto._removePainter = function _removePainter() {\n    if (this._painter) {\n      this._painter.remove();\n    }\n\n    delete this._painter;\n  };\n\n  _proto._paint = function _paint(extent) {\n    if (this._painter) {\n      if (this._dirtyCoords) {\n        delete this._dirtyCoords;\n\n        var projection = this._getProjection();\n\n        if (projection) {\n          this._pcenter = projection.project(this._coordinates);\n\n          this._clearCache();\n        }\n      }\n\n      this._painter.paint(extent);\n    }\n  };\n\n  _proto._clearCache = function _clearCache() {\n    delete this._extent;\n    delete this._extent2d;\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    delete this._extent;\n    delete this._extent2d;\n  };\n\n  _proto._repaint = function _repaint() {\n    if (this._painter) {\n      this._painter.repaint();\n    }\n  };\n\n  _proto.onHide = function onHide() {\n    this.closeMenu();\n    this.closeInfoWindow();\n  };\n\n  _proto.onShapeChanged = function onShapeChanged() {\n    this._clearCache();\n\n    this._repaint();\n\n    this._fireEvent('shapechange');\n  };\n\n  _proto.onPositionChanged = function onPositionChanged() {\n    this._clearCache();\n\n    this._repaint();\n\n    this._fireEvent('positionchange');\n  };\n\n  _proto.onSymbolChanged = function onSymbolChanged() {\n    if (this._painter) {\n      this._painter.refreshSymbol();\n    }\n\n    var e = {};\n\n    if (this._eventSymbolProperties) {\n      e.properties = extend({}, this._eventSymbolProperties);\n      delete this._eventSymbolProperties;\n    } else {\n      delete this._textDesc;\n    }\n\n    this._genSizeSymbol();\n\n    this._fireEvent('symbolchange', e);\n  };\n\n  _proto._genSizeSymbol = function _genSizeSymbol() {\n    var symbol = this._getInternalSymbol();\n\n    if (!symbol) {\n      delete this._sizeSymbol;\n      return;\n    }\n\n    if (Array.isArray(symbol)) {\n      this._sizeSymbol = [];\n      var dynamicSize = false;\n\n      for (var i = 0; i < symbol.length; i++) {\n        var s = this._sizeSymbol[i] = this._getSizeSymbol(symbol[i]);\n\n        if (!dynamicSize && s && s._dynamic) {\n          dynamicSize = true;\n        }\n      }\n\n      this._sizeSymbol._dynamic = dynamicSize;\n    } else {\n      this._sizeSymbol = this._getSizeSymbol(symbol);\n    }\n  };\n\n  _proto._getSizeSymbol = function _getSizeSymbol(symbol) {\n    var symbolSize = loadGeoSymbol({\n      lineWidth: symbol['lineWidth'],\n      lineDx: symbol['lineDx'],\n      lineDy: symbol['lineDy']\n    }, this);\n\n    if (isFunctionDefinition(symbol['lineWidth']) || isFunctionDefinition(symbol['lineDx']) || isFunctionDefinition(symbol['lineDy'])) {\n      symbolSize._dynamic = true;\n    }\n\n    return symbolSize;\n  };\n\n  _proto._getCompiledSymbol = function _getCompiledSymbol() {\n    if (this._compiledSymbol) {\n      return this._compiledSymbol;\n    }\n\n    this._compiledSymbol = loadGeoSymbol(this._getInternalSymbol(), this);\n    return this._compiledSymbol;\n  };\n\n  _proto.onConfig = function onConfig(conf) {\n    var properties;\n\n    if (conf['properties']) {\n      properties = conf['properties'];\n      delete conf['properties'];\n    }\n\n    var needRepaint = false;\n\n    for (var p in conf) {\n      if (conf.hasOwnProperty(p)) {\n        var prefix = p.slice(0, 5);\n\n        if (prefix === 'arrow' || prefix === 'smoot') {\n          needRepaint = true;\n          break;\n        }\n      }\n    }\n\n    if (properties) {\n      this.setProperties(properties);\n\n      this._repaint();\n    } else if (needRepaint) {\n      this._repaint();\n    }\n  };\n\n  _proto._setParent = function _setParent(geometry) {\n    if (geometry) {\n      this._parent = geometry;\n    }\n  };\n\n  _proto._getParent = function _getParent() {\n    return this._parent;\n  };\n\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (this._silence) {\n      return;\n    }\n\n    if (this.getLayer() && this.getLayer()._onGeometryEvent) {\n      if (!param) {\n        param = {};\n      }\n\n      param['type'] = eventName;\n      param['target'] = this;\n\n      this.getLayer()._onGeometryEvent(param);\n    }\n\n    this.fire(eventName, param);\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options)\n    };\n  };\n\n  _proto._exportGraphicOptions = function _exportGraphicOptions(options) {\n    var json = {};\n\n    if (isNil(options['options']) || options['options']) {\n      json['options'] = this.config();\n    }\n\n    if (isNil(options['symbol']) || options['symbol']) {\n      json['symbol'] = this.getSymbol();\n    }\n\n    if (isNil(options['infoWindow']) || options['infoWindow']) {\n      if (this._infoWinOptions) {\n        json['infoWindow'] = this._infoWinOptions;\n      }\n    }\n\n    return json;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var points = this.getCoordinates();\n    var coordinates = Coordinate.toNumberArrays(points);\n    return {\n      'type': this.getType(),\n      'coordinates': coordinates\n    };\n  };\n\n  _proto._exportProperties = function _exportProperties() {\n    var properties = null;\n    var geoProperties = this.getProperties();\n\n    if (!isNil(geoProperties)) {\n      if (isObject(geoProperties)) {\n        properties = extend({}, geoProperties);\n      } else {\n        properties = geoProperties;\n      }\n    }\n\n    return properties;\n  };\n\n  _proto.getAltitude = function getAltitude() {\n    var layer = this.getLayer();\n\n    if (!layer) {\n      return 0;\n    }\n\n    var layerOpts = layer.options,\n        properties = this.getProperties();\n    var altitude = layerOpts['enableAltitude'] ? properties ? properties[layerOpts['altitudeProperty']] : 0 : 0;\n    var layerAltitude = layer.getAltitude ? layer.getAltitude() : 0;\n\n    if (Array.isArray(altitude)) {\n      return altitude.map(function (alt) {\n        return alt + layerAltitude;\n      });\n    }\n\n    return altitude + layerAltitude;\n  };\n\n  _proto._genMinMaxAlt = function _genMinMaxAlt() {\n    var _this2 = this;\n\n    var altitude = this.getAltitude();\n\n    if (Array.isArray(altitude)) {\n      this._minAlt = Number.MAX_VALUE;\n      this._maxAlt = Number.MIN_VALUE;\n      altitude.forEach(function (alt) {\n        var a = alt;\n\n        if (a < _this2._minAlt) {\n          _this2._minAlt = a;\n        }\n\n        if (a > _this2._maxAlt) {\n          _this2._maxAlt = a;\n        }\n      });\n    } else {\n      this._minAlt = this._maxAlt = altitude;\n    }\n  };\n\n  _proto.getMinAltitude = function getMinAltitude() {\n    if (this._minAlt === undefined) {\n      this._genMinMaxAlt();\n    }\n\n    if (!this._minAlt) {\n      return 0;\n    }\n\n    return this._minAlt;\n  };\n\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    if (this._maxAlt === undefined) {\n      this._genMinMaxAlt();\n    }\n\n    if (!this._maxAlt) {\n      return 0;\n    }\n\n    return this._maxAlt;\n  };\n\n  return Geometry;\n}(JSONAble(Eventable(Handlerable(Class))));\n\nGeometry.mergeOptions(options);\n\nvar options$1 = {\n  'attribution': null,\n  'minZoom': null,\n  'maxZoom': null,\n  'visible': true,\n  'opacity': 1,\n  'globalCompositeOperation': null,\n  'renderer': 'canvas',\n  'debugOutline': '#0f0',\n  'cssFilter': null,\n  'forceRenderOnMoving': false,\n  'forceRenderOnZooming': false,\n  'forceRenderOnRotating': false,\n  'collision': false,\n  'collisionScope': 'layer',\n  'hitDetect': function () {\n    return !Browser$1.mobile;\n  }()\n};\n\nvar Layer = function (_JSONAble) {\n  _inheritsLoose(Layer, _JSONAble);\n\n  function Layer(id, options) {\n    var _this;\n\n    var canvas;\n\n    if (options) {\n      canvas = options.canvas;\n      delete options.canvas;\n    }\n\n    _this = _JSONAble.call(this, options) || this;\n    _this._canvas = canvas;\n\n    _this.setId(id);\n\n    if (options) {\n      _this.setZIndex(options.zIndex);\n\n      if (options.mask) {\n        _this.setMask(Geometry.fromJSON(options.mask));\n      }\n    }\n\n    return _this;\n  }\n\n  var _proto = Layer.prototype;\n\n  _proto.load = function load() {\n    if (!this.getMap()) {\n      return this;\n    }\n\n    if (this.onLoad()) {\n      this._initRenderer();\n\n      var zIndex = this.getZIndex();\n\n      if (!isNil(zIndex)) {\n        this._renderer.setZIndex(zIndex);\n\n        if (!this.isCanvasRender()) {\n          this._renderer.render();\n        }\n      }\n\n      this.onLoadEnd();\n    }\n\n    return this;\n  };\n\n  _proto.getId = function getId() {\n    return this._id;\n  };\n\n  _proto.setId = function setId(id) {\n    var old = this._id;\n\n    if (!isNil(id)) {\n      id = id + '';\n    }\n\n    this._id = id;\n    this.fire('idchange', {\n      'old': old,\n      'new': id\n    });\n    return this;\n  };\n\n  _proto.addTo = function addTo(map) {\n    map.addLayer(this);\n    return this;\n  };\n\n  _proto.setZIndex = function setZIndex(zIndex) {\n    this._zIndex = zIndex;\n\n    if (isNil(zIndex)) {\n      delete this.options['zIndex'];\n    } else {\n      this.options.zIndex = zIndex;\n    }\n\n    if (this.map) {\n      this.map._sortLayersByZIndex();\n    }\n\n    if (this._renderer) {\n      this._renderer.setZIndex(zIndex);\n    }\n\n    return this;\n  };\n\n  _proto.getZIndex = function getZIndex() {\n    return this._zIndex || 0;\n  };\n\n  _proto.getMinZoom = function getMinZoom() {\n    var map = this.getMap();\n    var minZoom = this.options['minZoom'];\n    return map ? Math.max(map.getMinZoom(), minZoom || 0) : minZoom;\n  };\n\n  _proto.getMaxZoom = function getMaxZoom() {\n    var map = this.getMap();\n    var maxZoom = this.options['maxZoom'];\n    return map ? Math.min(map.getMaxZoom(), isNil(maxZoom) ? Infinity : maxZoom) : maxZoom;\n  };\n\n  _proto.getOpacity = function getOpacity() {\n    return this.options['opacity'];\n  };\n\n  _proto.setOpacity = function setOpacity(op) {\n    this.config('opacity', op);\n    return this;\n  };\n\n  _proto.isCanvasRender = function isCanvasRender() {\n    var renderer = this._getRenderer();\n\n    return renderer && renderer instanceof CanvasRenderer;\n  };\n\n  _proto.getMap = function getMap() {\n    if (this.map) {\n      return this.map;\n    }\n\n    return null;\n  };\n\n  _proto.getProjection = function getProjection() {\n    var map = this.getMap();\n    return map ? map.getProjection() : null;\n  };\n\n  _proto.bringToFront = function bringToFront() {\n    var layers = this._getLayerList();\n\n    if (!layers.length) {\n      return this;\n    }\n\n    var topLayer = layers[layers.length - 1];\n\n    if (layers.length === 1 || topLayer === this) {\n      return this;\n    }\n\n    var max = topLayer.getZIndex();\n    this.setZIndex(max + 1);\n    return this;\n  };\n\n  _proto.bringToBack = function bringToBack() {\n    var layers = this._getLayerList();\n\n    if (!layers.length) {\n      return this;\n    }\n\n    var bottomLayer = layers[0];\n\n    if (layers.length === 1 || bottomLayer === this) {\n      return this;\n    }\n\n    var min = bottomLayer.getZIndex();\n    this.setZIndex(min - 1);\n    return this;\n  };\n\n  _proto.show = function show() {\n    var _this2 = this;\n\n    if (!this.options['visible']) {\n      this.options['visible'] = true;\n      var renderer = this.getRenderer();\n\n      if (renderer) {\n        renderer.show();\n      }\n\n      var map = this.getMap();\n\n      if (renderer && map) {\n        map.once('renderend', function () {\n          _this2.fire('show');\n        });\n      } else {\n        this.fire('show');\n      }\n    }\n\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    var _this3 = this;\n\n    if (this.options['visible']) {\n      this.options['visible'] = false;\n      var renderer = this.getRenderer();\n\n      if (renderer) {\n        renderer.hide();\n      }\n\n      var map = this.getMap();\n\n      if (renderer && map) {\n        map.once('renderend', function () {\n          _this3.fire('hide');\n        });\n      } else {\n        this.fire('hide');\n      }\n    }\n\n    return this;\n  };\n\n  _proto.isVisible = function isVisible() {\n    if (isNumber(this.options['opacity']) && this.options['opacity'] <= 0) {\n      return false;\n    }\n\n    var map = this.getMap();\n\n    if (map) {\n      var zoom = map.getZoom();\n\n      if (!isNil(this.options['maxZoom']) && this.options['maxZoom'] < zoom || !isNil(this.options['minZoom']) && this.options['minZoom'] > zoom) {\n        return false;\n      }\n    }\n\n    if (isNil(this.options['visible'])) {\n      this.options['visible'] = true;\n    }\n\n    return this.options['visible'];\n  };\n\n  _proto.remove = function remove() {\n    if (this.map) {\n      this.map.removeLayer(this);\n    }\n\n    return this;\n  };\n\n  _proto.getMask = function getMask() {\n    return this._mask;\n  };\n\n  _proto.setMask = function setMask(mask) {\n    if (!(mask.type === 'Point' && mask._isVectorMarker() || mask.type === 'Polygon' || mask.type === 'MultiPolygon')) {\n      throw new Error('Mask for a layer must be a marker with vector marker symbol or a Polygon(MultiPolygon).');\n    }\n\n    mask._bindLayer(this);\n\n    if (mask.type === 'Point') {\n      mask.updateSymbol({\n        'markerLineColor': 'rgba(0, 0, 0, 0)',\n        'markerFillOpacity': 0\n      });\n    } else {\n      mask.setSymbol({\n        'lineColor': 'rgba(0, 0, 0, 0)',\n        'polygonOpacity': 0\n      });\n    }\n\n    this._mask = mask;\n    this.options.mask = mask.toJSON();\n\n    if (!this.getMap() || this.getMap().isZooming()) {\n      return this;\n    }\n\n    var renderer = this._getRenderer();\n\n    if (renderer && renderer.setToRedraw) {\n      this._getRenderer().setToRedraw();\n    }\n\n    return this;\n  };\n\n  _proto.removeMask = function removeMask() {\n    delete this._mask;\n    delete this.options.mask;\n\n    if (!this.getMap() || this.getMap().isZooming()) {\n      return this;\n    }\n\n    var renderer = this._getRenderer();\n\n    if (renderer && renderer.setToRedraw) {\n      this._getRenderer().setToRedraw();\n    }\n\n    return this;\n  };\n\n  _proto.onLoad = function onLoad() {\n    return true;\n  };\n\n  _proto.onLoadEnd = function onLoadEnd() {};\n\n  _proto.isLoaded = function isLoaded() {\n    return !!this._loaded;\n  };\n\n  _proto.getCollisionIndex = function getCollisionIndex() {\n    if (this.options['collisionScope'] === 'layer') {\n      if (!this._collisionIndex) {\n        this._collisionIndex = new CollisionIndex();\n      }\n\n      return this._collisionIndex;\n    }\n\n    var map = this.getMap();\n\n    if (!map) {\n      return null;\n    }\n\n    return map.getCollisionIndex();\n  };\n\n  _proto.clearCollisionIndex = function clearCollisionIndex() {\n    if (this.options['collisionScope'] === 'layer' && this._collisionIndex) {\n      this._collisionIndex.clear();\n    }\n\n    return this;\n  };\n\n  _proto.getRenderer = function getRenderer() {\n    return this._getRenderer();\n  };\n\n  _proto.onConfig = function onConfig(conf) {\n    if (isNumber(conf['opacity']) || conf['cssFilter']) {\n      var renderer = this.getRenderer();\n\n      if (renderer) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n\n  _proto.onAdd = function onAdd() {};\n\n  _proto.onRendererCreate = function onRendererCreate() {};\n\n  _proto.onCanvasCreate = function onCanvasCreate() {};\n\n  _proto.onRemove = function onRemove() {};\n\n  _proto._bindMap = function _bindMap(map, zIndex) {\n    if (!map) {\n      return;\n    }\n\n    this.map = map;\n\n    if (!isNil(zIndex)) {\n      this.setZIndex(zIndex);\n    }\n\n    this._switchEvents('on', this);\n\n    this.onAdd();\n    this.fire('add');\n  };\n\n  _proto._initRenderer = function _initRenderer() {\n    var renderer = this.options['renderer'];\n\n    if (!this.constructor.getRendererClass) {\n      return;\n    }\n\n    var clazz = this.constructor.getRendererClass(renderer);\n\n    if (!clazz) {\n      throw new Error('Invalid renderer for Layer(' + this.getId() + '):' + renderer);\n    }\n\n    this._renderer = new clazz(this);\n    this._renderer.layer = this;\n\n    this._renderer.setZIndex(this.getZIndex());\n\n    this._switchEvents('on', this._renderer);\n\n    if (this._renderer.onAdd) {\n      this._renderer.onAdd();\n    }\n\n    this.onRendererCreate();\n    this.fire('renderercreate', {\n      'renderer': this._renderer\n    });\n  };\n\n  _proto._doRemove = function _doRemove() {\n    this._loaded = false;\n    this.onRemove();\n\n    this._switchEvents('off', this);\n\n    if (this._renderer) {\n      this._switchEvents('off', this._renderer);\n\n      this._renderer.remove();\n\n      delete this._renderer;\n    }\n\n    delete this.map;\n    delete this._collisionIndex;\n  };\n\n  _proto._switchEvents = function _switchEvents(to, emitter) {\n    if (emitter && emitter.getEvents) {\n      this.getMap()[to](emitter.getEvents(), emitter);\n    }\n  };\n\n  _proto._getRenderer = function _getRenderer() {\n    return this._renderer;\n  };\n\n  _proto._getLayerList = function _getLayerList() {\n    if (!this.map) {\n      return [];\n    }\n\n    return this.map._layers;\n  };\n\n  _proto._getMask2DExtent = function _getMask2DExtent() {\n    if (!this._mask || !this.getMap()) {\n      return null;\n    }\n\n    var painter = this._mask._getMaskPainter();\n\n    if (!painter) {\n      return null;\n    }\n\n    return painter.get2DExtent();\n  };\n\n  return Layer;\n}(JSONAble(Eventable(Renderable(Class))));\n\nLayer.mergeOptions(options$1);\nvar fire = Layer.prototype.fire;\n\nLayer.prototype.fire = function (eventType, param) {\n  if (eventType === 'layerload') {\n    this._loaded = true;\n  }\n\n  if (this.map) {\n    if (!param) {\n      param = {};\n    }\n\n    param['type'] = eventType;\n    param['target'] = this;\n\n    this.map._onLayerEvent(param);\n  }\n\n  return fire.apply(this, arguments);\n};\n\nvar TEMP_COORD = new Coordinate(0, 0);\nvar options$2 = {\n  'maxVisualPitch': 70,\n  'maxPitch': 80,\n  'centerCross': false,\n  'zoomInCenter': false,\n  'zoomOrigin': null,\n  'zoomAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'zoomAnimationDuration': 330,\n  'panAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'panAnimationDuration': 600,\n  'rotateAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'zoomable': true,\n  'enableInfoWindow': true,\n  'hitDetect': function () {\n    return !Browser$1.mobile;\n  }(),\n  'hitDetectLimit': 5,\n  'fpsOnInteracting': 25,\n  'layerCanvasLimitOnInteracting': -1,\n  'maxZoom': null,\n  'minZoom': null,\n  'maxExtent': null,\n  'fixCenterOnResize': true,\n  'checkSize': true,\n  'checkSizeInterval': 1000,\n  'renderer': 'canvas',\n  'cascadePitches': [10, 60],\n  'renderable': true\n};\n\nvar Map$1 = function (_Handlerable) {\n  _inheritsLoose(Map, _Handlerable);\n\n  function Map(container, options) {\n    var _this;\n\n    if (!options) {\n      throw new Error('Invalid options when creating map.');\n    }\n\n    if (!options['center']) {\n      throw new Error('Invalid center when creating map.');\n    }\n\n    var opts = extend({}, options);\n    var zoom = opts['zoom'];\n    delete opts['zoom'];\n    var center = new Coordinate(opts['center']);\n    delete opts['center'];\n    var baseLayer = opts['baseLayer'];\n    delete opts['baseLayer'];\n    var layers = opts['layers'];\n    delete opts['layers'];\n    _this = _Handlerable.call(this, opts) || this;\n    _this.VERSION = Map.VERSION;\n    Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), 'id', {\n      value: UID(),\n      writable: false\n    });\n    _this._loaded = false;\n\n    _this._initContainer(container);\n\n    _this._panels = {};\n    _this._baseLayer = null;\n    _this._layers = [];\n    _this._zoomLevel = zoom;\n    _this._center = center;\n\n    _this.setSpatialReference(opts['spatialReference'] || opts['view']);\n\n    _this._mapViewPoint = new Point(0, 0);\n\n    _this._initRenderer();\n\n    _this._updateMapSize(_this._getContainerDomSize());\n\n    if (baseLayer) {\n      _this.setBaseLayer(baseLayer);\n    }\n\n    if (layers) {\n      _this.addLayer(layers);\n    }\n\n    _this.setMaxExtent(opts['maxExtent']);\n\n    _this._Load();\n\n    return _this;\n  }\n\n  Map.addOnLoadHook = function addOnLoadHook(fn) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var onload = typeof fn === 'function' ? fn : function () {\n      this[fn].apply(this, args);\n    };\n    this.prototype._onLoadHooks = this.prototype._onLoadHooks || [];\n\n    this.prototype._onLoadHooks.push(onload);\n\n    return this;\n  };\n\n  var _proto = Map.prototype;\n\n  _proto.isLoaded = function isLoaded() {\n    return !!this._loaded;\n  };\n\n  _proto.getContainer = function getContainer() {\n    return this._containerDOM;\n  };\n\n  _proto.getSpatialReference = function getSpatialReference() {\n    return this._spatialReference;\n  };\n\n  _proto.setSpatialReference = function setSpatialReference(ref) {\n    var oldRef = this.options['spatialReference'];\n\n    if (this._loaded && SpatialReference.equals(oldRef, ref)) {\n      return this;\n    }\n\n    this._updateSpatialReference(ref, oldRef);\n\n    return this;\n  };\n\n  _proto._updateSpatialReference = function _updateSpatialReference(ref, oldRef) {\n    if (isString(ref)) {\n      ref = SpatialReference.getPreset(ref);\n    }\n\n    ref = extend({}, ref);\n    this._center = this.getCenter();\n    this.options['spatialReference'] = ref;\n    this._spatialReference = new SpatialReference(ref);\n\n    if (this.options['spatialReference'] && isFunction(this.options['spatialReference']['projection'])) {\n      var projection = this._spatialReference.getProjection();\n\n      this.options['spatialReference']['projection'] = projection['code'];\n    }\n\n    this._resetMapStatus();\n\n    this._fireEvent('spatialreferencechange', {\n      'old': oldRef,\n      'new': extend({}, this.options['spatialReference'])\n    });\n\n    return this;\n  };\n\n  _proto.onConfig = function onConfig(conf) {\n    var ref = conf['spatialReference'] || conf['view'];\n\n    if (!isNil(ref)) {\n      this._updateSpatialReference(ref, null);\n    }\n\n    return this;\n  };\n\n  _proto.getProjection = function getProjection() {\n    if (!this._spatialReference) {\n      return null;\n    }\n\n    return this._spatialReference.getProjection();\n  };\n\n  _proto.getFullExtent = function getFullExtent() {\n    if (!this._spatialReference) {\n      return null;\n    }\n\n    return this._spatialReference.getFullExtent();\n  };\n\n  _proto.setCursor = function setCursor(cursor) {\n    delete this._cursor;\n\n    this._trySetCursor(cursor);\n\n    this._cursor = cursor;\n    return this;\n  };\n\n  _proto.resetCursor = function resetCursor() {\n    return this.setCursor(null);\n  };\n\n  _proto.getCenter = function getCenter() {\n    if (!this._loaded || !this._prjCenter) {\n      return this._center;\n    }\n\n    var projection = this.getProjection();\n    return projection.unproject(this._prjCenter);\n  };\n\n  _proto.setCenter = function setCenter(center) {\n    if (!center) {\n      return this;\n    }\n\n    center = new Coordinate(center);\n    var projection = this.getProjection();\n    var pcenter = projection.project(center);\n\n    if (!this._verifyExtent(pcenter)) {\n      return this;\n    }\n\n    if (!this._loaded) {\n      this._center = center;\n      return this;\n    }\n\n    this.onMoveStart();\n\n    this._setPrjCenter(pcenter);\n\n    this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n    return this;\n  };\n\n  _proto.getSize = function getSize() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return this._getContainerDomSize();\n    }\n\n    return new Size(this.width, this.height);\n  };\n\n  _proto.getContainerExtent = function getContainerExtent() {\n    var visualHeight = this.height;\n    var pitch = this.getPitch(),\n        maxVisualPitch = this.options['maxVisualPitch'];\n\n    if (maxVisualPitch && pitch > maxVisualPitch) {\n      visualHeight = this._getVisualHeight(maxVisualPitch);\n    }\n\n    return new PointExtent(0, this.height - visualHeight, this.width, this.height);\n  };\n\n  _proto._getVisualHeight = function _getVisualHeight(visualPitch) {\n    visualPitch = visualPitch || 1E-2;\n    var pitch = (90 - this.getPitch()) * Math.PI / 180;\n    var fov = this.getFov() * Math.PI / 180;\n    visualPitch *= Math.PI / 180;\n    var cameraToCenter = this.cameraCenterDistance / this.getGLScale();\n    var tanB = Math.tan(fov / 2);\n    var tanP = Math.tan(visualPitch);\n    var visualDistance = cameraToCenter * tanB / (1 / tanP - tanB) / Math.sin(visualPitch);\n    var x = cameraToCenter * (Math.sin(pitch) * visualDistance / (cameraToCenter + Math.cos(pitch) * visualDistance));\n    return this.height / 2 + x;\n  };\n\n  _proto.getExtent = function getExtent() {\n    return this._pointToExtent(this._get2DExtent());\n  };\n\n  _proto.getProjExtent = function getProjExtent() {\n    var extent2D = this._get2DExtent();\n\n    return new Extent(this._pointToPrj(extent2D.getMin()), this._pointToPrj(extent2D.getMax()));\n  };\n\n  _proto.getPrjExtent = function getPrjExtent() {\n    return this.getProjExtent();\n  };\n\n  _proto.getMaxExtent = function getMaxExtent() {\n    if (!this.options['maxExtent']) {\n      return null;\n    }\n\n    return new Extent(this.options['maxExtent'], this.getProjection());\n  };\n\n  _proto.setMaxExtent = function setMaxExtent(extent) {\n    if (extent) {\n      var maxExt = new Extent(extent, this.getProjection());\n      this.options['maxExtent'] = maxExt;\n      var projection = this.getProjection();\n      this._prjMaxExtent = maxExt.convertTo(function (c) {\n        return projection.project(c);\n      });\n\n      if (!this._verifyExtent(this._getPrjCenter())) {\n        if (this._loaded) {\n          this._panTo(this._prjMaxExtent.getCenter());\n        } else {\n          this._center = projection.unproject(this._prjMaxExtent.getCenter());\n        }\n      }\n    } else {\n      delete this.options['maxExtent'];\n      delete this._prjMaxExtent;\n    }\n\n    return this;\n  };\n\n  _proto.getZoom = function getZoom() {\n    return this._zoomLevel;\n  };\n\n  _proto.getZoomForScale = function getZoomForScale(scale, fromZoom, isFraction) {\n    var zoom = this.getZoom();\n\n    if (isNil(fromZoom)) {\n      fromZoom = zoom;\n    }\n\n    if (scale === 1 && fromZoom === zoom) {\n      return zoom;\n    }\n\n    var res = this._getResolution(fromZoom),\n        targetRes = res / scale;\n\n    var scaleZoom = this.getZoomFromRes(targetRes);\n\n    if (isFraction) {\n      return scaleZoom;\n    } else {\n      var delta = 1E-6;\n      return this.getSpatialReference().getZoomDirection() < 0 ? Math.ceil(scaleZoom - delta) : Math.floor(scaleZoom + delta);\n    }\n  };\n\n  _proto.getZoomFromRes = function getZoomFromRes(res) {\n    var resolutions = this._getResolutions(),\n        minRes = this._getResolution(this.getMinZoom()),\n        maxRes = this._getResolution(this.getMaxZoom());\n\n    if (minRes <= maxRes) {\n      if (res <= minRes) {\n        return this.getMinZoom();\n      } else if (res >= maxRes) {\n        return this.getMaxZoom();\n      }\n    } else if (res >= minRes) {\n      return this.getMinZoom();\n    } else if (res <= maxRes) {\n      return this.getMaxZoom();\n    }\n\n    var l = resolutions.length;\n\n    for (var i = 0; i < l - 1; i++) {\n      if (!resolutions[i]) {\n        continue;\n      }\n\n      var gap = resolutions[i + 1] - resolutions[i];\n      var test = res - resolutions[i];\n\n      if (sign(gap) === sign(test) && Math.abs(gap) >= Math.abs(test)) {\n        return i + test / gap;\n      }\n    }\n\n    return l - 1;\n  };\n\n  _proto.setZoom = function setZoom(zoom, options) {\n    if (options === void 0) {\n      options = {\n        'animation': true\n      };\n    }\n\n    if (isNaN(zoom) || isNil(zoom)) {\n      return this;\n    }\n\n    zoom = +zoom;\n\n    if (this._loaded && this.options['zoomAnimation'] && options['animation']) {\n      this._zoomAnimation(zoom);\n    } else {\n      this._zoom(zoom);\n    }\n\n    return this;\n  };\n\n  _proto.getMaxZoom = function getMaxZoom() {\n    if (!isNil(this.options['maxZoom'])) {\n      return this.options['maxZoom'];\n    }\n\n    return this.getMaxNativeZoom();\n  };\n\n  _proto.setMaxZoom = function setMaxZoom(maxZoom) {\n    var viewMaxZoom = this.getMaxNativeZoom();\n\n    if (maxZoom > viewMaxZoom) {\n      maxZoom = viewMaxZoom;\n    }\n\n    if (maxZoom !== null && maxZoom < this._zoomLevel) {\n      this.setZoom(maxZoom);\n      maxZoom = +maxZoom;\n    }\n\n    this.options['maxZoom'] = maxZoom;\n    return this;\n  };\n\n  _proto.getMinZoom = function getMinZoom() {\n    if (!isNil(this.options['minZoom'])) {\n      return this.options['minZoom'];\n    }\n\n    return this._spatialReference.getMinZoom();\n  };\n\n  _proto.setMinZoom = function setMinZoom(minZoom) {\n    if (minZoom !== null) {\n      minZoom = +minZoom;\n\n      var viewMinZoom = this._spatialReference.getMinZoom();\n\n      if (minZoom < viewMinZoom) {\n        minZoom = viewMinZoom;\n      }\n\n      if (minZoom > this._zoomLevel) {\n        this.setZoom(minZoom);\n      }\n    }\n\n    this.options['minZoom'] = minZoom;\n    return this;\n  };\n\n  _proto.getMaxNativeZoom = function getMaxNativeZoom() {\n    var ref = this.getSpatialReference();\n\n    if (!ref) {\n      return null;\n    }\n\n    return ref.getMaxZoom();\n  };\n\n  _proto.getGLRes = function getGLRes() {\n    if (this._glRes) {\n      return this._glRes;\n    }\n\n    var fullExtent = this.getSpatialReference().getFullExtent();\n    this._glRes = (fullExtent.right - fullExtent.left) / Math.pow(2, 19);\n    return this._glRes;\n  };\n\n  _proto.getGLScale = function getGLScale(zoom) {\n    if (isNil(zoom)) {\n      zoom = this.getZoom();\n    }\n\n    return this._getResolution(zoom) / this.getGLRes();\n  };\n\n  _proto.zoomIn = function zoomIn() {\n    return this.setZoom(this.getZoom() + 1);\n  };\n\n  _proto.zoomOut = function zoomOut() {\n    return this.setZoom(this.getZoom() - 1);\n  };\n\n  _proto.isZooming = function isZooming() {\n    return !!this._zooming;\n  };\n\n  _proto.isInteracting = function isInteracting() {\n    return this.isZooming() || this.isMoving() || this.isRotating();\n  };\n\n  _proto.setCenterAndZoom = function setCenterAndZoom(center, zoom) {\n    if (!isNil(zoom) && this._zoomLevel !== zoom) {\n      this.setCenter(center);\n      this.setZoom(zoom, {\n        animation: false\n      });\n    } else {\n      this.setCenter(center);\n    }\n\n    return this;\n  };\n\n  _proto.getFitZoom = function getFitZoom(extent, isFraction) {\n    var _this2 = this;\n\n    if (!extent || !(extent instanceof Extent)) {\n      return this._zoomLevel;\n    }\n\n    if (extent['xmin'] === extent['xmax'] && extent['ymin'] === extent['ymax']) {\n      return this.getMaxZoom();\n    }\n\n    var size = this.getSize();\n    var containerExtent = extent.convertTo(function (p) {\n      return _this2.coordToPoint(p);\n    });\n    var w = containerExtent.getWidth(),\n        h = containerExtent.getHeight();\n    var scaleX = size['width'] / w,\n        scaleY = size['height'] / h;\n    var scale = this.getSpatialReference().getZoomDirection() < 0 ? Math.max(scaleX, scaleY) : Math.min(scaleX, scaleY);\n    var zoom = this.getZoomForScale(scale, null, isFraction);\n    return zoom;\n  };\n\n  _proto.getView = function getView() {\n    return {\n      'center': this.getCenter().toArray(),\n      'zoom': this.getZoom(),\n      'pitch': this.getPitch(),\n      'bearing': this.getBearing()\n    };\n  };\n\n  _proto.setView = function setView(view) {\n    if (!view) {\n      return this;\n    }\n\n    if (view['center']) {\n      this.setCenter(view['center']);\n    }\n\n    if (view['zoom'] !== null && !isNaN(+view['zoom'])) {\n      this.setZoom(+view['zoom'], {\n        'animation': false\n      });\n    }\n\n    if (view['pitch'] !== null && !isNaN(+view['pitch'])) {\n      this.setPitch(+view['pitch']);\n    }\n\n    if (view['pitch'] !== null && !isNaN(+view['bearing'])) {\n      this.setBearing(+view['bearing']);\n    }\n\n    return this;\n  };\n\n  _proto.getResolution = function getResolution(zoom) {\n    return this._getResolution(zoom);\n  };\n\n  _proto.getScale = function getScale(zoom) {\n    var z = isNil(zoom) ? this.getZoom() : zoom;\n\n    var max = this._getResolution(this.getMaxNativeZoom()),\n        res = this._getResolution(z);\n\n    return res / max;\n  };\n\n  _proto.fitExtent = function fitExtent(extent, zoomOffset, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!extent) {\n      return this;\n    }\n\n    extent = new Extent(extent, this.getProjection());\n    var zoom = this.getFitZoom(extent) + (zoomOffset || 0);\n    var center = extent.getCenter();\n    if (typeof options['animation'] === 'undefined' || options['animation']) return this._animateTo({\n      center: center,\n      zoom: zoom\n    }, {\n      'duration': options['duration'] || this.options['zoomAnimationDuration'],\n      'easing': options['easing'] || 'out'\n    }, step);else return this.setCenterAndZoom(center, zoom);\n  };\n\n  _proto.getBaseLayer = function getBaseLayer() {\n    return this._baseLayer;\n  };\n\n  _proto.setBaseLayer = function setBaseLayer(baseLayer) {\n    var isChange = false;\n\n    if (this._baseLayer) {\n      isChange = true;\n\n      this._fireEvent('baselayerchangestart');\n\n      this._baseLayer.remove();\n    }\n\n    if (!baseLayer) {\n      delete this._baseLayer;\n\n      this._fireEvent('baselayerchangeend');\n\n      this._fireEvent('setbaselayer');\n\n      return this;\n    }\n\n    this._baseLayer = baseLayer;\n\n    baseLayer._bindMap(this, -1);\n\n    function onbaseLayerload() {\n      this._fireEvent('baselayerload');\n\n      if (isChange) {\n        isChange = false;\n\n        this._fireEvent('baselayerchangeend');\n      }\n    }\n\n    this._baseLayer.on('layerload', onbaseLayerload, this);\n\n    if (this._loaded) {\n      this._baseLayer.load();\n    }\n\n    this._fireEvent('setbaselayer');\n\n    return this;\n  };\n\n  _proto.removeBaseLayer = function removeBaseLayer() {\n    if (this._baseLayer) {\n      this._baseLayer.remove();\n\n      delete this._baseLayer;\n\n      this._fireEvent('baselayerremove');\n    }\n\n    return this;\n  };\n\n  _proto.getLayers = function getLayers(filter) {\n    return this._getLayers(function (layer) {\n      if (layer === this._baseLayer || layer.getId().indexOf(INTERNAL_LAYER_PREFIX) >= 0) {\n        return false;\n      }\n\n      if (filter) {\n        return filter(layer);\n      }\n\n      return true;\n    });\n  };\n\n  _proto.getLayer = function getLayer(id) {\n    if (!id) {\n      return null;\n    }\n\n    var layer = this._layerCache ? this._layerCache[id] : null;\n\n    if (layer) {\n      return layer;\n    }\n\n    var baseLayer = this.getBaseLayer();\n\n    if (baseLayer && baseLayer.getId() === id) {\n      return baseLayer;\n    }\n\n    return null;\n  };\n\n  _proto.addLayer = function addLayer(layers) {\n    if (!layers) {\n      return this;\n    }\n\n    if (!Array.isArray(layers)) {\n      layers = Array.prototype.slice.call(arguments, 0);\n      return this.addLayer(layers);\n    }\n\n    if (!this._layerCache) {\n      this._layerCache = {};\n    }\n\n    var mapLayers = this._layers;\n\n    for (var i = 0, len = layers.length; i < len; i++) {\n      var layer = layers[i];\n      var id = layer.getId();\n\n      if (isNil(id)) {\n        throw new Error('Invalid id for the layer: ' + id);\n      }\n\n      if (layer.getMap() === this) {\n        continue;\n      }\n\n      if (this._layerCache[id]) {\n        throw new Error('Duplicate layer id in the map: ' + id);\n      }\n\n      this._layerCache[id] = layer;\n\n      layer._bindMap(this);\n\n      mapLayers.push(layer);\n\n      if (this._loaded) {\n        layer.load();\n      }\n    }\n\n    this._sortLayersByZIndex();\n\n    this._fireEvent('addlayer', {\n      'layers': layers\n    });\n\n    return this;\n  };\n\n  _proto.removeLayer = function removeLayer(layers) {\n    if (!layers) {\n      return this;\n    }\n\n    if (!Array.isArray(layers)) {\n      return this.removeLayer([layers]);\n    }\n\n    var removed = [];\n\n    for (var i = 0, len = layers.length; i < len; i++) {\n      var layer = layers[i];\n\n      if (!(layer instanceof Layer)) {\n        layer = this.getLayer(layer);\n      }\n\n      if (!layer) {\n        continue;\n      }\n\n      var map = layer.getMap();\n\n      if (!map || map !== this) {\n        continue;\n      }\n\n      removed.push(layer);\n\n      this._removeLayer(layer, this._layers);\n\n      if (this._loaded) {\n        layer._doRemove();\n      }\n\n      var id = layer.getId();\n\n      if (this._layerCache) {\n        delete this._layerCache[id];\n      }\n    }\n\n    if (removed.length > 0) {\n      var renderer = this.getRenderer();\n\n      if (renderer) {\n        renderer.setLayerCanvasUpdated();\n      }\n\n      this.once('frameend', function () {\n        removed.forEach(function (layer) {\n          layer.fire('remove');\n        });\n      });\n    }\n\n    this._fireEvent('removelayer', {\n      'layers': layers\n    });\n\n    return this;\n  };\n\n  _proto.sortLayers = function sortLayers(layers) {\n    if (!layers || !Array.isArray(layers)) {\n      return this;\n    }\n\n    var layersToOrder = [];\n    var minZ = Number.MAX_VALUE;\n\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var layer = layers[i];\n\n      if (isString(layers[i])) {\n        layer = this.getLayer(layer);\n      }\n\n      if (!(layer instanceof Layer) || !layer.getMap() || layer.getMap() !== this) {\n        throw new Error('It must be a layer added to this map to order.');\n      }\n\n      if (layer.getZIndex() < minZ) {\n        minZ = layer.getZIndex();\n      }\n\n      layersToOrder.push(layer);\n    }\n\n    for (var _i = 0, _l = layersToOrder.length; _i < _l; _i++) {\n      layersToOrder[_i].setZIndex(minZ + _i);\n    }\n\n    return this;\n  };\n\n  _proto.toDataURL = function toDataURL(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var mimeType = options['mimeType'];\n\n    if (!mimeType) {\n      mimeType = 'image/png';\n    }\n\n    var save = options['save'];\n\n    var renderer = this._getRenderer();\n\n    if (renderer && renderer.toDataURL) {\n      var file = options['fileName'];\n\n      if (!file) {\n        file = 'export';\n      }\n\n      var dataURL = renderer.toDataURL(mimeType, options.quality || 0.92);\n\n      if (save && dataURL) {\n        var imgURL;\n\n        if (typeof Blob !== 'undefined' && typeof atob !== 'undefined') {\n          var blob = b64toBlob(dataURL.replace(/^data:image\\/(png|jpeg|jpg|webp);base64,/, ''), mimeType);\n          imgURL = URL.createObjectURL(blob);\n        } else {\n          imgURL = dataURL;\n        }\n\n        var dlLink = document.createElement('a');\n        dlLink.download = file;\n        dlLink.href = imgURL;\n        document.body.appendChild(dlLink);\n        dlLink.click();\n        document.body.removeChild(dlLink);\n      }\n\n      return dataURL;\n    }\n\n    return null;\n  };\n\n  _proto.coordToPoint = function coordToPoint(coordinate, zoom, out) {\n    return this.coordinateToPoint(coordinate, zoom, out);\n  };\n\n  _proto.coordToPointAtRes = function coordToPointAtRes(coordinate, res, out) {\n    return this.coordinateToPointAtRes(coordinate, res, out);\n  };\n\n  _proto.pointToCoord = function pointToCoord(point, zoom, out) {\n    return this.pointToCoordinate(point, zoom, out);\n  };\n\n  _proto.pointAtResToCoord = function pointAtResToCoord(point, res, out) {\n    return this.pointAtResToCoordinate(point, res, out);\n  };\n\n  _proto.coordToViewPoint = function coordToViewPoint(coordinate, out, altitude) {\n    return this.coordinateToViewPoint(coordinate, out, altitude);\n  };\n\n  _proto.viewPointToCoord = function viewPointToCoord(viewPoint, out) {\n    return this.viewPointToCoordinate(viewPoint, out);\n  };\n\n  _proto.coordToContainerPoint = function coordToContainerPoint(coordinate, zoom, out) {\n    return this.coordinateToContainerPoint(coordinate, zoom, out);\n  };\n\n  _proto.containerPointToCoord = function containerPointToCoord(containerPoint, out) {\n    return this.containerPointToCoordinate(containerPoint, out);\n  };\n\n  _proto.containerPointToViewPoint = function containerPointToViewPoint(containerPoint, out) {\n    if (out) {\n      out.set(containerPoint.x, containerPoint.y);\n    } else {\n      out = containerPoint.copy();\n    }\n\n    return out._sub(this.getViewPoint());\n  };\n\n  _proto.viewPointToContainerPoint = function viewPointToContainerPoint(viewPoint, out) {\n    if (out) {\n      out.set(viewPoint.x, viewPoint.y);\n    } else {\n      out = viewPoint.copy();\n    }\n\n    return out._add(this.getViewPoint());\n  };\n\n  _proto.checkSize = function checkSize(force) {\n    var justStart = now() - this._initTime < 1500 && this.width === 0 || this.height === 0;\n\n    var watched = this._getContainerDomSize(),\n        oldHeight = this.height,\n        oldWidth = this.width;\n\n    if (!force && watched['width'] === oldWidth && watched['height'] === oldHeight) {\n      return this;\n    }\n\n    computeDomPosition(this._containerDOM);\n    var center = this.getCenter();\n\n    if (!this.options['fixCenterOnResize']) {\n      var vh = this._getVisualHeight(this.getPitch());\n\n      var nwCP = new Point(0, this.height - vh);\n\n      var nwCoord = this._containerPointToPrj(nwCP);\n\n      this._updateMapSize(watched);\n\n      var vhAfter = this._getVisualHeight(this.getPitch());\n\n      var nwCPAfter = new Point(0, this.height - vhAfter);\n\n      this._setPrjCoordAtContainerPoint(nwCoord, nwCPAfter);\n\n      this._mapViewCoord = this._getPrjCenter();\n    } else {\n      this._updateMapSize(watched);\n    }\n\n    var hided = watched['width'] === 0 || watched['height'] === 0 || oldWidth === 0 || oldHeight === 0;\n\n    if (justStart || hided) {\n      this._eventSilence = true;\n      this.setCenter(center);\n      delete this._eventSilence;\n    }\n\n    this._fireEvent('resize');\n\n    return this;\n  };\n\n  _proto.locate = function locate(coordinate, dx, dy) {\n    return this.getProjection()._locate(new Coordinate(coordinate), dx, dy);\n  };\n\n  _proto.getMainPanel = function getMainPanel() {\n    return this._getRenderer().getMainPanel();\n  };\n\n  _proto.getPanels = function getPanels() {\n    return this._panels;\n  };\n\n  _proto.remove = function remove() {\n    var _this3 = this;\n\n    if (this.isRemoved()) {\n      return this;\n    }\n\n    this._fireEvent('removestart');\n\n    this._removeDomEvents();\n\n    this._clearHandlers();\n\n    this.removeBaseLayer();\n    var layers = this.getLayers();\n\n    for (var i = 0; i < layers.length; i++) {\n      layers[i].remove();\n    }\n\n    if (this._getRenderer()) {\n      this._getRenderer().remove();\n    }\n\n    if (this._containerDOM.childNodes && this._containerDOM.childNodes.length > 0) {\n      Array.prototype.slice.call(this._containerDOM.childNodes, 0).filter(function (node) {\n        return node.className === 'maptalks-wrapper';\n      }).forEach(function (node) {\n        return _this3._containerDOM.removeChild(node);\n      });\n    }\n\n    delete this._panels;\n    delete this._containerDOM;\n    delete this.renderer;\n\n    this._fireEvent('removeend');\n\n    this._clearAllListeners();\n\n    if (Browser$1.removeDPRListening) {\n      Browser$1.removeDPRListening(this);\n    }\n\n    return this;\n  };\n\n  _proto.isRemoved = function isRemoved() {\n    return !this._containerDOM;\n  };\n\n  _proto.isMoving = function isMoving() {\n    return !!this._moving;\n  };\n\n  _proto.onMoveStart = function onMoveStart(param) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n\n    var prjCenter = this._getPrjCenter();\n\n    if (!this._originCenter || this._verifyExtent(prjCenter)) {\n      this._originCenter = prjCenter;\n    }\n\n    this._moving = true;\n\n    this._trySetCursor('move');\n\n    this._fireEvent('movestart', this._parseEvent(param ? param['domEvent'] : null, 'movestart'));\n  };\n\n  _proto.onMoving = function onMoving(param) {\n    this._fireEvent('moving', this._parseEvent(param ? param['domEvent'] : null, 'moving'));\n  };\n\n  _proto.onMoveEnd = function onMoveEnd(param) {\n    this._moving = false;\n\n    this._trySetCursor('default');\n\n    this._fireEvent('moveend', param && param['domEvent'] ? this._parseEvent(param['domEvent'], 'moveend') : param);\n\n    if (!this._verifyExtent(this._getPrjCenter()) && this._originCenter) {\n      var moveTo = this._originCenter;\n\n      this._panTo(moveTo);\n    }\n  };\n\n  _proto.onDragRotateStart = function onDragRotateStart(param) {\n    this._dragRotating = true;\n\n    this._fireEvent('dragrotatestart', this._parseEvent(param ? param['domEvent'] : null, 'dragrotatestart'));\n  };\n\n  _proto.onDragRotating = function onDragRotating(param) {\n    this._fireEvent('dragrotating', this._parseEvent(param ? param['domEvent'] : null, 'dragrotating'));\n  };\n\n  _proto.onDragRotateEnd = function onDragRotateEnd(param) {\n    this._dragRotating = false;\n\n    this._fireEvent('dragrotateend', this._parseEvent(param ? param['domEvent'] : null, 'dragrotateend'));\n  };\n\n  _proto.isDragRotating = function isDragRotating() {\n    return !!this._dragRotating;\n  };\n\n  _proto.isOffscreen = function isOffscreen(box, viewportPadding) {\n    if (viewportPadding === void 0) {\n      viewportPadding = 0;\n    }\n\n    var width = this.width,\n        height = this.height;\n    var screenRightBoundary = width + viewportPadding;\n    var screenBottomBoundary = height + viewportPadding;\n    var xmin = box.xmin,\n        ymin = box.ymin,\n        xmax = box.xmax,\n        ymax = box.ymax;\n\n    if (Array.isArray(box)) {\n      xmin = box[0];\n      ymin = box[1];\n      xmax = box[2];\n      ymax = box[3];\n    }\n\n    return xmax < viewportPadding || xmin >= screenRightBoundary || ymax < viewportPadding || ymin > screenBottomBoundary;\n  };\n\n  _proto.getRenderer = function getRenderer() {\n    return this._getRenderer();\n  };\n\n  _proto.getDevicePixelRatio = function getDevicePixelRatio() {\n    return this.options['devicePixelRatio'] || Browser$1.devicePixelRatio || 1;\n  };\n\n  _proto.setDevicePixelRatio = function setDevicePixelRatio(dpr) {\n    if (isNumber(dpr) && dpr > 0 && dpr !== this.options['devicePixelRatio']) {\n      this.options['devicePixelRatio'] = dpr;\n      this.checkSize(true);\n    }\n\n    return this;\n  };\n\n  _proto._initContainer = function _initContainer(container) {\n    if (isString(container)) {\n      this._containerDOM = document.getElementById(container);\n\n      if (!this._containerDOM) {\n        throw new Error('Invalid container when creating map: \\'' + container + '\\'');\n      }\n    } else {\n      this._containerDOM = container;\n\n      if (IS_NODE) {\n        this.CanvasClass = this._containerDOM.constructor;\n      }\n    }\n\n    if (this._containerDOM.childNodes && this._containerDOM.childNodes.length > 0) {\n      if (this._containerDOM.childNodes[0].className === 'maptalks-wrapper') {\n        throw new Error('Container is already loaded with another map instance, use map.remove() to clear it.');\n      }\n    }\n  };\n\n  _proto._trySetCursor = function _trySetCursor(cursor) {\n    if (!this._cursor && !this._priorityCursor) {\n      if (!cursor) {\n        cursor = 'default';\n      }\n\n      this._setCursorToPanel(cursor);\n    }\n\n    return this;\n  };\n\n  _proto._setPriorityCursor = function _setPriorityCursor(cursor) {\n    if (!cursor) {\n      var hasCursor = false;\n\n      if (this._priorityCursor) {\n        hasCursor = true;\n      }\n\n      delete this._priorityCursor;\n\n      if (hasCursor) {\n        this.setCursor(this._cursor);\n      }\n    } else {\n      this._priorityCursor = cursor;\n\n      this._setCursorToPanel(cursor);\n    }\n\n    return this;\n  };\n\n  _proto._setCursorToPanel = function _setCursorToPanel(cursor) {\n    var panel = this.getMainPanel();\n\n    if (panel && panel.style && panel.style.cursor !== cursor) {\n      panel.style.cursor = cursor;\n    }\n  };\n\n  _proto._removeLayer = function _removeLayer(layer, layerList) {\n    if (!layer || !layerList) {\n      return;\n    }\n\n    var index = layerList.indexOf(layer);\n\n    if (index > -1) {\n      layerList.splice(index, 1);\n    }\n  };\n\n  _proto._sortLayersByZIndex = function _sortLayersByZIndex() {\n    if (!this._layers) {\n      return;\n    }\n\n    for (var i = 0, l = this._layers.length; i < l; i++) {\n      this._layers[i]._order = i;\n\n      if (this._layers[i].sortLayersByZIndex) {\n        this._layers[i].sortLayersByZIndex();\n      }\n    }\n\n    this._layers.sort(function (a, b) {\n      var c = a.getZIndex() - b.getZIndex();\n\n      if (c === 0) {\n        return a._order - b._order;\n      }\n\n      return c;\n    });\n  };\n\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (this._eventSilence) {\n      return;\n    }\n\n    this.fire('_' + eventName, param);\n    this.fire(eventName, param);\n  };\n\n  _proto._Load = function _Load() {\n    this._resetMapStatus();\n\n    if (this.options['pitch']) {\n      this.setPitch(this.options['pitch']);\n      delete this.options['pitch'];\n    }\n\n    if (this.options['bearing']) {\n      this.setBearing(this.options['bearing']);\n      delete this.options['bearing'];\n    }\n\n    delete this._glRes;\n\n    this._loadAllLayers();\n\n    this._getRenderer().onLoad();\n\n    this._loaded = true;\n\n    this._callOnLoadHooks();\n\n    this._initTime = now();\n  };\n\n  _proto._initRenderer = function _initRenderer() {\n    var renderer = this.options['renderer'];\n    var clazz = Map.getRendererClass(renderer);\n    this._renderer = new clazz(this);\n\n    this._renderer.load();\n  };\n\n  _proto._getRenderer = function _getRenderer() {\n    return this._renderer;\n  };\n\n  _proto._loadAllLayers = function _loadAllLayers() {\n    function loadLayer(layer) {\n      if (layer) {\n        layer.load();\n      }\n    }\n\n    if (this._baseLayer) {\n      this._baseLayer.load();\n    }\n\n    this._eachLayer(loadLayer, this.getLayers());\n  };\n\n  _proto._getLayers = function _getLayers(filter) {\n    var layers = this._baseLayer ? [this._baseLayer].concat(this._layers) : this._layers;\n    var result = [];\n\n    for (var i = 0; i < layers.length; i++) {\n      if (!filter || filter.call(this, layers[i])) {\n        result.push(layers[i]);\n      }\n    }\n\n    return result;\n  };\n\n  _proto._eachLayer = function _eachLayer(fn) {\n    if (arguments.length < 2) {\n      return;\n    }\n\n    var layerLists = Array.prototype.slice.call(arguments, 1);\n\n    if (layerLists && !Array.isArray(layerLists)) {\n      layerLists = [layerLists];\n    }\n\n    var layers = [];\n\n    for (var i = 0, len = layerLists.length; i < len; i++) {\n      layers = layers.concat(layerLists[i]);\n    }\n\n    for (var j = 0, jlen = layers.length; j < jlen; j++) {\n      fn.call(fn, layers[j]);\n    }\n  };\n\n  _proto._onLayerEvent = function _onLayerEvent(param) {\n    if (!param) {\n      return;\n    }\n\n    if (param['type'] === 'idchange') {\n      delete this._layerCache[param['old']];\n      this._layerCache[param['new']] = param['target'];\n    }\n  };\n\n  _proto._resetMapStatus = function _resetMapStatus() {\n    var maxZoom = this.getMaxZoom(),\n        minZoom = this.getMinZoom();\n\n    var viewMaxZoom = this._spatialReference.getMaxZoom(),\n        viewMinZoom = this._spatialReference.getMinZoom();\n\n    if (isNil(maxZoom) || maxZoom === -1 || maxZoom > viewMaxZoom) {\n      this.setMaxZoom(viewMaxZoom);\n    }\n\n    if (isNil(minZoom) || minZoom === -1 || minZoom < viewMinZoom) {\n      this.setMinZoom(viewMinZoom);\n    }\n\n    maxZoom = this.getMaxZoom();\n    minZoom = this.getMinZoom();\n\n    if (maxZoom < minZoom) {\n      this.setMaxZoom(minZoom);\n    }\n\n    if (isNil(this._zoomLevel) || this._zoomLevel > maxZoom) {\n      this._zoomLevel = maxZoom;\n    }\n\n    if (this._zoomLevel < minZoom) {\n      this._zoomLevel = minZoom;\n    }\n\n    delete this._prjCenter;\n    var projection = this.getProjection();\n    this._prjCenter = projection.project(this._center);\n\n    this._calcMatrices();\n\n    var renderer = this._getRenderer();\n\n    if (renderer) {\n      renderer.resetContainer();\n    }\n  };\n\n  _proto._getContainerDomSize = function _getContainerDomSize() {\n    if (!this._containerDOM) {\n      return null;\n    }\n\n    var containerDOM = this._containerDOM;\n    var width, height;\n\n    if (this._containerDomContentRect) {\n      width = this._containerDomContentRect.width;\n      height = this._containerDomContentRect.height;\n      return new Size(width, height);\n    }\n\n    if (!isNil(containerDOM.width) && !isNil(containerDOM.height)) {\n      width = containerDOM.width;\n      height = containerDOM.height;\n      var dpr = this.getDevicePixelRatio();\n\n      if (dpr !== 1 && containerDOM['layer']) {\n        width /= dpr;\n        height /= dpr;\n      }\n    } else if (!isNil(containerDOM.clientWidth) && !isNil(containerDOM.clientHeight)) {\n      width = parseInt(containerDOM.clientWidth, 0);\n      height = parseInt(containerDOM.clientHeight, 0);\n    } else {\n      throw new Error('can not get size of container');\n    }\n\n    return new Size(width, height);\n  };\n\n  _proto._updateMapSize = function _updateMapSize(mSize) {\n    this.width = mSize['width'];\n    this.height = mSize['height'];\n\n    this._getRenderer().updateMapSize(mSize);\n\n    this._calcMatrices();\n\n    return this;\n  };\n\n  _proto._getPrjCenter = function _getPrjCenter() {\n    return this._prjCenter;\n  };\n\n  _proto._setPrjCenter = function _setPrjCenter(pcenter) {\n    this._prjCenter = pcenter;\n\n    if (this.isInteracting() && !this.isMoving()) {\n      this._mapViewCoord = pcenter;\n    }\n\n    this._calcMatrices();\n  };\n\n  _proto._setPrjCoordAtContainerPoint = function _setPrjCoordAtContainerPoint(coordinate, point) {\n    if (point.x === this.width / 2 && point.y === this.height / 2) {\n      return this;\n    }\n\n    var t = this._containerPointToPoint(point)._sub(this._prjToPoint(this._getPrjCenter()));\n\n    var pcenter = this._pointToPrj(this._prjToPoint(coordinate).sub(t));\n\n    this._setPrjCenter(pcenter);\n\n    return this;\n  };\n\n  _proto._verifyExtent = function _verifyExtent(prjCenter) {\n    if (!prjCenter) {\n      return false;\n    }\n\n    var maxExt = this._prjMaxExtent;\n\n    if (!maxExt) {\n      return true;\n    }\n\n    return maxExt.contains(prjCenter);\n  };\n\n  _proto._offsetCenterByPixel = function _offsetCenterByPixel(pixel) {\n    var pos = new Point(this.width / 2 - pixel.x, this.height / 2 - pixel.y);\n\n    var pCenter = this._containerPointToPrj(pos);\n\n    this._setPrjCenter(pCenter);\n\n    return pCenter;\n  };\n\n  _proto.offsetPlatform = function offsetPlatform(offset) {\n    if (!offset) {\n      return this._mapViewPoint;\n    } else {\n      this._getRenderer().offsetPlatform(offset);\n\n      this._mapViewCoord = this._getPrjCenter();\n      this._mapViewPoint = this._mapViewPoint.add(offset);\n      return this;\n    }\n  };\n\n  _proto.getViewPoint = function getViewPoint() {\n    var offset = this._getViewPointFrameOffset();\n\n    var panelOffset = this.offsetPlatform();\n\n    if (offset) {\n      panelOffset = panelOffset.add(offset);\n    }\n\n    return panelOffset;\n  };\n\n  _proto._resetMapViewPoint = function _resetMapViewPoint() {\n    this._mapViewPoint = new Point(0, 0);\n    this._mapViewCoord = this._getPrjCenter();\n  };\n\n  _proto._getResolution = function _getResolution(zoom) {\n    if ((zoom === undefined || zoom === this._zoomLevel) && this._mapRes !== undefined) {\n      return this._mapRes;\n    }\n\n    if (isNil(zoom)) {\n      zoom = this._zoomLevel;\n    }\n\n    return this._spatialReference.getResolution(zoom);\n  };\n\n  _proto._getResolutions = function _getResolutions() {\n    return this._spatialReference.getResolutions();\n  };\n\n  _proto._prjToPoint = function _prjToPoint(pCoord, zoom, out) {\n    zoom = isNil(zoom) ? this.getZoom() : zoom;\n\n    var res = this._getResolution(zoom);\n\n    return this._prjToPointAtRes(pCoord, res, out);\n  };\n\n  _proto._prjToPointAtRes = function _prjToPointAtRes(pCoord, res, out) {\n    return this._spatialReference.getTransformation().transform(pCoord, res, out);\n  };\n\n  _proto._prjsToPointsAtRes = function _prjsToPointsAtRes(pCoords, res, resultPoints) {\n    if (resultPoints === void 0) {\n      resultPoints = [];\n    }\n\n    var transformation = this._spatialReference.getTransformation();\n\n    var pts = [];\n\n    for (var i = 0, len = pCoords.length; i < len; i++) {\n      var pt = transformation.transform(pCoords[i], res, resultPoints[i]);\n      pts.push(pt);\n    }\n\n    return pts;\n  };\n\n  _proto._pointToPrj = function _pointToPrj(point, zoom, out) {\n    zoom = isNil(zoom) ? this.getZoom() : zoom;\n\n    var res = this._getResolution(zoom);\n\n    return this._pointToPrjAtRes(point, res, out);\n  };\n\n  _proto._pointToPrjAtRes = function _pointToPrjAtRes(point, res, out) {\n    return this._spatialReference.getTransformation().untransform(point, res, out);\n  };\n\n  _proto._pointToPoint = function _pointToPoint(point, zoom, out) {\n    if (!isNil(zoom)) {\n      return this._pointAtResToPoint(point, this._getResolution(zoom), out);\n    }\n\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n\n    return out;\n  };\n\n  _proto._pointAtResToPoint = function _pointAtResToPoint(point, res, out) {\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n\n    return out._multi(res / this._getResolution());\n  };\n\n  _proto._pointToPointAtRes = function _pointToPointAtRes(point, res, out) {\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n\n    return out._multi(this._getResolution() / res);\n  };\n\n  _proto._containerPointToPrj = function _containerPointToPrj(containerPoint, out) {\n    return this._pointToPrj(this._containerPointToPoint(containerPoint, undefined, out), undefined, out);\n  };\n\n  _proto._callOnLoadHooks = function _callOnLoadHooks() {\n    var proto = Map.prototype;\n\n    if (!proto._onLoadHooks) {\n      return;\n    }\n\n    for (var i = 0, l = proto._onLoadHooks.length; i < l; i++) {\n      proto._onLoadHooks[i].call(this);\n    }\n  };\n\n  return Map;\n}(Handlerable(Eventable(Renderable(Class))));\n\nMap$1.include({\n  coordinateToPoint: function coordinateToPoint(coordinate, zoom, out) {\n    var res = this._getResolution(zoom);\n\n    return this.coordinateToPointAtRes(coordinate, res, out);\n  },\n  coordinateToPointAtRes: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, res, out) {\n      var prjCoord = this.getProjection().project(coordinate, COORD);\n      return this._prjToPointAtRes(prjCoord, res, out);\n    };\n  }(),\n  pointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, zoom, out) {\n      var prjCoord = this._pointToPrj(point, zoom, COORD);\n\n      return this.getProjection().unproject(prjCoord, out);\n    };\n  }(),\n  pointAtResToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, res, out) {\n      var prjCoord = this._pointToPrjAtRes(point, res, COORD);\n\n      return this.getProjection().unproject(prjCoord, out);\n    };\n  }(),\n  coordinateToViewPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, out, altitude) {\n      return this._prjToViewPoint(this.getProjection().project(coordinate, COORD), out, altitude);\n    };\n  }(),\n  viewPointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (viewPoint, out) {\n      return this.getProjection().unproject(this._viewPointToPrj(viewPoint, COORD), out);\n    };\n  }(),\n  coordinateToContainerPoint: function coordinateToContainerPoint(coordinate, zoom, out) {\n    var res = this._getResolution(zoom);\n\n    return this.coordinateToContainerPointAtRes(coordinate, res, out);\n  },\n  coordinateToContainerPointAtRes: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, res, out) {\n      var pCoordinate = this.getProjection().project(coordinate, COORD);\n      return this._prjToContainerPointAtRes(pCoordinate, res, out);\n    };\n  }(),\n  coordinatesToContainerPoints: function coordinatesToContainerPoints(coordinates, zoom) {\n    var res = this._getResolution(zoom);\n\n    return this.coordinatesToContainerPointsAtRes(coordinates, res);\n  },\n  coordinatesToContainerPointsAtRes: function () {\n    return function (coordinates, resolution) {\n      var pts = [];\n\n      var transformation = this._spatialReference.getTransformation();\n\n      var res = resolution / this._getResolution();\n\n      var projection = this.getProjection();\n      var prjOut = new Coordinate(0, 0);\n      var isTransforming = this.isTransforming();\n\n      var centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD);\n\n      for (var i = 0, len = coordinates.length; i < len; i++) {\n        var pCoordinate = projection.project(coordinates[i], prjOut);\n        var point = transformation.transform(pCoordinate, resolution);\n        point = point._multi(res);\n\n        this._toContainerPoint(point, isTransforming, res, 0, centerPoint);\n\n        pts.push(point);\n      }\n\n      return pts;\n    };\n  }(),\n  containerPointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (containerPoint, out) {\n      var pCoordinate = this._containerPointToPrj(containerPoint, COORD);\n\n      return this.getProjection().unproject(pCoordinate, out);\n    };\n  }(),\n  containerToExtent: function () {\n    var POINT0 = new Point(0, 0);\n    var POINT1 = new Point(0, 0);\n    return function (containerExtent) {\n      var extent2D = new PointExtent(this._containerPointToPoint(containerExtent.getMin(POINT0), undefined, POINT0), this._containerPointToPoint(containerExtent.getMax(POINT1), undefined, POINT1));\n      return this._pointToExtent(extent2D);\n    };\n  }(),\n  distanceToPixel: function () {\n    var POINT0 = new Point(0, 0);\n    var POINT1 = new Point(0, 0);\n    return function (xDist, yDist, zoom) {\n      var projection = this.getProjection();\n\n      if (!projection) {\n        return null;\n      }\n\n      var scale = this.getScale() / this.getScale(zoom);\n      var center = this.getCenter(),\n          target = projection.locate(center, xDist, yDist);\n      var p0 = this.coordToContainerPoint(center, undefined, POINT0),\n          p1 = this.coordToContainerPoint(target, undefined, POINT1);\n\n      p1._sub(p0)._multi(scale)._abs();\n\n      return new Size(p1.x, p1.y);\n    };\n  }(),\n  distanceToPoint: function distanceToPoint(xDist, yDist, zoom, paramCenter) {\n    var res = this._getResolution(zoom);\n\n    return this.distanceToPointAtRes(xDist, yDist, res, paramCenter);\n  },\n  distanceToPointAtRes: function () {\n    var POINT = new Point(0, 0);\n    return function (xDist, yDist, res, paramCenter) {\n      var projection = this.getProjection();\n\n      if (!projection) {\n        return null;\n      }\n\n      var center = paramCenter || this.getCenter(),\n          target = projection.locate(center, xDist, yDist);\n      var p0 = this.coordToPointAtRes(center, res, POINT),\n          p1 = this.coordToPointAtRes(target, res);\n\n      p1._sub(p0)._abs();\n\n      return p1;\n    };\n  }(),\n  pixelToDistance: function () {\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    return function (width, height) {\n      var projection = this.getProjection();\n\n      if (!projection) {\n        return null;\n      }\n\n      var fullExt = this.getFullExtent();\n      var d = fullExt['top'] > fullExt['bottom'] ? -1 : 1;\n      var target = COORD0.set(this.width / 2 + width, this.height / 2 + d * height);\n      var coord = this.containerPointToCoord(target, COORD1);\n      return projection.measureLength(this.getCenter(), coord);\n    };\n  }(),\n  pointToDistance: function pointToDistance(dx, dy, zoom) {\n    var res = this.getResolution(zoom);\n    return this.pointAtResToDistance(dx, dy, res);\n  },\n  pointAtResToDistance: function () {\n    var POINT = new Point(0, 0);\n    var COORD = new Coordinate(0, 0);\n    return function (dx, dy, res) {\n      var projection = this.getProjection();\n\n      if (!projection) {\n        return null;\n      }\n\n      var c = this._prjToPointAtRes(this._getPrjCenter(), res, POINT);\n\n      c._add(dx, dy);\n\n      var target = this.pointAtResToCoord(c, res, COORD);\n      return projection.measureLength(this.getCenter(), target);\n    };\n  }(),\n  locateByPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (coordinate, px, py) {\n      var point = this.coordToContainerPoint(coordinate, undefined, POINT);\n      return this.containerPointToCoord(point._add(px, py));\n    };\n  }(),\n  _get2DExtent: function _get2DExtent(zoom, out) {\n    var cached;\n\n    if ((zoom === undefined || zoom === this._zoomLevel) && this._mapExtent2D) {\n      cached = this._mapExtent2D;\n    }\n\n    if (cached) {\n      if (out) {\n        out.set(cached['xmin'], cached['ymin'], cached['xmax'], cached['ymax']);\n        return out;\n      }\n\n      return cached.copy();\n    }\n\n    var res = this._getResolution(zoom);\n\n    return this._get2DExtentAtRes(res, out);\n  },\n  _get2DExtentAtRes: function () {\n    var POINT = new Point(0, 0);\n    return function (res, out) {\n      var _this4 = this;\n\n      if (res === this._mapGlRes && this._mapGlExtent2D) {\n        return this._mapGlExtent2D;\n      }\n\n      var cExtent = this.getContainerExtent();\n      return cExtent.convertTo(function (c) {\n        return _this4._containerPointToPointAtRes(c, res, POINT);\n      }, out);\n    };\n  }(),\n  _pointToExtent: function () {\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    return function (extent2D) {\n      var min2d = extent2D.getMin(),\n          max2d = extent2D.getMax();\n      var fullExtent = this.getFullExtent();\n\n      var _ref = !fullExtent || fullExtent.left <= fullExtent.right ? [min2d.x, max2d.x] : [max2d.x, min2d.x],\n          minx = _ref[0],\n          maxx = _ref[1];\n\n      var _ref2 = !fullExtent || fullExtent.top > fullExtent.bottom ? [max2d.y, min2d.y] : [min2d.y, max2d.y],\n          miny = _ref2[0],\n          maxy = _ref2[1];\n\n      var min = min2d.set(minx, maxy);\n      var max = max2d.set(maxx, miny);\n      return new Extent(this.pointToCoord(min, undefined, COORD0), this.pointToCoord(max, undefined, COORD1), this.getProjection());\n    };\n  }(),\n  _getViewPointFrameOffset: function () {\n    var POINT = new Point(0, 0);\n    return function () {\n      if (this.isZooming()) {\n        return null;\n      }\n\n      var pcenter = this._getPrjCenter();\n\n      if (this._mapViewCoord && !this._mapViewCoord.equals(pcenter)) {\n        return this._prjToContainerPoint(this._mapViewCoord)._sub(this._prjToContainerPoint(pcenter, undefined, POINT));\n      }\n\n      return null;\n    };\n  }(),\n  _viewPointToPrj: function () {\n    var POINT = new Point(0, 0);\n    return function (viewPoint, out) {\n      return this._containerPointToPrj(this.viewPointToContainerPoint(viewPoint, POINT), out);\n    };\n  }(),\n  _prjToContainerPoint: function _prjToContainerPoint(pCoordinate, zoom, out, altitude) {\n    var res = this._getResolution(zoom);\n\n    return this._prjToContainerPointAtRes(pCoordinate, res, out, altitude);\n  },\n  _prjToContainerPointAtRes: function () {\n    var POINT = new Point(0, 0);\n    return function (pCoordinate, res, out, altitude) {\n      return this._pointAtResToContainerPoint(this._prjToPointAtRes(pCoordinate, res, POINT), res, altitude || 0, out);\n    };\n  }(),\n  _prjToViewPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (pCoordinate, out, altitude) {\n      var containerPoint = this._prjToContainerPoint(pCoordinate, undefined, POINT, altitude);\n\n      return this.containerPointToViewPoint(containerPoint, out);\n    };\n  }(),\n  _viewPointToPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (viewPoint, zoom, out) {\n      return this._containerPointToPoint(this.viewPointToContainerPoint(viewPoint, POINT), zoom, out);\n    };\n  }(),\n  _pointToViewPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, zoom, out) {\n      return this._prjToViewPoint(this._pointToPrj(point, zoom, COORD), out);\n    };\n  }()\n});\nMap$1.mergeOptions(options$2);\n\nvar MapDoubleClickZoomHandler = function (_Handler) {\n  _inheritsLoose(MapDoubleClickZoomHandler, _Handler);\n\n  function MapDoubleClickZoomHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapDoubleClickZoomHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    if (!this.target) {\n      return;\n    }\n\n    this.target.on('_dblclick', this._onDoubleClick, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    if (!this.target) {\n      return;\n    }\n\n    this.target.off('_dblclick', this._onDoubleClick, this);\n  };\n\n  _proto._onDoubleClick = function _onDoubleClick(param) {\n    var map = this.target;\n\n    if (map.options['doubleClickZoom']) {\n      var oldZoom = map.getZoom(),\n          zoom = param['domEvent']['shiftKey'] ? Math.ceil(oldZoom) - 1 : Math.floor(oldZoom) + 1;\n\n      map._zoomAnimation(zoom, param['containerPoint']);\n    }\n  };\n\n  return MapDoubleClickZoomHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'doubleClickZoom': true\n});\nMap$1.addOnLoadHook('addHandler', 'doubleClickZoom', MapDoubleClickZoomHandler);\n\nvar MapDragHandler = function (_Handler) {\n  _inheritsLoose(MapDragHandler, _Handler);\n\n  function MapDragHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapDragHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    var map = this.target;\n\n    if (!map) {\n      return;\n    }\n\n    var dom = map._panels.mapWrapper || map._containerDOM;\n    this._dragHandler = new DragHandler(dom, {\n      'cancelOn': this._cancelOn.bind(this),\n      'rightclick': true\n    });\n\n    this._dragHandler.on('mousedown', this._onMouseDown, this).on('dragstart', this._onDragStart, this).on('dragging', this._onDragging, this).on('dragend', this._onDragEnd, this).enable();\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    this._dragHandler.off('mousedown', this._onMouseDown, this).off('dragstart', this._onDragStart, this).off('dragging', this._onDragging, this).off('dragend', this._onDragEnd, this);\n\n    this._dragHandler.remove();\n\n    delete this._dragHandler;\n  };\n\n  _proto._cancelOn = function _cancelOn(domEvent) {\n    if (this.target.isZooming() || this._ignore(domEvent)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto._ignore = function _ignore(param) {\n    if (!param) {\n      return false;\n    }\n\n    if (param.domEvent) {\n      param = param.domEvent;\n    }\n\n    return this.target._ignoreEvent(param);\n  };\n\n  _proto._onMouseDown = function _onMouseDown(param) {\n    delete this.startDragTime;\n    delete this._mode;\n\n    if (param.domEvent.button === 2 || param.domEvent.ctrlKey) {\n      if (this.target.options['dragRotate'] || this.target.options['dragPitch']) {\n        this._mode = 'rotatePitch';\n      }\n    } else if (this.target.options['dragPan']) {\n      this._mode = 'move';\n    }\n\n    this.target._stopAnim(this.target._mapAnimPlayer);\n\n    preventDefault(param['domEvent']);\n  };\n\n  _proto._onDragStart = function _onDragStart(param) {\n    this.startDragTime = now();\n\n    if (this._mode === 'move') {\n      this._moveStart(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotateStart(param);\n    }\n  };\n\n  _proto._onDragging = function _onDragging(param) {\n    var map = this.target;\n\n    if (map._isEventOutMap(param['domEvent'])) {\n      return;\n    }\n\n    if (this._mode === 'move') {\n      this._moving(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotating(param);\n    }\n  };\n\n  _proto._onDragEnd = function _onDragEnd(param) {\n    if (this._mode === 'move') {\n      this._moveEnd(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotateEnd(param);\n    }\n\n    delete this.startDragTime;\n    delete this.startBearing;\n  };\n\n  _proto._start = function _start(param) {\n    this.preX = param['mousePos'].x;\n    this.preY = param['mousePos'].y;\n    this.startX = this.preX;\n    this.startY = this.preY;\n    this._startPrjCenter = this.target._getPrjCenter().copy();\n  };\n\n  _proto._moveStart = function _moveStart(param) {\n    this._start(param);\n\n    var map = this.target;\n    map.onMoveStart(param);\n    var p = getEventContainerPoint(map._getActualEvent(param.domEvent), map.getContainer());\n    this.startPrjCoord = map._containerPointToPrj(p);\n  };\n\n  _proto._moving = function _moving(param) {\n    if (!this.startDragTime) {\n      return;\n    }\n\n    var map = this.target;\n    var p = getEventContainerPoint(map._getActualEvent(param.domEvent), map.getContainer());\n\n    map._setPrjCoordAtContainerPoint(this.startPrjCoord, p);\n\n    map.onMoving(param);\n  };\n\n  _proto._moveEnd = function _moveEnd(param) {\n    if (!this.startDragTime) {\n      return;\n    }\n\n    var isTouch = param.domEvent.type === 'touchend';\n    var map = this.target;\n    var t = now() - this.startDragTime;\n    var mx = param['mousePos'].x,\n        my = param['mousePos'].y;\n    var dx = mx - this.startX;\n    var dy = my - this.startY;\n\n    var currentCenter = map._getPrjCenter();\n\n    var dxy = currentCenter.sub(this._startPrjCenter);\n\n    this._clear();\n\n    if (map.options['panAnimation'] && !param.interupted && map._verifyExtent(map._getPrjCenter()) && t < 280 && Math.abs(dy) + Math.abs(dx) > 5) {\n      t = 5 * t;\n      var dscale = isTouch ? 5 : 2.8;\n      var targetPrjCoord = currentCenter.add(dxy._multi(dscale));\n      var targetCoord = map.getProjection().unproject(targetPrjCoord);\n      map.panTo(targetCoord, {\n        'duration': isTouch ? t * 3 : t * 2,\n        'easing': 'outExpo'\n      });\n    } else {\n      map.onMoveEnd(param);\n    }\n  };\n\n  _proto._rotateStart = function _rotateStart(param) {\n    this._start(param);\n\n    delete this._rotateMode;\n    this.startBearing = this.target.getBearing();\n    this.target.onDragRotateStart(param);\n    this._db = 0;\n  };\n\n  _proto._rotating = function _rotating(param) {\n    var map = this.target;\n    var mx = param['mousePos'].x,\n        my = param['mousePos'].y;\n    var prePitch = map.getPitch(),\n        preBearing = map.getBearing();\n    var dx = Math.abs(mx - this.preX),\n        dy = Math.abs(my - this.preY);\n\n    if (!this._rotateMode) {\n      if (map.options['dragRotatePitch']) {\n        this._rotateMode = 'rotate_pitch';\n      } else if (dx > dy) {\n        this._rotateMode = 'rotate';\n      } else if (dx < dy) {\n        this._rotateMode = 'pitch';\n      } else {\n        this._rotateMode = 'rotate';\n      }\n    }\n\n    if (this._rotateMode === 'pitch' && prePitch === 0 && dy < 10) {\n      return;\n    }\n\n    if (this._rotateMode.indexOf('rotate') >= 0 && map.options['dragRotate']) {\n      var db = 0;\n\n      if (map.options['dragPitch'] || dx > dy) {\n        db = -0.6 * (this.preX - mx);\n      } else if (mx > map.width / 2) {\n        db = 0.6 * (this.preY - my);\n      } else {\n        db = -0.6 * (this.preY - my);\n      }\n\n      var bearing = map.getBearing() + db;\n      this._db = this._db || 0;\n      this._db += db;\n\n      map._setBearing(bearing);\n    }\n\n    if (this._rotateMode.indexOf('pitch') >= 0 && map.options['dragPitch']) {\n      map._setPitch(map.getPitch() + (this.preY - my) * 0.4);\n    }\n\n    this.preX = mx;\n    this.preY = my;\n\n    if (map.getBearing() !== preBearing || map.getPitch() !== prePitch) {\n      map.onDragRotating(param);\n    }\n  };\n\n  _proto._rotateEnd = function _rotateEnd(param) {\n    var map = this.target;\n    var bearing = map.getBearing();\n\n    this._clear();\n\n    var t = now() - this.startDragTime;\n    map.onDragRotateEnd(param);\n\n    if (map.options['rotateAnimation'] && Math.abs(bearing - this.startBearing) > 20 && (this._rotateMode === 'rotate' || this._rotateMode === 'rotate_pitch') && !param.interupted && t < 400) {\n      var _bearing = map.getBearing();\n\n      map._animateTo({\n        'bearing': _bearing + this._db / 1.5\n      }, {\n        'easing': 'outQuint',\n        'duration': 1600\n      });\n    }\n  };\n\n  _proto._clear = function _clear() {\n    delete this.startPrjCoord;\n    delete this.preX;\n    delete this.preY;\n    delete this.startX;\n    delete this.startY;\n  };\n\n  return MapDragHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'draggable': true,\n  'dragPan': true,\n  'dragRotatePitch': true,\n  'dragRotate': true,\n  'dragPitch': true\n});\nMap$1.addOnLoadHook('addHandler', 'draggable', MapDragHandler);\n\nvar EVENTS = 'mousedown ' + 'mouseup ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'touchstart ' + 'touchmove ' + 'touchend';\n\nvar MapGeometryEventsHandler = function (_Handler) {\n  _inheritsLoose(MapGeometryEventsHandler, _Handler);\n\n  function MapGeometryEventsHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapGeometryEventsHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    var map = this.target;\n    var dom = map._panels.allLayers || map._containerDOM;\n    on(dom, EVENTS, this._identifyGeometryEvents, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    var map = this.target;\n    var dom = map._panels.allLayers || map._containerDOM;\n    off(dom, EVENTS, this._identifyGeometryEvents, this);\n  };\n\n  _proto._identifyGeometryEvents = function _identifyGeometryEvents(domEvent, type) {\n    var map = this.target;\n\n    if (map.isInteracting() || map._ignoreEvent(domEvent)) {\n      return;\n    }\n\n    var oneMoreEvent = null;\n    var eventType = type || domEvent.type;\n    var isMousedown = eventType === 'mousedown' || eventType === 'touchstart' && domEvent.touches && domEvent.touches.length === 1;\n\n    if (isMousedown) {\n      this._mouseDownTime = now();\n    } else if ((eventType === 'click' || eventType === 'touchend') && this._mouseDownTime) {\n      var downTime = this._mouseDownTime;\n      delete this._mouseDownTime;\n      var time = now();\n\n      if (time - downTime > 300) {\n        if (eventType === 'click') {\n          return;\n        }\n      } else if (eventType === 'touchend') {\n        oneMoreEvent = 'click';\n      }\n    }\n\n    var actual = domEvent.touches && domEvent.touches.length > 0 ? domEvent.touches[0] : domEvent.changedTouches && domEvent.changedTouches.length > 0 ? domEvent.changedTouches[0] : domEvent;\n\n    if (!actual) {\n      return;\n    }\n\n    var containerPoint = getEventContainerPoint(actual, map._containerDOM);\n\n    if (eventType === 'touchstart') {\n      preventDefault(domEvent);\n    }\n\n    var geometryCursorStyle = null;\n    var tops = this.target.getRenderer().getTopElements();\n    var topOnlyEvent = isMousedown && domEvent.button !== 2;\n\n    for (var i = 0; i < tops.length; i++) {\n      if (tops[i].hitTest(containerPoint)) {\n        var cursor = tops[i].options['cursor'];\n\n        if (cursor) {\n          geometryCursorStyle = cursor;\n        }\n\n        if (topOnlyEvent || tops[i].events && tops[i].events.indexOf(eventType) >= 0) {\n          var e = {\n            target: map,\n            type: eventType,\n            domEvent: domEvent,\n            containerPoint: containerPoint\n          };\n\n          if (topOnlyEvent) {\n            map._setPriorityCursor(geometryCursorStyle);\n\n            tops[i].mousedown(e);\n            return;\n          } else {\n            tops[i].onEvent(e);\n          }\n        }\n      }\n    }\n\n    var layers = map._getLayers(function (layer) {\n      if (layer.identify && layer.options['geometryEvents']) {\n        return true;\n      }\n\n      return false;\n    });\n\n    map._setPriorityCursor(geometryCursorStyle);\n\n    if (!layers.length) {\n      return;\n    }\n\n    var identifyOptions = {\n      'includeInternals': true,\n      'filter': function filter(geometry) {\n        if (!(geometry instanceof Geometry)) {\n          return false;\n        }\n\n        var eventToFire = geometry._getEventTypeToFire(domEvent);\n\n        if (eventType === 'mousemove') {\n          if (!geometryCursorStyle && geometry.options['cursor']) {\n            geometryCursorStyle = geometry.options['cursor'];\n          }\n\n          if (!geometry.listens('mousemove') && !geometry.listens('mouseover') && !geometry.listens('mouseenter')) {\n            return false;\n          }\n        } else if (!geometry.listens(eventToFire) && !geometry.listens(oneMoreEvent)) {\n          return false;\n        }\n\n        return true;\n      },\n      'count': 1,\n      'containerPoint': containerPoint,\n      'onlyVisible': map.options['onlyVisibleGeometryEvents'],\n      'layers': layers\n    };\n    var callback = fireGeometryEvent.bind(this);\n\n    if (eventType === 'mousemove' || eventType === 'touchmove') {\n      this._queryIdentifyTimeout = map.getRenderer().callInNextFrame(function () {\n        if (map.isInteracting()) {\n          return;\n        }\n\n        map.identifyAtPoint(identifyOptions, callback);\n      });\n    } else {\n      map.identifyAtPoint(identifyOptions, callback);\n    }\n\n    function fireGeometryEvent(geometries) {\n      var propagation = true;\n\n      if (eventType === 'mousemove') {\n        var geoMap = {};\n\n        if (geometries.length > 0) {\n          for (var _i = geometries.length - 1; _i >= 0; _i--) {\n            var geo = geometries[_i];\n\n            if (!(geo instanceof Geometry)) {\n              continue;\n            }\n\n            var iid = geo._getInternalId();\n\n            geoMap[iid] = geo;\n\n            geo._onEvent(domEvent);\n\n            if (!this._prevOverGeos || !this._prevOverGeos.geomap[iid]) {\n              geo._onEvent(domEvent, 'mouseenter');\n            }\n\n            propagation = geo._onEvent(domEvent, 'mouseover');\n          }\n        }\n\n        map._setPriorityCursor(geometryCursorStyle);\n\n        var oldTargets = this._prevOverGeos && this._prevOverGeos.geos;\n        this._prevOverGeos = {\n          'geos': geometries,\n          'geomap': geoMap\n        };\n\n        if (oldTargets && oldTargets.length > 0) {\n          for (var _i2 = oldTargets.length - 1; _i2 >= 0; _i2--) {\n            var oldTarget = oldTargets[_i2];\n\n            if (!(oldTarget instanceof Geometry)) {\n              continue;\n            }\n\n            var oldTargetId = oldTargets[_i2]._getInternalId();\n\n            if (!geoMap[oldTargetId]) {\n              propagation = oldTarget._onEvent(domEvent, 'mouseout');\n            }\n          }\n        }\n      } else {\n        if (!geometries || !geometries.length) {\n          return;\n        }\n\n        for (var _i3 = geometries.length - 1; _i3 >= 0; _i3--) {\n          if (!(geometries[_i3] instanceof Geometry)) {\n            continue;\n          }\n\n          propagation = geometries[_i3]._onEvent(domEvent);\n\n          if (oneMoreEvent) {\n            geometries[_i3]._onEvent(domEvent, oneMoreEvent);\n          }\n\n          break;\n        }\n      }\n\n      if (propagation === false) {\n        stopPropagation(domEvent);\n      }\n    }\n  };\n\n  return MapGeometryEventsHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'geometryEvents': true,\n  'onlyVisibleGeometryEvents': true\n});\nMap$1.addOnLoadHook('addHandler', 'geometryEvents', MapGeometryEventsHandler);\n\nvar wheelZoomDelta = 4.000244140625;\nvar defaultZoomRate = 1 / 100;\nvar wheelZoomRate = 1 / 450;\nvar maxScalePerFrame = 2;\n\nvar MapScrollWheelZoomHandler = function (_Handler) {\n  _inheritsLoose(MapScrollWheelZoomHandler, _Handler);\n\n  function MapScrollWheelZoomHandler(target) {\n    var _this;\n\n    _this = _Handler.call(this, target) || this;\n    _this._thisScrollZoom = _this._scrollZoom.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._wheelZoomRate = wheelZoomRate;\n    _this._defaultZoomRate = defaultZoomRate;\n    _this._delta = 0;\n    return _this;\n  }\n\n  var _proto = MapScrollWheelZoomHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    addDomEvent(this.target._containerDOM, 'wheel', this._onWheelScroll, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    removeDomEvent(this.target._containerDOM, 'wheel', this._onWheelScroll);\n  };\n\n  _proto._onWheelScroll = function _onWheelScroll(evt) {\n    preventDefault(evt);\n    stopPropagation(evt);\n    var map = this.target;\n\n    if (map._ignoreEvent(evt) || !map.options['zoomable']) {\n      return false;\n    }\n\n    var container = map._containerDOM;\n\n    var origin = map._checkZoomOrigin(getEventContainerPoint(evt, container));\n\n    if (map.options['seamlessZoom']) {\n      if (!this._zooming) {\n        this._trackPadSuspect = 0;\n        this._ensureTrackpad = false;\n      }\n\n      return this._seamless(evt, origin);\n    } else {\n      return this._interval(evt, origin);\n    }\n  };\n\n  _proto._seamless = function _seamless(evt, origin) {\n    var value = evt.deltaMode === window.WheelEvent.DOM_DELTA_LINE ? evt.deltaY * 60 : evt.deltaY;\n\n    if (value % wheelZoomDelta !== 0) {\n      if (!this._ensureTrackpad) {\n        if (Math.abs(value) < 60) {\n          this._trackPadSuspect++;\n        } else {\n          this._trackPadSuspect = 0;\n        }\n\n        if (this._trackPadSuspect >= 2) {\n          this._ensureTrackpad = true;\n        }\n      }\n\n      if (this._ensureTrackpad) {\n        value *= 14;\n      }\n    }\n\n    if (evt.shiftKey && value) value = value / 4;\n    this._lastWheelEvent = evt;\n    this._delta -= value;\n\n    if (!this._zooming && this._delta) {\n      var map = this.target;\n      this._zoomOrigin = origin;\n      map.onZoomStart(null, origin);\n    }\n\n    this._start();\n  };\n\n  _proto._start = function _start() {\n    if (!this._delta) return;\n    this._zooming = true;\n    var map = this.target;\n\n    if (!this._active) {\n      map.getRenderer().callInNextFrame(this._thisScrollZoom);\n      this._active = true;\n    }\n  };\n\n  _proto._scrollZoom = function _scrollZoom() {\n    var _this2 = this;\n\n    this._active = false;\n\n    if (!this._delta) {\n      return;\n    }\n\n    var zoomRate = Math.abs(this._delta) > wheelZoomDelta ? this._wheelZoomRate : this._defaultZoomRate;\n    var scale = maxScalePerFrame / (1 + Math.exp(-Math.abs(this._delta * zoomRate)));\n\n    if (this._delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n\n    var map = this.target;\n    var zoom = map.getZoom();\n    var targetZoom = map.getZoomForScale(scale, zoom, true);\n    this._delta = 0;\n    map.onZooming(targetZoom, this._zoomOrigin);\n\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    this._timeout = setTimeout(function () {\n      _this2._zooming = false;\n      delete _this2._timeout;\n      map.onZoomEnd(map.getZoom(), _this2._zoomOrigin);\n    }, 210);\n  };\n\n  _proto._interval = function _interval(evt, origin) {\n    var _this3 = this;\n\n    var map = this.target;\n\n    if (this._zooming) {\n      this._requesting++;\n      return false;\n    }\n\n    this._requesting = 0;\n    var levelValue = (evt.deltaY ? evt.deltaY * -1 : evt.wheelDelta ? evt.wheelDelta : evt.detail) > 0 ? 1 : -1;\n\n    if (evt.detail) {\n      levelValue *= -1;\n    }\n\n    var zoom = map.getZoom();\n    var nextZoom = zoom + levelValue;\n    nextZoom = map._checkZoom(levelValue > 0 ? Math.ceil(nextZoom) : Math.floor(nextZoom));\n\n    if (nextZoom === zoom) {\n      return false;\n    }\n\n    this._zooming = true;\n\n    if (!this._delta) {\n      map.onZoomStart(null, origin);\n      this._origin = origin;\n      this._delta = levelValue;\n      this._startZoom = map.getZoom();\n    }\n\n    var duration = 90;\n\n    map._animateTo({\n      'zoom': nextZoom - this._delta * 1 / 2,\n      'around': this._origin\n    }, {\n      'continueOnViewChanged': true,\n      'easing': 'linear',\n      'duration': duration,\n      'wheelZoom': true\n    }, function (frame) {\n      if (frame.state.playState !== 'finished') {\n        if (frame.state.playState !== 'running') {\n          delete _this3._zooming;\n          delete _this3._requesting;\n        }\n\n        return;\n      }\n\n      if (_this3._requesting < 1 || Math.abs(nextZoom - _this3._startZoom) > 2 || nextZoom === map.getMaxZoom() || nextZoom === map.getMinZoom()) {\n        map._animateTo({\n          'zoom': nextZoom,\n          'around': _this3._origin\n        }, {\n          'continueOnViewChanged': true,\n          'duration': 100\n        }, function (frame) {\n          if (frame.state.playState !== 'running') {\n            delete _this3._zooming;\n            delete _this3._requesting;\n          }\n        });\n\n        delete _this3._startZoom;\n        delete _this3._origin;\n        delete _this3._delta;\n        _this3._requesting = 0;\n      } else if (!isNil(_this3._requesting)) {\n        delete _this3._zooming;\n\n        _this3._onWheelScroll(evt);\n      }\n    });\n\n    return false;\n  };\n\n  return MapScrollWheelZoomHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'scrollWheelZoom': true,\n  'seamlessZoom': true\n});\nMap$1.addOnLoadHook('addHandler', 'scrollWheelZoom', MapScrollWheelZoomHandler);\n\nvar MapTouchZoomHandler = function (_Handler) {\n  _inheritsLoose(MapTouchZoomHandler, _Handler);\n\n  function MapTouchZoomHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapTouchZoomHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    addDomEvent(this.target.getContainer(), 'touchstart', this._onTouchStart, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    removeDomEvent(this.target.getContainer(), 'touchstart', this._onTouchStart);\n  };\n\n  _proto._onTouchStart = function _onTouchStart(event) {\n    var map = this.target;\n\n    if (!event.touches || event.touches.length < 2) {\n      return;\n    }\n\n    var container = map.getContainer();\n    var p1 = getEventContainerPoint(event.touches[0], container),\n        p2 = getEventContainerPoint(event.touches[1], container);\n    this.preY = p1.y;\n    this._startP1 = p1;\n    this._startP2 = p2;\n    this._startDist = p1.distanceTo(p2);\n    this._startVector = p1.sub(p2);\n    this._startZoom = map.getZoom();\n    this._startBearing = map.getBearing();\n    off(document, 'touchmove', this._onTouchMove, this);\n    off(document, 'touchend', this._onTouchEnd, this);\n    addDomEvent(document, 'touchmove', this._onTouchMove, this);\n    addDomEvent(document, 'touchend', this._onTouchEnd, this);\n    preventDefault(event);\n\n    map._fireEvent('touchactstart');\n  };\n\n  _proto._onTouchMove = function _onTouchMove(event) {\n    var map = this.target;\n\n    if (!event.touches || event.touches.length < 2) {\n      return;\n    }\n\n    var container = map.getContainer(),\n        p1 = getEventContainerPoint(event.touches[0], container),\n        p2 = getEventContainerPoint(event.touches[1], container),\n        d1 = p1.sub(this._startP1),\n        d2 = p2.sub(this._startP2),\n        vector = p1.sub(p2),\n        scale = p1.distanceTo(p2) / this._startDist,\n        bearing = vector.angleWith(this._startVector) * 180 / Math.PI,\n        preY = this.preY || p1.y,\n        pitch = (preY - p1.y) * 0.4;\n\n    this.preY = p1.y;\n    var param = {\n      'domEvent': event,\n      'mousePos': [p1, p2]\n    };\n\n    if (!this.mode) {\n      if (map.options['touchRotate'] && Math.abs(bearing) > 8) {\n        this.mode = map.options['touchZoomRotate'] ? 'rotate_zoom' : 'rotate';\n      } else if (map.options['touchPitch'] && d1.y * d2.y > 0 && Math.abs(d1.y) > 10 && Math.abs(d2.y) > 10) {\n        this.mode = 'pitch';\n      } else if (map.options['zoomable'] && map.options['touchZoom'] && Math.abs(1 - scale) > 0.15) {\n        this.mode = map.options['touchZoomRotate'] && map.options['touchRotate'] ? 'rotate_zoom' : 'zoom';\n      }\n\n      this._startTouching(param);\n    }\n\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      this._scale = scale;\n      var res = map._getResolution(this._startZoom) / scale;\n      var zoom = map.getZoomFromRes(res);\n      map.onZooming(zoom, this._Origin);\n    }\n\n    if (this.mode === 'rotate' || this.mode === 'rotate_zoom') {\n      map._setBearing(this._startBearing + bearing);\n\n      map.onDragRotating(param);\n    } else if (this.mode === 'pitch') {\n      map._setPitch(map.getPitch() + pitch);\n\n      map.onDragRotating(param);\n    }\n\n    map._fireEvent('touchactinging');\n  };\n\n  _proto._startTouching = function _startTouching(param) {\n    var map = this.target;\n\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      var size = map.getSize();\n      this._Origin = new Point(size['width'] / 2, size['height'] / 2);\n      map.onZoomStart(null, this._Origin);\n    }\n\n    if (this.mode === 'rotate' || this.mode === 'pitch' || this.mode === 'rotate_zoom') {\n      map.onDragRotateStart(param);\n    }\n  };\n\n  _proto._onTouchEnd = function _onTouchEnd(event) {\n    delete this.preY;\n    var map = this.target;\n    off(document, 'touchmove', this._onTouchMove, this);\n    off(document, 'touchend', this._onTouchEnd, this);\n\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      var scale = this._scale;\n      var res = map._getResolution(this._startZoom) / scale;\n      var zoom = map.getZoomFromRes(res);\n      map.onZoomEnd(zoom, this._Origin);\n    }\n\n    if (this.mode === 'pitch' || this.mode === 'rotate' || this.mode === 'rotate_zoom') {\n      map.onDragRotateEnd({\n        'domEvent': event\n      });\n    }\n\n    delete this.mode;\n\n    map._fireEvent('touchactend');\n  };\n\n  return MapTouchZoomHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'touchGesture': true,\n  'touchZoom': true,\n  'touchPitch': true,\n  'touchRotate': true,\n  'touchZoomRotate': false\n});\nMap$1.addOnLoadHook('addHandler', 'touchGesture', MapTouchZoomHandler);\n\nvar KEY = '__anim_player';\nvar Easing = {\n  outExpo: function outExpo(x) {\n    return x === 1 ? 1 : 1 - Math.pow(2, -10 * x);\n  },\n  outQuint: function outQuint(x) {\n    return 1 - Math.pow(1 - x, 5);\n  },\n  in: function _in(t) {\n    return Math.pow(t, 2);\n  },\n  out: function out(t) {\n    return 1 - Easing.in(1 - t);\n  },\n  inAndOut: function inAndOut(t) {\n    return 3 * t * t - 2 * t * t * t;\n  },\n  linear: function linear(t) {\n    return t;\n  },\n  upAndDown: function upAndDown(t) {\n    if (t < 0.5) {\n      return Easing.inAndOut(2 * t);\n    } else {\n      return 1 - Easing.inAndOut(2 * (t - 0.5));\n    }\n  }\n};\n\nvar Frame = function Frame(state, styles) {\n  this.state = state;\n  this.styles = styles;\n};\n\nvar Player = function Player(animation, options, onFrame, target) {\n  this._animation = animation;\n  this.options = options;\n  this._onFrame = onFrame;\n  this.playState = 'idle';\n  this.ready = true;\n  this.finished = false;\n  this.target = target;\n};\n\nvar Animation = {\n  speed: {\n    'slow': 2000,\n    'normal': 1000,\n    'fast': 500\n  },\n  _resolveStyles: function _resolveStyles(styles) {\n    if (!styles) {\n      return null;\n    }\n\n    function resolveChild(child) {\n      if (!Array.isArray(child)) {\n        return Animation._resolveStyles(child);\n      }\n\n      var start = [],\n          d = [],\n          dest = [];\n\n      for (var i = 0; i < child.length; i++) {\n        var _styles = Animation._resolveStyles(child[i]);\n\n        if (_styles) {\n          start.push(_styles[0]);\n          d.push(_styles[1]);\n          dest.push(_styles[2]);\n        }\n      }\n\n      if (!start.length) {\n        return null;\n      } else {\n        return [start, d, dest];\n      }\n    }\n\n    function resolveVal(val) {\n      var values = val;\n      var clazz;\n\n      if (!Array.isArray(val)) {\n        if (isNumber(val)) {\n          values = [0, val];\n        } else if (val instanceof Point || val instanceof Coordinate) {\n          clazz = val.constructor;\n          values = [new clazz(0, 0), val];\n        } else {\n          values = [val, val];\n        }\n      }\n\n      var v1 = values[0],\n          v2 = values[1];\n\n      if (isNumber(v1) && isNumber(v2)) {\n        if (v1 === v2) {\n          return null;\n        }\n\n        return [v1, v2 - v1, v2];\n      } else if (Array.isArray(v1) && isNumber(v1[0]) || v1 instanceof Coordinate || v1 instanceof Point) {\n        if (Array.isArray(v1)) {\n          v1 = new Coordinate(v1);\n          v2 = new Coordinate(v2);\n        } else {\n          clazz = v1.constructor;\n          v1 = new clazz(v1);\n          v2 = new clazz(v2);\n        }\n\n        if (v1.equals(v2)) {\n          return null;\n        }\n\n        return [v1, v2.sub(v1), v2];\n      } else {\n        return [v1, v2, v2];\n      }\n    }\n\n    function isChild(val) {\n      if (!Array.isArray(val) && val.constructor === Object) {\n        return true;\n      } else if (Array.isArray(val) && val[0].constructor === Object) {\n        return true;\n      }\n\n      return false;\n    }\n\n    var d = {},\n        start = {},\n        dest = {};\n\n    for (var p in styles) {\n      if (styles.hasOwnProperty(p)) {\n        var values = styles[p];\n\n        if (!values) {\n          continue;\n        } else if (Array.isArray(values)) {\n          if (isNil(values[0]) || isNil(values[1])) {\n            continue;\n          }\n        }\n\n        var childStyles = void 0;\n\n        if (isChild(values)) {\n          childStyles = resolveChild(values);\n        } else {\n          childStyles = resolveVal(values);\n        }\n\n        if (childStyles) {\n          start[p] = childStyles[0];\n          d[p] = childStyles[1];\n          dest[p] = childStyles[2];\n        }\n      }\n    }\n\n    return [start, d, dest];\n  },\n  framing: function framing(styles, options) {\n    if (!options) {\n      options = {};\n    }\n\n    var easing = options['easing'] ? Easing[options['easing']] : Easing.linear;\n\n    if (!easing) {\n      easing = Easing.linear;\n    }\n\n    var dStyles, startStyles, destStyles;\n    styles = Animation._resolveStyles(styles);\n\n    if (styles) {\n      startStyles = styles[0];\n      dStyles = styles[1];\n      destStyles = styles[2];\n    }\n\n    var deltaStyles = function deltaStyles(delta, _startStyles, _dStyles) {\n      if (!_startStyles || !_dStyles) {\n        return null;\n      }\n\n      var result = {};\n\n      for (var p in _dStyles) {\n        if (_dStyles.hasOwnProperty(p)) {\n          if (_startStyles[p] === destStyles[p]) {\n            result[p] = _startStyles[p];\n            continue;\n          }\n\n          var s = _startStyles[p],\n              d = _dStyles[p];\n\n          if (isNumber(d)) {\n            result[p] = s + delta * d;\n          } else if (Array.isArray(d)) {\n            var children = [];\n\n            for (var i = 0; i < d.length; i++) {\n              children.push(deltaStyles(delta, s[i], d[i]));\n            }\n\n            result[p] = children;\n          } else {\n            var clazz = d.constructor;\n\n            if (clazz === Object) {\n              result[p] = deltaStyles(delta, s, d);\n            } else if (s instanceof Point || s instanceof Coordinate) {\n              result[p] = s.add(d.multi(delta));\n            } else {\n              result[p] = d;\n            }\n          }\n        }\n      }\n\n      return result;\n    };\n\n    return function (elapsed, duration) {\n      var state, d;\n\n      if (elapsed < 0) {\n        state = {\n          'playState': 'idle',\n          'delta': 0\n        };\n        d = startStyles;\n      } else if (elapsed < duration) {\n        var delta = easing(elapsed / duration);\n        state = {\n          'playState': 'running',\n          'delta': delta\n        };\n        d = deltaStyles(delta, startStyles, dStyles);\n      } else {\n        state = {\n          'playState': 'finished',\n          'delta': 1\n        };\n        d = destStyles;\n      }\n\n      state['startStyles'] = startStyles;\n      state['destStyles'] = destStyles;\n      state['progress'] = elapsed;\n      state['remainingMs'] = duration - elapsed;\n      return new Frame(state, d);\n    };\n  },\n  _requestAnimFrame: function _requestAnimFrame(fn) {\n    if (!this._frameQueue) {\n      this._frameQueue = [];\n    }\n\n    this._frameQueue.push(fn);\n\n    this._a();\n  },\n  _a: function _a() {\n    if (!this._animationFrameId) {\n      this._animationFrameId = requestAnimFrame(Animation._frameFn);\n    }\n  },\n  _run: function _run() {\n    if (this._frameQueue.length) {\n      var running = this._frameQueue;\n      this._frameQueue = [];\n\n      for (var i = 0, len = running.length; i < len; i++) {\n        running[i]();\n      }\n\n      if (this._frameQueue.length) {\n        this._animationFrameId = requestAnimFrame(Animation._frameFn);\n      } else {\n        delete this._animationFrameId;\n      }\n    }\n  },\n  animate: function animate(styles, options, step, target) {\n    if (!options) {\n      options = {};\n    }\n\n    var animation = Animation.framing(styles, options);\n    var player = new Player(animation, options, step, target);\n    return player;\n  }\n};\nAnimation._frameFn = Animation._run.bind(Animation);\nextend(Player.prototype, {\n  _prepare: function _prepare() {\n    var options = this.options;\n    var duration = options['speed'] || options['duration'];\n\n    if (isString(duration)) {\n      duration = Animation.speed[duration];\n\n      if (!duration) {\n        duration = +duration;\n      }\n    }\n\n    if (!duration) {\n      duration = Animation.speed['normal'];\n    }\n\n    this.duration = duration;\n    this._framer = options['framer'] || Animation._requestAnimFrame.bind(Animation);\n  },\n  play: function play() {\n    if (this.playState !== 'idle' && this.playState !== 'paused' || this.target && this.target[KEY]) {\n      return this;\n    }\n\n    if (this.target) {\n      this.target[KEY] = 1;\n    }\n\n    if (this.playState === 'idle') {\n      this.currentTime = 0;\n\n      this._prepare();\n    }\n\n    var t = now();\n\n    if (!this.startTime) {\n      var options = this.options;\n      this.startTime = options['startTime'] ? options['startTime'] : t;\n    }\n\n    this._playStartTime = Math.max(t, this.startTime);\n\n    if (this.playState === 'paused') {\n      this._playStartTime -= this.currentTime;\n    }\n\n    this.playState = 'running';\n\n    this._run();\n\n    return this;\n  },\n  pause: function pause() {\n    if (this.playState === 'paused') {\n      return this;\n    }\n\n    this.playState = 'paused';\n\n    this._run();\n\n    return this;\n  },\n  cancel: function cancel() {\n    if (this.playState === 'idle') {\n      return this;\n    }\n\n    this.playState = 'idle';\n    this.finished = false;\n\n    this._run();\n\n    return this;\n  },\n  finish: function finish() {\n    if (this.playState === 'finished') {\n      return this;\n    }\n\n    this.playState = 'finished';\n    this.finished = true;\n\n    this._run();\n\n    return this;\n  },\n  reverse: function reverse() {},\n  _run: function _run() {\n    var _this = this;\n\n    var onFrame = this._onFrame;\n    var t = now();\n    var elapsed = t - this._playStartTime;\n\n    if (this.options['repeat'] && elapsed >= this.duration) {\n      this._playStartTime = t;\n      elapsed = 0;\n    }\n\n    if (this.playState !== 'running') {\n      if (this.target) {\n        delete this.target[KEY];\n      }\n\n      if (onFrame) {\n        if (this.playState === 'finished') {\n          elapsed = this.duration;\n        } else if (this.playState === 'idle') {\n          elapsed = 0;\n        }\n\n        var _frame = this._animation(elapsed, this.duration);\n\n        _frame.state.playState = this.playState;\n        onFrame(_frame);\n      }\n\n      return;\n    }\n\n    var frame = this._animation(elapsed, this.duration);\n\n    this.playState = frame.state['playState'];\n\n    if (this.playState !== 'running' && this.target) {\n      delete this.target[KEY];\n    }\n\n    if (this.playState === 'idle') {\n      if (this.startTime > t) {\n        setTimeout(this._run.bind(this), this.startTime - t);\n      }\n    } else if (this.playState === 'running') {\n      this._framer(function () {\n        if (_this.playState !== 'running') {\n          return;\n        }\n\n        _this.currentTime = elapsed;\n\n        if (onFrame) {\n          onFrame(frame);\n        }\n\n        _this._run();\n      });\n    } else if (this.playState === 'finished') {\n      this.finished = true;\n\n      if (onFrame) {\n        onFrame(frame);\n      }\n    }\n  }\n});\n\nvar Animation$1 = /*#__PURE__*/Object.freeze({\n  Animation: Animation,\n  Easing: Easing,\n  Player: Player,\n  Frame: Frame\n});\n\nvar options$3 = {\n  'smoothness': 0,\n  'enableClip': true,\n  'enableSimplify': true,\n  'simplifyTolerance': 2,\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'polygonFill': '#fff',\n    'polygonOpacity': 1,\n    'opacity': 1\n  }\n};\n\nvar Path = function (_Geometry) {\n  _inheritsLoose(Path, _Geometry);\n\n  function Path() {\n    return _Geometry.apply(this, arguments) || this;\n  }\n\n  var _proto = Path.prototype;\n\n  _proto.animateShow = function animateShow(options, cb) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this._showPlayer) {\n      this._showPlayer.finish();\n    }\n\n    if (isFunction(options)) {\n      options = {};\n      cb = options;\n    }\n\n    var coordinates = this.getCoordinates();\n\n    if (coordinates.length === 0) {\n      return this;\n    }\n\n    this._animIdx = 0;\n    this._animLenSoFar = 0;\n    this.show();\n    var isPolygon = !!this.getShell;\n    var animCoords = isPolygon ? this.getShell().concat(this.getShell()[0]) : coordinates;\n\n    var projection = this._getProjection();\n\n    var prjAnimCoords = projection.projectCoords(animCoords);\n    this._prjAniShowCenter = this._getPrjExtent().getCenter();\n    this._aniShowCenter = projection.unproject(this._prjAniShowCenter);\n    var duration = options['duration'] || 1000,\n        easing = options['easing'] || 'out';\n    this.setCoordinates([]);\n    var length = 0;\n\n    if (prjAnimCoords.length) {\n      prjAnimCoords[0]._distance = 0;\n    }\n\n    for (var i = 1; i < prjAnimCoords.length; i++) {\n      var distance = prjAnimCoords[i].distanceTo(prjAnimCoords[i - 1]);\n      prjAnimCoords[i]._distance = distance;\n      length += distance;\n    }\n\n    this._tempCoord = new Coordinate(0, 0);\n    this._tempPrjCoord = new Point(0, 0);\n    var player = this._showPlayer = Animation.animate({\n      't': duration\n    }, {\n      'duration': duration,\n      'easing': easing\n    }, function (frame) {\n      if (!_this.getMap()) {\n        if (player.playState !== 'finished') {\n          player.finish();\n\n          if (cb) {\n            var _coordinates = _this.getCoordinates();\n\n            cb(frame, _coordinates[_coordinates.length - 1]);\n          }\n        }\n\n        return;\n      }\n\n      var currentCoord = _this._drawAnimShowFrame(frame.styles.t, duration, length, animCoords, prjAnimCoords);\n\n      if (frame.state.playState === 'finished') {\n        delete _this._showPlayer;\n        delete _this._aniShowCenter;\n        delete _this._prjAniShowCenter;\n        delete _this._animIdx;\n        delete _this._animLenSoFar;\n        delete _this._animTailRatio;\n        delete _this._tempCoord;\n        delete _this._tempPrjCoord;\n\n        _this.setCoordinates(coordinates);\n      }\n\n      if (cb) {\n        cb(frame, currentCoord);\n      }\n    }, this);\n    player.play();\n    return player;\n  };\n\n  _proto._drawAnimShowFrame = function _drawAnimShowFrame(t, duration, length, coordinates, prjCoords) {\n    if (t === 0) {\n      return coordinates[0];\n    }\n\n    var targetLength = t / duration * length;\n    var segLen = 0;\n    var i, l;\n\n    for (i = this._animIdx + 1, l = prjCoords.length; i < l; i++) {\n      segLen = prjCoords[i]._distance;\n\n      if (this._animLenSoFar + segLen > targetLength) {\n        break;\n      }\n\n      this._animLenSoFar += segLen;\n    }\n\n    this._animIdx = i - 1;\n\n    if (this._animIdx >= l - 1) {\n      this.setCoordinates(coordinates);\n      return coordinates[coordinates.length - 1];\n    }\n\n    var idx = this._animIdx;\n    var p1 = prjCoords[idx],\n        p2 = prjCoords[idx + 1],\n        span = targetLength - this._animLenSoFar,\n        r = span / segLen;\n    this._animTailRatio = r;\n    var x = p1.x + (p2.x - p1.x) * r,\n        y = p1.y + (p2.y - p1.y) * r;\n    this._tempPrjCoord.x = x;\n    this._tempPrjCoord.y = y;\n    var lastCoord = this._tempPrjCoord;\n    var c1 = coordinates[idx],\n        c2 = coordinates[idx + 1];\n    var cx = c1.x + (c2.x - c1.x) * r,\n        cy = c1.y + (c2.y - c1.y) * r;\n    this._tempCoord.x = cx;\n    this._tempCoord.y = cy;\n    var targetCoord = this._tempCoord;\n    var isPolygon = !!this.getShell;\n\n    if (!isPolygon && this.options['smoothness'] > 0) {\n      var animCoords = coordinates.slice(0, this._animIdx + 3);\n      this.setCoordinates(animCoords);\n      var prjAnimCoords = prjCoords.slice(0, this._animIdx + 3);\n\n      this._setPrjCoordinates(prjAnimCoords);\n    } else {\n      var _animCoords = coordinates.slice(0, this._animIdx + 1);\n\n      _animCoords.push(targetCoord);\n\n      var _prjAnimCoords = prjCoords.slice(0, this._animIdx + 1);\n\n      _prjAnimCoords.push(lastCoord);\n\n      if (isPolygon) {\n        this.setCoordinates([this._aniShowCenter].concat(_animCoords));\n\n        this._setPrjCoordinates([this._prjAniShowCenter].concat(_prjAnimCoords));\n      } else {\n        this.setCoordinates(_animCoords);\n\n        this._setPrjCoordinates(_prjAnimCoords);\n      }\n    }\n\n    return targetCoord;\n  };\n\n  _proto._getCenterInExtent = function _getCenterInExtent(extent, coordinates, clipFn) {\n    var meExtent = this.getExtent();\n\n    if (!extent.intersects(meExtent)) {\n      return null;\n    }\n\n    var clipped = clipFn(coordinates, extent);\n\n    if (clipped.length === 0) {\n      return null;\n    }\n\n    var sumx = 0,\n        sumy = 0,\n        counter = 0;\n    clipped.forEach(function (part) {\n      if (Array.isArray(part)) {\n        part.forEach(function (c) {\n          if (c.point) {\n            c = c.point;\n          }\n\n          sumx += c.x;\n          sumy += c.y;\n          counter++;\n        });\n      } else {\n        if (part.point) {\n          part = part.point;\n        }\n\n        sumx += part.x;\n        sumy += part.y;\n        counter++;\n      }\n    });\n\n    var c = new Coordinate(sumx, sumy)._multi(1 / counter);\n\n    c.count = counter;\n    return c;\n  };\n\n  _proto._getPath2DPoints = function _getPath2DPoints(prjCoords, disableSimplify, res) {\n    if (!isArrayHasData(prjCoords)) {\n      return [];\n    }\n\n    var map = this.getMap(),\n        isSimplify = !disableSimplify && this._shouldSimplify(),\n        tolerance = this.options['simplifyTolerance'] * map._getResolution(),\n        isMulti = Array.isArray(prjCoords[0]);\n\n    delete this._simplified;\n\n    if (isSimplify && !isMulti) {\n      var count = prjCoords.length;\n      prjCoords = simplify(prjCoords, tolerance, false);\n      this._simplified = prjCoords.length < count;\n    }\n\n    if (!res) {\n      res = map._getResolution();\n    }\n\n    if (!Array.isArray(prjCoords)) {\n      return map._prjToPointAtRes(prjCoords, res);\n    } else {\n      var resultPoints = [];\n      var glPointKey = '_glPt';\n\n      if (!Array.isArray(prjCoords[0])) {\n        resultPoints = getPointsResultPts(prjCoords, glPointKey);\n        return map._prjsToPointsAtRes(prjCoords, res, resultPoints);\n      }\n\n      var pts = [];\n\n      for (var i = 0, len = prjCoords.length; i < len; i++) {\n        var prjCoord = prjCoords[i];\n        resultPoints = getPointsResultPts(prjCoord, glPointKey);\n\n        var pt = map._prjsToPointsAtRes(prjCoord, res, resultPoints);\n\n        pts.push(pt);\n      }\n\n      return pts;\n    }\n  };\n\n  _proto._shouldSimplify = function _shouldSimplify() {\n    var layer = this.getLayer(),\n        properties = this.getProperties();\n    var hasAltitude = properties && layer.options['enableAltitude'] && !isNil(properties[layer.options['altitudeProperty']]) && properties[layer.options['altitudeProperty']] !== 0;\n    return layer && layer.options['enableSimplify'] && !hasAltitude && this.options['enableSimplify'] && !this._showPlayer;\n  };\n\n  _proto._setPrjCoordinates = function _setPrjCoordinates(prjPoints) {\n    this._prjCoords = prjPoints;\n    this.onShapeChanged();\n  };\n\n  _proto._getPrjCoordinates = function _getPrjCoordinates() {\n    this._verifyProjection();\n\n    if (!this._prjCoords && this._getProjection()) {\n      this._prjCoords = this._projectCoords(this._coordinates);\n    }\n\n    return this._prjCoords;\n  };\n\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n\n    var projection = this._getProjection();\n\n    if (!projection) {\n      return;\n    }\n\n    if (this._prjCoords) {\n      this._coordinates = this._unprojectCoords(this._getPrjCoordinates());\n    }\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    this._prjCoords = null;\n\n    _Geometry.prototype._clearProjection.call(this);\n  };\n\n  _proto._projectCoords = function _projectCoords(points) {\n    var projection = this._getProjection();\n\n    if (projection) {\n      return projection.projectCoords(points);\n    }\n\n    return [];\n  };\n\n  _proto._unprojectCoords = function _unprojectCoords(prjPoints) {\n    var projection = this._getProjection();\n\n    if (projection) {\n      return projection.unprojectCoords(prjPoints);\n    }\n\n    return [];\n  };\n\n  _proto._computeCenter = function _computeCenter() {\n    var ring = this._coordinates;\n\n    if (!isArrayHasData(ring)) {\n      return null;\n    }\n\n    var sumx = 0,\n        sumy = 0,\n        counter = 0;\n    var size = ring.length;\n\n    for (var i = 0; i < size; i++) {\n      if (ring[i]) {\n        if (isNumber(ring[i].x) && isNumber(ring[i].y)) {\n          sumx += ring[i].x;\n          sumy += ring[i].y;\n          counter++;\n        }\n      }\n    }\n\n    return new Coordinate(sumx / counter, sumy / counter);\n  };\n\n  _proto._computeExtent = function _computeExtent() {\n    var shell = this._coordinates;\n\n    if (!isArrayHasData(shell)) {\n      return null;\n    }\n\n    var rings = [shell];\n\n    if (this.hasHoles && this.hasHoles()) {\n      rings.push.apply(rings, this.getHoles());\n    }\n\n    return this._coords2Extent(rings, this._getProjection());\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent() {\n    var coords = [this._getPrjCoordinates()];\n\n    if (this.hasHoles && this.hasHoles()) {\n      coords.push.apply(coords, this._getPrjHoles());\n    }\n\n    return this._coords2Extent(coords);\n  };\n\n  _proto._get2DLength = function _get2DLength() {\n    var vertexes = this._getPath2DPoints(this._getPrjCoordinates(), true);\n\n    var len = 0;\n\n    for (var i = 1, l = vertexes.length; i < l; i++) {\n      len += vertexes[i].distanceTo(vertexes[i - 1]);\n    }\n\n    return len;\n  };\n\n  _proto._hitTestTolerance = function _hitTestTolerance() {\n    var symbol = this._getInternalSymbol();\n\n    var w;\n\n    if (Array.isArray(symbol)) {\n      w = 0;\n\n      for (var i = 0; i < symbol.length; i++) {\n        if (isNumber(symbol[i]['lineWidth'])) {\n          if (symbol[i]['lineWidth'] > w) {\n            w = symbol[i]['lineWidth'];\n          }\n        }\n      }\n    } else {\n      w = symbol['lineWidth'];\n    }\n\n    return isNumber(w) ? w / 2 : 1.5;\n  };\n\n  _proto._coords2Extent = function _coords2Extent(coords, proj) {\n    if (!coords || coords.length === 0 || Array.isArray(coords[0]) && coords[0].length === 0) {\n      return null;\n    }\n\n    var result = new Extent(proj);\n\n    for (var i = 0, l = coords.length; i < l; i++) {\n      for (var j = 0, ll = coords[i].length; j < ll; j++) {\n        result._combine(coords[i][j]);\n      }\n    }\n\n    return result;\n  };\n\n  return Path;\n}(Geometry);\n\nPath.mergeOptions(options$3);\n\nvar JSON_TYPE = 'Polygon';\n\nvar Polygon = function (_Path) {\n  _inheritsLoose(Polygon, _Path);\n\n  function Polygon(coordinates, opts) {\n    var _this;\n\n    _this = _Path.call(this, opts) || this;\n    _this.type = 'Polygon';\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    return _this;\n  }\n\n  var _proto = Polygon.prototype;\n\n  _proto.getOutline = function getOutline() {\n    var painter = this._getPainter();\n\n    if (!painter) {\n      return null;\n    }\n\n    var extent = this.getExtent();\n    return new Polygon(extent.toArray(), {\n      symbol: {\n        'lineWidth': 1,\n        'lineColor': '6b707b'\n      }\n    });\n  };\n\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    if (!coordinates) {\n      this._coordinates = null;\n      this._holes = null;\n\n      this._projectRings();\n\n      return this;\n    }\n\n    var rings = Coordinate.toCoordinates(coordinates);\n    var len = rings.length;\n\n    if (!Array.isArray(rings[0])) {\n      this._coordinates = this._trimRing(rings);\n    } else {\n      this._coordinates = this._trimRing(rings[0]);\n\n      if (len > 1) {\n        var holes = [];\n\n        for (var i = 1; i < len; i++) {\n          if (!rings[i]) {\n            continue;\n          }\n\n          holes.push(this._trimRing(rings[i]));\n        }\n\n        this._holes = holes;\n      }\n    }\n\n    this._projectRings();\n\n    return this;\n  };\n\n  _proto.getCoordinates = function getCoordinates() {\n    if (!this._coordinates) {\n      return [];\n    }\n\n    var holes = this.getHoles();\n    var rings = [this._copyAndCloseRing(this._coordinates)];\n\n    for (var i = 0, l = holes.length; i < l; i++) {\n      rings.push(this._copyAndCloseRing(holes[i]));\n    }\n\n    return rings;\n  };\n\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    return this._getCenterInExtent(extent, this.getShell(), clipPolygon);\n  };\n\n  _proto.getShell = function getShell() {\n    return this._coordinates || [];\n  };\n\n  _proto.getHoles = function getHoles() {\n    return this._holes || [];\n  };\n\n  _proto.hasHoles = function hasHoles() {\n    return this.getHoles().length > 0;\n  };\n\n  _proto._projectRings = function _projectRings() {\n    if (!this.getMap()) {\n      this.onShapeChanged();\n      return;\n    }\n\n    this._prjCoords = this._projectCoords(this._coordinates);\n    this._prjHoles = this._projectCoords(this._holes);\n    this.onShapeChanged();\n  };\n\n  _proto._setPrjCoordinates = function _setPrjCoordinates(prjCoords) {\n    this._prjCoords = prjCoords;\n    this.onShapeChanged();\n  };\n\n  _proto._cleanRing = function _cleanRing(ring) {\n    for (var i = ring.length - 1; i >= 0; i--) {\n      if (!ring[i]) {\n        ring.splice(i, 1);\n      }\n    }\n  };\n\n  _proto._checkRing = function _checkRing(ring) {\n    this._cleanRing(ring);\n\n    if (!ring || !isArrayHasData(ring)) {\n      return false;\n    }\n\n    var lastPoint = ring[ring.length - 1];\n    var isClose = true;\n\n    if (ring[0].x !== lastPoint.x || ring[0].y !== lastPoint.y) {\n      isClose = false;\n    }\n\n    return isClose;\n  };\n\n  _proto._trimRing = function _trimRing(ring) {\n    var isClose = this._checkRing(ring);\n\n    if (isArrayHasData(ring) && isClose) {\n      ring.splice(ring.length - 1, 1);\n    }\n\n    return ring;\n  };\n\n  _proto._copyAndCloseRing = function _copyAndCloseRing(ring) {\n    ring = ring.slice(0);\n\n    var isClose = this._checkRing(ring);\n\n    if (isArrayHasData(ring) && !isClose) {\n      ring.push(ring[0].copy());\n      return ring;\n    } else {\n      return ring;\n    }\n  };\n\n  _proto._getPrjShell = function _getPrjShell() {\n    if (this.getJSONType() === JSON_TYPE) {\n      return this._getPrjCoordinates();\n    }\n\n    this._verifyProjection();\n\n    if (this._getProjection() && !this._prjShell) {\n      this._prjShell = this._projectCoords(this.getShell());\n    }\n\n    return this._prjShell;\n  };\n\n  _proto._getPrjHoles = function _getPrjHoles() {\n    var projection = this._getProjection();\n\n    this._verifyProjection();\n\n    if (projection && !this._prjHoles) {\n      this._prjHoles = this._projectCoords(this.getHoles());\n    }\n\n    return this._prjHoles;\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength(measurer) {\n    var rings = this.getCoordinates();\n\n    if (!isArrayHasData(rings)) {\n      return 0;\n    }\n\n    var result = 0;\n\n    for (var i = 0, len = rings.length; i < len; i++) {\n      result += measurer.measureLength(rings[i]);\n    }\n\n    return result;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea(measurer) {\n    var rings = this.getCoordinates();\n\n    if (!isArrayHasData(rings)) {\n      return 0;\n    }\n\n    var result = measurer.measureArea(rings[0]);\n\n    for (var i = 1, len = rings.length; i < len; i++) {\n      result -= measurer.measureArea(rings[i]);\n    }\n\n    return result;\n  };\n\n  _proto._updateCache = function _updateCache() {\n    _Path.prototype._updateCache.call(this);\n\n    if (this._prjHoles) {\n      this._holes = this._unprojectCoords(this._getPrjHoles());\n    }\n  };\n\n  _proto._clearCache = function _clearCache() {\n    delete this._prjShell;\n    return _Path.prototype._clearCache.call(this);\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    if (this._prjHoles) {\n      this._prjHoles = null;\n    }\n\n    if (this._prjShell) {\n      this._prjShell = null;\n    }\n\n    _Path.prototype._clearProjection.call(this);\n  };\n\n  return Polygon;\n}(Path);\n\nPolygon.registerJSONType(JSON_TYPE);\n\nfunction CenterMixin (Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    var _proto = _class.prototype;\n\n    _proto.getCoordinates = function getCoordinates() {\n      return this._coordinates;\n    };\n\n    _proto.setCoordinates = function setCoordinates(coordinates) {\n      var center = coordinates instanceof Coordinate ? coordinates : new Coordinate(coordinates);\n\n      if (center.equals(this._coordinates)) {\n        return this;\n      }\n\n      this._coordinates = center;\n\n      if (!this.getMap()) {\n        this._dirtyCoords = true;\n        this.onPositionChanged();\n        return this;\n      }\n\n      var projection = this._getProjection();\n\n      this._setPrjCoordinates(projection.project(this._coordinates));\n\n      return this;\n    };\n\n    _proto._getCenter2DPoint = function _getCenter2DPoint(res) {\n      var map = this.getMap();\n\n      if (!map) {\n        return null;\n      }\n\n      var pcenter = this._getPrjCoordinates();\n\n      if (!pcenter) {\n        return null;\n      }\n\n      if (!res) {\n        res = map._getResolution();\n      }\n\n      return map._prjToPointAtRes(pcenter, res);\n    };\n\n    _proto._getPrjCoordinates = function _getPrjCoordinates() {\n      var projection = this._getProjection();\n\n      this._verifyProjection();\n\n      if (!this._pcenter && projection) {\n        if (this._coordinates) {\n          this._pcenter = projection.project(this._coordinates);\n        }\n      }\n\n      return this._pcenter;\n    };\n\n    _proto._setPrjCoordinates = function _setPrjCoordinates(pcenter) {\n      this._pcenter = pcenter;\n      this.onPositionChanged();\n    };\n\n    _proto._updateCache = function _updateCache() {\n      this._clearCache();\n\n      var projection = this._getProjection();\n\n      if (this._pcenter && projection) {\n        this._coordinates = projection.unproject(this._pcenter);\n      }\n    };\n\n    _proto._clearProjection = function _clearProjection() {\n      this._pcenter = null;\n\n      _Base.prototype._clearProjection.call(this);\n    };\n\n    _proto._computeCenter = function _computeCenter() {\n      return this._coordinates ? this._coordinates.copy() : null;\n    };\n\n    return _class;\n  }(Base);\n}\n\nvar TEMP_EXTENT$3 = new PointExtent();\nvar options$4 = {\n  'symbol': {\n    'markerType': 'path',\n    'markerPath': [{\n      'path': 'M8 23l0 0 0 0 0 0 0 0 0 0c-4,-5 -8,-10 -8,-14 0,-5 4,-9 8,-9l0 0 0 0c4,0 8,4 8,9 0,4 -4,9 -8,14z M3,9 a5,5 0,1,0,0,-0.9Z',\n      'fill': '#DE3333'\n    }],\n    'markerPathWidth': 16,\n    'markerPathHeight': 23,\n    'markerWidth': 24,\n    'markerHeight': 34\n  },\n  'hitTestForEvent': false\n};\n\nvar Marker = function (_CenterMixin) {\n  _inheritsLoose(Marker, _CenterMixin);\n\n  function Marker(coordinates, opts) {\n    var _this;\n\n    _this = _CenterMixin.call(this, opts) || this;\n    _this.type = 'Point';\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    return _this;\n  }\n\n  var _proto = Marker.prototype;\n\n  _proto.getOutline = function getOutline() {\n    var coord = this.getCoordinates();\n    var extent = this.getContainerExtent();\n    var anchor = this.getMap().coordToContainerPoint(coord);\n    return new Marker(coord, {\n      'symbol': {\n        'markerType': 'square',\n        'markerWidth': extent.getWidth(),\n        'markerHeight': extent.getHeight(),\n        'markerLineWidth': 1,\n        'markerLineColor': '6b707b',\n        'markerFill': 'rgba(0, 0, 0, 0)',\n        'markerDx': extent.xmin - (anchor.x - extent.getWidth() / 2),\n        'markerDy': extent.ymin - (anchor.y - extent.getHeight() / 2)\n      }\n    });\n  };\n\n  _proto.setSymbol = function setSymbol() {\n    var _CenterMixin$prototyp;\n\n    delete this._fixedExtent;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (_CenterMixin$prototyp = _CenterMixin.prototype.setSymbol).call.apply(_CenterMixin$prototyp, [this].concat(args));\n  };\n\n  _proto._getSizeSymbol = function _getSizeSymbol(symbol) {\n    var s = {};\n    var dynamic = false;\n    var dynamicSize = false;\n\n    for (var i = 0; i < DYNAMIC_SYMBOL_PROPS.length; i++) {\n      var v = symbol[DYNAMIC_SYMBOL_PROPS[i]];\n\n      if (isNil(v)) {\n        continue;\n      }\n\n      if (!dynamic && isFunctionDefinition(v)) {\n        dynamic = true;\n        dynamicSize = true;\n      }\n\n      s[DYNAMIC_SYMBOL_PROPS[i]] = v;\n    }\n\n    for (var _i = 0; _i < SIZE_SYMBOL_PROPS.length; _i++) {\n      var _v = symbol[SIZE_SYMBOL_PROPS[_i]];\n\n      if (isNil(_v)) {\n        continue;\n      }\n\n      if (!dynamic && isFunctionDefinition(_v)) {\n        dynamic = true;\n      }\n\n      s[SIZE_SYMBOL_PROPS[_i]] = _v;\n    }\n\n    var sizeSymbol;\n\n    if (dynamic) {\n      sizeSymbol = loadGeoSymbol(s, this);\n\n      if (dynamicSize) {\n        sizeSymbol._dynamic = true;\n      }\n    } else {\n      sizeSymbol = s;\n    }\n\n    return sizeSymbol;\n  };\n\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    if (!this._symbol) {\n      delete this._fixedExtent;\n    }\n\n    return _CenterMixin.prototype._setExternSymbol.call(this, symbol);\n  };\n\n  _proto._isDynamicSize = function _isDynamicSize() {\n    return this._sizeSymbol && this._sizeSymbol._dynamic;\n  };\n\n  _proto._getFixedExtent = function _getFixedExtent() {\n    if (this._fixedExtent && !this._isDynamicSize()) {\n      return this._fixedExtent;\n    }\n\n    this._fixedExtent = this._fixedExtent || new PointExtent();\n\n    this._fixedExtent.set(null, null, null, null);\n\n    var symbol = this._sizeSymbol;\n\n    if (!symbol) {\n      return this._fixedExtent;\n    }\n\n    var renderer = this.getLayer() && this.getLayer().getRenderer();\n    var resources = renderer && renderer.resources;\n    var textDesc = this.getTextDesc();\n\n    if (Array.isArray(symbol)) {\n      TEMP_EXTENT$3.set(0, 0, 0, 0);\n\n      for (var i = 0; i < symbol.length; i++) {\n        if (!symbol[i]) {\n          continue;\n        }\n\n        this._fixedExtent._combine(getMarkerFixedExtent(TEMP_EXTENT$3, symbol[i], resources, textDesc && textDesc[i]));\n      }\n    } else {\n      this._fixedExtent = getMarkerFixedExtent(this._fixedExtent, symbol, resources, textDesc);\n    }\n\n    return this._fixedExtent;\n  };\n\n  _proto._isVectorMarker = function _isVectorMarker() {\n    var symbol = this._getInternalSymbol();\n\n    if (Array.isArray(symbol)) {\n      return false;\n    }\n\n    return isVectorSymbol(symbol);\n  };\n\n  _proto._canEdit = function _canEdit() {\n    var symbol = this._getInternalSymbol();\n\n    if (Array.isArray(symbol)) {\n      return false;\n    }\n\n    return isVectorSymbol(symbol) || isPathSymbol(symbol) || isImageSymbol(symbol);\n  };\n\n  _proto._containsPoint = function _containsPoint(point, t) {\n    var extent = this.getContainerExtent();\n\n    if (t) {\n      extent = extent.expand(t);\n    }\n\n    if (extent.contains(point)) {\n      if (this.options['hitTestForEvent']) {\n        return _CenterMixin.prototype._containsPoint.call(this, point, t);\n      } else {\n        return true;\n      }\n    } else {\n      return false;\n    }\n  };\n\n  _proto._computeExtent = function _computeExtent() {\n    return computeExtent.call(this, 'getCenter');\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent() {\n    return computeExtent.call(this, '_getPrjCoordinates');\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    return 0;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    return 0;\n  };\n\n  _proto._getSprite = function _getSprite(resources, canvasClass) {\n    if (this._getPainter()) {\n      return this._getPainter().getSprite(resources, canvasClass);\n    }\n\n    return new Painter(this).getSprite(resources, canvasClass);\n  };\n\n  return Marker;\n}(CenterMixin(Geometry));\n\nMarker.mergeOptions(options$4);\nMarker.registerJSONType('Marker');\n\nfunction computeExtent(fn) {\n  var coordinates = this[fn]();\n\n  if (!coordinates) {\n    return null;\n  }\n\n  return new Extent(coordinates, coordinates, this._getProjection());\n}\n\nvar options$5 = {\n  'arrowStyle': null,\n  'arrowPlacement': 'vertex-last'\n};\n\nvar LineString = function (_Path) {\n  _inheritsLoose(LineString, _Path);\n\n  function LineString(coordinates, options) {\n    var _this;\n\n    _this = _Path.call(this, options) || this;\n    _this.type = 'LineString';\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    return _this;\n  }\n\n  var _proto = LineString.prototype;\n\n  _proto.getOutline = function getOutline() {\n    return Polygon.prototype.getOutline.call(this);\n  };\n\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    if (!coordinates) {\n      this._coordinates = null;\n\n      this._setPrjCoordinates(null);\n\n      return this;\n    }\n\n    this._coordinates = Coordinate.toCoordinates(coordinates);\n\n    if (this.getMap()) {\n      this._setPrjCoordinates(this._projectCoords(this._coordinates));\n    } else {\n      this.onShapeChanged();\n    }\n\n    return this;\n  };\n\n  _proto.getCoordinates = function getCoordinates() {\n    return this._coordinates || [];\n  };\n\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    return this._getCenterInExtent(extent, this.getCoordinates(), clipLine);\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength(measurer) {\n    return measurer.measureLength(this.getCoordinates());\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    return 0;\n  };\n\n  return LineString;\n}(Path);\n\nLineString.mergeOptions(options$5);\nLineString.registerJSONType('LineString');\n\nvar TEMP_EXTENT$4 = new PointExtent();\n\nvar GeometryCollection = function (_Geometry) {\n  _inheritsLoose(GeometryCollection, _Geometry);\n\n  function GeometryCollection(geometries, opts) {\n    var _this;\n\n    _this = _Geometry.call(this, opts) || this;\n    _this.type = 'GeometryCollection';\n\n    _this.setGeometries(geometries);\n\n    return _this;\n  }\n\n  var _proto = GeometryCollection.prototype;\n\n  _proto.getContainerExtent = function getContainerExtent(out) {\n    var extent = out || new PointExtent();\n    this.forEach(function (geo) {\n      extent._combine(geo.getContainerExtent(TEMP_EXTENT$4));\n    });\n    return extent;\n  };\n\n  _proto.setGeometries = function setGeometries(_geometries) {\n    var geometries = this._checkGeometries(_geometries || []);\n\n    var symbol = this._getSymbol();\n\n    var options = this.config();\n\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      geometries[i]._initOptions(options);\n\n      geometries[i]._setParent(this);\n\n      geometries[i]._setEventParent(this);\n\n      if (symbol) {\n        geometries[i].setSymbol(symbol);\n      }\n    }\n\n    this._geometries = geometries;\n\n    if (this.getLayer()) {\n      this._bindGeometriesToLayer();\n\n      this.onShapeChanged();\n    }\n\n    return this;\n  };\n\n  _proto.getGeometries = function getGeometries() {\n    return this._geometries || [];\n  };\n\n  _proto.forEach = function forEach(fn, context) {\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      if (!context) {\n        fn(geometries[i], i);\n      } else {\n        fn.call(context, geometries[i], i);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.filter = function filter(fn, context) {\n    if (!fn) {\n      return new GeometryCollection();\n    }\n\n    var selected = [];\n    var isFn = isFunction(fn);\n    var filter = isFn ? fn : createFilter(fn);\n    this.forEach(function (geometry) {\n      var g = isFn ? geometry : getFilterFeature(geometry);\n\n      if (context ? filter.call(context, g) : filter(g)) {\n        selected.push(geometry);\n      }\n    }, this);\n    return new GeometryCollection(selected);\n  };\n\n  _proto.translate = function translate(offset) {\n    if (!offset) {\n      return this;\n    }\n\n    if (this.isEmpty()) {\n      return this;\n    }\n\n    var args = arguments;\n    this.forEach(function (geometry) {\n      if (geometry && geometry.translate) {\n        geometry.translate.apply(geometry, args);\n      }\n    });\n    return this;\n  };\n\n  _proto.isEmpty = function isEmpty$$1() {\n    return !isArrayHasData(this.getGeometries());\n  };\n\n  _proto.remove = function remove() {\n    this.forEach(function (geometry) {\n      geometry._unbind();\n    });\n    return Geometry.prototype.remove.apply(this, arguments);\n  };\n\n  _proto.show = function show() {\n    this.options['visible'] = true;\n    this.forEach(function (geometry) {\n      geometry.show();\n    });\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    this.options['visible'] = false;\n    this.forEach(function (geometry) {\n      geometry.hide();\n    });\n    return this;\n  };\n\n  _proto.onConfig = function onConfig(config) {\n    this.forEach(function (geometry) {\n      geometry.config(config);\n    });\n  };\n\n  _proto.getSymbol = function getSymbol() {\n    var s = _Geometry.prototype.getSymbol.call(this);\n\n    if (!s) {\n      var symbols = [];\n      var is = false;\n      this.forEach(function (g) {\n        var symbol = g.getSymbol();\n\n        if (symbol && !is) {\n          is = true;\n        }\n\n        symbols.push(g.getSymbol());\n      });\n\n      if (is) {\n        s = {\n          'children': symbols\n        };\n      }\n    }\n\n    return s;\n  };\n\n  _proto.setSymbol = function setSymbol(s) {\n    if (s && s['children']) {\n      this._symbol = null;\n      this.forEach(function (g, i) {\n        g.setSymbol(s['children'][i]);\n      });\n    } else {\n      var symbol = this._prepareSymbol(s);\n\n      this._symbol = symbol;\n      this.forEach(function (g) {\n        g.setSymbol(symbol);\n      });\n    }\n\n    this.onSymbolChanged();\n    return this;\n  };\n\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    symbol = this._prepareSymbol(symbol);\n    this._externSymbol = symbol;\n    this.forEach(function (geometry) {\n      geometry._setExternSymbol(symbol);\n    });\n    this.onSymbolChanged();\n    return this;\n  };\n\n  _proto._bindLayer = function _bindLayer() {\n    _Geometry.prototype._bindLayer.apply(this, arguments);\n\n    this._bindGeometriesToLayer();\n  };\n\n  _proto._bindGeometriesToLayer = function _bindGeometriesToLayer() {\n    var layer = this.getLayer();\n    this.forEach(function (geometry) {\n      geometry._bindLayer(layer);\n    });\n  };\n\n  _proto._checkGeometries = function _checkGeometries(geometries) {\n    var invalidGeoError = 'The geometry added to collection is invalid.';\n\n    if (geometries && !Array.isArray(geometries)) {\n      if (geometries instanceof Geometry) {\n        return [geometries];\n      } else {\n        throw new Error(invalidGeoError);\n      }\n    } else {\n      for (var i = 0, l = geometries.length; i < l; i++) {\n        if (!this._checkGeo(geometries[i])) {\n          throw new Error(invalidGeoError + ' Index: ' + i);\n        }\n      }\n\n      return geometries;\n    }\n  };\n\n  _proto._checkGeo = function _checkGeo(geo) {\n    return geo instanceof Geometry;\n  };\n\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n\n    if (this.isEmpty()) {\n      return;\n    }\n\n    this.forEach(function (geometry) {\n      if (geometry && geometry._updateCache) {\n        geometry._updateCache();\n      }\n    });\n  };\n\n  _proto._removePainter = function _removePainter() {\n    if (this._painter) {\n      this._painter.remove();\n    }\n\n    delete this._painter;\n    this.forEach(function (geometry) {\n      geometry._removePainter();\n    });\n  };\n\n  _proto._computeCenter = function _computeCenter(projection) {\n    if (!projection || this.isEmpty()) {\n      return null;\n    }\n\n    var sumX = 0,\n        sumY = 0,\n        counter = 0;\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      var center = geometries[i]._computeCenter(projection);\n\n      if (center) {\n        sumX += center.x;\n        sumY += center.y;\n        counter++;\n      }\n    }\n\n    if (counter === 0) {\n      return null;\n    }\n\n    return new Coordinate(sumX / counter, sumY / counter);\n  };\n\n  _proto._containsPoint = function _containsPoint(point, t) {\n    if (this.isEmpty()) {\n      return false;\n    }\n\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (geometries[i]._containsPoint(point, t)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto._computeExtent = function _computeExtent(projection) {\n    return computeExtent$1.call(this, projection, '_computeExtent');\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    return computeExtent$1.call(this, projection, '_computePrjExtent');\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength(projection) {\n    if (!projection || this.isEmpty()) {\n      return 0;\n    }\n\n    var geometries = this.getGeometries();\n    var result = 0;\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      result += geometries[i]._computeGeodesicLength(projection);\n    }\n\n    return result;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea(projection) {\n    if (!projection || this.isEmpty()) {\n      return 0;\n    }\n\n    var geometries = this.getGeometries();\n    var result = 0;\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      result += geometries[i]._computeGeodesicArea(projection);\n    }\n\n    return result;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var children = [];\n\n    if (!this.isEmpty()) {\n      var geometries = this.getGeometries();\n\n      for (var i = 0, l = geometries.length; i < l; i++) {\n        if (!geometries[i]) {\n          continue;\n        }\n\n        children.push(geometries[i]._exportGeoJSONGeometry());\n      }\n    }\n\n    return {\n      'type': 'GeometryCollection',\n      'geometries': children\n    };\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      geometries[i]._clearProjection();\n    }\n  };\n\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var extent = this.getExtent();\n    var anchors = [new Coordinate(extent.xmin, extent.ymax), new Coordinate(extent.xmax, extent.ymin), new Coordinate(extent.xmin, extent.ymin), new Coordinate(extent.xmax, extent.ymax)];\n    return anchors;\n  };\n\n  _proto._getExternalResources = function _getExternalResources() {\n    if (this.isEmpty()) {\n      return [];\n    }\n\n    var geometries = this.getGeometries(),\n        resources = [];\n    var cache = {};\n    var symbol, res, key;\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      symbol = geometries[i]._getInternalSymbol();\n      res = getExternalResources(symbol);\n\n      for (var ii = 0, ll = res.length; ii < ll; ii++) {\n        key = res[ii].join();\n\n        if (!cache[key]) {\n          resources.push(res[ii]);\n          cache[key] = 1;\n        }\n      }\n    }\n\n    return resources;\n  };\n\n  _proto.startEdit = function startEdit(opts) {\n    var _this2 = this;\n\n    if (this.isEmpty()) {\n      return this;\n    }\n\n    if (!opts) {\n      opts = {};\n    }\n\n    if (opts['symbol']) {\n      this._originalSymbol = this.getSymbol();\n      this.setSymbol(opts['symbol']);\n    }\n\n    this._draggbleBeforeEdit = this.options['draggable'];\n    this.config('draggable', false);\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      geometries[i].startEdit(opts);\n    }\n\n    this._editing = true;\n    this.hide();\n    setTimeout(function () {\n      _this2.fire('editstart');\n    }, 1);\n    return this;\n  };\n\n  _proto.endEdit = function endEdit() {\n    if (this.isEmpty()) {\n      return this;\n    }\n\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      geometries[i].endEdit();\n    }\n\n    if (this._originalSymbol) {\n      this.setSymbol(this._originalSymbol);\n      delete this._originalSymbol;\n    }\n\n    this._editing = false;\n    this.show();\n    this.config('draggable', this._draggbleBeforeEdit);\n    this.fire('editend');\n    return this;\n  };\n\n  _proto.isEditing = function isEditing() {\n    if (!this._editing) {\n      return false;\n    }\n\n    return true;\n  };\n\n  return GeometryCollection;\n}(Geometry);\n\nGeometryCollection.registerJSONType('GeometryCollection');\n\nfunction computeExtent$1(projection, fn) {\n  if (this.isEmpty()) {\n    return null;\n  }\n\n  var extent = new Extent();\n  var geometries = this.getGeometries();\n\n  for (var i = 0, l = geometries.length; i < l; i++) {\n    if (!geometries[i]) {\n      continue;\n    }\n\n    var e = geometries[i][fn](projection);\n\n    if (e) {\n      extent._combine(e);\n    }\n  }\n\n  return extent;\n}\n\nvar MultiGeometry = function (_GeometryCollection) {\n  _inheritsLoose(MultiGeometry, _GeometryCollection);\n\n  function MultiGeometry(geoType, type, data, options) {\n    var _this;\n\n    _this = _GeometryCollection.call(this, null, options) || this;\n    _this.GeometryType = geoType;\n    _this.type = type;\n\n    _this._initData(data);\n\n    return _this;\n  }\n\n  var _proto = MultiGeometry.prototype;\n\n  _proto.getCoordinates = function getCoordinates() {\n    var coordinates = [];\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      var child = geometries[i];\n      coordinates.push(child.getShell && child.getJSONType() !== 'Polygon' ? [child.getShell()] : child.getCoordinates());\n    }\n\n    return coordinates;\n  };\n\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    coordinates = coordinates || [];\n    var geometries = [];\n\n    for (var i = 0, l = coordinates.length; i < l; i++) {\n      var g = new this.GeometryType(coordinates[i], this.config());\n      geometries.push(g);\n    }\n\n    this.setGeometries(geometries);\n    return this;\n  };\n\n  _proto._initData = function _initData(data) {\n    data = data || [];\n\n    if (data.length) {\n      if (data[0] instanceof this.GeometryType) {\n        this.setGeometries(data);\n      } else {\n        this.setCoordinates(data);\n      }\n    }\n  };\n\n  _proto._checkGeo = function _checkGeo(geo) {\n    return geo instanceof this.GeometryType;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var points = this.getCoordinates();\n    var coordinates = Coordinate.toNumberArrays(points);\n    return {\n      'type': this.getType(),\n      'coordinates': coordinates\n    };\n  };\n\n  return MultiGeometry;\n}(GeometryCollection);\n\nvar MultiPoint = function (_MultiGeometry) {\n  _inheritsLoose(MultiPoint, _MultiGeometry);\n\n  function MultiPoint(data, opts) {\n    return _MultiGeometry.call(this, Marker, 'MultiPoint', data, opts) || this;\n  }\n\n  var _proto = MultiPoint.prototype;\n\n  _proto.findClosest = function findClosest(coordinate) {\n    if (!coordinate) {\n      return null;\n    }\n\n    var coords = this.getCoordinates();\n    var hit = null;\n    var max = Infinity;\n    coords.forEach(function (c) {\n      var dist = distanceTo(c, coordinate);\n\n      if (dist < max) {\n        hit = c;\n        max = dist;\n      }\n    });\n    return hit;\n  };\n\n  return MultiPoint;\n}(MultiGeometry);\n\nMultiPoint.registerJSONType('MultiPoint');\n\nfunction distanceTo(p0, p1) {\n  var x = p1.x - p0.x,\n      y = p1.y - p0.y;\n  return Math.sqrt(x * x + y * y);\n}\n\nvar MultiPath = function (_MultiGeometry) {\n  _inheritsLoose(MultiPath, _MultiGeometry);\n\n  function MultiPath() {\n    return _MultiGeometry.apply(this, arguments) || this;\n  }\n\n  var _proto = MultiPath.prototype;\n\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    var children = this.getGeometries();\n    var sumx = 0,\n        sumy = 0,\n        counter = 0;\n    children.forEach(function (l) {\n      var c = l.getCenterInExtent(extent);\n\n      if (c) {\n        sumx += c.x * c.count;\n        sumy += c.y * c.count;\n        counter += c.count;\n      }\n    });\n\n    if (counter === 0) {\n      return null;\n    }\n\n    return new Coordinate(sumx, sumy)._multi(1 / counter);\n  };\n\n  return MultiPath;\n}(MultiGeometry);\n\nvar MultiLineString = function (_MultiPath) {\n  _inheritsLoose(MultiLineString, _MultiPath);\n\n  function MultiLineString(data, options) {\n    return _MultiPath.call(this, LineString, 'MultiLineString', data, options) || this;\n  }\n\n  return MultiLineString;\n}(MultiPath);\n\nMultiLineString.registerJSONType('MultiLineString');\n\nvar MultiPolygon = function (_MultiPath) {\n  _inheritsLoose(MultiPolygon, _MultiPath);\n\n  function MultiPolygon(data, opts) {\n    return _MultiPath.call(this, Polygon, 'MultiPolygon', data, opts) || this;\n  }\n\n  return MultiPolygon;\n}(MultiPath);\n\nMultiPolygon.registerJSONType('MultiPolygon');\n\nvar types$1 = {\n  'Marker': Marker,\n  'LineString': LineString,\n  'Polygon': Polygon,\n  'MultiPoint': MultiPoint,\n  'MultiLineString': MultiLineString,\n  'MultiPolygon': MultiPolygon\n};\nvar GeoJSON = {\n  toGeometry: function toGeometry(geoJSON, foreachFn) {\n    if (isString(geoJSON)) {\n      geoJSON = parseJSON(geoJSON);\n    }\n\n    if (Array.isArray(geoJSON)) {\n      var resultGeos = [];\n\n      for (var i = 0, len = geoJSON.length; i < len; i++) {\n        var geo = GeoJSON._convert(geoJSON[i], foreachFn);\n\n        if (Array.isArray(geo)) {\n          pushIn(resultGeos, geo);\n        } else {\n          resultGeos.push(geo);\n        }\n      }\n\n      return resultGeos;\n    } else {\n      var resultGeo = GeoJSON._convert(geoJSON, foreachFn);\n\n      return resultGeo;\n    }\n  },\n  _convert: function _convert(json, foreachFn) {\n    if (!json || isNil(json['type'])) {\n      return null;\n    }\n\n    var type = json['type'];\n\n    if (type === 'Feature') {\n      var g = json['geometry'];\n\n      var geometry = GeoJSON._convert(g);\n\n      if (!geometry) {\n        return null;\n      }\n\n      geometry.setId(json['id']);\n      geometry.setProperties(json['properties']);\n\n      if (foreachFn) {\n        foreachFn(geometry);\n      }\n\n      return geometry;\n    } else if (type === 'FeatureCollection') {\n      var features = json['features'];\n\n      if (!features) {\n        return null;\n      }\n\n      return GeoJSON.toGeometry(features, foreachFn);\n    } else if (['Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon'].indexOf(type) >= 0) {\n      var clazz = type === 'Point' ? 'Marker' : type;\n      var result = new types$1[clazz](json['coordinates']);\n\n      if (foreachFn) {\n        foreachFn(result);\n      }\n\n      return result;\n    } else if (type === 'GeometryCollection') {\n      var geometries = json['geometries'];\n\n      if (!isArrayHasData(geometries)) {\n        var _result2 = new GeometryCollection();\n\n        if (foreachFn) {\n          foreachFn(_result2);\n        }\n\n        return _result2;\n      }\n\n      var mGeos = [];\n      var size = geometries.length;\n\n      for (var i = 0; i < size; i++) {\n        mGeos.push(GeoJSON._convert(geometries[i]));\n      }\n\n      var _result = new GeometryCollection(mGeos);\n\n      if (foreachFn) {\n        foreachFn(_result);\n      }\n\n      return _result;\n    }\n\n    return null;\n  }\n};\n\nvar options$6 = {\n  'numberOfShellPoints': 60\n};\n\nvar Circle = function (_CenterMixin) {\n  _inheritsLoose(Circle, _CenterMixin);\n\n  Circle.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var circle = new Circle(json['coordinates'], json['radius'], json['options']);\n    circle.setProperties(feature['properties']);\n    return circle;\n  };\n\n  function Circle(coordinates, radius, opts) {\n    var _this;\n\n    _this = _CenterMixin.call(this, null, opts) || this;\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    _this._radius = radius;\n    return _this;\n  }\n\n  var _proto = Circle.prototype;\n\n  _proto.getRadius = function getRadius() {\n    return this._radius;\n  };\n\n  _proto.setRadius = function setRadius(radius) {\n    this._radius = radius;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n        center = this.getCoordinates(),\n        numberOfPoints = this.options['numberOfShellPoints'],\n        radius = this.getRadius();\n\n    var shell = [];\n    var rad, dx, dy;\n\n    for (var i = 0, len = numberOfPoints - 1; i < len; i++) {\n      rad = 360 * i / len * Math.PI / 180;\n      dx = radius * Math.cos(rad);\n      dy = radius * Math.sin(rad);\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n\n    shell.push(shell[0]);\n    return shell;\n  };\n\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n\n    if (map.getPitch()) {\n      return _CenterMixin.prototype._containsPoint.call(this, point, tolerance);\n    }\n\n    var center = map._pointToContainerPoint(this._getCenter2DPoint()),\n        size = this.getSize(),\n        t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n        se = center.add(size.width / 2, size.height / 2);\n\n    return withInEllipse(point, center, se, t);\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    var minmax = this._getMinMax(projection);\n\n    if (!minmax) {\n      return null;\n    }\n\n    var pcenter = this._getPrjCoordinates();\n\n    var pminmax = minmax.map(function (c) {\n      return projection.project(c);\n    });\n    var leftx = pminmax[0].x - pcenter.x;\n    var rightx = pminmax[1].x - pcenter.x;\n    var topy = pminmax[2].y - pcenter.y;\n    var bottomy = pminmax[3].y - pcenter.y;\n    return new Extent(pcenter.add(leftx, topy), pcenter.add(rightx, bottomy));\n  };\n\n  _proto._computeExtent = function _computeExtent(measurer) {\n    var minmax = this._getMinMax(measurer);\n\n    if (!minmax) {\n      return null;\n    }\n\n    return new Extent(minmax[0].x, minmax[2].y, minmax[1].x, minmax[3].y, this._getProjection());\n  };\n\n  _proto._getMinMax = function _getMinMax(measurer) {\n    if (!measurer || !this._coordinates || isNil(this._radius)) {\n      return null;\n    }\n\n    var radius = this._radius;\n    var p1 = measurer.locate(this._coordinates, -radius, 0),\n        p2 = measurer.locate(this._coordinates, radius, 0),\n        p3 = measurer.locate(this._coordinates, 0, radius),\n        p4 = measurer.locate(this._coordinates, 0, -radius);\n    return [p1, p2, p3, p4];\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n\n    return Math.PI * 2 * this._radius;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n\n    return Math.PI * Math.pow(this._radius, 2);\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    var center = this.getCenter();\n    var opts = extend({}, options);\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Circle',\n      'coordinates': [center.x, center.y],\n      'radius': this.getRadius()\n    };\n  };\n\n  return Circle;\n}(CenterMixin(Polygon));\n\nCircle.mergeOptions(options$6);\nCircle.registerJSONType('Circle');\n\nvar options$7 = {\n  'numberOfShellPoints': 80\n};\n\nvar Ellipse = function (_CenterMixin) {\n  _inheritsLoose(Ellipse, _CenterMixin);\n\n  Ellipse.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var ellipse = new Ellipse(json['coordinates'], json['width'], json['height'], json['options']);\n    ellipse.setProperties(feature['properties']);\n    return ellipse;\n  };\n\n  function Ellipse(coordinates, width, height, opts) {\n    var _this;\n\n    _this = _CenterMixin.call(this, null, opts) || this;\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    _this.width = width;\n    _this.height = height;\n    return _this;\n  }\n\n  var _proto = Ellipse.prototype;\n\n  _proto.getWidth = function getWidth() {\n    return this.width;\n  };\n\n  _proto.setWidth = function setWidth(width) {\n    this.width = width;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getHeight = function getHeight() {\n    return this.height;\n  };\n\n  _proto.setHeight = function setHeight(height) {\n    this.height = height;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n        center = this.getCoordinates(),\n        numberOfPoints = this.options['numberOfShellPoints'],\n        width = this.getWidth(),\n        height = this.getHeight();\n\n    var shell = [];\n    var s = Math.pow(width / 2, 2) * Math.pow(height / 2, 2),\n        sx = Math.pow(width / 2, 2),\n        sy = Math.pow(height / 2, 2);\n    var deg, rad, dx, dy;\n\n    for (var i = 0; i < numberOfPoints; i++) {\n      deg = 360 * i / numberOfPoints;\n      rad = deg * Math.PI / 180;\n      dx = Math.sqrt(s / (sx * Math.pow(Math.tan(rad), 2) + sy));\n      dy = Math.sqrt(s / (sy * Math.pow(1 / Math.tan(rad), 2) + sx));\n\n      if (deg > 90 && deg < 270) {\n        dx *= -1;\n      }\n\n      if (deg > 180 && deg < 360) {\n        dy *= -1;\n      }\n\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n\n    return shell;\n  };\n\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n\n    if (map.isTransforming()) {\n      return _CenterMixin.prototype._containsPoint.call(this, point, tolerance);\n    }\n\n    var projection = map.getProjection();\n\n    var t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n        pps = projection.projectCoords([this._coordinates, map.locate(this._coordinates, this.getWidth() / 2, this.getHeight() / 2)]),\n        p0 = map._prjToContainerPoint(pps[0]),\n        p1 = map._prjToContainerPoint(pps[1]);\n\n    return withInEllipse(point, p0, p1, t);\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent() {\n    return Circle.prototype._computePrjExtent.apply(this, arguments);\n  };\n\n  _proto._computeExtent = function _computeExtent() {\n    return Circle.prototype._computeExtent.apply(this, arguments);\n  };\n\n  _proto._getMinMax = function _getMinMax(measurer) {\n    if (!measurer || !this._coordinates || isNil(this.width) || isNil(this.height)) {\n      return null;\n    }\n\n    var width = this.getWidth(),\n        height = this.getHeight();\n    var p1 = measurer.locate(this._coordinates, -width / 2, 0),\n        p2 = measurer.locate(this._coordinates, width / 2, 0),\n        p3 = measurer.locate(this._coordinates, 0, -height / 2),\n        p4 = measurer.locate(this._coordinates, 0, height / 2);\n    return [p1, p2, p3, p4];\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return 0;\n    }\n\n    var longer = this.width > this.height ? this.width : this.height;\n    return 2 * Math.PI * longer / 2 - 4 * Math.abs(this.width - this.height);\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return 0;\n    }\n\n    return Math.PI * this.width * this.height / 4;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var center = this.getCenter();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Ellipse',\n      'coordinates': [center.x, center.y],\n      'width': this.getWidth(),\n      'height': this.getHeight()\n    };\n  };\n\n  return Ellipse;\n}(CenterMixin(Polygon));\n\nEllipse.mergeOptions(options$7);\nEllipse.registerJSONType('Ellipse');\n\nvar Rectangle = function (_Polygon) {\n  _inheritsLoose(Rectangle, _Polygon);\n\n  Rectangle.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var rect = new Rectangle(json['coordinates'], json['width'], json['height'], json['options']);\n    rect.setProperties(feature['properties']);\n    return rect;\n  };\n\n  function Rectangle(coordinates, width, height, opts) {\n    var _this;\n\n    _this = _Polygon.call(this, null, opts) || this;\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    _this._width = width;\n    _this._height = height;\n    return _this;\n  }\n\n  var _proto = Rectangle.prototype;\n\n  _proto.getCoordinates = function getCoordinates() {\n    return this._coordinates;\n  };\n\n  _proto.setCoordinates = function setCoordinates(nw) {\n    this._coordinates = nw instanceof Coordinate ? nw : new Coordinate(nw);\n\n    if (!this._coordinates || !this.getMap()) {\n      this.onPositionChanged();\n      return this;\n    }\n\n    var projection = this._getProjection();\n\n    this._setPrjCoordinates(projection.project(this._coordinates));\n\n    return this;\n  };\n\n  _proto.getWidth = function getWidth() {\n    return this._width;\n  };\n\n  _proto.setWidth = function setWidth(width) {\n    this._width = width;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getHeight = function getHeight() {\n    return this._height;\n  };\n\n  _proto.setHeight = function setHeight(height) {\n    this._height = height;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer();\n\n    var nw = this._coordinates;\n    var map = this.getMap();\n    var sx = 1,\n        sy = -1;\n\n    if (map) {\n      var fExt = map.getFullExtent();\n\n      if (fExt['left'] > fExt['right']) {\n        sx = -1;\n      }\n\n      if (fExt['bottom'] > fExt['top']) {\n        sy = 1;\n      }\n    }\n\n    var points = [];\n    points.push(nw);\n    points.push(measurer.locate(nw, sx * this._width, 0));\n    points.push(measurer.locate(nw, sx * this._width, sy * this._height));\n    points.push(measurer.locate(nw, 0, sy * this._height));\n    points.push(nw);\n    return points;\n  };\n\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n\n  _proto._getPrjCoordinates = function _getPrjCoordinates() {\n    var projection = this._getProjection();\n\n    this._verifyProjection();\n\n    if (!this._pnw && projection) {\n      if (this._coordinates) {\n        this._pnw = projection.project(this._coordinates);\n      }\n    }\n\n    return this._pnw;\n  };\n\n  _proto._setPrjCoordinates = function _setPrjCoordinates(pnw) {\n    this._pnw = pnw;\n    this.onPositionChanged();\n  };\n\n  _proto._getPrjShell = function _getPrjShell() {\n    var shell = _Polygon.prototype._getPrjShell.call(this);\n\n    var projection = this._getProjection();\n\n    if (!projection.isSphere()) {\n      return shell;\n    }\n\n    var sphereExtent = projection.getSphereExtent(),\n        sx = sphereExtent.sx,\n        sy = sphereExtent.sy;\n\n    var circum = this._getProjection().getCircum();\n\n    var nw = shell[0];\n\n    for (var i = 1, l = shell.length; i < l; i++) {\n      var p = shell[i];\n      var dx = 0,\n          dy = 0;\n\n      if (sx * (nw.x - p.x) > 0) {\n        dx = circum.x * sx;\n      }\n\n      if (sy * (nw.y - p.y) < 0) {\n        dy = circum.y * sy;\n      }\n\n      shell[i]._add(dx, dy);\n    }\n\n    return shell;\n  };\n\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n\n    var projection = this._getProjection();\n\n    if (this._pnw && projection) {\n      this._coordinates = projection.unproject(this._pnw);\n    }\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    this._pnw = null;\n\n    _Polygon.prototype._clearProjection.call(this);\n  };\n\n  _proto._computeCenter = function _computeCenter(measurer) {\n    return measurer.locate(this._coordinates, this._width / 2, -this._height / 2);\n  };\n\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n\n    if (map.isTransforming()) {\n      return _Polygon.prototype._containsPoint.call(this, point, tolerance);\n    }\n\n    var t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n        r = map._getResolution() * t;\n\n    var extent = this._getPrjExtent().expand(r);\n\n    var p = map._containerPointToPrj(point);\n\n    return extent.contains(p);\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    var se = this._getSouthEast(projection);\n\n    if (!se) {\n      return null;\n    }\n\n    var prjs = projection.projectCoords([new Coordinate(this._coordinates.x, se.y), new Coordinate(se.x, this._coordinates.y)]);\n    return new Extent(prjs[0], prjs[1]);\n  };\n\n  _proto._computeExtent = function _computeExtent(measurer) {\n    var se = this._getSouthEast(measurer);\n\n    if (!se) {\n      return null;\n    }\n\n    return new Extent(this._coordinates, se, this._getProjection());\n  };\n\n  _proto._getSouthEast = function _getSouthEast(measurer) {\n    if (!measurer || !this._coordinates || isNil(this._width) || isNil(this._height)) {\n      return null;\n    }\n\n    var width = this.getWidth(),\n        height = this.getHeight();\n    var w = width,\n        h = -height;\n\n    if (measurer.fullExtent) {\n      var fullExtent = measurer.fullExtent,\n          sx = fullExtent.right > fullExtent.left ? 1 : -1,\n          sy = fullExtent.top > fullExtent.bottom ? 1 : -1;\n      w *= sx;\n      h *= sy;\n    }\n\n    var rightPoint = measurer.locate(this._coordinates, w, 0);\n    var bottomPoint = measurer.locate(this._coordinates, 0, h);\n    rightPoint.y = bottomPoint.y;\n    return rightPoint;\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._width) || isNil(this._height)) {\n      return 0;\n    }\n\n    return 2 * (this._width + this._height);\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._width) || isNil(this._height)) {\n      return 0;\n    }\n\n    return this._width * this._height;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var nw = this.getCoordinates();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Rectangle',\n      'coordinates': [nw.x, nw.y],\n      'width': this.getWidth(),\n      'height': this.getHeight()\n    };\n  };\n\n  return Rectangle;\n}(Polygon);\n\nRectangle.registerJSONType('Rectangle');\n\nvar options$8 = {\n  'numberOfShellPoints': 60\n};\n\nvar Sector = function (_Circle) {\n  _inheritsLoose(Sector, _Circle);\n\n  Sector.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var sector = new Sector(json['coordinates'], json['radius'], json['startAngle'], json['endAngle'], json['options']);\n    sector.setProperties(feature['properties']);\n    return sector;\n  };\n\n  function Sector(coordinates, radius, startAngle, endAngle, opts) {\n    var _this;\n\n    _this = _Circle.call(this, coordinates, radius, opts) || this;\n    _this.startAngle = startAngle;\n    _this.endAngle = endAngle;\n    return _this;\n  }\n\n  var _proto = Sector.prototype;\n\n  _proto.getStartAngle = function getStartAngle() {\n    return this.startAngle;\n  };\n\n  _proto.setStartAngle = function setStartAngle(startAngle) {\n    this.startAngle = startAngle;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getEndAngle = function getEndAngle() {\n    return this.endAngle;\n  };\n\n  _proto.setEndAngle = function setEndAngle(endAngle) {\n    this.endAngle = endAngle;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n        center = this.getCoordinates(),\n        numberOfPoints = this.options['numberOfShellPoints'] - 2,\n        radius = this.getRadius(),\n        shell = [center.copy()],\n        startAngle = this.getStartAngle(),\n        angle = this.getEndAngle() - startAngle;\n\n    var rad, dx, dy;\n\n    for (var i = 0; i < numberOfPoints; i++) {\n      rad = (angle * i / (numberOfPoints - 1) + startAngle) * Math.PI / 180;\n      dx = radius * Math.cos(rad);\n      dy = radius * Math.sin(rad);\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n\n    shell.push(center.copy());\n    return shell;\n  };\n\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n\n    if (map.isTransforming()) {\n      return _Circle.prototype._containsPoint.call(this, point, tolerance);\n    }\n\n    var center = map._pointToContainerPoint(this._getCenter2DPoint()),\n        t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n        size = this.getSize(),\n        pc = center,\n        pp = point,\n        x = pp.x - pc.x,\n        y = pc.y - pp.y,\n        atan2 = Math.atan2(y, x),\n        angle = atan2 < 0 ? (atan2 + 2 * Math.PI) * 360 / (2 * Math.PI) : atan2 * 360 / (2 * Math.PI);\n\n    var sAngle = this.startAngle % 360,\n        eAngle = this.endAngle % 360;\n    var between = false;\n\n    if (sAngle > eAngle) {\n      between = !(angle > eAngle && angle < sAngle);\n    } else {\n      between = angle >= sAngle && angle <= eAngle;\n    }\n\n    return pp.distanceTo(pc) <= size.width / 2 + t && between;\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n\n    return Math.PI * 2 * this._radius * Math.abs(this.startAngle - this.endAngle) / 360 + 2 * this._radius;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n\n    return Math.PI * Math.pow(this._radius, 2) * Math.abs(this.startAngle - this.endAngle) / 360;\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var center = this.getCenter();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Sector',\n      'coordinates': [center.x, center.y],\n      'radius': this.getRadius(),\n      'startAngle': this.getStartAngle(),\n      'endAngle': this.getEndAngle()\n    };\n  };\n\n  return Sector;\n}(Circle);\n\nSector.mergeOptions(options$8);\nSector.registerJSONType('Sector');\n\nvar options$9 = {\n  'enableSimplify': false,\n  'enableClip': false\n};\n\nvar Curve = function (_LineString) {\n  _inheritsLoose(Curve, _LineString);\n\n  function Curve() {\n    return _LineString.apply(this, arguments) || this;\n  }\n\n  var _proto = Curve.prototype;\n\n  _proto._arc = function _arc(ctx, points, lineOpacity) {\n    var degree = this.options['arcDegree'] * Math.PI / 180;\n\n    for (var i = 1, l = points.length; i < l; i++) {\n      var c = Canvas._arcBetween(ctx, points[i - 1], points[i], degree);\n\n      var ctrlPoint = [points[i - 1].x + points[i].x - c[0], points[i - 1].y + points[i].y - c[1]];\n      points[i - 1].nextCtrlPoint = ctrlPoint;\n      points[i].prevCtrlPoint = ctrlPoint;\n\n      Canvas._stroke(ctx, lineOpacity);\n    }\n  };\n\n  _proto._quadraticCurve = function _quadraticCurve(ctx, points) {\n    if (points.length <= 2) {\n      Canvas._path(ctx, points);\n\n      return;\n    }\n\n    var i, l;\n\n    for (i = 2, l = points.length; i < l; i += 2) {\n      ctx.quadraticCurveTo(points[i - 1].x, points[i - 1].y, points[i].x, points[i].y);\n    }\n\n    i -= 1;\n\n    if (i < l) {\n      for (; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n      }\n    }\n  };\n\n  _proto._bezierCurve = function _bezierCurve(ctx, points) {\n    if (points.length <= 3) {\n      Canvas._path(ctx, points);\n\n      return;\n    }\n\n    var i, l;\n\n    for (i = 1, l = points.length; i + 2 < l; i += 3) {\n      ctx.bezierCurveTo(points[i].x, points[i].y, points[i + 1].x, points[i + 1].y, points[i + 2].x, points[i + 2].y);\n    }\n\n    if (i < l) {\n      for (; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n      }\n    }\n  };\n\n  _proto._getCurveArrowPoints = function _getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, step) {\n    var l = segments.length;\n    var i;\n\n    for (i = step; i < l; i += step) {\n      var arrow = this._getArrowShape(segments[i - 1], segments[i], lineWidth, arrowStyle, tolerance);\n\n      if (arrow) {\n        arrows.push(arrow);\n      }\n    }\n\n    i -= step;\n\n    if (i < l - 1) {\n      for (i += 1; i < l; i++) {\n        var _arrow = this._getArrowShape(segments[i - 1], segments[i], lineWidth, arrowStyle, tolerance);\n\n        if (_arrow) {\n          arrows.push(_arrow);\n        }\n      }\n    }\n  };\n\n  return Curve;\n}(LineString);\n\nCurve.mergeOptions(options$9);\n\nvar options$a = {\n  'arcDegree': 90\n};\n\nvar ArcCurve = function (_Curve) {\n  _inheritsLoose(ArcCurve, _Curve);\n\n  function ArcCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n\n  var _proto = ArcCurve.prototype;\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'ArcCurve'\n    };\n  };\n\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n\n    this._arc(ctx, points, lineOpacity);\n\n    Canvas._stroke(ctx, lineOpacity);\n\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n\n  ArcCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var arc = new ArcCurve(feature['geometry']['coordinates'], json['options']);\n    arc.setProperties(feature['properties']);\n    return arc;\n  };\n\n  return ArcCurve;\n}(Curve);\n\nArcCurve.registerJSONType('ArcCurve');\nArcCurve.mergeOptions(options$a);\n\nvar CubicBezierCurve = function (_Curve) {\n  _inheritsLoose(CubicBezierCurve, _Curve);\n\n  function CubicBezierCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n\n  CubicBezierCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var curve = new CubicBezierCurve(feature['geometry']['coordinates'], json['options']);\n    curve.setProperties(feature['properties']);\n    return curve;\n  };\n\n  var _proto = CubicBezierCurve.prototype;\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'CubicBezierCurve'\n    };\n  };\n\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n\n    this._bezierCurve(ctx, points);\n\n    Canvas._stroke(ctx, lineOpacity);\n\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n\n  _proto._getArrowPoints = function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    return this._getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, 3);\n  };\n\n  return CubicBezierCurve;\n}(Curve);\n\nCubicBezierCurve.registerJSONType('CubicBezierCurve');\n\nvar QuadBezierCurve = function (_Curve) {\n  _inheritsLoose(QuadBezierCurve, _Curve);\n\n  function QuadBezierCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n\n  QuadBezierCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var curve = new QuadBezierCurve(feature['geometry']['coordinates'], json['options']);\n    curve.setProperties(feature['properties']);\n    return curve;\n  };\n\n  var _proto = QuadBezierCurve.prototype;\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'QuadBezierCurve'\n    };\n  };\n\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n\n    this._quadraticCurve(ctx, points, lineOpacity);\n\n    Canvas._stroke(ctx, lineOpacity);\n\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n\n  _proto._getArrowPoints = function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    return this._getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, 2);\n  };\n\n  return QuadBezierCurve;\n}(Curve);\n\nQuadBezierCurve.registerJSONType('QuadBezierCurve');\n\nvar defaultSymbol$1 = {\n  'textFaceName': 'monospace',\n  'textSize': 12,\n  'textLineSpacing': 8,\n  'textWrapCharacter': '\\n',\n  'textHorizontalAlignment': 'middle',\n  'textVerticalAlignment': 'middle'\n};\nvar defaultBoxSymbol = {\n  'markerType': 'square',\n  'markerLineColor': '#000',\n  'markerLineWidth': 2,\n  'markerLineOpacity': 1,\n  'markerFill': '#fff',\n  'markerOpacity': 1\n};\n\nvar TextMarker = function (_Marker) {\n  _inheritsLoose(TextMarker, _Marker);\n\n  function TextMarker() {\n    return _Marker.apply(this, arguments) || this;\n  }\n\n  var _proto = TextMarker.prototype;\n\n  _proto.getContent = function getContent() {\n    return this._content;\n  };\n\n  _proto.setContent = function setContent(content) {\n    var old = this._content;\n    this._content = escapeSpecialChars(content);\n\n    this._refresh();\n\n    this._fireEvent('contentchange', {\n      'old': old,\n      'new': content\n    });\n\n    return this;\n  };\n\n  _proto.onAdd = function onAdd() {\n    this._refresh();\n  };\n\n  _proto.toJSON = function toJSON() {\n    var json = _Marker.prototype.toJSON.call(this);\n\n    delete json['symbol'];\n    return json;\n  };\n\n  _proto.setSymbol = function setSymbol(symbol) {\n    if (this._refreshing || !symbol) {\n      return _Marker.prototype.setSymbol.call(this, symbol);\n    }\n\n    var s = this._parseSymbol(symbol);\n\n    if (this.setTextStyle) {\n      var style = this.getTextStyle() || {};\n      style.symbol = s[0];\n      this.setTextStyle(style);\n    } else if (this.setTextSymbol) {\n      this.setTextSymbol(s[0]);\n    }\n\n    if (this.setBoxStyle) {\n      var _style = this.getBoxStyle() || {};\n\n      _style.symbol = s[1];\n      this.setBoxStyle(_style);\n    } else if (this.setBoxSymbol) {\n      this.setBoxSymbol(s[1]);\n    }\n\n    return this;\n  };\n\n  _proto._parseSymbol = function _parseSymbol(symbol) {\n    var t = {};\n    var b = {};\n\n    for (var p in symbol) {\n      if (hasOwn(symbol, p)) {\n        if (p.indexOf('text') === 0) {\n          t[p] = symbol[p];\n        } else {\n          b[p] = symbol[p];\n        }\n      }\n    }\n\n    return [t, b];\n  };\n\n  _proto._getTextSize = function _getTextSize(symbol) {\n    return splitTextToRow(this._content, symbol)['size'];\n  };\n\n  _proto._getInternalSymbol = function _getInternalSymbol() {\n    return this._symbol;\n  };\n\n  _proto._getDefaultTextSymbol = function _getDefaultTextSymbol() {\n    return extend({}, defaultSymbol$1);\n  };\n\n  _proto._getDefaultBoxSymbol = function _getDefaultBoxSymbol() {\n    return extend({}, defaultBoxSymbol);\n  };\n\n  _proto._getDefaultPadding = function _getDefaultPadding() {\n    return [12, 8];\n  };\n\n  return TextMarker;\n}(Marker);\n\nvar options$b = {\n  'textStyle': {\n    'wrap': true,\n    'padding': [12, 8],\n    'verticalAlignment': 'middle',\n    'horizontalAlignment': 'middle'\n  },\n  'boxSymbol': null\n};\n\nvar TextBox = function (_TextMarker) {\n  _inheritsLoose(TextBox, _TextMarker);\n\n  function TextBox(content, coordinates, width, height, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _TextMarker.call(this, coordinates, options) || this;\n    _this._content = escapeSpecialChars(content);\n    _this._width = isNil(width) ? 100 : width;\n    _this._height = isNil(height) ? 40 : height;\n\n    if (options.boxSymbol) {\n      _this.setBoxSymbol(options.boxSymbol);\n    }\n\n    if (options.textStyle) {\n      _this.setTextStyle(options.textStyle);\n    }\n\n    _this._refresh();\n\n    return _this;\n  }\n\n  var _proto = TextBox.prototype;\n\n  _proto.getWidth = function getWidth() {\n    return this._width;\n  };\n\n  _proto.setWidth = function setWidth(width) {\n    this._width = width;\n\n    this._refresh();\n\n    return this;\n  };\n\n  _proto.getHeight = function getHeight() {\n    return this._height;\n  };\n\n  _proto.setHeight = function setHeight(height) {\n    this._height = height;\n\n    this._refresh();\n\n    return this;\n  };\n\n  _proto.getBoxSymbol = function getBoxSymbol() {\n    return extend({}, this.options.boxSymbol);\n  };\n\n  _proto.setBoxSymbol = function setBoxSymbol(symbol) {\n    this.options.boxSymbol = symbol ? extend({}, symbol) : symbol;\n\n    if (this.getSymbol()) {\n      this._refresh();\n    }\n\n    return this;\n  };\n\n  _proto.getTextStyle = function getTextStyle() {\n    if (!this.options.textStyle) {\n      return null;\n    }\n\n    return extend({}, this.options.textStyle);\n  };\n\n  _proto.setTextStyle = function setTextStyle(style) {\n    this.options.textStyle = style ? extend({}, style) : style;\n\n    if (this.getSymbol()) {\n      this._refresh();\n    }\n\n    return this;\n  };\n\n  TextBox.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var textBox = new TextBox(json['content'], feature['geometry']['coordinates'], json['width'], json['height'], json['options']);\n    textBox.setProperties(feature['properties']);\n    textBox.setId(feature['id']);\n\n    if (json['symbol']) {\n      textBox.setSymbol(json['symbol']);\n    }\n\n    return textBox;\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'width': this.getWidth(),\n      'height': this.getHeight(),\n      'subType': 'TextBox',\n      'content': this._content\n    };\n  };\n\n  _proto._refresh = function _refresh() {\n    var textStyle = this.getTextStyle() || {},\n        padding = textStyle['padding'] || [12, 8],\n        maxWidth = this._width - 2 * padding[0],\n        maxHeight = this._height - 2 * padding[1];\n    var symbol = extend({}, textStyle.symbol || this._getDefaultTextSymbol(), this.options.boxSymbol || this._getDefaultBoxSymbol(), {\n      'textName': this._content,\n      'markerWidth': this._width,\n      'markerHeight': this._height,\n      'textHorizontalAlignment': 'middle',\n      'textVerticalAlignment': 'middle',\n      'textMaxWidth': maxWidth,\n      'textMaxHeight': maxHeight\n    });\n\n    if (textStyle['wrap'] && !symbol['textWrapWidth']) {\n      symbol['textWrapWidth'] = maxWidth;\n    }\n\n    var hAlign = textStyle['horizontalAlignment'];\n    symbol['textDx'] = symbol['markerDx'] || 0;\n    var offsetX = symbol['markerWidth'] / 2 - padding[0];\n\n    if (hAlign === 'left') {\n      symbol['textHorizontalAlignment'] = 'right';\n      symbol['textDx'] = symbol['textDx'] - offsetX;\n    } else if (hAlign === 'right') {\n      symbol['textHorizontalAlignment'] = 'left';\n      symbol['textDx'] = symbol['textDx'] + offsetX;\n    }\n\n    var vAlign = textStyle['verticalAlignment'];\n    symbol['textDy'] = symbol['markerDy'] || 0;\n    var offsetY = symbol['markerHeight'] / 2 - padding[1];\n\n    if (vAlign === 'top') {\n      symbol['textVerticalAlignment'] = 'bottom';\n      symbol['textDy'] -= offsetY;\n    } else if (vAlign === 'bottom') {\n      symbol['textVerticalAlignment'] = 'top';\n      symbol['textDy'] += offsetY;\n    }\n\n    this._refreshing = true;\n    this.updateSymbol(symbol);\n    delete this._refreshing;\n  };\n\n  return TextBox;\n}(TextMarker);\n\nTextBox.mergeOptions(options$b);\nTextBox.registerJSONType('TextBox');\n\nvar options$c = {\n  'boxStyle': null,\n  textSymbol: null\n};\n\nvar Label = function (_TextMarker) {\n  _inheritsLoose(Label, _TextMarker);\n\n  function Label(content, coordinates, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _TextMarker.call(this, coordinates, options) || this;\n\n    if (options.textSymbol) {\n      _this.setTextSymbol(options.textSymbol);\n    }\n\n    if (options.boxStyle) {\n      _this.setBoxStyle(options.boxStyle);\n    }\n\n    _this._content = escapeSpecialChars(content);\n\n    _this._refresh();\n\n    return _this;\n  }\n\n  var _proto = Label.prototype;\n\n  _proto.getBoxStyle = function getBoxStyle() {\n    if (!this.options.boxStyle) {\n      return null;\n    }\n\n    return extend({}, this.options.boxStyle);\n  };\n\n  _proto.setBoxStyle = function setBoxStyle(style) {\n    this.options.boxStyle = style ? extend({}, style) : style;\n\n    this._refresh();\n\n    return this;\n  };\n\n  _proto.getTextSymbol = function getTextSymbol() {\n    return extend({}, this._getDefaultTextSymbol(), this.options.textSymbol);\n  };\n\n  _proto.setTextSymbol = function setTextSymbol(symbol) {\n    this.options.textSymbol = symbol ? extend({}, symbol) : symbol;\n\n    this._refresh();\n\n    return this;\n  };\n\n  Label.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var label = new Label(json['content'], feature['geometry']['coordinates'], json['options']);\n    label.setProperties(feature['properties']);\n    label.setId(feature['id']);\n\n    if (json['symbol']) {\n      label.setSymbol(json['symbol']);\n    }\n\n    return label;\n  };\n\n  _proto._canEdit = function _canEdit() {\n    return false;\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'Label',\n      'content': this._content\n    };\n  };\n\n  _proto._refresh = function _refresh() {\n    var symbol = extend({}, this.getTextSymbol(), {\n      'textName': this._content\n    });\n    var boxStyle = this.getBoxStyle();\n\n    if (boxStyle) {\n      extend(symbol, boxStyle.symbol);\n\n      var sizes = this._getBoxSize(symbol),\n          textSize = sizes[1],\n          padding = boxStyle['padding'] || this._getDefaultPadding();\n\n      var boxSize = sizes[0];\n      symbol['markerWidth'] = boxSize['width'];\n      symbol['markerHeight'] = boxSize['height'];\n\n      var dx = symbol['textDx'] || 0,\n          dy = symbol['textDy'] || 0,\n          textAlignPoint = getAlignPoint(textSize, symbol['textHorizontalAlignment'], symbol['textVerticalAlignment'])._add(dx, dy);\n\n      var hAlign = boxStyle['horizontalAlignment'] || 'middle';\n      symbol['markerDx'] = textAlignPoint.x;\n\n      if (hAlign === 'left') {\n        symbol['markerDx'] += symbol['markerWidth'] / 2 - padding[0];\n      } else if (hAlign === 'right') {\n        symbol['markerDx'] -= symbol['markerWidth'] / 2 - textSize['width'] - padding[0];\n      } else {\n        symbol['markerDx'] += textSize['width'] / 2;\n      }\n\n      var vAlign = boxStyle['verticalAlignment'] || 'middle';\n      symbol['markerDy'] = textAlignPoint.y;\n\n      if (vAlign === 'top') {\n        symbol['markerDy'] += symbol['markerHeight'] / 2 - padding[1];\n      } else if (vAlign === 'bottom') {\n        symbol['markerDy'] -= symbol['markerHeight'] / 2 - textSize['height'] - padding[1];\n      } else {\n        symbol['markerDy'] += textSize['height'] / 2;\n      }\n    }\n\n    this._refreshing = true;\n    this.updateSymbol(symbol);\n    delete this._refreshing;\n  };\n\n  _proto._getBoxSize = function _getBoxSize(symbol) {\n    if (!symbol['markerType']) {\n      symbol['markerType'] = 'square';\n    }\n\n    var boxStyle = this.getBoxStyle();\n\n    var size = this._getTextSize(symbol);\n\n    var width, height;\n\n    var padding = boxStyle['padding'] || this._getDefaultPadding();\n\n    width = size['width'] + padding[0] * 2;\n    height = size['height'] + padding[1] * 2;\n\n    if (boxStyle['minWidth']) {\n      if (!width || width < boxStyle['minWidth']) {\n        width = boxStyle['minWidth'];\n      }\n    }\n\n    if (boxStyle['minHeight']) {\n      if (!height || height < boxStyle['minHeight']) {\n        height = boxStyle['minHeight'];\n      }\n    }\n\n    return [new Size(width, height), size];\n  };\n\n  return Label;\n}(TextMarker);\n\nLabel.mergeOptions(options$c);\nLabel.registerJSONType('Label');\n\nvar Connectable = function Connectable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    _class._hasConnectors = function _hasConnectors(geometry) {\n      return !isNil(geometry.__connectors) && geometry.__connectors.length > 0;\n    };\n\n    _class._getConnectors = function _getConnectors(geometry) {\n      return geometry.__connectors;\n    };\n\n    var _proto = _class.prototype;\n\n    _proto.getConnectSource = function getConnectSource() {\n      return this._connSource;\n    };\n\n    _proto.setConnectSource = function setConnectSource(src) {\n      var target = this._connTarget;\n      this.onRemove();\n      this._connSource = src;\n      this._connTarget = target;\n      this.onAdd();\n      return this;\n    };\n\n    _proto.getConnectTarget = function getConnectTarget() {\n      return this._connTarget;\n    };\n\n    _proto.setConnectTarget = function setConnectTarget(target) {\n      var src = this._connSource;\n      this.onRemove();\n      this._connSource = src;\n      this._connTarget = target;\n\n      this._updateCoordinates();\n\n      this._registerEvents();\n\n      return this;\n    };\n\n    _proto._updateCoordinates = function _updateCoordinates() {\n      var map = this.getMap();\n\n      if (!map && this._connSource) {\n        map = this._connSource.getMap();\n      }\n\n      if (!map && this._connTarget) {\n        map = this._connTarget.getMap();\n      }\n\n      if (!map) {\n        return;\n      }\n\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n\n      var srcPoints = this._connSource._getConnectPoints();\n\n      var targetPoints = this._connTarget._getConnectPoints();\n\n      var minDist = 0;\n      var oldCoordinates = this.getCoordinates();\n      var c1, c2;\n\n      for (var i = 0, len = srcPoints.length; i < len; i++) {\n        var p1 = srcPoints[i];\n\n        for (var j = 0, length = targetPoints.length; j < length; j++) {\n          var p2 = targetPoints[j];\n          var dist = map.computeLength(p1, p2);\n\n          if (i === 0 && j === 0) {\n            c1 = p1;\n            c2 = p2;\n            minDist = dist;\n          } else if (dist < minDist) {\n            c1 = p1;\n            c2 = p2;\n          }\n        }\n      }\n\n      if (!isArrayHasData(oldCoordinates) || !oldCoordinates[0].equals(c1) || !oldCoordinates[1].equals(c2)) {\n        this.setCoordinates([c1, c2]);\n      }\n    };\n\n    _proto.onAdd = function onAdd() {\n      this._registerEvents();\n\n      this._updateCoordinates();\n    };\n\n    _proto.onRemove = function onRemove() {\n      if (this._connSource) {\n        if (this._connSource.__connectors) {\n          removeFromArray(this, this._connSource.__connectors);\n        }\n\n        this._connSource.off('dragging positionchange', this._updateCoordinates, this).off('remove', this.onRemove, this);\n\n        this._connSource.off('dragstart mousedown mouseover', this._showConnect, this);\n\n        this._connSource.off('dragend mouseup mouseout', this.hide, this);\n\n        this._connSource.off('show', this._showConnect, this).off('hide', this.hide, this);\n\n        delete this._connSource;\n      }\n\n      if (this._connTarget) {\n        removeFromArray(this, this._connTarget.__connectors);\n\n        this._connTarget.off('dragging positionchange', this._updateCoordinates, this).off('remove', this.onRemove, this);\n\n        this._connTarget.off('show', this._showConnect, this).off('hide', this.hide, this);\n\n        delete this._connTarget;\n      }\n\n      if (!(this._connSource instanceof Geometry) || !(this._connTarget instanceof Geometry)) {\n        var map = this.getMap();\n\n        if (map) {\n          map.off('movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange', this._updateCoordinates, this);\n        }\n      }\n    };\n\n    _proto._showConnect = function _showConnect() {\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n\n      if (this._connSource.isVisible() && this._connTarget.isVisible()) {\n        this._updateCoordinates();\n\n        this.show();\n      }\n    };\n\n    _proto._registerEvents = function _registerEvents() {\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n\n      if (!this._connSource.__connectors) {\n        this._connSource.__connectors = [];\n      }\n\n      if (!this._connTarget.__connectors) {\n        this._connTarget.__connectors = [];\n      }\n\n      this._connSource.__connectors.push(this);\n\n      this._connTarget.__connectors.push(this);\n\n      this._connSource.on('dragging positionchange', this._updateCoordinates, this).on('remove', this.remove, this);\n\n      this._connTarget.on('dragging positionchange', this._updateCoordinates, this).on('remove', this.remove, this);\n\n      this._connSource.on('show', this._showConnect, this).on('hide', this.hide, this);\n\n      this._connTarget.on('show', this._showConnect, this).on('hide', this.hide, this);\n\n      var trigger = this.options['showOn'];\n      this.hide();\n\n      if (trigger === 'moving') {\n        this._connSource.on('dragstart', this._showConnect, this).on('dragend', this.hide, this);\n\n        this._connTarget.on('dragstart', this._showConnect, this).on('dragend', this.hide, this);\n      } else if (trigger === 'click') {\n        this._connSource.on('mousedown', this._showConnect, this).on('mouseup', this.hide, this);\n\n        this._connTarget.on('mousedown', this._showConnect, this).on('mouseup', this.hide, this);\n      } else if (trigger === 'mouseover') {\n        this._connSource.on('mouseover', this._showConnect, this).on('mouseout', this.hide, this);\n\n        this._connTarget.on('mouseover', this._showConnect, this).on('mouseout', this.hide, this);\n      } else {\n        this._showConnect();\n      }\n\n      if (!(this._connSource instanceof Geometry) || !(this._connTarget instanceof Geometry)) {\n        var map = this.getMap();\n\n        if (map) {\n          map.on('movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange', this._updateCoordinates, this);\n        }\n      }\n    };\n\n    return _class;\n  }(Base);\n};\n\nvar options$d = {\n  showOn: 'always'\n};\n\nvar ConnectorLine = function (_Connectable) {\n  _inheritsLoose(ConnectorLine, _Connectable);\n\n  function ConnectorLine(src, target, options) {\n    var _this;\n\n    _this = _Connectable.call(this, null, options) || this;\n\n    if (arguments.length === 1) {\n      options = src;\n      src = null;\n      target = null;\n    }\n\n    _this._connSource = src;\n    _this._connTarget = target;\n    return _this;\n  }\n\n  return ConnectorLine;\n}(Connectable(LineString));\n\nConnectorLine.mergeOptions(options$d);\nConnectorLine.registerJSONType('ConnectorLine');\n\nvar ArcConnectorLine = function (_Connectable2) {\n  _inheritsLoose(ArcConnectorLine, _Connectable2);\n\n  function ArcConnectorLine(src, target, options) {\n    var _this2;\n\n    _this2 = _Connectable2.call(this, null, options) || this;\n\n    if (arguments.length === 1) {\n      options = src;\n      src = null;\n      target = null;\n    }\n\n    _this2._connSource = src;\n    _this2._connTarget = target;\n    return _this2;\n  }\n\n  return ArcConnectorLine;\n}(Connectable(ArcCurve));\n\nArcConnectorLine.mergeOptions(options$d);\nArcConnectorLine.registerJSONType('ArcConnectorLine');\n\nvar options$e = {\n  'drawImmediate': false\n};\n\nvar OverlayLayer = function (_Layer) {\n  _inheritsLoose(OverlayLayer, _Layer);\n\n  function OverlayLayer(id, geometries, options) {\n    var _this;\n\n    if (geometries && !(geometries instanceof Geometry) && !Array.isArray(geometries) && GEOJSON_TYPES.indexOf(geometries.type) < 0) {\n      options = geometries;\n      geometries = null;\n    }\n\n    _this = _Layer.call(this, id, options) || this;\n    _this._maxZIndex = 0;\n    _this._minZIndex = 0;\n\n    _this._initCache();\n\n    if (geometries) {\n      _this.addGeometry(geometries);\n    }\n\n    var style = _this.options['style'];\n\n    if (style) {\n      _this.setStyle(style);\n    }\n\n    return _this;\n  }\n\n  var _proto = OverlayLayer.prototype;\n\n  _proto.getGeometryById = function getGeometryById(id) {\n    if (isNil(id) || id === '') {\n      return null;\n    }\n\n    if (!this._geoMap[id]) {\n      return null;\n    }\n\n    return this._geoMap[id];\n  };\n\n  _proto.getGeometries = function getGeometries(filter, context) {\n    if (!filter) {\n      return this._geoList.slice(0);\n    }\n\n    var result = [];\n    var geometry, filtered;\n\n    for (var i = 0, l = this._geoList.length; i < l; i++) {\n      geometry = this._geoList[i];\n\n      if (context) {\n        filtered = filter.call(context, geometry);\n      } else {\n        filtered = filter(geometry);\n      }\n\n      if (filtered) {\n        result.push(geometry);\n      }\n    }\n\n    return result;\n  };\n\n  _proto.getFirstGeometry = function getFirstGeometry() {\n    if (!this._geoList.length) {\n      return null;\n    }\n\n    return this._geoList[0];\n  };\n\n  _proto.getLastGeometry = function getLastGeometry() {\n    var len = this._geoList.length;\n\n    if (len === 0) {\n      return null;\n    }\n\n    return this._geoList[len - 1];\n  };\n\n  _proto.getCount = function getCount() {\n    return this._geoList.length;\n  };\n\n  _proto.getExtent = function getExtent() {\n    if (this.getCount() === 0) {\n      return null;\n    }\n\n    var extent = new Extent(this.getProjection());\n    this.forEach(function (g) {\n      extent._combine(g.getExtent());\n    });\n    return extent;\n  };\n\n  _proto.forEach = function forEach(fn, context) {\n    var copyOnWrite = this._geoList.slice(0);\n\n    for (var i = 0, l = copyOnWrite.length; i < l; i++) {\n      if (!context) {\n        fn(copyOnWrite[i], i);\n      } else {\n        fn.call(context, copyOnWrite[i], i);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.filter = function filter(fn, context) {\n    var selected = [];\n    var isFn = isFunction(fn);\n    var filter = isFn ? fn : createFilter(fn);\n    this.forEach(function (geometry) {\n      var g = isFn ? geometry : getFilterFeature(geometry);\n\n      if (context ? filter.call(context, g) : filter(g)) {\n        selected.push(geometry);\n      }\n    }, this);\n    return selected;\n  };\n\n  _proto.isEmpty = function isEmpty$$1() {\n    return !this._geoList.length;\n  };\n\n  _proto.addGeometry = function addGeometry(geometries, fitView) {\n    if (!geometries) {\n      return this;\n    }\n\n    if (geometries.type === 'FeatureCollection') {\n      return this.addGeometry(GeoJSON.toGeometry(geometries), fitView);\n    } else if (!Array.isArray(geometries)) {\n      var count = arguments.length;\n      var last = arguments[count - 1];\n      geometries = Array.prototype.slice.call(arguments, 0, count - 1);\n      fitView = last;\n\n      if (last && isObject(last) && ('type' in last || last instanceof Geometry)) {\n        geometries.push(last);\n        fitView = false;\n      }\n\n      return this.addGeometry(geometries, fitView);\n    } else if (geometries.length === 0) {\n      return this;\n    }\n\n    this._initCache();\n\n    var extent;\n\n    if (fitView) {\n      extent = new Extent();\n    }\n\n    this._toSort = this._maxZIndex > 0;\n    var geos = [];\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      var geo = geometries[i];\n\n      if (!geo) {\n        throw new Error('Invalid geometry to add to layer(' + this.getId() + ') at index:' + i);\n      }\n\n      if (!(geo instanceof Geometry)) {\n        geo = Geometry.fromJSON(geo);\n\n        if (Array.isArray(geo)) {\n          for (var ii = 0, ll = geo.length; ii < ll; ii++) {\n            this._add(geo[ii], extent, i);\n\n            geos.push(geo[ii]);\n          }\n        }\n      }\n\n      if (!Array.isArray(geo)) {\n        this._add(geo, extent, i);\n\n        geos.push(geo);\n      }\n    }\n\n    var map = this.getMap();\n\n    if (map) {\n      this._getRenderer().onGeometryAdd(geos);\n\n      if (extent && !isNil(extent.xmin)) {\n        var center = extent.getCenter();\n        var z = map.getFitZoom(extent);\n\n        if (isObject(fitView)) {\n          var step = isFunction(fitView.step) ? fitView.step : function () {\n            return undefined;\n          };\n          map.animateTo({\n            center: center,\n            zoom: z\n          }, extend({\n            duration: map.options.zoomAnimationDuration,\n            easing: 'out'\n          }, fitView), step);\n        } else if (fitView === true) {\n          map.setCenterAndZoom(center, z);\n        }\n      }\n    }\n\n    this.fire('addgeo', {\n      'geometries': geometries\n    });\n    return this;\n  };\n\n  _proto.getGeoMinZIndex = function getGeoMinZIndex() {\n    return this._minZIndex;\n  };\n\n  _proto.getGeoMaxZIndex = function getGeoMaxZIndex() {\n    return this._maxZIndex;\n  };\n\n  _proto._add = function _add(geo, extent, i) {\n    if (!this._toSort) {\n      this._toSort = geo.getZIndex() !== 0;\n    }\n\n    this._updateZIndex(geo.getZIndex());\n\n    var geoId = geo.getId();\n\n    if (!isNil(geoId)) {\n      if (!isNil(this._geoMap[geoId])) {\n        throw new Error('Duplicate geometry id in layer(' + this.getId() + '):' + geoId + ', at index:' + i);\n      }\n\n      this._geoMap[geoId] = geo;\n    }\n\n    var internalId = UID();\n\n    geo._setInternalId(internalId);\n\n    this._geoList.push(geo);\n\n    this.onAddGeometry(geo);\n\n    geo._bindLayer(this);\n\n    if (geo.onAdd) {\n      geo.onAdd();\n    }\n\n    if (extent) {\n      extent._combine(geo.getExtent());\n    }\n\n    geo._fireEvent('add', {\n      'layer': this\n    });\n\n    if (this._cookedStyles) {\n      this._styleGeometry(geo);\n    }\n  };\n\n  _proto.removeGeometry = function removeGeometry(geometries) {\n    if (!Array.isArray(geometries)) {\n      return this.removeGeometry([geometries]);\n    }\n\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      if (!(geometries[i] instanceof Geometry)) {\n        geometries[i] = this.getGeometryById(geometries[i]);\n      }\n\n      if (!geometries[i] || this !== geometries[i].getLayer()) continue;\n      geometries[i].remove();\n    }\n\n    this.fire('removegeo', {\n      'geometries': geometries\n    });\n    return this;\n  };\n\n  _proto.clear = function clear() {\n    this._clearing = true;\n    this.forEach(function (geo) {\n      geo.remove();\n    });\n    this._geoMap = {};\n    var old = this._geoList;\n    this._geoList = [];\n\n    var renderer = this._getRenderer();\n\n    if (renderer) {\n      renderer.onGeometryRemove(old);\n\n      if (renderer.clearImageData) {\n        renderer.clearImageData();\n      }\n    }\n\n    this._clearing = false;\n    this.fire('clear');\n    return this;\n  };\n\n  _proto.onRemoveGeometry = function onRemoveGeometry(geometry) {\n    if (!geometry || this._clearing) {\n      return;\n    }\n\n    if (this !== geometry.getLayer()) {\n      return;\n    }\n\n    var internalId = geometry._getInternalId();\n\n    if (isNil(internalId)) {\n      return;\n    }\n\n    var geoId = geometry.getId();\n\n    if (!isNil(geoId)) {\n      delete this._geoMap[geoId];\n    }\n\n    var idx = this._findInList(geometry);\n\n    if (idx >= 0) {\n      this._geoList.splice(idx, 1);\n    }\n\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryRemove([geometry]);\n    }\n  };\n\n  _proto.getStyle = function getStyle() {\n    if (!this.options['style']) {\n      return null;\n    }\n\n    return this.options['style'];\n  };\n\n  _proto.setStyle = function setStyle(style) {\n    this.options.style = style;\n    style = parseStyleRootPath(style);\n    this._cookedStyles = compileStyle(style);\n    this.forEach(function (geometry) {\n      this._styleGeometry(geometry);\n    }, this);\n    this.fire('setstyle', {\n      'style': style\n    });\n    return this;\n  };\n\n  _proto._styleGeometry = function _styleGeometry(geometry) {\n    if (!this._cookedStyles) {\n      return false;\n    }\n\n    var g = getFilterFeature(geometry);\n\n    for (var i = 0, len = this._cookedStyles.length; i < len; i++) {\n      if (this._cookedStyles[i]['filter'](g) === true) {\n        geometry._setExternSymbol(this._cookedStyles[i]['symbol']);\n\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.removeStyle = function removeStyle() {\n    if (!this.options.style) {\n      return this;\n    }\n\n    delete this.options.style;\n    delete this._cookedStyles;\n    this.forEach(function (geometry) {\n      geometry._setExternSymbol(null);\n    }, this);\n    this.fire('removestyle');\n    return this;\n  };\n\n  _proto.onAddGeometry = function onAddGeometry(geo) {\n    var style = this.getStyle();\n\n    if (style) {\n      this._styleGeometry(geo);\n    }\n  };\n\n  _proto.hide = function hide() {\n    for (var i = 0, l = this._geoList.length; i < l; i++) {\n      this._geoList[i].onHide();\n    }\n\n    return Layer.prototype.hide.call(this);\n  };\n\n  _proto._initCache = function _initCache() {\n    if (!this._geoList) {\n      this._geoList = [];\n      this._geoMap = {};\n    }\n  };\n\n  _proto._updateZIndex = function _updateZIndex() {\n    for (var _len = arguments.length, zIndex = new Array(_len), _key = 0; _key < _len; _key++) {\n      zIndex[_key] = arguments[_key];\n    }\n\n    this._maxZIndex = Math.max(this._maxZIndex, Math.max.apply(Math, zIndex));\n    this._minZIndex = Math.min(this._minZIndex, Math.min.apply(Math, zIndex));\n  };\n\n  _proto._sortGeometries = function _sortGeometries() {\n    var _this2 = this;\n\n    if (!this._toSort) {\n      return;\n    }\n\n    this._maxZIndex = 0;\n    this._minZIndex = 0;\n\n    this._geoList.sort(function (a, b) {\n      _this2._updateZIndex(a.getZIndex(), b.getZIndex());\n\n      return _this2._compare(a, b);\n    });\n\n    this._toSort = false;\n  };\n\n  _proto._compare = function _compare(a, b) {\n    if (a.getZIndex() === b.getZIndex()) {\n      return a._getInternalId() - b._getInternalId();\n    }\n\n    return a.getZIndex() - b.getZIndex();\n  };\n\n  _proto._findInList = function _findInList(geo) {\n    var len = this._geoList.length;\n\n    if (len === 0) {\n      return -1;\n    }\n\n    this._sortGeometries();\n\n    var low = 0,\n        high = len - 1,\n        middle;\n\n    while (low <= high) {\n      middle = Math.floor((low + high) / 2);\n\n      if (this._geoList[middle] === geo) {\n        return middle;\n      } else if (this._compare(this._geoList[middle], geo) > 0) {\n        high = middle - 1;\n      } else {\n        low = middle + 1;\n      }\n    }\n\n    return -1;\n  };\n\n  _proto._onGeometryEvent = function _onGeometryEvent(param) {\n    if (!param || !param['target']) {\n      return;\n    }\n\n    var type = param['type'];\n\n    if (type === 'idchange') {\n      this._onGeometryIdChange(param);\n    } else if (type === 'zindexchange') {\n      this._onGeometryZIndexChange(param);\n    } else if (type === 'positionchange') {\n      this._onGeometryPositionChange(param);\n    } else if (type === 'shapechange') {\n      this._onGeometryShapeChange(param);\n    } else if (type === 'symbolchange') {\n      this._onGeometrySymbolChange(param);\n    } else if (type === 'show') {\n      this._onGeometryShow(param);\n    } else if (type === 'hide') {\n      this._onGeometryHide(param);\n    } else if (type === 'propertieschange') {\n      this._onGeometryPropertiesChange(param);\n    }\n  };\n\n  _proto._onGeometryIdChange = function _onGeometryIdChange(param) {\n    if (param['new'] === param['old']) {\n      if (this._geoMap[param['old']] && this._geoMap[param['old']] === param['target']) {\n        return;\n      }\n    }\n\n    if (!isNil(param['new'])) {\n      if (this._geoMap[param['new']]) {\n        throw new Error('Duplicate geometry id in layer(' + this.getId() + '):' + param['new']);\n      }\n\n      this._geoMap[param['new']] = param['target'];\n    }\n\n    if (!isNil(param['old']) && param['new'] !== param['old']) {\n      delete this._geoMap[param['old']];\n    }\n  };\n\n  _proto._onGeometryZIndexChange = function _onGeometryZIndexChange(param) {\n    if (param['old'] !== param['new']) {\n      this._updateZIndex(param['new']);\n\n      this._toSort = true;\n\n      if (this._getRenderer()) {\n        this._getRenderer().onGeometryZIndexChange(param);\n      }\n    }\n  };\n\n  _proto._onGeometryPositionChange = function _onGeometryPositionChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryPositionChange(param);\n    }\n  };\n\n  _proto._onGeometryShapeChange = function _onGeometryShapeChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryShapeChange(param);\n    }\n  };\n\n  _proto._onGeometrySymbolChange = function _onGeometrySymbolChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometrySymbolChange(param);\n    }\n  };\n\n  _proto._onGeometryShow = function _onGeometryShow(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryShow(param);\n    }\n  };\n\n  _proto._onGeometryHide = function _onGeometryHide(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryHide(param);\n    }\n  };\n\n  _proto._onGeometryPropertiesChange = function _onGeometryPropertiesChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryPropertiesChange(param);\n    }\n  };\n\n  return OverlayLayer;\n}(Layer);\n\nOverlayLayer.mergeOptions(options$e);\n\nvar TEMP_EXTENT$5 = new PointExtent();\nvar options$f = {\n  'debug': false,\n  'enableSimplify': true,\n  'geometryEvents': true,\n  'defaultIconSize': [20, 20],\n  'cacheVectorOnCanvas': true,\n  'cacheSvgOnCanvas': Browser$1.gecko,\n  'enableAltitude': false,\n  'altitudeProperty': 'altitude',\n  'drawAltitude': false,\n  'sortByDistanceToCamera': false,\n  'roundPoint': false,\n  'altitude': 0,\n  'clipBBoxBufferSize': 3\n};\n\nvar VectorLayer = function (_OverlayLayer) {\n  _inheritsLoose(VectorLayer, _OverlayLayer);\n\n  function VectorLayer(id, geometries, options) {\n    return _OverlayLayer.call(this, id, geometries, options) || this;\n  }\n\n  var _proto = VectorLayer.prototype;\n\n  _proto.onConfig = function onConfig(conf) {\n    _OverlayLayer.prototype.onConfig.call(this, conf);\n\n    if (conf['enableAltitude'] || conf['drawAltitude'] || conf['altitudeProperty']) {\n      var renderer = this.getRenderer();\n\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n\n  _proto.identify = function identify(coordinate, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var renderer = this.getRenderer();\n\n    if (!(coordinate instanceof Coordinate)) {\n      coordinate = new Coordinate(coordinate);\n    }\n\n    var cp = this.getMap().coordToContainerPoint(coordinate);\n\n    if (options['onlyVisible'] && renderer && renderer.identifyAtPoint) {\n      return renderer.identifyAtPoint(cp, options);\n    }\n\n    return this._hitGeos(this._geoList, cp, options);\n  };\n\n  _proto.identifyAtPoint = function identifyAtPoint(point, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var renderer = this.getRenderer();\n\n    if (!(point instanceof Point)) {\n      point = new Point(point);\n    }\n\n    if (options['onlyVisible'] && renderer && renderer.identifyAtPoint) {\n      return renderer.identifyAtPoint(point, options);\n    }\n\n    return this._hitGeos(this._geoList, point, options);\n  };\n\n  _proto._hitGeos = function _hitGeos(geometries, cp, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var filter = options['filter'],\n        tolerance = options['tolerance'],\n        hits = [];\n    var map = this.getMap();\n    var renderer = this.getRenderer();\n    var imageData = renderer && renderer.getImageData && renderer.getImageData();\n\n    if (imageData) {\n      var r = map.getDevicePixelRatio();\n      imageData.r = r;\n      var x = Math.round(cp.x * r),\n          y = Math.round(cp.y * r);\n      var idx = y * imageData.width * 4 + x * 4;\n\n      if (imageData.data[idx + 3] === 0) {\n        return hits;\n      }\n    }\n\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      var geo = geometries[i];\n\n      if (!geo || !geo.isVisible() || !geo._getPainter() || !geo.options['interactive']) {\n        continue;\n      }\n\n      if (!(geo instanceof LineString) || !geo._getArrowStyle() && !(geo instanceof Curve)) {\n        var extent = geo.getContainerExtent(TEMP_EXTENT$5);\n\n        if (tolerance) {\n          extent = extent._expand(tolerance);\n        }\n\n        if (!extent || !extent.contains(cp)) {\n          continue;\n        }\n      }\n\n      if (geo._containsPoint(cp, tolerance) && (!filter || filter(geo))) {\n        hits.push(geo);\n\n        if (options['count']) {\n          if (hits.length >= options['count']) {\n            break;\n          }\n        }\n      }\n    }\n\n    return hits;\n  };\n\n  _proto.getAltitude = function getAltitude() {\n    return this.options['altitude'] || 0;\n  };\n\n  _proto.toJSON = function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'options': this.config()\n    };\n\n    if (isNil(options['geometries']) || options['geometries']) {\n      var clipExtent;\n\n      if (options['clipExtent']) {\n        var map = this.getMap();\n        var projection = map ? map.getProjection() : null;\n        clipExtent = new Extent(options['clipExtent'], projection);\n      }\n\n      var geoJSONs = [];\n      var geometries = this.getGeometries();\n\n      for (var i = 0, len = geometries.length; i < len; i++) {\n        var geo = geometries[i];\n        var geoExt = geo.getExtent();\n\n        if (!geoExt || clipExtent && !clipExtent.intersects(geoExt)) {\n          continue;\n        }\n\n        var json = geo.toJSON(options['geometries']);\n        geoJSONs.push(json);\n      }\n\n      profile['geometries'] = geoJSONs;\n    }\n\n    return profile;\n  };\n\n  VectorLayer.fromJSON = function fromJSON(json) {\n    if (!json || json['type'] !== 'VectorLayer') {\n      return null;\n    }\n\n    var layer = new VectorLayer(json['id'], json['options']);\n    var geoJSONs = json['geometries'];\n    var geometries = [];\n\n    for (var i = 0; i < geoJSONs.length; i++) {\n      var geo = Geometry.fromJSON(geoJSONs[i]);\n\n      if (geo) {\n        geometries.push(geo);\n      }\n    }\n\n    layer.addGeometry(geometries);\n    return layer;\n  };\n\n  VectorLayer.getPainterClass = function getPainterClass() {\n    return Painter;\n  };\n\n  VectorLayer.getCollectionPainterClass = function getCollectionPainterClass() {\n    return CollectionPainter;\n  };\n\n  return VectorLayer;\n}(OverlayLayer);\n\nVectorLayer.mergeOptions(options$f);\nVectorLayer.registerJSONType('VectorLayer');\n\nvar key = '_map_tool';\n\nvar MapTool = function (_Eventable) {\n  _inheritsLoose(MapTool, _Eventable);\n\n  function MapTool() {\n    return _Eventable.apply(this, arguments) || this;\n  }\n\n  var _proto = MapTool.prototype;\n\n  _proto.addTo = function addTo(map) {\n    if (!map) {\n      return this;\n    }\n\n    this._map = map;\n\n    if (map[key]) {\n      map[key].disable();\n    }\n\n    if (this.onAdd) {\n      this.onAdd();\n    }\n\n    this.enable();\n    map[key] = this;\n\n    this._fireEvent('add');\n\n    return this;\n  };\n\n  _proto.getMap = function getMap() {\n    return this._map;\n  };\n\n  _proto.enable = function enable() {\n    var map = this._map;\n\n    if (!map || this._enabled) {\n      return this;\n    }\n\n    this._enabled = true;\n\n    this._switchEvents('off');\n\n    this._registerEvents();\n\n    if (this.onEnable) {\n      this.onEnable();\n    }\n\n    this._fireEvent('enable');\n\n    return this;\n  };\n\n  _proto.disable = function disable() {\n    if (!this._enabled || !this._map) {\n      return this;\n    }\n\n    this._enabled = false;\n\n    this._switchEvents('off');\n\n    if (this.onDisable) {\n      this.onDisable();\n    }\n\n    this._fireEvent('disable');\n\n    return this;\n  };\n\n  _proto.isEnabled = function isEnabled() {\n    if (!this._enabled) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.remove = function remove() {\n    if (!this._map) {\n      return this;\n    }\n\n    this.disable();\n\n    if (this._map) {\n      delete this._map[key];\n      delete this._map;\n    }\n\n    this._fireEvent('remove');\n\n    return this;\n  };\n\n  _proto._registerEvents = function _registerEvents() {\n    this._switchEvents('on');\n  };\n\n  _proto._switchEvents = function _switchEvents(to) {\n    var events = this.getEvents();\n\n    if (events) {\n      this._map[to](events, this);\n    }\n  };\n\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (!param) {\n      param = {};\n    }\n\n    this.fire(eventName, param);\n  };\n\n  return MapTool;\n}(Eventable(Class));\n\nvar options$g = {\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'polygonFill': '#fff',\n    'polygonOpacity': 0.3\n  },\n  'doubleClickZoom': false,\n  'mode': null,\n  'once': false,\n  'autoPanAtEdge': false,\n  'ignoreMouseleave': true,\n  'blockGeometryEvents': false\n};\nvar registeredMode = {};\n\nvar DrawTool = function (_MapTool) {\n  _inheritsLoose(DrawTool, _MapTool);\n\n  DrawTool.registerMode = function registerMode(name, modeAction) {\n    registeredMode[name.toLowerCase()] = modeAction;\n  };\n\n  DrawTool.getRegisterMode = function getRegisterMode(name) {\n    return registeredMode[name.toLowerCase()];\n  };\n\n  function DrawTool(options) {\n    var _this;\n\n    _this = _MapTool.call(this, options) || this;\n\n    _this._checkMode();\n\n    _this._events = {\n      'click': _this._clickHandler,\n      'mousemove touchmove': _this._mouseMoveHandler,\n      'dblclick': _this._doubleClickHandler,\n      'mousedown touchstart': _this._mouseDownHandler,\n      'mouseup touchend': _this._mouseUpHandler,\n      'mousemove': _this._mouseMoveHandler,\n      'mousedown': _this._mouseDownHandler,\n      'mouseup': _this._mouseUpHandler\n    };\n    return _this;\n  }\n\n  var _proto = DrawTool.prototype;\n\n  _proto.getMode = function getMode() {\n    if (this.options['mode']) {\n      return this.options['mode'].toLowerCase();\n    }\n\n    return null;\n  };\n\n  _proto.setMode = function setMode(mode) {\n    if (this._geometry) {\n      this._geometry.remove();\n\n      delete this._geometry;\n    }\n\n    this._clearStage();\n\n    this._switchEvents('off');\n\n    this.options['mode'] = mode;\n\n    this._checkMode();\n\n    if (this.isEnabled()) {\n      this._switchEvents('on');\n\n      this._restoreMapCfg();\n\n      this._saveMapCfg();\n    }\n\n    return this;\n  };\n\n  _proto.getSymbol = function getSymbol() {\n    var symbol = this.options['symbol'];\n\n    if (symbol) {\n      return extendSymbol(symbol);\n    } else {\n      return extendSymbol(this.options['symbol']);\n    }\n  };\n\n  _proto.setSymbol = function setSymbol(symbol) {\n    if (!symbol) {\n      return this;\n    }\n\n    this.options['symbol'] = symbol;\n\n    if (this._geometry) {\n      this._geometry.setSymbol(symbol);\n    }\n\n    return this;\n  };\n\n  _proto.getCurrentGeometry = function getCurrentGeometry() {\n    return this._geometry;\n  };\n\n  _proto.onAdd = function onAdd() {\n    this._checkMode();\n  };\n\n  _proto.onEnable = function onEnable() {\n    this._saveMapCfg();\n\n    this._drawToolLayer = this._getDrawLayer();\n\n    this._clearStage();\n\n    this._loadResources();\n\n    var map = this.getMap();\n\n    if (this.options['autoPanAtEdge']) {\n      this._mapAutoPanAtEdge = map.options['autoPanAtEdge'];\n\n      if (!this._mapAutoPanAtEdge) {\n        map.config({\n          autoPanAtEdge: true\n        });\n      }\n    }\n\n    this._geometryEvents = map.options['geometryEvents'];\n\n    if (this.options['blockGeometryEvents']) {\n      map.config('geometryEvents', false);\n    }\n\n    return this;\n  };\n\n  _proto.onDisable = function onDisable() {\n    var map = this.getMap();\n\n    this._restoreMapCfg();\n\n    this.endDraw();\n\n    if (this._map) {\n      map.removeLayer(this._getDrawLayer());\n\n      if (this.options['autoPanAtEdge']) {\n        if (!this._mapAutoPanAtEdge) {\n          map.config({\n            autoPanAtEdge: false\n          });\n        }\n      }\n    }\n\n    if (this.options['blockGeometryEvents']) {\n      map.config('geometryEvents', this._geometryEvents);\n    }\n\n    return this;\n  };\n\n  _proto.undo = function undo() {\n    var registerMode = this._getRegisterMode();\n\n    var action = registerMode.action;\n\n    if (!this._shouldRecordHistory(action) || !this._historyPointer) {\n      return this;\n    }\n\n    var coords = this._clickCoords.slice(0, --this._historyPointer);\n\n    registerMode.update(this.getMap().getProjection(), coords, this._geometry);\n    return this;\n  };\n\n  _proto.redo = function redo() {\n    var registerMode = this._getRegisterMode();\n\n    var action = registerMode.action;\n\n    if (!this._shouldRecordHistory(action) || isNil(this._historyPointer) || this._historyPointer === this._clickCoords.length) {\n      return this;\n    }\n\n    var coords = this._clickCoords.slice(0, ++this._historyPointer);\n\n    registerMode.update(this.getMap().getProjection(), coords, this._geometry);\n    return this;\n  };\n\n  _proto._shouldRecordHistory = function _shouldRecordHistory(actions) {\n    return Array.isArray(actions) && actions[0] === 'click' && actions[1] === 'mousemove' && actions[2] === 'dblclick';\n  };\n\n  _proto._checkMode = function _checkMode() {\n    this._getRegisterMode();\n  };\n\n  _proto._saveMapCfg = function _saveMapCfg() {\n    var map = this.getMap();\n    this._mapDoubleClickZoom = map.options['doubleClickZoom'];\n    map.config({\n      'doubleClickZoom': this.options['doubleClickZoom']\n    });\n\n    var actions = this._getRegisterMode()['action'];\n\n    var dragging = false;\n\n    for (var i = 0; i < actions.length; i++) {\n      if (actions[i].indexOf('mousedown') >= 0 || actions[i].indexOf('touchstart') >= 0) {\n        dragging = true;\n        break;\n      }\n    }\n\n    if (dragging) {\n      var _map = this.getMap();\n\n      this._mapDraggable = _map.options['draggable'];\n\n      _map.config({\n        'draggable': false\n      });\n    }\n  };\n\n  _proto._restoreMapCfg = function _restoreMapCfg() {\n    var map = this.getMap();\n    map.config({\n      'doubleClickZoom': this._mapDoubleClickZoom\n    });\n\n    if (!isNil(this._mapDraggable)) {\n      map.config('draggable', this._mapDraggable);\n    }\n\n    delete this._mapDraggable;\n    delete this._mapDoubleClickZoom;\n  };\n\n  _proto._loadResources = function _loadResources() {\n    var symbol = this.getSymbol();\n    var resources = getExternalResources(symbol);\n\n    if (resources.length > 0) {\n      this._drawToolLayer._getRenderer().loadResources(resources);\n    }\n  };\n\n  _proto._getProjection = function _getProjection() {\n    return this._map.getProjection();\n  };\n\n  _proto._getRegisterMode = function _getRegisterMode() {\n    var mode = this.getMode();\n    var registerMode = DrawTool.getRegisterMode(mode);\n\n    if (!registerMode) {\n      throw new Error(mode + ' is not a valid mode of DrawTool.');\n    }\n\n    return registerMode;\n  };\n\n  _proto.getEvents = function getEvents() {\n    var action = this._getRegisterMode()['action'];\n\n    var _events = {};\n\n    if (Array.isArray(action)) {\n      for (var i = 0; i < action.length; i++) {\n        _events[action[i]] = this._events[action[i]];\n      }\n\n      return _events;\n    }\n\n    return null;\n  };\n\n  _proto._mouseDownHandler = function _mouseDownHandler(event) {\n    this._createGeometry(event);\n  };\n\n  _proto._mouseUpHandler = function _mouseUpHandler(event) {\n    this.endDraw(event);\n  };\n\n  _proto._clickHandler = function _clickHandler(event) {\n    var registerMode = this._getRegisterMode();\n\n    if (this._clickCoords && this._clickCoords.length) {\n      var len = this._clickCoords.length;\n\n      var prjCoord = this.getMap()._pointToPrj(event['point2d']);\n\n      if (this._clickCoords[len - 1].equals(prjCoord)) {\n        return;\n      }\n    }\n\n    if (!this._geometry) {\n      this._createGeometry(event);\n    } else {\n      var _prjCoord = this.getMap()._pointToPrj(event['point2d']);\n\n      if (!isNil(this._historyPointer)) {\n        this._clickCoords = this._clickCoords.slice(0, this._historyPointer);\n      }\n\n      this._clickCoords.push(_prjCoord);\n\n      this._historyPointer = this._clickCoords.length;\n      event.drawTool = this;\n      registerMode['update'](this.getMap().getProjection(), this._clickCoords, this._geometry, event);\n\n      if (this._clickCoords.length <= 1) {\n        this._fireEvent('drawstart', event);\n      } else {\n        this._fireEvent('drawvertex', event);\n      }\n\n      if (registerMode['clickLimit'] && registerMode['clickLimit'] === this._historyPointer) {\n        this.endDraw(event);\n      }\n    }\n  };\n\n  _proto._createGeometry = function _createGeometry(event) {\n    var mode = this.getMode();\n\n    var registerMode = this._getRegisterMode();\n\n    var prjCoord = this.getMap()._pointToPrj(event['point2d']);\n\n    var symbol = this.getSymbol();\n\n    if (!this._geometry) {\n      this._clickCoords = [prjCoord];\n      event.drawTool = this;\n      this._geometry = registerMode['create'](this.getMap().getProjection(), this._clickCoords, event);\n\n      if (symbol && mode !== 'point') {\n        this._geometry.setSymbol(symbol);\n      } else if (this.options.hasOwnProperty('symbol')) {\n        this._geometry.setSymbol(this.options['symbol']);\n      }\n\n      this._addGeometryToStage(this._geometry);\n\n      this._fireEvent('drawstart', event);\n    }\n\n    if (mode === 'point') {\n      this.endDraw(event);\n    }\n  };\n\n  _proto._mouseMoveHandler = function _mouseMoveHandler(event) {\n    var map = this.getMap();\n\n    if (!this._geometry || !map || map.isInteracting()) {\n      return;\n    }\n\n    var containerPoint = this._getMouseContainerPoint(event);\n\n    if (!this._isValidContainerPoint(containerPoint)) {\n      return;\n    }\n\n    var prjCoord = this.getMap()._pointToPrj(event['point2d']);\n\n    var projection = map.getProjection();\n    event.drawTool = this;\n\n    var registerMode = this._getRegisterMode();\n\n    if (this._shouldRecordHistory(registerMode.action)) {\n      var path = this._clickCoords.slice(0, this._historyPointer);\n\n      if (path && path.length > 0 && prjCoord.equals(path[path.length - 1])) {\n        return;\n      }\n\n      registerMode['update'](projection, path.concat([prjCoord]), this._geometry, event);\n    } else {\n      registerMode['update'](projection, prjCoord, this._geometry, event);\n    }\n\n    this._fireEvent('mousemove', event);\n  };\n\n  _proto._doubleClickHandler = function _doubleClickHandler(event) {\n    if (!this._geometry) {\n      return;\n    }\n\n    var containerPoint = this._getMouseContainerPoint(event);\n\n    if (!this._isValidContainerPoint(containerPoint)) {\n      return;\n    }\n\n    var registerMode = this._getRegisterMode();\n\n    var clickCoords = this._clickCoords;\n\n    if (clickCoords.length < 2) {\n      return;\n    }\n\n    var mode = this.getMode();\n\n    if (mode && mode.indexOf('polygon') > -1 && clickCoords.length < 3) {\n      return;\n    }\n\n    var projection = this.getMap().getProjection();\n    var path = [clickCoords[0]];\n\n    for (var i = 1, len = clickCoords.length; i < len; i++) {\n      if (clickCoords[i].x !== clickCoords[i - 1].x || clickCoords[i].y !== clickCoords[i - 1].y) {\n        path.push(clickCoords[i]);\n      }\n    }\n\n    if (path.length < 2 || this._geometry && this._geometry instanceof Polygon && path.length < 3) {\n      return;\n    }\n\n    event.drawTool = this;\n    registerMode['update'](projection, path, this._geometry, event);\n    this.endDraw(event);\n  };\n\n  _proto._addGeometryToStage = function _addGeometryToStage(geometry) {\n    var drawLayer = this._getDrawLayer();\n\n    drawLayer.addGeometry(geometry);\n  };\n\n  _proto.endDraw = function endDraw(param) {\n    if (!this._geometry || this._ending) {\n      return this;\n    }\n\n    this._ending = true;\n    var geometry = this._geometry;\n\n    this._clearStage();\n\n    param = param || {};\n    this._geometry = geometry;\n\n    this._fireEvent('drawend', param);\n\n    delete this._geometry;\n\n    if (this.options['once']) {\n      this.disable();\n    }\n\n    delete this._ending;\n    delete this._historyPointer;\n    return this;\n  };\n\n  _proto._clearStage = function _clearStage() {\n    this._getDrawLayer().clear();\n\n    delete this._geometry;\n    delete this._clickCoords;\n  };\n\n  _proto._getMouseContainerPoint = function _getMouseContainerPoint(event) {\n    var action = this._getRegisterMode()['action'];\n\n    if (action[0].indexOf('mousedown') >= 0 || action[0].indexOf('touchstart') >= 0) {\n      stopPropagation(event['domEvent']);\n    }\n\n    return event['containerPoint'];\n  };\n\n  _proto._isValidContainerPoint = function _isValidContainerPoint(containerPoint) {\n    var mapSize = this._map.getSize();\n\n    var w = mapSize['width'],\n        h = mapSize['height'];\n\n    if (containerPoint.x < 0 || containerPoint.y < 0) {\n      return false;\n    } else if (containerPoint.x > w || containerPoint.y > h) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto._getDrawLayer = function _getDrawLayer() {\n    var drawLayerId = INTERNAL_LAYER_PREFIX + 'drawtool';\n\n    var drawToolLayer = this._map.getLayer(drawLayerId);\n\n    if (!drawToolLayer) {\n      drawToolLayer = new VectorLayer(drawLayerId, {\n        'enableSimplify': false\n      });\n\n      this._map.addLayer(drawToolLayer);\n    }\n\n    return drawToolLayer;\n  };\n\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (!param) {\n      param = {};\n    }\n\n    if (this._geometry) {\n      param['geometry'] = this._getRegisterMode()['generate'](this._geometry, {\n        drawTool: this\n      });\n    }\n\n    MapTool.prototype._fireEvent.call(this, eventName, param);\n  };\n\n  return DrawTool;\n}(MapTool);\n\nDrawTool.mergeOptions(options$g);\n\nvar MapBoxZoomHander = function (_Handler) {\n  _inheritsLoose(MapBoxZoomHander, _Handler);\n\n  function MapBoxZoomHander(target) {\n    var _this;\n\n    _this = _Handler.call(this, target) || this;\n    _this.drawTool = new DrawTool({\n      'mode': 'boxZoom',\n      'ignoreMouseleave': false\n    });\n    return _this;\n  }\n\n  var _proto = MapBoxZoomHander.prototype;\n\n  _proto.addHooks = function addHooks() {\n    this.target.on('_mousedown', this._onMouseDown, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    this.target.off('_mousedown', this._onMouseDown, this);\n\n    if (this.drawTool.isEnabled()) {\n      this.drawTool.remove();\n    }\n  };\n\n  _proto._onMouseDown = function _onMouseDown(param) {\n    if (!this.target.options['boxZoom']) {\n      return;\n    }\n\n    if (param.domEvent.shiftKey) {\n      this.drawTool.setSymbol(this.target.options['boxZoomSymbol']).on('drawend', this._boxZoom, this).addTo(this.target);\n    }\n  };\n\n  _proto._boxZoom = function _boxZoom(param) {\n    var map = this.target;\n    this.drawTool.remove();\n    var geometry = param.geometry,\n        center = geometry.getCenter(),\n        symbol = geometry.getSymbol(),\n        w = symbol.markerWidth,\n        h = symbol.markerHeight;\n    var extent = new Extent(center, map.locateByPoint(center, w, h), map.getProjection());\n    var zoom = map.getFitZoom(extent);\n\n    map._animateTo({\n      center: extent.getCenter(),\n      zoom: zoom\n    });\n  };\n\n  return MapBoxZoomHander;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'boxZoom': true,\n  'boxZoomSymbol': {\n    'markerType': 'rectangle',\n    'markerLineWidth': 3,\n    'markerLineColor': '#1bbc9b',\n    'markerLineDasharray': [10, 5],\n    'markerFillOpacity': 0.1,\n    'markerFill': '#1bbc9b',\n    'markerWidth': 1,\n    'markerHeight': 1\n  }\n});\nMap$1.addOnLoadHook('addHandler', 'boxZoom', MapBoxZoomHander);\n\nvar PANOFFSET = 30;\n\nvar MapAutoPanAtEdgeHandler = function (_Handler) {\n  _inheritsLoose(MapAutoPanAtEdgeHandler, _Handler);\n\n  function MapAutoPanAtEdgeHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapAutoPanAtEdgeHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    if (!this.target) {\n      return;\n    }\n\n    this.target.on('_mousemove', this._onMouseMove, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    if (!this.target) {\n      return;\n    }\n\n    this.target.off('_mousemove', this._onMouseMove, this);\n  };\n\n  _proto._onMouseMove = function _onMouseMove(event) {\n    var map = this.target;\n\n    if (map.options['autoPanAtEdge']) {\n      var containerPoint = event.containerPoint;\n      var containerExtent = map.getContainerExtent();\n\n      if (containerExtent) {\n        var x = containerPoint.x,\n            y = containerPoint.y;\n        var xmax = containerExtent.xmax,\n            ymax = containerExtent.ymax;\n        var p;\n\n        if (x < PANOFFSET) {\n          p = [Math.abs(x - PANOFFSET), 0];\n        }\n\n        if (y < PANOFFSET) {\n          p = [0, Math.abs(y - PANOFFSET)];\n        }\n\n        if (x + PANOFFSET > xmax) {\n          p = [-Math.abs(x + PANOFFSET - xmax), 0];\n        }\n\n        if (y + PANOFFSET > ymax) {\n          p = [0, -Math.abs(y + PANOFFSET - ymax)];\n        }\n\n        if (p) {\n          map.panBy(p, {\n            duration: 1\n          });\n        }\n      }\n    }\n  };\n\n  return MapAutoPanAtEdgeHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'autoPanAtEdge': false\n});\nMap$1.addOnLoadHook('addHandler', 'autoPanAtEdge', MapAutoPanAtEdgeHandler);\n\nMap$1.include({\n  animateTo: function animateTo(view, options, step) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n\n    var projection = this.getProjection(),\n        currView = this.getView(),\n        props = {};\n    var empty = true;\n\n    for (var p in view) {\n      if (hasOwn(view, p) && !isNil(view[p]) && (p === 'prjCenter' || !isNil(currView[p]))) {\n        empty = false;\n\n        if (p === 'center') {\n          var from = new Coordinate(currView[p]).toFixed(7),\n              to = new Coordinate(view[p]).toFixed(7);\n\n          if (!from.equals(to)) {\n            props['center'] = [from, to];\n          }\n        } else if (p === 'prjCenter') {\n          var _from = new Coordinate(this._getPrjCenter());\n\n          var _to = new Coordinate(view[p]);\n\n          if (!_from.equals(_to)) {\n            props['prjCenter'] = [_from, _to];\n          }\n        } else if (currView[p] !== view[p] && p !== 'around') {\n          props[p] = [currView[p], view[p]];\n        }\n      }\n    }\n\n    if (empty) {\n      return null;\n    }\n\n    if (this._animPlayer) {\n      if (this._isInternalAnimation) {\n        if (this._animPlayer.playState === 'running') {\n          this._animPlayer.pause();\n\n          this._prevAnimPlayer = this._animPlayer;\n        }\n      } else {\n        delete this._prevAnimPlayer;\n\n        this._stopAnim(this._animPlayer);\n      }\n    }\n\n    var zoomOrigin = view['around'] || new Point(this.width / 2, this.height / 2);\n\n    var renderer = this._getRenderer(),\n        framer = function framer(fn) {\n      renderer.callInNextFrame(fn);\n    };\n\n    var player = this._animPlayer = Animation.animate(props, {\n      'easing': options['easing'] || 'out',\n      'duration': options['duration'] || this.options['zoomAnimationDuration'],\n      'framer': framer\n    }, function (frame) {\n      if (_this.isRemoved()) {\n        player.finish();\n        return;\n      }\n\n      if (player.playState === 'running') {\n        if (frame.styles['center']) {\n          var center = frame.styles['center'];\n\n          _this._setPrjCenter(projection.project(center));\n\n          _this.onMoving(_this._parseEventFromCoord(_this.getCenter()));\n        } else if (frame.styles['prjCenter']) {\n          var _center = frame.styles['prjCenter'];\n\n          _this._setPrjCenter(_center);\n\n          _this.onMoving(_this._parseEventFromCoord(_this.getCenter()));\n        }\n\n        if (!isNil(frame.styles['zoom'])) {\n          _this.onZooming(frame.styles['zoom'], zoomOrigin);\n        }\n\n        if (!isNil(frame.styles['pitch'])) {\n          _this._setPitch(frame.styles['pitch']);\n        }\n\n        if (!isNil(frame.styles['bearing'])) {\n          _this._setBearing(frame.styles['bearing']);\n        }\n\n        _this._fireEvent('animating');\n      } else if (player.playState !== 'paused' || player === _this._mapAnimPlayer) {\n        if (!player._interupted) {\n          if (props['center']) {\n            _this._setPrjCenter(projection.project(props['center'][1]));\n          } else if (props['prjCenter']) {\n            _this._setPrjCenter(props['prjCenter'][1]);\n          }\n\n          if (!isNil(props['pitch'])) {\n            _this._setPitch(props['pitch'][1]);\n          }\n\n          if (!isNil(props['bearing'])) {\n            _this._setBearing(props['bearing'][1]);\n          }\n        }\n\n        _this._endAnim(player, props, zoomOrigin, options);\n      }\n\n      if (step) {\n        step(frame);\n      }\n    }, this);\n\n    this._startAnim(props, zoomOrigin);\n\n    return player;\n  },\n  _animateTo: function _animateTo(view, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n\n    this._isInternalAnimation = true;\n    this._mapAnimPlayer = this.animateTo(view, options, step);\n    delete this._isInternalAnimation;\n    return this._mapAnimPlayer;\n  },\n  flyTo: function flyTo(view, options, step) {\n    var _this2 = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this._animPlayer) {\n      if (this._isInternalAnimation) {\n        if (this._animPlayer.playState === 'running') {\n          this._animPlayer.pause();\n\n          this._prevAnimPlayer = this._animPlayer;\n        }\n      } else {\n        delete this._prevAnimPlayer;\n\n        this._stopAnim(this._animPlayer);\n      }\n    }\n\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n\n    options = extend({\n      curve: 1.42\n    }, options);\n    var map = this;\n\n    function zoomScale(z0, z1) {\n      return map.getResolution(z1) / map.getResolution(z0);\n    }\n\n    var zoomOrigin = view['around'] || new Point(this.width / 2, this.height / 2);\n    var minZoom = this.getMinZoom();\n    var maxZoom = this.getMaxZoom();\n    var projection = this.getProjection();\n    var currView = this.getView();\n    var startZoom = currView.zoom;\n    var startBearing = currView.bearing;\n    var startPitch = currView.pitch;\n    var zoom = 'zoom' in view ? clamp(+view.zoom, minZoom, maxZoom) : startZoom;\n    var bearing = 'bearing' in view ? +view.bearing : startBearing;\n    var pitch = 'pitch' in view ? +view.pitch : startPitch;\n    var center = projection.project(view.center && new Coordinate(view.center) || this.getCenter());\n    var scale = zoomScale(zoom, startZoom);\n    var from = projection.project(this.getCenter());\n    var delta = center.sub(from);\n    var rho = options.curve;\n    var w0 = Math.max(this.width, this.height),\n        w1 = w0 / scale,\n        u1 = delta.mag();\n\n    if ('minZoom' in options) {\n      var animMinZoom = clamp(Math.min(options.minZoom, startZoom, zoom), minZoom, maxZoom);\n      var wMax = w0 / zoomScale(animMinZoom, startZoom);\n      rho = Math.sqrt(wMax / u1 * 2);\n    }\n\n    var rho2 = rho * rho;\n\n    function r(i) {\n      var b = (w1 * w1 - w0 * w0 + (i ? -1 : 1) * rho2 * rho2 * u1 * u1) / (2 * (i ? w1 : w0) * rho2 * u1);\n      return Math.log(Math.sqrt(b * b + 1) - b);\n    }\n\n    function sinh(n) {\n      return (Math.exp(n) - Math.exp(-n)) / 2;\n    }\n\n    function cosh(n) {\n      return (Math.exp(n) + Math.exp(-n)) / 2;\n    }\n\n    function tanh(n) {\n      return sinh(n) / cosh(n);\n    }\n\n    var r0 = r(0);\n\n    var w = function w(s) {\n      return cosh(r0) / cosh(r0 + rho * s);\n    };\n\n    var u = function u(s) {\n      return w0 * ((cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2) / u1;\n    };\n\n    var S = (r(1) - r0) / rho;\n\n    if (Math.abs(u1) < 0.000001 || !isFinite(S)) {\n      if (Math.abs(w0 - w1) < 0.000001) return this.animateTo(view, options, step);\n      var k = w1 < w0 ? -1 : 1;\n      S = Math.abs(Math.log(w1 / w0)) / rho;\n\n      u = function u() {\n        return 0;\n      };\n\n      w = function w(s) {\n        return Math.exp(k * rho * s);\n      };\n    }\n\n    var renderer = this._getRenderer();\n\n    var framer = function framer(fn) {\n      renderer.callInNextFrame(fn);\n    };\n\n    var player = this._animPlayer = Animation.animate({\n      k: [0, 1]\n    }, {\n      'easing': options['easing'] || 'out',\n      'duration': options['duration'] || 8,\n      'framer': framer\n    }, function (frame) {\n      if (_this2.isRemoved()) {\n        player.finish();\n        return;\n      }\n\n      var k = frame.styles.k;\n      var s = k * S;\n      var scale = 1 / w(s);\n      var props = {};\n\n      if (view.center) {\n        var newCenter = k === 1 ? center : from.add(delta.multi(u(s)));\n        props.prjCenter = [center, newCenter];\n      }\n\n      if (startZoom !== zoom) {\n        var newZoom = k === 1 ? zoom : _this2.getZoomForScale(scale, startZoom, true);\n        props.zoom = [startZoom, newZoom];\n      }\n\n      if (startPitch !== pitch) {\n        var newPitch = interpolate$2(startPitch, pitch, k);\n        props.pitch = [pitch, newPitch];\n      }\n\n      if (startBearing !== bearing) {\n        var newBearing = interpolate$2(startBearing, bearing, k);\n        props.bearing = [bearing, newBearing];\n      }\n\n      if (player.playState === 'running') {\n        if (props['prjCenter']) {\n          var _center2 = props['prjCenter'];\n\n          _this2._setPrjCenter(_center2[1]);\n\n          _this2.onMoving(_this2._parseEventFromCoord(_this2.getCenter()));\n        }\n\n        if (props['zoom']) {\n          _this2.onZooming(props['zoom'][1], zoomOrigin);\n        }\n\n        if (props['pitch']) {\n          _this2._setPitch(props['pitch'][1]);\n        }\n\n        if (props['bearing']) {\n          _this2._setBearing(props['bearing'][1]);\n        }\n\n        _this2._fireEvent('animating');\n      } else if (player.playState !== 'paused' || player === _this2._mapAnimPlayer) {\n        if (!player._interupted) {\n          if (props['prjCenter']) {\n            _this2._setPrjCenter(props['prjCenter'][1]);\n          }\n\n          if (props['pitch']) {\n            _this2._setPitch(props['pitch'][1]);\n          }\n\n          if (props['bearing']) {\n            _this2._setBearing(props['bearing'][1]);\n          }\n        }\n\n        _this2._endAnim(player, props, zoomOrigin, options);\n      }\n\n      if (step) {\n        step(frame);\n      }\n    });\n\n    this._startAnim({\n      center: view.center,\n      zoom: view.zoom !== startZoom,\n      pitch: pitch !== startPitch,\n      bearing: bearing !== startBearing\n    }, zoomOrigin);\n\n    return this;\n  },\n  isAnimating: function isAnimating() {\n    return !!this._animPlayer;\n  },\n  isRotating: function isRotating() {\n    return this.isDragRotating() || !!this._animRotating;\n  },\n  _endAnim: function _endAnim(player, props, zoomOrigin, options) {\n    delete this._animRotating;\n    var evtType = player._interupted ? 'animateinterrupted' : 'animateend';\n\n    if (player === this._animPlayer) {\n      delete this._animPlayer;\n    }\n\n    if (player === this._mapAnimPlayer) {\n      delete this._mapAnimPlayer;\n    }\n\n    if (props['center']) {\n      var endCoord;\n\n      if (player._interupted) {\n        endCoord = this.getCenter();\n      } else {\n        endCoord = props['center'][1];\n      }\n\n      this.onMoveEnd(this._parseEventFromCoord(endCoord));\n    } else if (props['prjCenter']) {\n      var _endCoord;\n\n      if (player._interupted) {\n        _endCoord = this._getPrjCenter();\n      } else {\n        _endCoord = props['prjCenter'][1];\n      }\n\n      var event = this._parseEventFromCoord(this.getProjection().unproject(_endCoord));\n\n      event['point2d'] = this._prjToPoint(_endCoord);\n      this.onMoveEnd(event);\n    }\n\n    if (!isNil(props['zoom'])) {\n      if (player._interupted) {\n        this.onZoomEnd(this.getZoom(), zoomOrigin);\n      } else if (!options['wheelZoom']) {\n        this.onZoomEnd(props['zoom'][1], zoomOrigin);\n      } else {\n        this.onZooming(props['zoom'][1], zoomOrigin);\n      }\n    }\n\n    if (evtType) {\n      this._fireEvent(evtType);\n    }\n\n    if (!isNil(props['pitch']) && !this.getPitch()) {\n      this.getRenderer().setToRedraw();\n    }\n\n    if (!options['wheelZoom']) {\n      this._resumePrev(player);\n    }\n  },\n  _startAnim: function _startAnim(props, zoomOrigin) {\n    if (!this._animPlayer) {\n      return;\n    }\n\n    if (props['center']) {\n      this.onMoveStart();\n    }\n\n    if (props['zoom'] && !this.isZooming()) {\n      this.onZoomStart(props['zoom'][1], zoomOrigin);\n    }\n\n    if (props['pitch'] || props['bearing']) {\n      this._animRotating = true;\n    }\n\n    this._fireEvent('animatestart');\n\n    this._animPlayer.play();\n  },\n  _stopAnim: function _stopAnim(player) {\n    if (!player) {\n      return;\n    }\n\n    delete this._animRotating;\n\n    if (player.playState !== 'finished') {\n      player._interupted = true;\n      player.cancel();\n    }\n\n    if (player === this._animPlayer) {\n      delete this._animPlayer;\n    }\n\n    if (player === this._mapAnimPlayer) {\n      delete this._mapAnimPlayer;\n    }\n  },\n  _resumePrev: function _resumePrev(player) {\n    if (!this._prevAnimPlayer) {\n      return;\n    }\n\n    var prevPlayer = this._prevAnimPlayer;\n\n    if (prevPlayer.playState !== 'paused') {\n      delete this._prevAnimPlayer;\n    }\n\n    if (player !== prevPlayer) {\n      this._animPlayer = prevPlayer;\n      prevPlayer.play();\n    }\n  }\n});\n\nfunction interpolate$2(a, b, t) {\n  return a * (1 - t) + b * t;\n}\n\nvar events = 'mousedown ' + 'mouseup ' + 'mouseover ' + 'mouseout ' + 'mouseenter ' + 'mouseleave ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'keypress ' + 'touchstart ' + 'touchmove ' + 'touchend ';\nvar CLICK_TIME_THRESHOLD = 300;\nMap$1.include({\n  _registerDomEvents: function _registerDomEvents() {\n    var dom = this._panels.mapWrapper || this._containerDOM;\n    addDomEvent(dom, events, this._handleDOMEvent, this);\n  },\n  _removeDomEvents: function _removeDomEvents() {\n    var dom = this._panels.mapWrapper || this._containerDOM;\n    removeDomEvent(dom, events, this._handleDOMEvent, this);\n  },\n  _handleDOMEvent: function _handleDOMEvent(e) {\n    var type = e.type;\n    var isMouseDown = type === 'mousedown' || type === 'touchstart' && (!e.touches || e.touches.length === 1);\n\n    if (isMouseDown) {\n      this._domMouseDownTime = now();\n      this._domMouseDownView = this.getView();\n    }\n\n    var isRotating = type === 'contextmenu' && isRotatingMap(this);\n\n    if (type === 'contextmenu') {\n      preventDefault(e);\n      var downTime = this._domMouseDownTime;\n      var time = now();\n\n      if (time - downTime <= CLICK_TIME_THRESHOLD && !isRotating) {\n        this._fireDOMEvent(this, e, 'dom:' + e.type);\n      }\n    } else {\n      this._fireDOMEvent(this, e, 'dom:' + e.type);\n    }\n\n    if (this._ignoreEvent(e)) {\n      return;\n    }\n\n    var mimicClick = false;\n\n    if (isMouseDown) {\n      this._mouseDownTime = now();\n    } else if (type === 'click' || type === 'touchend' || type === 'contextmenu') {\n      if (!this._mouseDownTime) {\n        return;\n      } else {\n        var _downTime = this._mouseDownTime;\n        delete this._mouseDownTime;\n\n        var _time = now();\n\n        if (_time - _downTime > CLICK_TIME_THRESHOLD) {\n          if (type === 'click' || type === 'contextmenu') {\n            return;\n          }\n        } else if (type === 'contextmenu') {\n          if (isRotating) {\n            return;\n          }\n        } else if (type === 'touchend') {\n          mimicClick = true;\n        }\n      }\n    }\n\n    var mimicEvent;\n\n    if (mimicClick) {\n      if (this._clickTime && now() - this._clickTime <= CLICK_TIME_THRESHOLD) {\n        delete this._clickTime;\n        mimicEvent = 'dblclick';\n\n        this._fireDOMEvent(this, e, 'dom:dblclick');\n      } else {\n        this._clickTime = now();\n        mimicEvent = 'click';\n\n        this._fireDOMEvent(this, e, 'dom:click');\n      }\n    }\n\n    if (this._ignoreEvent(e)) {\n      return;\n    }\n\n    this._fireDOMEvent(this, e, type);\n\n    if (mimicEvent) {\n      this._fireDOMEvent(this, e, mimicEvent);\n    }\n  },\n  _ignoreEvent: function _ignoreEvent(domEvent) {\n    if (!domEvent || !this._panels.control) {\n      return false;\n    }\n\n    if (this._isEventOutMap(domEvent)) {\n      return true;\n    }\n\n    var target = domEvent.srcElement || domEvent.target;\n    var preTarget;\n\n    if (target) {\n      while (target && target !== this._containerDOM) {\n        if (target.className && target.className.indexOf && (target.className.indexOf('maptalks-control') >= 0 || target.className.indexOf('maptalks-ui') >= 0 && preTarget && !preTarget['eventsPropagation'])) {\n          return true;\n        }\n\n        preTarget = target;\n        target = target.parentNode;\n      }\n    }\n\n    return false;\n  },\n  _isEventOutMap: function _isEventOutMap(domEvent) {\n    if (this.getPitch() > this.options['maxVisualPitch']) {\n      var actualEvent = this._getActualEvent(domEvent);\n\n      var eventPos = getEventContainerPoint(actualEvent, this._containerDOM);\n\n      if (!this.getContainerExtent().contains(eventPos)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _parseEvent: function _parseEvent(e, type) {\n    if (!e) {\n      return null;\n    }\n\n    var eventParam = {\n      'domEvent': e\n    };\n\n    if (type !== 'keypress') {\n      var actual = this._getActualEvent(e);\n\n      if (actual) {\n        var containerPoint = getEventContainerPoint(actual, this._containerDOM);\n        eventParam = extend(eventParam, {\n          'containerPoint': containerPoint,\n          'viewPoint': this.containerPointToViewPoint(containerPoint)\n        });\n        var maxVisualPitch = this.options['maxVisualPitch'];\n\n        if (this.getPitch() <= maxVisualPitch || containerPoint.y >= this.height - this._getVisualHeight(maxVisualPitch)) {\n          eventParam = extend(eventParam, {\n            'coordinate': this.containerPointToCoord(containerPoint),\n            'point2d': this._containerPointToPoint(containerPoint)\n          });\n        }\n      }\n    }\n\n    return eventParam;\n  },\n  _parseEventFromCoord: function _parseEventFromCoord(coord) {\n    var containerPoint = this.coordToContainerPoint(coord),\n        viewPoint = this.containerPointToViewPoint(containerPoint);\n    var e = {\n      'coordinate': coord,\n      'containerPoint': containerPoint,\n      'viewPoint': viewPoint,\n      'point2d': this.coordToPoint(coord)\n    };\n    return e;\n  },\n  _getActualEvent: function _getActualEvent(e) {\n    return e.touches && e.touches.length > 0 ? e.touches[0] : e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e;\n  },\n  _fireDOMEvent: function _fireDOMEvent(target, e, type) {\n    if (this.isRemoved()) {\n      return;\n    }\n\n    var eventParam = this._parseEvent(e, type);\n\n    this._fireEvent(type, eventParam);\n  }\n});\nMap$1.addOnLoadHook('_registerDomEvents');\n\nfunction isRotatingMap(map) {\n  if (!map._domMouseDownView) {\n    return true;\n  }\n\n  var view = map.getView(),\n      mouseDownView = map._domMouseDownView;\n  return view.bearing !== mouseDownView.bearing || view.pitch !== mouseDownView.pitch;\n}\n\nMap$1.include({\n  isFullScreen: function isFullScreen() {\n    return !!(document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement || document.fullscreenElement);\n  },\n  requestFullScreen: function requestFullScreen(dom) {\n    this._fireEvent('fullscreenstart');\n\n    this._requestFullScreen(dom || this._containerDOM);\n\n    this._fireEvent('fullscreenend');\n\n    return this;\n  },\n  cancelFullScreen: function cancelFullScreen() {\n    this._cancelFullScreen();\n\n    this._fireEvent('cancelfullscreen');\n\n    return this;\n  },\n  _requestFullScreen: function _requestFullScreen(dom) {\n    if (dom.requestFullscreen) {\n      dom.requestFullscreen();\n    } else if (dom.mozRequestFullScreen) {\n      dom.mozRequestFullScreen();\n    } else if (dom.webkitRequestFullScreen) {\n      dom.webkitRequestFullScreen();\n    } else if (dom.msRequestFullScreen) {\n      dom.msRequestFullScreen();\n    } else {\n      var features = 'fullscreen=1,status=no,resizable=yes,top=0,left=0,scrollbars=no,' + 'titlebar=no,menubar=no,location=no,toolbar=no,z-look=yes,' + 'width=' + (screen.availWidth - 8) + ',height=' + (screen.availHeight - 45);\n      var newWin = window.open(location.href, '_blank', features);\n\n      if (newWin !== null) {\n        window.opener = null;\n        window.close();\n      }\n    }\n  },\n  _cancelFullScreen: function _cancelFullScreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitCancelFullScreen) {\n      document.webkitCancelFullScreen();\n    } else {\n      var features = 'fullscreen=no,status=yes,resizable=yes,scrollbars=no,' + 'titlebar=no,menubar=yes,location=yes,toolbar=yes,z-look=yes';\n      var newWin = window.open(location.href, '_blank', features);\n\n      if (newWin !== null) {\n        window.opener = null;\n        window.close();\n      }\n    }\n  }\n});\n\nMap$1.include({\n  panTo: function panTo(coordinate, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!coordinate) {\n      return this;\n    }\n\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n\n    coordinate = new Coordinate(coordinate);\n\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      var prjCoord = this.getProjection().project(coordinate);\n      return this._panAnimation(prjCoord, options['duration'], step);\n    } else {\n      this.setCenter(coordinate);\n    }\n\n    return this;\n  },\n  _panTo: function _panTo(prjCoord, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      return this._panAnimation(prjCoord, options['duration']);\n    } else {\n      this.onMoveStart();\n\n      this._setPrjCenter(prjCoord);\n\n      this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n      return this;\n    }\n  },\n  panBy: function panBy(offset, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!offset) {\n      return this;\n    }\n\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n\n    offset = new Point(offset);\n    var containerExtent = this.getContainerExtent();\n    var ymin = containerExtent.ymin;\n\n    if (ymin > 0 && offset.y > 30) {\n      var y = offset.y;\n      offset.y = 30;\n      offset.x = offset.x * 30 / y;\n      console.warn('offset is limited to panBy when pitch is above maxPitch');\n    }\n\n    this.onMoveStart();\n\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      offset = offset.multi(-1);\n\n      var target = this._containerPointToPrj(new Point(this.width / 2 + offset.x, this.height / 2 + offset.y));\n\n      this._panAnimation(target, options['duration'], step);\n    } else {\n      this._offsetCenterByPixel(offset);\n\n      this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n    }\n\n    return this;\n  },\n  _panAnimation: function _panAnimation(target, t, cb) {\n    return this._animateTo({\n      'prjCenter': target\n    }, {\n      'duration': t || this.options['panAnimationDuration']\n    }, cb);\n  }\n});\n\nGeometry.fromJSON = function (json) {\n  if (Array.isArray(json)) {\n    var result = [];\n\n    for (var i = 0, len = json.length; i < len; i++) {\n      var c = Geometry.fromJSON(json[i]);\n\n      if (Array.isArray(json)) {\n        result = result.concat(c);\n      } else {\n        result.push(c);\n      }\n    }\n\n    return result;\n  }\n\n  if (json && !json['feature']) {\n    return GeoJSON.toGeometry(json);\n  }\n\n  var geometry;\n\n  if (json['subType']) {\n    geometry = Geometry.getJSONClass(json['subType']).fromJSON(json);\n\n    if (!isNil(json['feature']['id'])) {\n      geometry.setId(json['feature']['id']);\n    }\n  } else {\n    geometry = GeoJSON.toGeometry(json['feature']);\n\n    if (json['options']) {\n      geometry.config(json['options']);\n    }\n  }\n\n  if (json['symbol']) {\n    geometry.setSymbol(json['symbol']);\n  }\n\n  if (json['infoWindow']) {\n    geometry.setInfoWindow(json['infoWindow']);\n  }\n\n  return geometry;\n};\n\nLayer.fromJSON = function (layerJSON) {\n  if (!layerJSON) {\n    return null;\n  }\n\n  var layerType = layerJSON['type'];\n  var clazz = Layer.getJSONClass(layerType);\n\n  if (!clazz || !clazz.fromJSON) {\n    throw new Error('unsupported layer type:' + layerType);\n  }\n\n  return clazz.fromJSON(layerJSON);\n};\n\nMap$1.include({\n  'JSON_VERSION': '1.0',\n  toJSON: function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var json = {\n      'jsonVersion': this['JSON_VERSION'],\n      'version': this.VERSION,\n      'extent': this.getExtent().toJSON()\n    };\n    json['options'] = this.config();\n    json['options']['center'] = this.getCenter();\n    json['options']['zoom'] = this.getZoom();\n    json['options']['bearing'] = this.getBearing();\n    json['options']['pitch'] = this.getPitch();\n    var baseLayer = this.getBaseLayer();\n\n    if ((isNil(options['baseLayer']) || options['baseLayer']) && baseLayer) {\n      json['baseLayer'] = baseLayer.toJSON(options['baseLayer']);\n    }\n\n    var extraLayerOptions = {};\n\n    if (options['clipExtent']) {\n      if (options['clipExtent'] === true) {\n        extraLayerOptions['clipExtent'] = this.getExtent();\n      } else {\n        extraLayerOptions['clipExtent'] = options['clipExtent'];\n      }\n    }\n\n    var layersJSON = [];\n\n    if (isNil(options['layers']) || options['layers'] && !Array.isArray(options['layers'])) {\n      var layers = this.getLayers();\n\n      for (var i = 0, len = layers.length; i < len; i++) {\n        if (!layers[i].toJSON) {\n          continue;\n        }\n\n        var opts = extend({}, isObject(options['layers']) ? options['layers'] : {}, extraLayerOptions);\n        layersJSON.push(layers[i].toJSON(opts));\n      }\n\n      json['layers'] = layersJSON;\n    } else if (isArrayHasData(options['layers'])) {\n      var _layers = options['layers'];\n\n      for (var _i = 0; _i < _layers.length; _i++) {\n        var exportOption = _layers[_i];\n        var layer = this.getLayer(exportOption['id']);\n\n        if (!layer.toJSON) {\n          continue;\n        }\n\n        var _opts = extend({}, exportOption['options'], extraLayerOptions);\n\n        layersJSON.push(layer.toJSON(_opts));\n      }\n\n      json['layers'] = layersJSON;\n    } else {\n      json['layers'] = [];\n    }\n\n    return json;\n  }\n});\n\nMap$1.fromJSON = function (container, profile, options) {\n  if (!container || !profile) {\n    return null;\n  }\n\n  if (!options) {\n    options = {};\n  }\n\n  var map = new Map$1(container, profile['options']);\n\n  if (isNil(options['baseLayer']) || options['baseLayer']) {\n    var baseLayer = Layer.fromJSON(profile['baseLayer']);\n\n    if (baseLayer) {\n      map.setBaseLayer(baseLayer);\n    }\n  }\n\n  if (isNil(options['layers']) || options['layers']) {\n    var layers = [];\n    var layerJSONs = profile['layers'];\n\n    for (var i = 0; i < layerJSONs.length; i++) {\n      var layer = Layer.fromJSON(layerJSONs[i]);\n      layers.push(layer);\n    }\n\n    map.addLayer(layers);\n  }\n\n  return map;\n};\n\nMap$1.include({\n  computeLength: function computeLength(coord1, coord2) {\n    if (!this.getProjection()) {\n      return null;\n    }\n\n    var p1 = new Coordinate(coord1),\n        p2 = new Coordinate(coord2);\n\n    if (p1.equals(p2)) {\n      return 0;\n    }\n\n    return this.getProjection().measureLength(p1, p2);\n  },\n  computeGeometryLength: function computeGeometryLength(geometry) {\n    return geometry._computeGeodesicLength(this.getProjection());\n  },\n  computeGeometryArea: function computeGeometryArea(geometry) {\n    return geometry._computeGeodesicArea(this.getProjection());\n  },\n  identify: function identify(opts, callback) {\n    opts = opts || {};\n    var coordinate = new Coordinate(opts['coordinate']);\n    return this._identify(opts, callback, function (layer) {\n      return layer.identify(coordinate, opts);\n    });\n  },\n  identifyAtPoint: function identifyAtPoint(opts, callback) {\n    opts = opts || {};\n    var containerPoint = new Point(opts['containerPoint']);\n    var coordinate = this.containerPointToCoord(containerPoint);\n    return this._identify(opts, callback, function (layer) {\n      if (layer.identifyAtPoint) {\n        return layer.identifyAtPoint(containerPoint, opts);\n      } else if (coordinate) {\n        return layer.identify(coordinate, opts);\n      } else {\n        return [];\n      }\n    });\n  },\n  _identify: function _identify(opts, callback, fn) {\n    var reqLayers = opts['layers'];\n\n    if (!isArrayHasData(reqLayers)) {\n      return this;\n    }\n\n    var layers = [];\n\n    for (var i = 0, len = reqLayers.length; i < len; i++) {\n      if (isString(reqLayers[i])) {\n        layers.push(this.getLayer(reqLayers[i]));\n      } else {\n        layers.push(reqLayers[i]);\n      }\n    }\n\n    var hits = [];\n\n    for (var _i = layers.length - 1; _i >= 0; _i--) {\n      if (opts['count'] && hits.length >= opts['count']) {\n        break;\n      }\n\n      var layer = layers[_i];\n\n      if (!layer || !layer.getMap() || !opts['includeInvisible'] && !layer.isVisible() || !opts['includeInternals'] && layer.getId().indexOf(INTERNAL_LAYER_PREFIX) >= 0) {\n        continue;\n      }\n\n      var layerHits = fn(layer);\n\n      if (layerHits) {\n        if (Array.isArray(layerHits)) {\n          pushIn(hits, layerHits);\n        } else {\n          hits.push(layerHits);\n        }\n      }\n    }\n\n    callback.call(this, hits);\n    return this;\n  }\n});\n\nMap$1.include({\n  _zoom: function _zoom(nextZoom, origin) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n\n    origin = this._checkZoomOrigin(origin);\n    nextZoom = this._checkZoom(nextZoom);\n    this.onZoomStart(nextZoom, origin);\n    this._frameZoom = this.getZoom();\n    this.onZoomEnd(nextZoom, origin);\n  },\n  _zoomAnimation: function _zoomAnimation(nextZoom, origin, startScale) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n\n    nextZoom = this._checkZoom(nextZoom);\n\n    if (this.getZoom() === nextZoom) {\n      return;\n    }\n\n    origin = this._checkZoomOrigin(origin);\n\n    this._startZoomAnim(nextZoom, origin, startScale);\n  },\n  _checkZoomOrigin: function _checkZoomOrigin(origin) {\n    if (!origin || this.options['zoomInCenter']) {\n      origin = new Point(this.width / 2, this.height / 2);\n    }\n\n    if (this.options['zoomOrigin']) {\n      origin = new Point(this.options['zoomOrigin']);\n    }\n\n    return origin;\n  },\n  _startZoomAnim: function _startZoomAnim(nextZoom, origin, startScale) {\n    if (isNil(startScale)) {\n      startScale = 1;\n    }\n\n    var endScale = this._getResolution(this._startZoomVal) / this._getResolution(nextZoom);\n\n    var duration = this.options['zoomAnimationDuration'] * Math.abs(endScale - startScale) / Math.abs(endScale - 1);\n    this._frameZoom = this._startZoomVal;\n\n    this._animateTo({\n      'zoom': nextZoom,\n      'around': origin\n    }, {\n      'continueOnViewChanged': true,\n      'duration': duration\n    });\n  },\n  onZoomStart: function onZoomStart(nextZoom, origin) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n\n    this._zooming = true;\n    this._startZoomVal = this.getZoom();\n    this._startZoomCoord = this._containerPointToPrj(origin);\n\n    this._fireEvent('zoomstart', {\n      'from': this._startZoomVal,\n      'to': nextZoom\n    });\n  },\n  onZooming: function onZooming(nextZoom, origin, startScale) {\n    if (!this.options['zoomable']) {\n      return;\n    }\n\n    var frameZoom = this._frameZoom;\n\n    if (frameZoom === nextZoom) {\n      return;\n    }\n\n    if (isNil(startScale)) {\n      startScale = 1;\n    }\n\n    this._zoomTo(nextZoom, origin);\n\n    var res = this.getResolution(nextZoom),\n        fromRes = this.getResolution(this._startZoomVal),\n        scale = fromRes / res / startScale,\n        startPoint = this._prjToContainerPoint(this._startZoomCoord, this._startZoomVal);\n\n    var offset = this.getViewPoint();\n\n    if (!this.isRotating() && !startPoint.equals(origin) && scale !== 1) {\n      var pitch = this.getPitch();\n\n      var originOffset = startPoint._sub(origin)._multi(1 / (1 - scale));\n\n      if (pitch) {\n        originOffset.y /= Math.cos(pitch * Math.PI / 180);\n      }\n\n      origin = origin.add(originOffset);\n    }\n\n    var matrix = {\n      'view': [scale, 0, 0, scale, (origin.x - offset.x) * (1 - scale), (origin.y - offset.y) * (1 - scale)]\n    };\n    var dpr = this.getDevicePixelRatio();\n\n    if (dpr !== 1) {\n      origin = origin.multi(dpr);\n    }\n\n    matrix['container'] = [scale, 0, 0, scale, origin.x * (1 - scale), origin.y * (1 - scale)];\n\n    this._fireEvent('zooming', {\n      'from': this._startZoomVal,\n      'to': nextZoom,\n      'origin': origin,\n      'matrix': matrix\n    });\n\n    this._frameZoom = nextZoom;\n  },\n  onZoomEnd: function onZoomEnd(nextZoom, origin) {\n    if (!this.options['zoomable']) {\n      return;\n    }\n\n    var startZoomVal = this._startZoomVal;\n\n    this._zoomTo(nextZoom, origin);\n\n    this._zooming = false;\n\n    this._getRenderer().onZoomEnd();\n\n    this._fireEvent('zoomend', {\n      'from': startZoomVal,\n      'to': nextZoom\n    });\n\n    if (!this._verifyExtent(this._getPrjCenter())) {\n      this._panTo(this._prjMaxExtent.getCenter());\n    }\n  },\n  _zoomTo: function _zoomTo(nextZoom, origin) {\n    this._zoomLevel = nextZoom;\n\n    this._calcMatrices();\n\n    if (origin) {\n      this._setPrjCoordAtContainerPoint(this._startZoomCoord, origin);\n    }\n  },\n  _checkZoom: function _checkZoom(nextZoom) {\n    var maxZoom = this.getMaxZoom(),\n        minZoom = this.getMinZoom();\n\n    if (nextZoom < minZoom) {\n      nextZoom = minZoom;\n    }\n\n    if (nextZoom > maxZoom) {\n      nextZoom = maxZoom;\n    }\n\n    return nextZoom;\n  }\n});\n\nfunction perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf = 1 / (near - far);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 2 * far * near * nf;\n  out[15] = 0;\n  return out;\n}\nfunction translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2],\n      a00,\n      a01,\n      a02,\n      a03,\n      a10,\n      a11,\n      a12,\n      a13,\n      a20,\n      a21,\n      a22,\n      a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\nfunction scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\nfunction rotateX(out, a, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad),\n      a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7],\n      a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n\n  if (a !== out) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\nfunction rotateZ(out, a, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad),\n      a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3],\n      a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n\n  if (a !== out) {\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\nfunction multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3],\n      a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7],\n      a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11],\n      a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\nfunction invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3],\n      a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7],\n      a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11],\n      a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15],\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\nfunction set$2(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\nfunction add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\nfunction subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\nfunction length(a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\nfunction normalize(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n\n  return out;\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction scale$1(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\nfunction cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\nfunction distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot ? Math.hypot(x, y, z) : hypot(x, y, z);\n}\nfunction transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\nfunction hypot() {\n  var y = 0;\n  var i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n}\n\nfunction applyMatrix(out, v, e) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n  out[0] = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n  out[1] = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n  out[2] = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n  return out;\n}\nfunction matrixToQuaternion(out, te) {\n  var m11 = te[0],\n      m12 = te[4],\n      m13 = te[8],\n      m21 = te[1],\n      m22 = te[5],\n      m23 = te[9],\n      m31 = te[2],\n      m32 = te[6],\n      m33 = te[10],\n      trace = m11 + m22 + m33;\n  var s;\n\n  if (trace > 0) {\n    s = 0.5 / Math.sqrt(trace + 1.0);\n    out.w = 0.25 / s;\n    out.x = (m32 - m23) * s;\n    out.y = (m13 - m31) * s;\n    out.z = (m21 - m12) * s;\n  } else if (m11 > m22 && m11 > m33) {\n    s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n    out.w = (m32 - m23) / s;\n    out.x = 0.25 * s;\n    out.y = (m12 + m21) / s;\n    out.z = (m13 + m31) / s;\n  } else if (m22 > m33) {\n    s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n    out.w = (m13 - m31) / s;\n    out.x = (m12 + m21) / s;\n    out.y = 0.25 * s;\n    out.z = (m23 + m32) / s;\n  } else {\n    s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n    out.w = (m21 - m12) / s;\n    out.x = (m13 + m31) / s;\n    out.y = (m23 + m32) / s;\n    out.z = 0.25 * s;\n  }\n\n  return this;\n}\nfunction quaternionToMatrix(out, q) {\n  var te = out;\n  var x = q.x,\n      y = q.y,\n      z = q.z,\n      w = q.w;\n  var x2 = x + x,\n      y2 = y + y,\n      z2 = z + z;\n  var xx = x * x2,\n      xy = x * y2,\n      xz = x * z2;\n  var yy = y * y2,\n      yz = y * z2,\n      zz = z * z2;\n  var wx = w * x2,\n      wy = w * y2,\n      wz = w * z2;\n  te[0] = 1 - (yy + zz);\n  te[4] = xy - wz;\n  te[8] = xz + wy;\n  te[1] = xy + wz;\n  te[5] = 1 - (xx + zz);\n  te[9] = yz - wx;\n  te[2] = xz - wy;\n  te[6] = yz + wx;\n  te[10] = 1 - (xx + yy);\n  te[3] = 0;\n  te[7] = 0;\n  te[11] = 0;\n  te[12] = 0;\n  te[13] = 0;\n  te[14] = 0;\n  te[15] = 1;\n  return te;\n}\nfunction setPosition(out, v) {\n  var te = out;\n  te[12] = v[0];\n  te[13] = v[1];\n  te[14] = v[2];\n  return out;\n}\nfunction lookAt(te, eye, target, up) {\n  var x = [0, 0, 0];\n  var y = [0, 0, 0];\n  var z = [0, 0, 0];\n  subtract(z, eye, target);\n\n  if (length(z) === 0) {\n    z[2] = 1;\n  }\n\n  normalize(z, z);\n  cross(x, up, z);\n\n  if (length(z) === 0) {\n    if (Math.abs(up[2]) === 1) {\n      z[0] += 0.0001;\n    } else {\n      z[2] += 0.0001;\n    }\n\n    normalize(z, z);\n    cross(x, up, z);\n  }\n\n  normalize(x, x);\n  cross(y, z, x);\n  te[0] = x[0];\n  te[4] = y[0];\n  te[8] = z[0];\n  te[1] = x[1];\n  te[5] = y[1];\n  te[9] = z[1];\n  te[2] = x[2];\n  te[6] = y[2];\n  te[10] = z[2];\n  return te;\n}\n\nvar RADIAN$1 = Math.PI / 180;\nvar DEFAULT_FOV = 0.6435011087932844;\nvar TEMP_COORD$1 = new Coordinate(0, 0);\nMap$1.include({\n  getFov: function getFov() {\n    if (!this._fov) {\n      this._fov = DEFAULT_FOV;\n    }\n\n    return this._fov / RADIAN$1;\n  },\n  setFov: function setFov(fov) {\n    if (this.isZooming()) {\n      return this;\n    }\n\n    fov = Math.max(0.01, Math.min(60, fov));\n    if (this._fov === fov) return this;\n    var from = this.getFov();\n    this._fov = fov * RADIAN$1;\n\n    this._calcMatrices();\n\n    this._renderLayers();\n\n    this._fireEvent('fovchange', {\n      'from': from,\n      'to': this.getFov()\n    });\n\n    return this;\n  },\n  getBearing: function getBearing() {\n    if (!this._angle) {\n      return 0;\n    }\n\n    return -this._angle / RADIAN$1;\n  },\n  setBearing: function setBearing(bearing) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n\n    return this._setBearing(bearing);\n  },\n  _setBearing: function _setBearing(bearing) {\n    if (Browser$1.ie9) {\n      throw new Error('map can\\'t rotate in IE9.');\n    }\n\n    var b = -wrap(bearing, -180, 180) * RADIAN$1;\n    if (this._angle === b) return this;\n    var from = this.getBearing();\n\n    this._fireEvent('rotatestart', {\n      'from': from,\n      'to': b\n    });\n\n    this._angle = b;\n\n    this._calcMatrices();\n\n    this._renderLayers();\n\n    this._fireEvent('rotate', {\n      'from': from,\n      'to': b\n    });\n\n    this._fireEvent('rotateend', {\n      'from': from,\n      'to': b\n    });\n\n    return this;\n  },\n  getPitch: function getPitch() {\n    if (!this._pitch) {\n      return 0;\n    }\n\n    return this._pitch / Math.PI * 180;\n  },\n  setPitch: function setPitch(pitch) {\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n\n    return this._setPitch(pitch);\n  },\n  _setPitch: function _setPitch(pitch) {\n    if (Browser$1.ie9) {\n      throw new Error('map can\\'t tilt in IE9.');\n    }\n\n    var p = clamp(pitch, 0, this.options['maxPitch']) * RADIAN$1;\n    if (this._pitch === p) return this;\n    var from = this.getPitch();\n\n    this._fireEvent('pitchstart', {\n      'from': from,\n      'to': p\n    });\n\n    this._pitch = p;\n\n    this._calcMatrices();\n\n    this._renderLayers();\n\n    this._fireEvent('pitch', {\n      'from': from,\n      'to': p\n    });\n\n    this._fireEvent('pitchend', {\n      'from': from,\n      'to': p\n    });\n\n    return this;\n  },\n  isTransforming: function isTransforming() {\n    return !!(this._pitch || this._angle);\n  },\n  getFrustumAltitude: function getFrustumAltitude() {\n    return this._frustumAltitude;\n  },\n  _calcFrustumAltitude: function _calcFrustumAltitude() {\n    var pitch = 90 - this.getPitch();\n    var fov = this.getFov() / 2;\n    var cameraAlt = this.cameraPosition ? this.cameraPosition[2] : 0;\n\n    if (fov <= pitch) {\n      return cameraAlt;\n    }\n\n    fov = Math.PI * fov / 180;\n    var d1 = new Point(this.cameraPosition).distanceTo(new Point(this.cameraLookAt)),\n        d2 = cameraAlt * Math.tan(fov * 2);\n    var d = Math.tan(fov) * (d1 + d2);\n    return cameraAlt + d;\n  },\n  _pointToContainerPoint: function _pointToContainerPoint(point, zoom, altitude, out) {\n    if (altitude === void 0) {\n      altitude = 0;\n    }\n\n    var res = this._getResolution(zoom);\n\n    return this._pointAtResToContainerPoint(point, res, altitude, out);\n  },\n  _pointAtResToContainerPoint: function _pointAtResToContainerPoint(point, res, altitude, out) {\n    if (altitude === void 0) {\n      altitude = 0;\n    }\n\n    if (!out) {\n      out = new Point(0, 0);\n    }\n\n    point = this._pointAtResToPoint(point, res, out);\n    var isTransforming = this.isTransforming();\n\n    var scale$$1 = res / this._getResolution();\n\n    var centerPoint;\n\n    if (!isTransforming && !altitude) {\n      centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD$1);\n    }\n\n    this._toContainerPoint(out, isTransforming, scale$$1, altitude, centerPoint);\n\n    return out;\n  },\n  _pointsAtResToContainerPoints: function _pointsAtResToContainerPoints(points, targetRes, altitudes, resultPoints) {\n    if (altitudes === void 0) {\n      altitudes = [];\n    }\n\n    if (resultPoints === void 0) {\n      resultPoints = [];\n    }\n\n    var pitch = this.getPitch(),\n        bearing = this.getBearing();\n\n    if (pitch === 0 && bearing === 0) {\n      var _this$_get2DExtent = this._get2DExtent(),\n          xmin = _this$_get2DExtent.xmin,\n          ymin = _this$_get2DExtent.ymin,\n          xmax = _this$_get2DExtent.xmax,\n          ymax = _this$_get2DExtent.ymax;\n\n      if (xmax > xmin && ymax > ymin) {\n        var _res = targetRes / this._getResolution();\n\n        var _this$getSize = this.getSize(),\n            width = _this$getSize.width,\n            height = _this$getSize.height;\n\n        var dxPerPixel = (xmax - xmin) / width,\n            dyPerPixel = (ymax - ymin) / height;\n\n        for (var i = 0, len = points.length; i < len; i++) {\n          if (!points[i]) {\n            resultPoints[i] = null;\n            continue;\n          }\n\n          var pt = resultPoints[i];\n          pt.x = points[i].x;\n          pt.y = points[i].y;\n\n          pt._multi(_res);\n\n          pt.x = (pt.x - xmin) * dxPerPixel;\n          pt.y = height - (pt.y - ymin) * dyPerPixel;\n        }\n\n        return resultPoints;\n      }\n    }\n\n    var altitudeIsArray = Array.isArray(altitudes);\n    var isTransforming = this.isTransforming();\n\n    var res = targetRes / this._getResolution();\n\n    var centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD$1);\n\n    for (var _i = 0, _len = points.length; _i < _len; _i++) {\n      if (!points[_i]) {\n        resultPoints[_i] = null;\n        continue;\n      }\n\n      var _pt = resultPoints[_i];\n      _pt.x = points[_i].x;\n      _pt.y = points[_i].y;\n\n      _pt._multi(res);\n\n      var altitude = altitudeIsArray ? altitudes[_i] || 0 : altitudes;\n\n      this._toContainerPoint(_pt, isTransforming, res, altitude, centerPoint);\n    }\n\n    return resultPoints;\n  },\n  _toContainerPoint: function () {\n    var a = [0, 0, 0];\n    return function (out, isTransforming, res, altitude, centerPoint) {\n      var w2 = this.width / 2,\n          h2 = this.height / 2;\n\n      if (isTransforming || altitude) {\n        altitude *= res;\n        var _scale = this._glScale;\n        set$2(a, out.x * _scale, out.y * _scale, altitude * _scale);\n\n        var t = this._projIfBehindCamera(a, this.cameraPosition, this.cameraForward);\n\n        applyMatrix(t, t, this.projViewMatrix);\n        out.x = t[0] * w2 + w2;\n        out.y = -(t[1] * h2) + h2;\n      } else {\n        out._sub(centerPoint.x, centerPoint.y);\n\n        out.set(out.x, -out.y);\n\n        out._add(w2, h2);\n      }\n    };\n  }(),\n  _projIfBehindCamera: function () {\n    var vectorFromCam = new Array(3);\n    var proj = new Array(3);\n    var sub = new Array(3);\n    return function (position, cameraPos, camForward) {\n      subtract(vectorFromCam, position, cameraPos);\n      var camNormDot = dot(camForward, vectorFromCam);\n\n      if (camNormDot <= 0) {\n        scale$1(proj, camForward, camNormDot * 1.01);\n        add(position, cameraPos, subtract(sub, vectorFromCam, proj));\n      }\n\n      return position;\n    };\n  }(),\n  _containerPointToPoint: function _containerPointToPoint(p, zoom, out) {\n    var res = this._getResolution(zoom);\n\n    return this._containerPointToPointAtRes(p, res, out);\n  },\n  _containerPointToPointAtRes: function () {\n    var cp = [0, 0, 0],\n        coord0 = [0, 0, 0, 1],\n        coord1 = [0, 0, 0, 1];\n    return function (p, res, out) {\n      if (this.isTransforming()) {\n        var w2 = this.width / 2 || 1,\n            h2 = this.height / 2 || 1;\n        set$2(cp, (p.x - w2) / w2, (h2 - p.y) / h2, 0);\n        set$2(coord0, cp[0], cp[1], 0);\n        set$2(coord1, cp[0], cp[1], 1);\n        coord0[3] = coord1[3] = 1;\n        applyMatrix(coord0, coord0, this.projViewMatrixInverse);\n        applyMatrix(coord1, coord1, this.projViewMatrixInverse);\n        var x0 = coord0[0];\n        var x1 = coord1[0];\n        var y0 = coord0[1];\n        var y1 = coord1[1];\n        var z0 = coord0[2];\n        var z1 = coord1[2];\n        var t = z0 === z1 ? 0 : (0 - z0) / (z1 - z0);\n\n        var _x = interpolate(x0, x1, t);\n\n        var _y = interpolate(y0, y1, t);\n\n        if (out) {\n          out.x = _x;\n          out.y = _y;\n        } else {\n          out = new Point(_x, _y);\n        }\n\n        out._multi(1 / this._glScale);\n\n        return this._getResolution() === res ? out : this._pointToPointAtRes(out, res, out);\n      }\n\n      var centerPoint = this._prjToPointAtRes(this._getPrjCenter(), res, out),\n          scale$$1 = this._getResolution() / res;\n\n      var x = scale$$1 * (p.x - this.width / 2),\n          y = scale$$1 * (p.y - this.height / 2);\n      return centerPoint._add(x, -y);\n    };\n  }(),\n  _calcMatrices: function () {\n    var m1 = createMat4();\n    return function () {\n      delete this._mapRes;\n      delete this._mapGlRes;\n      delete this._mapExtent2D;\n      delete this._mapGlExtent2D;\n      var size = this.getSize();\n      var w = size.width || 1,\n          h = size.height || 1;\n      this._glScale = this.getGLScale();\n\n      var worldMatrix = this._getCameraWorldMatrix();\n\n      var fov = this.getFov() * Math.PI / 180;\n\n      var farZ = this._getCameraFar(fov, this.getPitch());\n\n      this.cameraFar = farZ;\n      this.cameraNear = this.cameraCenterDistance / 20;\n      var projMatrix = this.projMatrix || createMat4();\n      perspective(projMatrix, fov, w / h, this.cameraNear, farZ);\n      this.projMatrix = projMatrix;\n      this.viewMatrix = invert(this.viewMatrix || createMat4(), worldMatrix);\n      this.projViewMatrix = multiply(this.projViewMatrix || createMat4(), projMatrix, this.viewMatrix);\n\n      this._calcCascadeMatrixes();\n\n      this.projViewMatrixInverse = multiply(this.projViewMatrixInverse || createMat4(), worldMatrix, invert(m1, projMatrix));\n      this.domCssMatrix = this._calcDomMatrix();\n      this._frustumAltitude = this._calcFrustumAltitude();\n      this._mapRes = this._getResolution();\n      this._mapGlRes = this.getGLRes();\n      this._mapExtent2D = this._get2DExtent();\n      this._mapGlExtent2D = this._get2DExtentAtRes(this._mapGlRes);\n    };\n  }(),\n  _getCameraFar: function _getCameraFar(fov, pitch) {\n    var cameraCenterDistance = this.cameraCenterDistance = distance(this.cameraPosition, this.cameraLookAt);\n    var farZ = cameraCenterDistance;\n    var y = 4 * cameraCenterDistance;\n\n    if (pitch > 0) {\n      pitch = pitch * Math.PI / 180;\n\n      if (2 / Math.PI - pitch > fov / 2) {\n        var tanFov = Math.tan(fov / 2);\n        var tanP = Math.tan(pitch);\n        y = Math.max(cameraCenterDistance * tanFov / (1 / tanP - tanFov), y);\n      }\n    }\n\n    farZ += y;\n    return farZ + 1.0;\n  },\n  _calcCascadeMatrixes: function () {\n    var projMatrix = createMat4();\n\n    function cal(curPitch, pitch, out) {\n      var w = this.width;\n      var h = this.height;\n      var fov = this.getFov() * Math.PI / 180;\n\n      var farZ = this._getCameraFar(fov, pitch);\n\n      var cameraCenterDistance = this.cameraCenterDistance;\n      farZ = cameraCenterDistance + (farZ - cameraCenterDistance) / Math.cos((90 - pitch) * Math.PI / 180) * Math.cos((90 - curPitch) * Math.PI / 180);\n      perspective(projMatrix, fov, w / h, 0.1, farZ);\n      var viewMatrix = this.viewMatrix;\n      return multiply(out, projMatrix, viewMatrix);\n    }\n\n    return function () {\n      var pitch = this.getPitch();\n      var cascadePitch0 = this.options['cascadePitches'][0];\n      var cascadePitch1 = this.options['cascadePitches'][1];\n      var projViewMatrix0 = this.cascadeFrustumMatrix0 = this.cascadeFrustumMatrix0 || createMat4();\n      var projViewMatrix1 = this.cascadeFrustumMatrix1 = this.cascadeFrustumMatrix1 || createMat4();\n\n      if (pitch > cascadePitch0) {\n        cal.call(this, pitch, cascadePitch0, projViewMatrix0);\n      } else {\n        copy(this.cascadeFrustumMatrix0, this.projViewMatrix);\n      }\n\n      if (pitch > cascadePitch1) {\n        cal.call(this, pitch, cascadePitch1, projViewMatrix1);\n      } else {\n        copy(this.cascadeFrustumMatrix1, this.cascadeFrustumMatrix0);\n      }\n    };\n  }(),\n  _calcDomMatrix: function () {\n    var m = createMat4(),\n        m1 = createMat4(),\n        minusY = [1, -1, 1],\n        arr = [0, 0, 0];\n    return function () {\n      var width = this.width || 1;\n      var height = this.height || 1;\n      var cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * height;\n      scale(m, this.projMatrix, minusY);\n      translate(m, m, set$2(arr, 0, 0, -cameraToCenterDistance));\n\n      if (this._pitch) {\n        rotateX(m, m, this._pitch);\n      }\n\n      if (this._angle) {\n        rotateZ(m, m, this._angle);\n      }\n\n      identity(m1);\n      scale(m1, m1, set$2(arr, width / 2, -height / 2, 1));\n      return multiply(this.domCssMatrix || createMat4(), m1, m);\n    };\n  }(),\n  _getFovZ: function _getFovZ(zoom) {\n    var scale$$1 = this.getGLScale(zoom);\n\n    var ratio = this._getFovRatio();\n\n    return scale$$1 * (this.height || 1) / 2 / ratio;\n  },\n  _getCameraWorldMatrix: function () {\n    var q = {};\n    return function () {\n      var glRes = this.getGLRes();\n\n      var center2D = this._prjToPointAtRes(this._prjCenter, glRes);\n\n      this.cameraLookAt = set$2(this.cameraLookAt || [0, 0, 0], center2D.x, center2D.y, 0);\n      var pitch = this.getPitch() * RADIAN$1;\n      var bearing = this.getBearing() * RADIAN$1;\n\n      var z = this._getFovZ();\n\n      var cz = z * Math.cos(pitch);\n      var dist = Math.sin(pitch) * z;\n      var cx = center2D.x - dist * Math.sin(bearing);\n      var cy = center2D.y - dist * Math.cos(bearing);\n      this.cameraPosition = set$2(this.cameraPosition || [0, 0, 0], cx, cy, cz);\n      this.cameraToCenterDistance = distance(this.cameraPosition, this.cameraLookAt);\n      var d = dist || 1;\n      var up = this.cameraUp = set$2(this.cameraUp || [0, 0, 0], Math.sin(bearing) * d, Math.cos(bearing) * d, 0);\n      var m = this.cameraWorldMatrix = this.cameraWorldMatrix || createMat4();\n      lookAt(m, this.cameraPosition, this.cameraLookAt, up);\n      var cameraForward = this.cameraForward || [0, 0, 0];\n      subtract(cameraForward, this.cameraLookAt, this.cameraPosition);\n      this.cameraForward = normalize(cameraForward, cameraForward);\n      matrixToQuaternion(q, m);\n      quaternionToMatrix(m, q);\n      setPosition(m, this.cameraPosition);\n      return m;\n    };\n  }(),\n  _getFovRatio: function _getFovRatio() {\n    var fov = this.getFov();\n    return Math.tan(fov / 2 * RADIAN$1);\n  },\n  _renderLayers: function _renderLayers() {\n    if (this.isInteracting()) {\n      return;\n    }\n\n    var layers = this._getLayers();\n\n    layers.forEach(function (layer) {\n      if (!layer) {\n        return;\n      }\n\n      var renderer = layer._getRenderer();\n\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    });\n  }\n});\n\nfunction createMat4() {\n  return identity(new Array(16));\n}\n\nMap$1.include({\n  _onViewChange: function _onViewChange(view) {\n    if (!this._viewHistory) {\n      this._viewHistory = [];\n      this._viewHistoryPointer = 0;\n    }\n\n    var old = this._getCurrentView();\n\n    for (var i = this._viewHistory.length - 1; i >= 0; i--) {\n      if (equalMapView(view, this._viewHistory[i])) {\n        this._viewHistoryPointer = i;\n\n        this._fireViewChange(old, view);\n\n        return;\n      }\n    }\n\n    if (this._viewHistoryPointer < this._viewHistory.length - 1) {\n      this._viewHistory.splice(this._viewHistoryPointer + 1);\n    }\n\n    this._viewHistory.push(view);\n\n    var count = this.options['viewHistoryCount'];\n\n    if (count > 0 && this._viewHistory.length > count) {\n      this._viewHistory.splice(0, this._viewHistory.length - count);\n    }\n\n    this._viewHistoryPointer = this._viewHistory.length - 1;\n\n    this._fireViewChange(old, view);\n  },\n  zoomToPreviousView: function zoomToPreviousView(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!this.hasPreviousView()) {\n      return null;\n    }\n\n    var view = this._viewHistory[--this._viewHistoryPointer];\n\n    this._zoomToView(view, options);\n\n    return view;\n  },\n  hasPreviousView: function hasPreviousView() {\n    if (!this._viewHistory || this._viewHistoryPointer === 0) {\n      return false;\n    }\n\n    return true;\n  },\n  zoomToNextView: function zoomToNextView(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!this.hasNextView()) {\n      return null;\n    }\n\n    var view = this._viewHistory[++this._viewHistoryPointer];\n\n    this._zoomToView(view, options);\n\n    return view;\n  },\n  hasNextView: function hasNextView() {\n    if (!this._viewHistory || this._viewHistoryPointer === this._viewHistory.length - 1) {\n      return false;\n    }\n\n    return true;\n  },\n  _zoomToView: function _zoomToView(view, options) {\n    var _this = this;\n\n    var old = this.getView();\n\n    if (options['animation']) {\n      this._animateTo(view, {\n        'duration': options['duration']\n      }, function (frame) {\n        if (frame.state.playState === 'finished') {\n          _this._fireViewChange(old, view);\n        }\n      });\n    } else {\n      this.setView(view);\n\n      this._fireViewChange(old, view);\n    }\n  },\n  getViewHistory: function getViewHistory() {\n    return this._viewHistory;\n  },\n  _fireViewChange: function _fireViewChange(old, view) {\n    this._fireEvent('viewchange', {\n      'old': old,\n      'new': view\n    });\n  },\n  _getCurrentView: function _getCurrentView() {\n    if (!this._viewHistory) {\n      return null;\n    }\n\n    return this._viewHistory[this._viewHistoryPointer];\n  }\n});\nMap$1.mergeOptions({\n  'viewHistory': true,\n  'viewHistoryCount': 10\n});\n\nMap$1.include({\n  getCollisionIndex: function getCollisionIndex() {\n    if (!this._collisionIndex) {\n      this.createCollisionIndex();\n    }\n\n    return this._collisionIndex || this.createCollisionIndex();\n  },\n  createCollisionIndex: function createCollisionIndex() {\n    this.clearCollisionIndex();\n    this._collisionIndex = new CollisionIndex();\n    return this._collisionIndex;\n  },\n  clearCollisionIndex: function clearCollisionIndex() {\n    this.collisionFrameTime = 0;\n\n    if (this._collisionIndex) {\n      this._collisionIndex.clear();\n    }\n\n    return this;\n  }\n});\n\nvar options$h = {\n  'mode': 'LineString',\n  'language': 'zh-CN',\n  'metric': true,\n  'imperial': false,\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 3,\n    'lineOpacity': 1\n  },\n  'vertexSymbol': {\n    'markerType': 'ellipse',\n    'markerFill': '#fff',\n    'markerLineColor': '#000',\n    'markerLineWidth': 3,\n    'markerWidth': 11,\n    'markerHeight': 11\n  },\n  'labelOptions': {\n    'textSymbol': {\n      'textFaceName': 'monospace',\n      'textLineSpacing': 1,\n      'textHorizontalAlignment': 'right',\n      'textDx': 15\n    },\n    'boxStyle': {\n      'padding': [6, 2],\n      'symbol': {\n        'markerType': 'square',\n        'markerFill': '#fff',\n        'markerFillOpacity': 0.9,\n        'markerLineColor': '#b4b3b3'\n      }\n    }\n  },\n  'clearButtonSymbol': [{\n    'markerType': 'square',\n    'markerFill': '#fff',\n    'markerLineColor': '#b4b3b3',\n    'markerLineWidth': 2,\n    'markerWidth': 15,\n    'markerHeight': 15,\n    'markerDx': 20\n  }, {\n    'markerType': 'x',\n    'markerWidth': 10,\n    'markerHeight': 10,\n    'markerDx': 20\n  }]\n};\n\nvar DistanceTool = function (_DrawTool) {\n  _inheritsLoose(DistanceTool, _DrawTool);\n\n  function DistanceTool(options) {\n    var _this;\n\n    _this = _DrawTool.call(this, options) || this;\n\n    _this.on('enable', _this._afterEnable, _assertThisInitialized(_assertThisInitialized(_this))).on('disable', _this._afterDisable, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this._measureLayers = [];\n    return _this;\n  }\n\n  var _proto = DistanceTool.prototype;\n\n  _proto.clear = function clear() {\n    if (isArrayHasData(this._measureLayers)) {\n      for (var i = 0; i < this._measureLayers.length; i++) {\n        this._measureLayers[i].remove();\n      }\n    }\n\n    delete this._lastMeasure;\n    delete this._lastVertex;\n    this._measureLayers = [];\n    return this;\n  };\n\n  _proto.getMeasureLayers = function getMeasureLayers() {\n    return this._measureLayers;\n  };\n\n  _proto.getLastMeasure = function getLastMeasure() {\n    if (!this._lastMeasure) {\n      return 0;\n    }\n\n    return this._lastMeasure;\n  };\n\n  _proto.undo = function undo() {\n    _DrawTool.prototype.undo.call(this);\n\n    var pointer = this._historyPointer;\n\n    if (pointer !== this._vertexes.length) {\n      for (var i = pointer; i < this._vertexes.length; i++) {\n        if (this._vertexes[i].label) {\n          this._vertexes[i].label.remove();\n        }\n\n        this._vertexes[i].marker.remove();\n      }\n    }\n\n    return this;\n  };\n\n  _proto.redo = function redo() {\n    _DrawTool.prototype.redo.call(this);\n\n    var i = this._historyPointer - 1;\n\n    if (this._vertexes[i]) {\n      if (!this._vertexes[i].marker.getLayer()) {\n        if (this._vertexes[i].label) {\n          this._vertexes[i].label.addTo(this._measureMarkerLayer);\n        }\n\n        this._vertexes[i].marker.addTo(this._measureMarkerLayer);\n      }\n    }\n\n    return this;\n  };\n\n  _proto._measure = function _measure(toMeasure) {\n    var map = this.getMap();\n    var length;\n\n    if (toMeasure instanceof Geometry) {\n      length = map.computeGeometryLength(toMeasure);\n    } else if (Array.isArray(toMeasure)) {\n      length = map.getProjection().measureLength(toMeasure);\n    }\n\n    this._lastMeasure = length;\n    var units;\n\n    if (this.options['language'] === 'zh-CN') {\n      units = [' 米', ' 公里', ' 英尺', ' 英里'];\n    } else {\n      units = [' m', ' km', ' feet', ' mile'];\n    }\n\n    var content = '';\n\n    if (this.options['metric']) {\n      content += length < 1000 ? length.toFixed(0) + units[0] : (length / 1000).toFixed(2) + units[1];\n    }\n\n    if (this.options['imperial']) {\n      length *= 3.2808399;\n\n      if (content.length > 0) {\n        content += '\\n';\n      }\n\n      content += length < 5280 ? length.toFixed(0) + units[2] : (length / 5280).toFixed(2) + units[3];\n    }\n\n    return content;\n  };\n\n  _proto._registerMeasureEvents = function _registerMeasureEvents() {\n    this.on('drawstart', this._msOnDrawStart, this).on('drawvertex', this._msOnDrawVertex, this).on('mousemove', this._msOnMouseMove, this).on('drawend', this._msOnDrawEnd, this);\n  };\n\n  _proto._afterEnable = function _afterEnable() {\n    this._registerMeasureEvents();\n  };\n\n  _proto._afterDisable = function _afterDisable() {\n    this.off('drawstart', this._msOnDrawStart, this).off('drawvertex', this._msOnDrawVertex, this).off('mousemove', this._msOnMouseMove, this).off('drawend', this._msOnDrawEnd, this);\n  };\n\n  _proto._msOnDrawStart = function _msOnDrawStart(param) {\n    var map = this.getMap();\n\n    var prjCoord = map._pointToPrj(param['point2d']);\n\n    var uid = UID();\n    var layerId = 'distancetool_' + uid;\n    var markerLayerId = 'distancetool_markers_' + uid;\n\n    if (!map.getLayer(layerId)) {\n      this._measureLineLayer = new VectorLayer(layerId).addTo(map);\n      this._measureMarkerLayer = new VectorLayer(markerLayerId).addTo(map);\n    } else {\n      this._measureLineLayer = map.getLayer(layerId);\n      this._measureMarkerLayer = map.getLayer(markerLayerId);\n    }\n\n    this._measureLayers.push(this._measureLineLayer);\n\n    this._measureLayers.push(this._measureMarkerLayer);\n\n    var marker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n\n    marker._setPrjCoordinates(prjCoord);\n\n    var content = this.options['language'] === 'zh-CN' ? '起点' : 'start';\n    var startLabel = new Label(content, param['coordinate'], this.options['labelOptions']);\n\n    startLabel._setPrjCoordinates(prjCoord);\n\n    this._lastVertex = startLabel;\n\n    this._addVertexMarker(marker, startLabel);\n  };\n\n  _proto._msOnMouseMove = function _msOnMouseMove(param) {\n    var ms = this._measure(this._msGetCoordsToMeasure(param));\n\n    if (!this._tailMarker) {\n      var symbol = extendSymbol(this.options['vertexSymbol']);\n      symbol['markerWidth'] /= 2;\n      symbol['markerHeight'] /= 2;\n      this._tailMarker = new Marker(param['coordinate'], {\n        'symbol': symbol\n      }).addTo(this._measureMarkerLayer);\n      this._tailLabel = new Label(ms, param['coordinate'], this.options['labelOptions']).addTo(this._measureMarkerLayer);\n    }\n\n    var prjCoords = this._geometry._getPrjCoordinates();\n\n    var lastCoord = prjCoords[prjCoords.length - 1];\n\n    this._tailMarker.setCoordinates(param['coordinate']);\n\n    this._tailMarker._setPrjCoordinates(lastCoord);\n\n    this._tailLabel.setContent(ms);\n\n    this._tailLabel.setCoordinates(param['coordinate']);\n\n    this._tailLabel._setPrjCoordinates(lastCoord);\n  };\n\n  _proto._msGetCoordsToMeasure = function _msGetCoordsToMeasure(param) {\n    return param['geometry'].getCoordinates().concat([param['coordinate']]);\n  };\n\n  _proto._msOnDrawVertex = function _msOnDrawVertex(param) {\n    var prjCoords = this._geometry._getPrjCoordinates();\n\n    var lastCoord = prjCoords[prjCoords.length - 1];\n    var geometry = param['geometry'];\n    var marker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n\n    var length = this._measure(geometry);\n\n    var vertexLabel = new Label(length, param['coordinate'], this.options['labelOptions']);\n\n    this._addVertexMarker(marker, vertexLabel);\n\n    vertexLabel._setPrjCoordinates(lastCoord);\n\n    marker._setPrjCoordinates(lastCoord);\n\n    this._lastVertex = vertexLabel;\n  };\n\n  _proto._addVertexMarker = function _addVertexMarker(marker, vertexLabel) {\n    if (!this._vertexes) {\n      this._vertexes = [];\n    }\n\n    if (this._historyPointer !== undefined && this._vertexes.length > this._historyPointer - 1) {\n      this._vertexes.length = this._historyPointer - 1;\n    }\n\n    this._vertexes.push({\n      label: vertexLabel,\n      marker: marker\n    });\n\n    this._measureMarkerLayer.addGeometry(marker);\n\n    if (vertexLabel) {\n      this._measureMarkerLayer.addGeometry(vertexLabel);\n    }\n  };\n\n  _proto._msOnDrawEnd = function _msOnDrawEnd(param) {\n    this._clearTailMarker();\n\n    if (param['geometry']._getPrjCoordinates().length < 2) {\n      this._lastMeasure = 0;\n\n      this._clearMeasureLayers();\n\n      return;\n    }\n\n    var size = this._lastVertex.getSize();\n\n    if (!size) {\n      size = new Size(10, 10);\n    }\n\n    this._addClearMarker(this._lastVertex.getCoordinates(), this._lastVertex._getPrjCoordinates(), size['width']);\n\n    var geo = param['geometry'].copy();\n\n    geo._setPrjCoordinates(param['geometry']._getPrjCoordinates());\n\n    geo.addTo(this._measureLineLayer);\n    this._lastMeasure = geo.getLength();\n  };\n\n  _proto._addClearMarker = function _addClearMarker(coordinates, prjCoord, dx) {\n    var symbol = this.options['clearButtonSymbol'];\n    var dxSymbol = {\n      'markerDx': (symbol['markerDx'] || 0) + dx,\n      'textDx': (symbol['textDx'] || 0) + dx\n    };\n\n    if (Array.isArray(symbol)) {\n      dxSymbol = symbol.map(function (s) {\n        if (s) {\n          return {\n            'markerDx': (s['markerDx'] || 0) + dx,\n            'textDx': (s['textDx'] || 0) + dx\n          };\n        }\n\n        return null;\n      });\n    }\n\n    symbol = extendSymbol(symbol, dxSymbol);\n    var endMarker = new Marker(coordinates, {\n      'symbol': symbol\n    });\n    var measureLineLayer = this._measureLineLayer,\n        measureMarkerLayer = this._measureMarkerLayer;\n    endMarker.on('click', function () {\n      measureLineLayer.remove();\n      measureMarkerLayer.remove();\n      return false;\n    }, this);\n    endMarker.addTo(this._measureMarkerLayer);\n\n    endMarker._setPrjCoordinates(prjCoord);\n  };\n\n  _proto._clearTailMarker = function _clearTailMarker() {\n    if (this._tailMarker) {\n      this._tailMarker.remove();\n\n      delete this._tailMarker;\n    }\n\n    if (this._tailLabel) {\n      this._tailLabel.remove();\n\n      delete this._tailLabel;\n    }\n  };\n\n  _proto._clearMeasureLayers = function _clearMeasureLayers() {\n    this._measureLineLayer.remove();\n\n    this._measureMarkerLayer.remove();\n  };\n\n  return DistanceTool;\n}(DrawTool);\n\nDistanceTool.mergeOptions(options$h);\n\nvar options$i = {\n  'mode': 'Polygon',\n  'symbol': {\n    'lineColor': '#000000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'lineDasharray': '',\n    'polygonFill': '#ffffff',\n    'polygonOpacity': 0.5\n  }\n};\n\nvar AreaTool = function (_DistanceTool) {\n  _inheritsLoose(AreaTool, _DistanceTool);\n\n  function AreaTool(options) {\n    var _this;\n\n    _this = _DistanceTool.call(this, options) || this;\n\n    _this.on('enable', _this._afterEnable, _assertThisInitialized(_assertThisInitialized(_this))).on('disable', _this._afterDisable, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this._measureLayers = [];\n    return _this;\n  }\n\n  var _proto = AreaTool.prototype;\n\n  _proto._measure = function _measure(toMeasure) {\n    var map = this.getMap();\n    var area;\n\n    if (toMeasure instanceof Geometry) {\n      area = map.computeGeometryArea(toMeasure);\n    } else if (Array.isArray(toMeasure)) {\n      area = map.getProjection().measureArea(toMeasure);\n    }\n\n    this._lastMeasure = area;\n    var units;\n\n    if (this.options['language'] === 'zh-CN') {\n      units = [' 平方米', ' 平方公里', ' 平方英尺', ' 平方英里'];\n    } else {\n      units = [' sq.m', ' sq.km', ' sq.ft', ' sq.mi'];\n    }\n\n    var content = '';\n\n    if (this.options['metric']) {\n      content += area < 1E6 ? area.toFixed(0) + units[0] : (area / 1E6).toFixed(2) + units[1];\n    }\n\n    if (this.options['imperial']) {\n      area *= 3.2808399;\n\n      if (content.length > 0) {\n        content += '\\n';\n      }\n\n      var sqmi = 5280 * 5280;\n      content += area < sqmi ? area.toFixed(0) + units[2] : (area / sqmi).toFixed(2) + units[3];\n    }\n\n    return content;\n  };\n\n  _proto._msGetCoordsToMeasure = function _msGetCoordsToMeasure(param) {\n    return param['geometry'].getShell().concat([param['coordinate']]);\n  };\n\n  _proto._msOnDrawVertex = function _msOnDrawVertex(param) {\n    var prjCoord = this.getMap()._pointToPrj(param['point2d']);\n\n    var vertexMarker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n\n    vertexMarker._setPrjCoordinates(prjCoord);\n\n    this._measure(param['geometry']);\n\n    this._lastVertex = vertexMarker;\n\n    this._addVertexMarker(vertexMarker);\n  };\n\n  _proto._msOnDrawEnd = function _msOnDrawEnd(param) {\n    this._clearTailMarker();\n\n    var prjCoord;\n\n    if (param['point2d']) {\n      prjCoord = this.getMap()._pointToPrj(param['point2d']);\n    } else {\n      var prjCoords = param['geometry']._getPrjCoordinates();\n\n      prjCoords = prjCoords.slice(0, prjCoords.length - 1);\n\n      param['geometry']._setPrjCoordinates(prjCoords);\n\n      prjCoord = prjCoords[prjCoords.length - 1];\n    }\n\n    if (param['geometry']._getPrjCoordinates().length < 3) {\n      this._lastMeasure = 0;\n\n      this._clearMeasureLayers();\n\n      return;\n    }\n\n    var ms = this._measure(param['geometry']);\n\n    var projection = this.getMap().getProjection();\n    var coord = projection.unproject(prjCoord);\n    var endLabel = new Label(ms, coord, this.options['labelOptions']).addTo(this._measureMarkerLayer);\n\n    endLabel._setPrjCoordinates(prjCoord);\n\n    var size = endLabel.getSize();\n\n    if (!size) {\n      size = new Size(10, 10);\n    }\n\n    this._addClearMarker(coord, prjCoord, size['width']);\n\n    var geo = param['geometry'].copy();\n\n    geo._setPrjCoordinates(param['geometry']._getPrjCoordinates());\n\n    geo.addTo(this._measureLineLayer);\n    this._lastMeasure = geo.getArea();\n  };\n\n  return AreaTool;\n}(DistanceTool);\n\nAreaTool.mergeOptions(options$i);\n\nvar circleHooks = {\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var circle = new Circle(center, 0);\n\n    circle._setPrjCoordinates(prjCoord[0]);\n\n    return circle;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var map = geometry.getMap();\n    var prjCoord = Array.isArray(prjPath) ? prjPath[prjPath.length - 1] : prjPath;\n    var nextCoord = projection.unproject(prjCoord);\n    var radius = map.computeLength(geometry.getCenter(), nextCoord);\n    geometry.setRadius(radius);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('circle', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, circleHooks));\nDrawTool.registerMode('freeHandCircle', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, circleHooks));\nvar ellipseHooks = {\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var ellipse = new Ellipse(center, 0, 0);\n\n    ellipse._setPrjCoordinates(prjCoord[0]);\n\n    return ellipse;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var map = geometry.getMap();\n    var center = geometry.getCenter();\n    var prjCoord = Array.isArray(prjPath) ? prjPath[prjPath.length - 1] : prjPath;\n    var nextCoord = projection.unproject(prjCoord);\n    var rx = map.computeLength(center, new Coordinate({\n      x: nextCoord.x,\n      y: center.y\n    }));\n    var ry = map.computeLength(center, new Coordinate({\n      x: center.x,\n      y: nextCoord.y\n    }));\n    geometry.setWidth(rx * 2);\n    geometry.setHeight(ry * 2);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('ellipse', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, ellipseHooks));\nDrawTool.registerMode('freeHandEllipse', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, ellipseHooks));\nvar rectangleHooks = {\n  'create': function create(projection, prjCoords) {\n    var rect = new Polygon([]);\n    rect._firstClick = prjCoords[0];\n    return rect;\n  },\n  'update': function update(projection, prjCoords, geometry, param) {\n    var map = geometry.getMap();\n    var containerPoint = param['containerPoint'];\n\n    var firstClick = map._prjToContainerPoint(geometry._firstClick);\n\n    var ring = [[firstClick.x, firstClick.y], [containerPoint.x, firstClick.y], [containerPoint.x, containerPoint.y], [firstClick.x, containerPoint.y]];\n    geometry.setCoordinates(ring.map(function (c) {\n      return map.containerPointToCoord(new Point(c));\n    }));\n\n    geometry._setPrjCoordinates(ring.map(function (c) {\n      return map._containerPointToPrj(new Point(c));\n    }));\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('rectangle', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, rectangleHooks));\nDrawTool.registerMode('freeHandRectangle', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, rectangleHooks));\nDrawTool.registerMode('point', {\n  'clickLimit': 1,\n  'action': ['click'],\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var marker = new Marker(center);\n\n    marker._setPrjCoordinates(prjCoord[0]);\n\n    return marker;\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nvar polygonHooks = {\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var line = new LineString(path);\n\n    line._setPrjCoordinates(prjPath);\n\n    return line;\n  },\n  'update': function update(projection, path, geometry) {\n    var symbol = geometry.getSymbol();\n    var prjCoords;\n\n    if (Array.isArray(path)) {\n      prjCoords = path;\n    } else {\n      prjCoords = geometry._getPrjCoordinates();\n      prjCoords.push(path);\n    }\n\n    var coordinates = prjCoords.map(function (c) {\n      return projection.unproject(c);\n    });\n    geometry.setCoordinates(coordinates);\n\n    geometry._setPrjCoordinates(prjCoords);\n\n    var layer = geometry.getLayer();\n\n    if (layer) {\n      var polygon = layer.getGeometryById('polygon');\n\n      if (!polygon && prjCoords.length >= 3) {\n        polygon = new Polygon([coordinates], {\n          'id': 'polygon'\n        });\n\n        if (symbol) {\n          var pSymbol = extendSymbol(symbol, {\n            'lineOpacity': 0\n          });\n          polygon.setSymbol(pSymbol);\n        }\n\n        polygon.addTo(layer);\n      }\n\n      if (polygon) {\n        polygon._setPrjCoordinates(prjCoords);\n      }\n    }\n  },\n  'generate': function generate(geometry) {\n    var polygon = new Polygon(geometry.getCoordinates(), {\n      'symbol': geometry.getSymbol()\n    });\n\n    polygon._setPrjCoordinates(geometry._getPrjCoordinates());\n\n    polygon._projCode = geometry._projCode;\n    return polygon;\n  }\n};\nDrawTool.registerMode('polygon', extend({\n  'action': ['click', 'mousemove', 'dblclick']\n}, polygonHooks));\nDrawTool.registerMode('freeHandPolygon', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, polygonHooks));\nvar lineStringHooks = {\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var line = new LineString(path);\n\n    line._setPrjCoordinates(prjPath);\n\n    return line;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var prjCoords;\n\n    if (Array.isArray(prjPath)) {\n      prjCoords = prjPath;\n    } else {\n      prjCoords = geometry._getPrjCoordinates();\n      prjCoords.push(prjPath);\n    }\n\n    var path = prjCoords.map(function (c) {\n      return projection.unproject(c);\n    });\n    geometry.setCoordinates(path);\n\n    geometry._setPrjCoordinates(prjCoords);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('linestring', extend({\n  'action': ['click', 'mousemove', 'dblclick']\n}, lineStringHooks));\nDrawTool.registerMode('freeHandLinestring', extend({\n  'action': ['mousedown touchstart', 'mousemove touchmove', 'mouseup touchend']\n}, lineStringHooks));\nDrawTool.registerMode('arccurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var arc = new ArcCurve(path);\n\n    arc._setPrjCoordinates(prjPath);\n\n    return arc;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('quadbeziercurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var curve = new QuadBezierCurve(path);\n\n    curve._setPrjCoordinates(prjPath);\n\n    return curve;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('cubicbeziercurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var curve = new CubicBezierCurve(path);\n\n    curve._setPrjCoordinates(prjPath);\n\n    return curve;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('boxZoom', {\n  'action': ['mousedown', 'mousemove', 'mouseup'],\n  'create': function create(projection, prjCoord) {\n    prjCoord = prjCoord[0];\n    var center = projection.unproject(prjCoord);\n    var marker = new Marker(center);\n    marker._firstClick = prjCoord;\n    return marker;\n  },\n  'update': function update(projection, prjCoord, geometry, param) {\n    var map = geometry.getMap();\n\n    var p1 = map._prjToContainerPoint(geometry._firstClick),\n        p2 = param['containerPoint'];\n\n    prjCoord = map._containerPointToPrj(new Coordinate(Math.min(p1.x, p2.x), Math.min(p1.y, p2.y)));\n    var center = projection.unproject(prjCoord);\n\n    geometry.setCoordinates(center)._setPrjCoordinates(prjCoord);\n\n    geometry.updateSymbol({\n      markerWidth: Math.abs(p1.x - p2.x),\n      markerHeight: Math.abs(p1.y - p2.y)\n    });\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\n\nfunction parse(arcConf) {\n  var tileInfo = arcConf['tileInfo'],\n      tileSize = [tileInfo['cols'], tileInfo['rows']],\n      resolutions = [],\n      lods = tileInfo['lods'];\n\n  for (var i = 0, len = lods.length; i < len; i++) {\n    resolutions.push(lods[i]['resolution']);\n  }\n\n  var fullExtent = arcConf['fullExtent'],\n      origin = tileInfo['origin'],\n      tileSystem = [1, -1, origin['x'], origin['y']];\n  delete fullExtent['spatialReference'];\n  return {\n    'spatialReference': {\n      'resolutions': resolutions,\n      'fullExtent': fullExtent\n    },\n    'tileSystem': tileSystem,\n    'tileSize': tileSize\n  };\n}\n\nSpatialReference.loadArcgis = function (url, cb, options) {\n  if (options === void 0) {\n    options = {\n      'jsonp': true\n    };\n  }\n\n  if (isString(url) && url.substring(0, 1) !== '{') {\n    Ajax.getJSON(url, function (err, json) {\n      if (err) {\n        cb(err);\n        return;\n      }\n\n      var spatialRef = parse(json);\n      cb(null, spatialRef);\n    }, options);\n  } else {\n    if (isString(url)) {\n      url = parseJSON(url);\n    }\n\n    var spatialRef = parse(url);\n    cb(null, spatialRef);\n  }\n\n  return this;\n};\n\nfunction getProjectionCode(code) {\n  var newcode = '';\n  var codeArray = code.split('');\n\n  for (var len = codeArray.length, i = len - 1; i >= 0; i--) {\n    if (!isNaN(codeArray[i])) {\n      newcode = codeArray[i] + newcode;\n    } else {\n      break;\n    }\n  }\n\n  return newcode;\n}\n\nfunction getProjection(projection) {\n  var prj = projection.indexOf('EPSG') > -1 ? projection : 'EPSG:' + projection;\n  prj = strReplace(prj, [['4490', '4326'], ['102100', '3857'], ['900913', '3857']]);\n  return prj;\n}\n\nfunction strReplace(str, repArray) {\n  if (repArray === void 0) {\n    repArray = [];\n  }\n\n  repArray.forEach(function (rep) {\n    var template = rep[0],\n        value = rep[1];\n    str = str.replace(template, value);\n  });\n  return str;\n}\n\nfunction getTransformValue(options) {\n  var projection = options.projection,\n      isArcgis = options.isArcgis,\n      isGeoServer = options.isGeoServer,\n      isSuperMap = options.isSuperMap;\n  var transformValue = 0.0002645833333333333;\n\n  if (isArcgis || isGeoServer || isSuperMap) {\n    transformValue = 0.00028;\n  }\n\n  if (projection && projection.indexOf('4326') > -1) {\n    transformValue = 2.3767925226029154e-9;\n\n    if (isArcgis || isSuperMap) {\n      transformValue = 2.518101729011901e-9;\n    }\n\n    if (isGeoServer) {\n      transformValue = 2.51528279553466e-9;\n    }\n  }\n\n  return transformValue;\n}\n\nfunction getTileMatrixSet(TileMatrixSets, TileMatrixSetLink) {\n  for (var i = 0; i < TileMatrixSets.length; i++) {\n    var TileMatrixSet = TileMatrixSets[i];\n    TileMatrixSet = TileMatrixSet.getElementsByTagName('ows:Identifier')[0];\n\n    if (TileMatrixSet) {\n      if (TileMatrixSet.textContent === TileMatrixSetLink) {\n        return TileMatrixSets[i];\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction parseWMTSXML(str, requestUrl, options) {\n  if (options.isArcgis == null) {\n    options.isArcgis = str.indexOf('arcgis') > -1;\n  }\n\n  if (options.isSuperMap == null) {\n    options.isSuperMap = str.indexOf('supermap') > -1;\n  }\n\n  var parser = new DOMParser();\n  var xmlDoc = parser.parseFromString(str, 'text/xml');\n  var content = xmlDoc.querySelectorAll('Contents')[0];\n\n  if (!content) {\n    return [];\n  }\n\n  var layers = content.getElementsByTagName('Layer');\n\n  if (!layers.length) {\n    return [];\n  }\n\n  var TileMatrixSets = [];\n\n  for (var i = 0, len = content.childNodes.length; i < len; i++) {\n    if (content.childNodes[i].nodeName === 'TileMatrixSet') {\n      TileMatrixSets.push(content.childNodes[i]);\n    }\n  }\n\n  if (!TileMatrixSets.length) {\n    return [];\n  }\n\n  var result = [];\n\n  for (var _i = 0, _len = layers.length; _i < _len; _i++) {\n    var layer = layers[_i];\n    var style = layer.querySelectorAll('Style')[0];\n\n    if (style) {\n      style = style.getElementsByTagName('ows:Identifier')[0];\n\n      if (style) {\n        style = style.textContent;\n      }\n    }\n\n    var layerName = layer.getElementsByTagName('ows:Identifier')[0];\n\n    if (layerName) {\n      layerName = layerName.textContent;\n    }\n\n    var tileMatrixSetLinks = layer.getElementsByTagName('TileMatrixSetLink');\n\n    if (tileMatrixSetLinks.length === 0) {\n      continue;\n    }\n\n    for (var j = 0, len1 = tileMatrixSetLinks.length; j < len1; j++) {\n      var tileMatrixSetLink = tileMatrixSetLinks[j];\n      tileMatrixSetLink = tileMatrixSetLink.getElementsByTagName('TileMatrixSet')[0];\n\n      if (tileMatrixSetLink) {\n        tileMatrixSetLink = tileMatrixSetLink.textContent;\n      }\n\n      var tileMatrixSet = getTileMatrixSet(TileMatrixSets, tileMatrixSetLink);\n\n      if (!tileMatrixSet) {\n        continue;\n      }\n\n      var resourceURL = layer.querySelectorAll('ResourceURL')[0];\n      var url = '';\n\n      if (resourceURL) {\n        url = resourceURL.attributes.template.value;\n      }\n\n      var _parseTileMatrixSet = parseTileMatrixSet(tileMatrixSet, options),\n          resolutions = _parseTileMatrixSet.resolutions,\n          tileSize = _parseTileMatrixSet.tileSize,\n          tileSystem = _parseTileMatrixSet.tileSystem,\n          projection = _parseTileMatrixSet.projection,\n          TileMatrixSet = _parseTileMatrixSet.TileMatrixSet,\n          isGeoServer = _parseTileMatrixSet.isGeoServer,\n          levelStr = _parseTileMatrixSet.levelStr;\n\n      if (!url.length) {\n        url = requestUrl.substr(0, requestUrl.lastIndexOf('?'));\n        url += '?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER={LAYER}&STYLE={Style}&TILEMATRIXSET={TileMatrixSet}&FORMAT={tiles}&TILEMATRIX={TileMatrix}&TILEROW={TileRow}&TILECOL={TileCol}';\n      }\n\n      var urlTemplate = strReplace(url, [['{LAYER}', layerName], ['{Layer}', layerName], ['{layer}', layerName], ['{STYLE}', style], ['{Style}', style], ['{style}', style], ['{TileMatrixSet}', TileMatrixSet], ['{TileMatrix}', isGeoServer ? levelStr + \":{z}\" : '{z}'], ['{TileRow}', '{y}'], ['{TileCol}', '{x}'], ['{tiles}', isGeoServer ? 'image/png' : 'tiles']]);\n      result.push({\n        tileSize: tileSize,\n        tileSystem: tileSystem,\n        spatialReference: {\n          resolutions: resolutions,\n          projection: projection\n        },\n        urlTemplate: urlTemplate,\n        info: {\n          layerName: layerName,\n          TileMatrixSet: TileMatrixSet,\n          style: style,\n          tileSize: tileSize,\n          tileSystem: tileSystem,\n          resolutions: resolutions,\n          projection: projection,\n          urlTemplate: urlTemplate\n        }\n      });\n    }\n  }\n\n  return result;\n}\n\nfunction parseTileMatrixSet(TileMatrixSet, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var TileMatrixs = TileMatrixSet.getElementsByTagName('TileMatrix');\n  var resolutions = [],\n      tileSystem = [],\n      tileSize = [];\n  var projection,\n      tset,\n      isGeoServer = false,\n      levelStr;\n\n  if (!projection) {\n    var supportedCRS = TileMatrixSet.getElementsByTagName('ows:SupportedCRS')[0];\n\n    if (supportedCRS) {\n      projection = supportedCRS.textContent;\n      projection = projection.split('EPSG')[1];\n      projection = getProjectionCode(projection);\n      projection = getProjection(projection);\n    }\n  }\n\n  if (!tset) {\n    tset = TileMatrixSet.getElementsByTagName('ows:Identifier')[0];\n\n    if (tset) {\n      tset = tset.textContent;\n    }\n  }\n\n  options.projection = projection;\n  var minLevel = Infinity;\n\n  for (var index = 0; index < TileMatrixs.length; index++) {\n    var TileMatrix = TileMatrixs[index];\n    var level = TileMatrix.getElementsByTagName('ows:Identifier')[0].textContent;\n\n    if (isNaN(parseInt(level))) {\n      levelStr = level.substr(0, level.lastIndexOf(':'));\n      level = level.split(':');\n      level = level[level.length - 1];\n      level = parseInt(level);\n      isGeoServer = true;\n      options.isGeoServer = true;\n    } else {\n      level = parseInt(level);\n    }\n\n    minLevel = Math.min(minLevel, level);\n    var ScaleDenominator = TileMatrix.getElementsByTagName('ScaleDenominator')[0].textContent;\n    var TopLeftCorner = TileMatrix.getElementsByTagName('TopLeftCorner')[0].textContent;\n    var TileWidth = TileMatrix.getElementsByTagName('TileWidth')[0].textContent;\n    var TileHeight = TileMatrix.getElementsByTagName('TileHeight')[0].textContent;\n\n    if (tileSize.length === 0) {\n      tileSize.push(parseInt(TileWidth), parseInt(TileHeight));\n    }\n\n    if (tileSystem.length === 0) {\n      var _TopLeftCorner$split$ = TopLeftCorner.split(' ').filter(function (s) {\n        return s !== '';\n      }).map(function (v) {\n        return parseFloat(v);\n      }),\n          x = _TopLeftCorner$split$[0],\n          y = _TopLeftCorner$split$[1];\n\n      if (x > 0) {\n        tileSystem.push(1, -1, y, x);\n      } else {\n        tileSystem.push(1, -1, x, y);\n      }\n    }\n\n    var transformValue = getTransformValue(options);\n    var res = parseFloat(ScaleDenominator) * transformValue;\n    resolutions.push(res);\n  }\n\n  if (minLevel > 0) {\n    var _res = resolutions[0];\n\n    for (var i = minLevel - 1; i >= 0; i--) {\n      _res = _res * 2;\n      resolutions.splice(0, 0, _res);\n    }\n  }\n\n  return {\n    resolutions: resolutions,\n    tileSize: tileSize,\n    tileSystem: tileSystem,\n    projection: projection,\n    TileMatrixSet: tset,\n    isGeoServer: isGeoServer,\n    levelStr: levelStr\n  };\n}\n\nSpatialReference.loadWMTS = function (url, cb, options) {\n  if (options === void 0) {\n    options = {\n      'jsonp': true\n    };\n  }\n\n  if (isString(url)) {\n    Ajax.get(url, function (err, xml) {\n      if (err) {\n        cb(err);\n        return;\n      }\n\n      var layers = parseWMTSXML(xml, url, options);\n      cb(null, layers);\n    }, options);\n  }\n\n  return this;\n};\n\nvar options$j = {\n  'eventsPropagation': false,\n  'eventsToStop': null,\n  'dx': 0,\n  'dy': 0,\n  'autoPan': false,\n  'autoPanDuration': 600,\n  'single': true,\n  'animation': 'scale',\n  'animationOnHide': false,\n  'animationDuration': 500,\n  'pitchWithMap': false,\n  'rotateWithMap': false,\n  'visible': true,\n  'roundPoint': false\n};\n\nvar UIComponent = function (_Eventable) {\n  _inheritsLoose(UIComponent, _Eventable);\n\n  function UIComponent(options) {\n    return _Eventable.call(this, options) || this;\n  }\n\n  var _proto = UIComponent.prototype;\n\n  _proto.addTo = function addTo(owner) {\n    this._owner = owner;\n\n    this._switchEvents('on');\n\n    if (this.onAdd) {\n      this.onAdd();\n    }\n\n    this.fire('add');\n    return this;\n  };\n\n  _proto.getMap = function getMap() {\n    if (!this._owner) {\n      return null;\n    }\n\n    if (this._owner.getBaseLayer) {\n      return this._owner;\n    }\n\n    return this._owner.getMap();\n  };\n\n  _proto.show = function show(coordinate) {\n    var map = this.getMap();\n\n    if (!map) {\n      return this;\n    }\n\n    this.options['visible'] = true;\n    coordinate = coordinate || this._coordinate || this._owner.getCenter();\n    var visible = this.isVisible();\n    this.fire('showstart');\n\n    var container = this._getUIContainer();\n\n    this._coordinate = coordinate;\n\n    this._removePrevDOM();\n\n    if (!this._mapEventsOn) {\n      this._switchMapEvents('on');\n    }\n\n    var dom = this.__uiDOM = this.buildOn(map);\n    dom['eventsPropagation'] = this.options['eventsPropagation'];\n\n    this._observerDomSize(dom);\n\n    if (!dom) {\n      this.fire('showend');\n      return this;\n    }\n\n    this._measureSize(dom);\n\n    if (this._singleton()) {\n      dom._uiComponent = this;\n      map[this._uiDomKey()] = dom;\n    }\n\n    this._setPosition();\n\n    dom.style[TRANSITION] = null;\n    container.appendChild(dom);\n\n    var anim = this._getAnimation();\n\n    if (visible) {\n      anim.ok = false;\n    }\n\n    if (anim.ok) {\n      if (anim.fade) {\n        dom.style.opacity = 0;\n      }\n\n      if (anim.scale) {\n        if (this.getTransformOrigin) {\n          var origin = this.getTransformOrigin();\n          dom.style[TRANSFORMORIGIN] = origin;\n        }\n\n        dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(0)';\n      }\n    }\n\n    if (!this.isSupportZoomFilter()) {\n      dom.style.display = '';\n    }\n\n    if (this.options['eventsToStop']) {\n      on(dom, this.options['eventsToStop'], stopPropagation);\n    }\n\n    if (this.options['autoPan']) {\n      this._autoPan();\n    }\n\n    var transition = anim.transition;\n\n    if (anim.ok && transition) {\n      dom.offsetHeight;\n\n      if (transition) {\n        dom.style[TRANSITION] = transition;\n      }\n\n      if (anim.fade) {\n        dom.style.opacity = 1;\n      }\n\n      if (anim.scale) {\n        dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(1)';\n      }\n    }\n\n    this.fire('showend');\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    var _this = this;\n\n    if (!this.getDOM()) {\n      return this;\n    }\n\n    this.options['visible'] = false;\n\n    var anim = this._getAnimation(),\n        dom = this.getDOM();\n\n    if (!this.options['animationOnHide']) {\n      anim.ok = false;\n    }\n\n    if (!anim.ok) {\n      dom.style.display = 'none';\n      this.fire('hide');\n    } else {\n      dom.offsetHeight;\n      dom.style[TRANSITION] = anim.transition;\n      setTimeout(function () {\n        dom.style.display = 'none';\n\n        _this.fire('hide');\n      }, this.options['animationDuration']);\n    }\n\n    if (anim.fade) {\n      dom.style.opacity = 0;\n    }\n\n    if (anim.scale) {\n      dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(0)';\n    }\n\n    this._switchMapEvents('off');\n\n    return this;\n  };\n\n  _proto.isVisible = function isVisible() {\n    if (!this.options['visible']) {\n      return false;\n    }\n\n    var dom = this.getDOM();\n    return this.getMap() && dom && dom.parentNode && dom.style.display !== 'none';\n  };\n\n  _proto.remove = function remove() {\n    delete this._mapEventsOn;\n\n    if (!this._owner) {\n      return this;\n    }\n\n    this.hide();\n\n    this._switchEvents('off');\n\n    if (this.onRemove) {\n      this.onRemove();\n    }\n\n    if (!this._singleton() && this.__uiDOM) {\n      this._removePrevDOM();\n    }\n\n    delete this._owner;\n    this.fire('remove');\n    return this;\n  };\n\n  _proto.getSize = function getSize() {\n    if (this._domContentRect && this._size) {\n      this._size.width = this._domContentRect.width;\n      this._size.height = this._domContentRect.height;\n    }\n\n    if (this._size) {\n      return this._size.copy();\n    } else {\n      return null;\n    }\n  };\n\n  _proto.getOwner = function getOwner() {\n    return this._owner;\n  };\n\n  _proto.getDOM = function getDOM() {\n    return this.__uiDOM;\n  };\n\n  _proto._roundPoint = function _roundPoint(point) {\n    if (this.options.roundPoint) {\n      point = point._round();\n    }\n\n    return point;\n  };\n\n  _proto.getPosition = function getPosition() {\n    if (!this.getMap()) {\n      return null;\n    }\n\n    var p = this._roundPoint(this._getViewPoint());\n\n    if (this.getOffset) {\n      var o = this._roundPoint(this.getOffset());\n\n      if (o) {\n        p._add(o);\n      }\n    }\n\n    return p;\n  };\n\n  _proto._getAnimation = function _getAnimation() {\n    var anim = {\n      'fade': false,\n      'scale': false\n    };\n    var animations = this.options['animation'] ? this.options['animation'].split(',') : [];\n\n    for (var i = 0; i < animations.length; i++) {\n      var trimed = trim(animations[i]);\n\n      if (trimed === 'fade') {\n        anim.fade = true;\n      } else if (trimed === 'scale') {\n        anim.scale = true;\n      }\n    }\n\n    var transition = null;\n\n    if (anim.fade) {\n      transition = 'opacity ' + this.options['animationDuration'] + 'ms';\n    }\n\n    if (anim.scale) {\n      transition = transition ? transition + ',' : '';\n      transition += TRANSFORM + ' ' + this.options['animationDuration'] + 'ms';\n    }\n\n    anim.transition = transition;\n    anim.ok = transition !== null;\n    return anim;\n  };\n\n  _proto._getViewPoint = function _getViewPoint() {\n    var alt = 0;\n\n    if (this._owner && this._owner.getAltitude) {\n      var altitude = this._owner.getAltitude();\n\n      if (altitude > 0) {\n        alt = this._meterToPoint(this._coordinate, altitude);\n      }\n    }\n\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, alt)._add(this.options['dx'], this.options['dy']);\n  };\n\n  _proto._meterToPoint = function _meterToPoint(center, altitude) {\n    var map = this.getMap();\n    return map.distanceToPoint(altitude, 0, undefined, center).x * sign(altitude);\n  };\n\n  _proto._autoPan = function _autoPan() {\n    var map = this.getMap(),\n        dom = this.getDOM();\n\n    if (map.isMoving()) {\n      return;\n    }\n\n    var point = this._getViewPoint()._round();\n\n    var mapWidth = map.width;\n    var mapHeight = map.height;\n    var containerPoint0 = map.viewPointToContainerPoint(point);\n    var offset = this.getOffset();\n    var containerPoint = containerPoint0.add(offset);\n\n    var prjCoord = map._viewPointToPrj(point);\n\n    var domWidth = parseInt(dom.clientWidth);\n    var domHeight = parseInt(dom.clientHeight);\n    var margin = 50;\n    var left = 0,\n        top = 0;\n\n    if (containerPoint.x < 0) {\n      left = -containerPoint.x + margin;\n    } else if (containerPoint.x + domWidth > mapWidth) {\n      left = -(containerPoint.x + domWidth - mapWidth) - margin;\n    }\n\n    if (containerPoint.y < 0) {\n      top = -containerPoint.y + margin;\n    } else if (containerPoint.y + domHeight > mapHeight) {\n      top = mapHeight - (containerPoint.y + domHeight) - margin;\n    }\n\n    if (top !== 0 || left !== 0) {\n      var newContainerPoint = containerPoint0.add(left, top);\n\n      var t = map._containerPointToPoint(newContainerPoint)._sub(map._prjToPoint(map._getPrjCenter()));\n\n      var target = map._pointToPrj(map._prjToPoint(prjCoord).sub(t));\n\n      map._panAnimation(target);\n    }\n  };\n\n  _proto._measureSize = function _measureSize(dom) {\n    var container = this._getUIContainer();\n\n    dom.style.position = 'absolute';\n    dom.style.left = -99999 + 'px';\n    var anchor = dom.style.bottom ? 'bottom' : 'top';\n    dom.style[anchor] = -99999 + 'px';\n    dom.style.display = '';\n    container.appendChild(dom);\n    this._size = new Size(dom.clientWidth, dom.clientHeight);\n    dom.style.display = 'none';\n    dom.style.left = '0px';\n    dom.style[anchor] = '0px';\n    return this._size;\n  };\n\n  _proto._removePrevDOM = function _removePrevDOM() {\n    if (this.onDomRemove) {\n      this.onDomRemove();\n    }\n\n    var eventsToStop = this.options['eventsToStop'];\n\n    if (this._singleton()) {\n      var map = this.getMap(),\n          key = this._uiDomKey();\n\n      if (map[key]) {\n        if (eventsToStop) {\n          off(map[key], eventsToStop, stopPropagation);\n        }\n\n        removeDomNode(map[key]);\n\n        if (map[key]._uiComponent && !this.hideDom) {\n          map[key]._uiComponent._switchMapEvents('off');\n        }\n\n        delete map[key];\n      }\n\n      delete this.__uiDOM;\n    } else if (this.__uiDOM) {\n      if (eventsToStop) {\n        off(this.__uiDOM, eventsToStop, stopPropagation);\n      }\n\n      removeDomNode(this.__uiDOM);\n      delete this.__uiDOM;\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n\n      delete this._resizeObserver;\n      delete this._domContentRect;\n    }\n  };\n\n  _proto._uiDomKey = function _uiDomKey() {\n    return '__ui_' + this._getClassName();\n  };\n\n  _proto._singleton = function _singleton() {\n    return this.options['single'];\n  };\n\n  _proto._getUIContainer = function _getUIContainer() {\n    return this.getMap()._panels['ui'];\n  };\n\n  _proto._getClassName = function _getClassName() {\n    return 'UIComponent';\n  };\n\n  _proto._switchMapEvents = function _switchMapEvents(to) {\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    this._mapEventsOn = to === 'on';\n\n    var events = this._getDefaultEvents();\n\n    if (this.getEvents) {\n      extend(events, this.getEvents());\n    }\n\n    if (events) {\n      for (var p in events) {\n        if (events.hasOwnProperty(p)) {\n          map[to](p, events[p], this);\n        }\n      }\n    }\n  };\n\n  _proto._switchEvents = function _switchEvents(to) {\n    var ownerEvents = this._getOwnerEvents();\n\n    if (this._owner) {\n      for (var p in ownerEvents) {\n        if (ownerEvents.hasOwnProperty(p)) {\n          this._owner[to](p, ownerEvents[p], this);\n        }\n      }\n    }\n  };\n\n  _proto._getDefaultEvents = function _getDefaultEvents() {\n    return {\n      'zooming rotate pitch': this.onEvent,\n      'zoomend': this.onZoomEnd,\n      'moving': this.onMoving,\n      'resize': this.onResize\n    };\n  };\n\n  _proto._getOwnerEvents = function _getOwnerEvents() {\n    var events = {};\n\n    if (this._owner && this._owner instanceof Geometry) {\n      events.positionchange = this.onGeometryPositionChange;\n      events.symbolchange = this.onGeometryPositionChange;\n    }\n\n    if (this.getOwnerEvents) {\n      extend(events, this.getOwnerEvents());\n    }\n\n    return events;\n  };\n\n  _proto.onGeometryPositionChange = function onGeometryPositionChange(param) {\n    if (this._owner && this.isVisible()) {\n      this.show(param['target'].getCenter());\n    }\n  };\n\n  _proto.onMoving = function onMoving() {\n    if (this.isVisible() && this.getMap().isTransforming()) {\n      this._updatePosition();\n    }\n  };\n\n  _proto.onEvent = function onEvent() {\n    if (this.isVisible()) {\n      this._updatePosition();\n    }\n  };\n\n  _proto.onZoomEnd = function onZoomEnd() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n\n  _proto.onResize = function onResize() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n\n  _proto.onDomSizeChange = function onDomSizeChange() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n\n  _proto._updatePosition = function _updatePosition() {\n    var renderer = this.getMap()._getRenderer();\n\n    renderer.callInNextFrame(this._setPosition.bind(this));\n  };\n\n  _proto._setPosition = function _setPosition() {\n    var dom = this.getDOM();\n    if (!dom) return;\n    dom.style[TRANSITION] = null;\n    var p = this.getPosition();\n    this._pos = p;\n    dom.style[TRANSFORM] = this._toCSSTranslate(p) + ' scale(1)';\n  };\n\n  _proto._toCSSTranslate = function _toCSSTranslate(p) {\n    if (!p) {\n      return '';\n    }\n\n    if (Browser$1.any3d) {\n      var map = this.getMap(),\n          bearing = map ? map.getBearing() : 0,\n          pitch = map ? map.getPitch() : 0;\n      var r = '';\n\n      if (this.options['pitchWithMap'] && pitch) {\n        r += \" rotateX(\" + Math.round(pitch) + \"deg)\";\n      }\n\n      if (this.options['rotateWithMap'] && bearing) {\n        r += \" rotateZ(\" + Math.round(-bearing) + \"deg)\";\n      }\n\n      return 'translate3d(' + p.x + 'px,' + p.y + 'px, 0px)' + r;\n    } else {\n      return 'translate(' + p.x + 'px,' + p.y + 'px)';\n    }\n  };\n\n  _proto._observerDomSize = function _observerDomSize(dom) {\n    var _this2 = this;\n\n    if (!dom || !Browser$1.resizeObserver || this._resizeObserver) {\n      return this;\n    }\n\n    this._resizeObserver = new ResizeObserver(function (entries) {\n      if (entries.length) {\n        _this2._domContentRect = entries[0].contentRect;\n      } else {\n        delete _this2._domContentRect;\n      }\n\n      if (_this2.onDomSizeChange) {\n        _this2.onDomSizeChange();\n      }\n    });\n\n    this._resizeObserver.observe(dom);\n\n    return this;\n  };\n\n  _proto.isSupportZoomFilter = function isSupportZoomFilter() {\n    return false;\n  };\n\n  UIComponent.isSupport = function isSupport(owner) {\n    if (owner && isFunction(owner.on) && isFunction(owner.off) && isFunction(owner.getCenter)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return UIComponent;\n}(Eventable(Class));\n\nUIComponent.mergeOptions(options$j);\n\nvar options$k = {\n  'containerClass': null,\n  'eventsPropagation': true,\n  'draggable': false,\n  'single': false,\n  'content': null,\n  'altitude': 0,\n  'minZoom': 0,\n  'maxZoom': null\n};\nvar domEvents = 'mousedown ' + 'mouseup ' + 'mouseenter ' + 'mouseover ' + 'mouseout ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'keypress ' + 'touchstart ' + 'touchmove ' + 'touchend';\n\nvar UIMarker = function (_Handlerable) {\n  _inheritsLoose(UIMarker, _Handlerable);\n\n  function UIMarker(coordinate, options) {\n    var _this;\n\n    _this = _Handlerable.call(this, options) || this;\n    _this._markerCoord = new Coordinate(coordinate);\n    return _this;\n  }\n\n  var _proto = UIMarker.prototype;\n\n  _proto._getClassName = function _getClassName() {\n    return 'UIMarker';\n  };\n\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    this._markerCoord = coordinates;\n    this.fire('positionchange');\n\n    if (this.isVisible()) {\n      this._coordinate = this._markerCoord;\n\n      this._setPosition();\n    }\n\n    return this;\n  };\n\n  _proto.getCoordinates = function getCoordinates() {\n    return this._markerCoord;\n  };\n\n  _proto.getCenter = function getCenter() {\n    return this.getCoordinates();\n  };\n\n  _proto.getAltitude = function getAltitude() {\n    return this.options.altitude || 0;\n  };\n\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n\n    if (this.isVisible()) {\n      this.show();\n    }\n\n    return this;\n  };\n\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n\n  _proto.onAdd = function onAdd() {\n    this.show();\n  };\n\n  _proto.show = function show() {\n    return _Handlerable.prototype.show.call(this, this._markerCoord);\n  };\n\n  _proto.flash = function flash$$1(interval, count, cb, context) {\n    return flash.call(this, interval, count, cb, context);\n  };\n\n  _proto.buildOn = function buildOn() {\n    var dom;\n\n    if (isString(this.options['content'])) {\n      dom = createEl('div');\n      dom.innerHTML = this.options['content'];\n    } else {\n      dom = this.options['content'];\n    }\n\n    if (this.options['containerClass']) {\n      dom.className = this.options['containerClass'];\n    }\n\n    this._registerDOMEvents(dom);\n\n    return dom;\n  };\n\n  _proto.getOffset = function getOffset() {\n    var size = this.getSize();\n    return new Point(-size.width / 2, -size.height / 2);\n  };\n\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    return 'center center';\n  };\n\n  _proto.onDomRemove = function onDomRemove() {\n    var dom = this.getDOM();\n\n    this._removeDOMEvents(dom);\n  };\n\n  _proto.isDragging = function isDragging() {\n    if (this['draggable']) {\n      return this['draggable'].isDragging();\n    }\n\n    return false;\n  };\n\n  _proto._registerDOMEvents = function _registerDOMEvents(dom) {\n    on(dom, domEvents, this._onDomEvents, this);\n  };\n\n  _proto._onDomEvents = function _onDomEvents(e) {\n    var event = this.getMap()._parseEvent(e, e.type);\n\n    this.fire(e.type, event);\n  };\n\n  _proto._removeDOMEvents = function _removeDOMEvents(dom) {\n    off(dom, domEvents, this._onDomEvents, this);\n  };\n\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var map = this.getMap();\n    var containerPoint = map.coordToContainerPoint(this.getCoordinates());\n    var size = this.getSize(),\n        width = size.width,\n        height = size.height;\n    var anchors = [map.containerPointToCoordinate(containerPoint.add(-width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(0, height / 2)), map.containerPointToCoordinate(containerPoint.add(0, -height / 2))];\n    return anchors;\n  };\n\n  _proto._getViewPoint = function _getViewPoint() {\n    var alt = 0;\n\n    if (this._owner) {\n      var altitude = this.getAltitude();\n\n      if (altitude > 0) {\n        alt = this._meterToPoint(this._coordinate, altitude);\n      }\n    }\n\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, alt)._add(this.options['dx'], this.options['dy']);\n  };\n\n  _proto._getDefaultEvents = function _getDefaultEvents() {\n    return extend({}, _Handlerable.prototype._getDefaultEvents.call(this), {\n      'zooming zoomend': this.onZoomFilter\n    });\n  };\n\n  _proto._setPosition = function _setPosition() {\n    this.onZoomFilter();\n\n    _Handlerable.prototype._setPosition.call(this);\n  };\n\n  _proto.onZoomFilter = function onZoomFilter() {\n    var dom = this.getDOM();\n    if (!dom) return;\n\n    if (!this.isVisible() && dom.style.display !== 'none') {\n      dom.style.display = 'none';\n    } else if (this.isVisible() && dom.style.display === 'none') {\n      dom.style.display = '';\n    }\n  };\n\n  _proto.isVisible = function isVisible() {\n    var map = this.getMap();\n\n    if (!map) {\n      return false;\n    }\n\n    if (!this.options['visible']) {\n      return false;\n    }\n\n    var zoom = map.getZoom();\n    var _this$options = this.options,\n        minZoom = _this$options.minZoom,\n        maxZoom = _this$options.maxZoom;\n\n    if (!isNil(minZoom) && zoom < minZoom || !isNil(maxZoom) && zoom > maxZoom) {\n      return false;\n    }\n\n    var dom = this.getDOM();\n    return dom && true;\n  };\n\n  _proto.isSupportZoomFilter = function isSupportZoomFilter() {\n    return true;\n  };\n\n  return UIMarker;\n}(Handlerable(UIComponent));\n\nUIMarker.mergeOptions(options$k);\nvar EVENTS$1 = Browser$1.touch ? 'touchstart mousedown' : 'mousedown';\n\nvar UIMarkerDragHandler = function (_Handler) {\n  _inheritsLoose(UIMarkerDragHandler, _Handler);\n\n  function UIMarkerDragHandler(target) {\n    return _Handler.call(this, target) || this;\n  }\n\n  var _proto2 = UIMarkerDragHandler.prototype;\n\n  _proto2.addHooks = function addHooks() {\n    this.target.on(EVENTS$1, this._startDrag, this);\n  };\n\n  _proto2.removeHooks = function removeHooks() {\n    this.target.off(EVENTS$1, this._startDrag, this);\n  };\n\n  _proto2._startDrag = function _startDrag(param) {\n    var domEvent = param['domEvent'];\n\n    if (domEvent.touches && domEvent.touches.length > 1 || domEvent.button === 2) {\n      return;\n    }\n\n    if (this.isDragging()) {\n      return;\n    }\n\n    this.target.on('click', this._endDrag, this);\n    this._lastCoord = param['coordinate'];\n    this._lastPoint = param['containerPoint'];\n\n    this._prepareDragHandler();\n\n    this._dragHandler.onMouseDown(param['domEvent']);\n\n    this.target.fire('dragstart', param);\n  };\n\n  _proto2._prepareDragHandler = function _prepareDragHandler() {\n    this._dragHandler = new DragHandler(this.target.getDOM(), {\n      'cancelOn': this._cancelOn.bind(this),\n      'ignoreMouseleave': true\n    });\n\n    this._dragHandler.on('mousedown', this._onMouseDown, this);\n\n    this._dragHandler.on('dragging', this._dragging, this);\n\n    this._dragHandler.on('mouseup', this._endDrag, this);\n\n    this._dragHandler.enable();\n  };\n\n  _proto2._cancelOn = function _cancelOn(domEvent) {\n    var target = domEvent.srcElement || domEvent.target,\n        tagName = target.tagName.toLowerCase();\n\n    if (tagName === 'button' || tagName === 'input' || tagName === 'select' || tagName === 'option' || tagName === 'textarea') {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto2._onMouseDown = function _onMouseDown(param) {\n    stopPropagation(param['domEvent']);\n  };\n\n  _proto2._dragging = function _dragging(param) {\n    var target = this.target,\n        map = target.getMap(),\n        eventParam = map._parseEvent(param['domEvent']),\n        domEvent = eventParam['domEvent'];\n\n    if (domEvent.touches && domEvent.touches.length > 1) {\n      return;\n    }\n\n    if (!this._isDragging) {\n      this._isDragging = true;\n      return;\n    }\n\n    var coord = eventParam['coordinate'],\n        point = eventParam['containerPoint'];\n\n    if (!this._lastCoord) {\n      this._lastCoord = coord;\n    }\n\n    if (!this._lastPoint) {\n      this._lastPoint = point;\n    }\n\n    var coordOffset = coord.sub(this._lastCoord),\n        pointOffset = point.sub(this._lastPoint);\n    this._lastCoord = coord;\n    this._lastPoint = point;\n    this.target.setCoordinates(this.target.getCoordinates().add(coordOffset));\n    eventParam['coordOffset'] = coordOffset;\n    eventParam['pointOffset'] = pointOffset;\n    target.fire('dragging', eventParam);\n  };\n\n  _proto2._endDrag = function _endDrag(param) {\n    var target = this.target,\n        map = target.getMap();\n\n    if (this._dragHandler) {\n      target.off('click', this._endDrag, this);\n\n      this._dragHandler.disable();\n\n      delete this._dragHandler;\n    }\n\n    delete this._lastCoord;\n    delete this._lastPoint;\n    this._isDragging = false;\n\n    if (!map) {\n      return;\n    }\n\n    var eventParam = map._parseEvent(param['domEvent']);\n\n    target.fire('dragend', eventParam);\n  };\n\n  _proto2.isDragging = function isDragging() {\n    if (!this._isDragging) {\n      return false;\n    }\n\n    return true;\n  };\n\n  return UIMarkerDragHandler;\n}(Handler$1);\n\nUIMarker.addInitHook('addHandler', 'draggable', UIMarkerDragHandler);\n\nvar PROPERTY_PATTERN = /\\{ *([\\w_]+) *\\}/g;\nvar options$l = {\n  'containerClass': 'maptalks-msgBox',\n  'autoPan': true,\n  'autoCloseOn': null,\n  'autoOpenOn': 'click',\n  'width': 'auto',\n  'minHeight': 120,\n  'custom': false,\n  'title': null,\n  'content': null,\n  'enableTemplate': false\n};\nvar EMPTY_SIZE = new Size(0, 0);\n\nvar InfoWindow = function (_UIComponent) {\n  _inheritsLoose(InfoWindow, _UIComponent);\n\n  function InfoWindow() {\n    return _UIComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = InfoWindow.prototype;\n\n  _proto._getClassName = function _getClassName() {\n    return 'InfoWindow';\n  };\n\n  _proto.addTo = function addTo(owner) {\n    if (owner instanceof Geometry) {\n      if (owner.getInfoWindow() && owner.getInfoWindow() !== this) {\n        owner.removeInfoWindow();\n      }\n\n      owner._infoWindow = this;\n    }\n\n    return _UIComponent.prototype.addTo.call(this, owner);\n  };\n\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n\n    if (this.isVisible()) {\n      this.show(this._coordinate);\n    }\n\n    return this;\n  };\n\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n\n  _proto.setTitle = function setTitle(title) {\n    var old = title;\n    this.options['title'] = title;\n    this.fire('contentchange', {\n      'old': old,\n      'new': title\n    });\n\n    if (this.isVisible()) {\n      this.show(this._coordinate);\n    }\n\n    return this;\n  };\n\n  _proto.getTitle = function getTitle() {\n    return this.options['title'];\n  };\n\n  _proto.buildOn = function buildOn() {\n    if (this.options['custom']) {\n      if (isString(this.options['content'])) {\n        var _dom = createEl('div');\n\n        _dom.innerHTML = this.options['content'];\n\n        this._replaceTemplate(_dom);\n\n        return _dom;\n      } else {\n        this._replaceTemplate(this.options['content']);\n\n        return this.options['content'];\n      }\n    }\n\n    var dom = createEl('div');\n\n    if (this.options['containerClass']) {\n      dom.className = this.options['containerClass'];\n    }\n\n    var width = this._getWindowWidth();\n\n    dom.style.width = isNumber(width) ? width + 'px' : 'auto';\n    dom.style.bottom = '0px';\n    var content = '<em class=\"maptalks-ico\"></em>';\n\n    if (this.options['title']) {\n      content += '<h2>' + this.options['title'] + '</h2>';\n    }\n\n    content += '<a href=\"javascript:void(0);\" class=\"maptalks-close\"></a><div class=\"maptalks-msgContent\"></div>';\n    dom.innerHTML = content;\n\n    this._replaceTemplate(dom);\n\n    var msgContent = dom.querySelector('.maptalks-msgContent');\n\n    if (isString(this.options['content'])) {\n      msgContent.innerHTML = this.options['content'];\n    } else {\n      msgContent.appendChild(this.options['content']);\n    }\n\n    this._onCloseBtnClick = this.hide.bind(this);\n    var closeBtn = dom.querySelector('.maptalks-close');\n    addDomEvent(closeBtn, 'click touchend', this._onCloseBtnClick);\n\n    this._replaceTemplate(msgContent);\n\n    return dom;\n  };\n\n  _proto._replaceTemplate = function _replaceTemplate(dom) {\n    if (this.options['enableTemplate'] && this._owner && this._owner.getProperties && dom && dom.innerHTML) {\n      var properties = this._owner.getProperties() || {};\n\n      if (isObject(properties)) {\n        var html = dom.innerHTML;\n        dom.innerHTML = html.replace(PROPERTY_PATTERN, function (str, key) {\n          return properties[key];\n        });\n      }\n    }\n\n    return this;\n  };\n\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    var size = this.getSize();\n    return size.width / 2 + 'px bottom';\n  };\n\n  _proto.getOffset = function getOffset() {\n    var size = this.getSize();\n    var o = new Point(-size['width'] / 2, 0);\n\n    if (!this.options['custom']) {\n      o._sub(4, 12);\n    } else {\n      o._sub(0, size['height']);\n    }\n\n    var owner = this.getOwner();\n\n    if (owner instanceof Marker || owner instanceof MultiPoint) {\n      var painter, markerSize;\n\n      if (owner instanceof Marker) {\n        painter = owner._getPainter();\n        markerSize = owner.getSize();\n      } else {\n        var children = owner.getGeometries();\n\n        if (!children || !children.length) {\n          return o;\n        }\n\n        painter = children[0]._getPainter();\n        markerSize = children[0].getSize();\n      }\n\n      if (!markerSize) {\n        markerSize = EMPTY_SIZE;\n      }\n\n      if (painter) {\n        var fixExtent = painter.getFixedExtent();\n\n        o._add(fixExtent.xmax - markerSize.width / 2, fixExtent.ymin);\n      } else {\n        o._add(0, -markerSize.height);\n      }\n    }\n\n    return o;\n  };\n\n  _proto.show = function show(coordinate) {\n    if (!this.getMap()) {\n      return this;\n    }\n\n    if (!this.getMap().options['enableInfoWindow']) {\n      return this;\n    }\n\n    return _UIComponent.prototype.show.call(this, coordinate);\n  };\n\n  _proto.getEvents = function getEvents() {\n    if (!this.options['autoCloseOn']) {\n      return null;\n    }\n\n    var events = {};\n    events[this.options['autoCloseOn']] = this.hide;\n    return events;\n  };\n\n  _proto.getOwnerEvents = function getOwnerEvents() {\n    var owner = this.getOwner();\n\n    if (!this.options['autoOpenOn'] || !owner) {\n      return null;\n    }\n\n    var events = {};\n    events[this.options['autoOpenOn']] = this._onAutoOpen;\n    return events;\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.onDomRemove();\n  };\n\n  _proto.onDomRemove = function onDomRemove() {\n    if (this._onCloseBtnClick) {\n      var dom = this.getDOM();\n      var closeBtn = dom.childNodes[2];\n      removeDomEvent(closeBtn, 'click touchend', this._onCloseBtnClick);\n      delete this._onCloseBtnClick;\n    }\n  };\n\n  _proto._onAutoOpen = function _onAutoOpen(e) {\n    var _this = this;\n\n    var owner = this.getOwner();\n    setTimeout(function () {\n      if (owner instanceof Marker || owner instanceof UIComponent) {\n        _this.show(owner.getCoordinates());\n      } else if (owner instanceof MultiPoint) {\n        _this.show(owner.findClosest(e.coordinate));\n      } else if (owner instanceof LineString || owner instanceof MultiLineString) {\n        if (_this.getMap().getScale() >= 8) {\n          e.coordinate = _this._rectifyMouseCoordinte(owner, e.coordinate);\n        }\n\n        _this.show(e.coordinate);\n      } else {\n        _this.show(e.coordinate);\n      }\n    }, 1);\n  };\n\n  _proto._rectifyMouseCoordinte = function _rectifyMouseCoordinte(owner, mouseCoordinate) {\n    var _this2 = this;\n\n    if (owner instanceof LineString) {\n      return this._rectifyLineStringMouseCoordinate(owner, mouseCoordinate).coordinate;\n    } else if (owner instanceof MultiLineString) {\n      return owner.getGeometries().map(function (lineString) {\n        return _this2._rectifyLineStringMouseCoordinate(lineString, mouseCoordinate);\n      }).sort(function (a, b) {\n        return a.dis - b.dis;\n      })[0].coordinate;\n    }\n\n    return mouseCoordinate;\n  };\n\n  _proto._rectifyLineStringMouseCoordinate = function _rectifyLineStringMouseCoordinate(lineString, mouseCoordinate) {\n    var _this3 = this;\n\n    var pts = lineString.getCoordinates().map(function (coordinate) {\n      return _this3.getMap().coordToContainerPoint(coordinate);\n    });\n    var mousePt = this.getMap().coordToContainerPoint(mouseCoordinate);\n    var minDis = Infinity,\n        coordinateIndex = -1;\n\n    for (var i = 0, len = pts.length; i < len; i++) {\n      var pt = pts[i];\n      var dis = mousePt.distanceTo(pt);\n\n      if (dis < minDis) {\n        minDis = dis;\n        coordinateIndex = i;\n      }\n    }\n\n    var filterPts = [];\n\n    if (coordinateIndex === 0) {\n      filterPts.push(pts[0], pts[1]);\n    } else if (coordinateIndex === pts.length - 1) {\n      filterPts.push(pts[coordinateIndex - 1], pts[coordinateIndex]);\n    } else {\n      filterPts.push(pts[coordinateIndex - 1], pts[coordinateIndex], pts[coordinateIndex + 1]);\n    }\n\n    var xys = [];\n\n    var _this$getMap$getSize = this.getMap().getSize(),\n        width = _this$getMap$getSize.width,\n        height = _this$getMap$getSize.height;\n\n    for (var _i = 0, _len = filterPts.length - 1; _i < _len; _i++) {\n      var pt1 = filterPts[_i],\n          pt2 = filterPts[_i + 1];\n\n      if (pt1.x === pt2.x) {\n        var miny = Math.max(0, Math.min(pt1.y, pt2.y));\n        var maxy = Math.min(height, Math.max(pt1.y, pt2.y));\n\n        for (var y = miny; y <= maxy; y++) {\n          xys.push(new Point(pt1.x, y));\n        }\n      } else {\n        var k = (pt2.y - pt1.y) / (pt2.x - pt1.x);\n        var minx = Math.max(0, Math.min(pt1.x, pt2.x));\n        var maxx = Math.min(width, Math.max(pt1.x, pt2.x));\n\n        for (var x = minx; x <= maxx; x++) {\n          var _y = k * (x - pt1.x) + pt1.y;\n\n          xys.push(new Point(x, _y));\n        }\n      }\n    }\n\n    var minPtDis = Infinity,\n        ptIndex = -1;\n\n    for (var _i2 = 0, _len2 = xys.length; _i2 < _len2; _i2++) {\n      var _pt = xys[_i2];\n\n      var _dis = mousePt.distanceTo(_pt);\n\n      if (_dis < minPtDis) {\n        minPtDis = _dis;\n        ptIndex = _i2;\n      }\n    }\n\n    return {\n      dis: minPtDis,\n      coordinate: ptIndex < 0 ? mouseCoordinate : this.getMap().containerPointToCoord(xys[ptIndex])\n    };\n  };\n\n  _proto._getWindowWidth = function _getWindowWidth() {\n    var defaultWidth = options$l.width;\n    var width = this.options['width'];\n\n    if (!width) {\n      width = defaultWidth;\n    }\n\n    return width;\n  };\n\n  return InfoWindow;\n}(UIComponent);\n\nInfoWindow.mergeOptions(options$l);\n\nvar HIDEDOMEVENTS = 'remove hide shapechange positionchange dragend animatestart';\nvar options$m = {\n  'width': 0,\n  'height': 0,\n  'animation': 'fade',\n  'containerClass': 'maptalks-tooltip',\n  'showTimeout': 400\n};\n\nvar ToolTip = function (_UIComponent) {\n  _inheritsLoose(ToolTip, _UIComponent);\n\n  var _proto = ToolTip.prototype;\n\n  _proto._getClassName = function _getClassName() {\n    return 'ToolTip';\n  };\n\n  function ToolTip(content, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _UIComponent.call(this, options) || this;\n    _this._content = content;\n    return _this;\n  }\n\n  _proto.addTo = function addTo(owner) {\n    if (ToolTip.isSupport(owner)) {\n      owner.on('mousemove', this.onMouseMove, this);\n      owner.on('mouseout', this.onMouseOut, this);\n      owner.on(HIDEDOMEVENTS, this.hideDom, this);\n      return _UIComponent.prototype.addTo.call(this, owner);\n    } else {\n      throw new Error('Invalid geometry or UIMarker the tooltip is added to.');\n    }\n  };\n\n  _proto.setStyle = function setStyle$$1(cssName) {\n    this.options.containerClass = cssName;\n    return this;\n  };\n\n  _proto.getStyle = function getStyle() {\n    return this.options.containerClass;\n  };\n\n  _proto.getContent = function getContent() {\n    return this._content;\n  };\n\n  _proto.buildOn = function buildOn() {\n    var dom = createEl('div');\n    var options = this.options || {};\n\n    if (options.height) {\n      dom.style.height = options.height + 'px';\n    }\n\n    if (options.width) {\n      dom.style.width = options.width + 'px';\n    }\n\n    var cssName = options.containerClass || options.cssName;\n\n    if (!cssName && options.height) {\n      dom.style.lineHeight = options.height + 'px';\n    }\n\n    dom.innerHTML = \"<div class=\\\"\" + cssName + \"\\\">\" + this._content + \"</div>\";\n    return dom;\n  };\n\n  _proto.onMouseOut = function onMouseOut() {\n    clearTimeout(this._timeout);\n\n    if (this.isVisible()) {\n      this._removePrevDOM();\n    }\n\n    this._switchMapEvents('off');\n  };\n\n  _proto.onMouseMove = function onMouseMove(e) {\n    var _this2 = this;\n\n    clearTimeout(this._timeout);\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    var coord = map.locateByPoint(e.coordinate, -5, 25);\n\n    if (this.options['showTimeout'] === 0) {\n      this.show(coord);\n    } else {\n      this._timeout = setTimeout(function () {\n        if (map) {\n          _this2.show(coord);\n        }\n      }, this.options['showTimeout']);\n    }\n  };\n\n  _proto.onRemove = function onRemove() {\n    clearTimeout(this._timeout);\n\n    if (this._owner) {\n      this._owner.off('mouseover', this.onMouseOver, this);\n\n      this._owner.off('mouseout', this.onMouseOut, this);\n\n      this._owner.off(HIDEDOMEVENTS, this.hideDom, this);\n    }\n  };\n\n  _proto.hideDom = function hideDom() {\n    return this.hide();\n  };\n\n  _proto.onEvent = function onEvent() {\n    _UIComponent.prototype.onEvent.call(this);\n\n    this.hideDom();\n    return this;\n  };\n\n  _proto._getViewPoint = function _getViewPoint() {\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, 0)._add(this.options['dx'], this.options['dy']);\n  };\n\n  return ToolTip;\n}(UIComponent);\n\nToolTip.mergeOptions(options$m);\n\nvar defaultOptions = {\n  'containerClass': 'maptalks-menu',\n  'animation': null,\n  'animationDelay': 10,\n  'animationOnHide': false,\n  'autoPan': false,\n  'width': 160,\n  'maxHeight': 0,\n  'custom': false,\n  'items': []\n};\n\nvar Menu = function (_UIComponent) {\n  _inheritsLoose(Menu, _UIComponent);\n\n  function Menu(options) {\n    return _UIComponent.call(this, options) || this;\n  }\n\n  var _proto = Menu.prototype;\n\n  _proto._getClassName = function _getClassName() {\n    return 'Menu';\n  };\n\n  _proto.addTo = function addTo(owner) {\n    if (owner._menu && owner._menu !== this) {\n      owner.removeMenu();\n    }\n\n    owner._menu = this;\n    this._owner = owner;\n    return UIComponent.prototype.addTo.apply(this, arguments);\n  };\n\n  _proto.setItems = function setItems(items) {\n    this.options['items'] = items;\n    return this;\n  };\n\n  _proto.getItems = function getItems() {\n    return this.options['items'] || [];\n  };\n\n  _proto.buildOn = function buildOn() {\n    if (this.options['custom']) {\n      if (isString(this.options['items'])) {\n        var container = createEl('div');\n        container.innerHTML = this.options['items'];\n        return container;\n      } else {\n        return this.options['items'];\n      }\n    } else {\n      var dom = createEl('div');\n\n      if (this.options['containerClass']) {\n        addClass(dom, this.options['containerClass']);\n      }\n\n      dom.style.width = this._getMenuWidth() + 'px';\n\n      var menuItems = this._createMenuItemDom();\n\n      dom.appendChild(menuItems);\n      on(dom, 'contextmenu', preventDefault);\n      return dom;\n    }\n  };\n\n  _proto.getOffset = function getOffset() {\n    if (!this.getMap()) {\n      return null;\n    }\n\n    var mapSize = this.getMap().getSize(),\n        p = this.getMap().viewPointToContainerPoint(this._getViewPoint()),\n        size = this.getSize();\n    var dx = 0,\n        dy = 0;\n\n    if (p.x + size['width'] > mapSize['width']) {\n      dx = -size['width'];\n    }\n\n    if (p.y + size['height'] > mapSize['height']) {\n      dy = -size['height'];\n    }\n\n    return new Point(dx, dy);\n  };\n\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    var p = this.getOffset()._multi(-1);\n\n    return p.x + 'px ' + p.y + 'px';\n  };\n\n  _proto.getEvents = function getEvents() {\n    return {\n      '_zoomstart _zoomend _movestart _dblclick _click': this._removePrevDOM\n    };\n  };\n\n  _proto._createMenuItemDom = function _createMenuItemDom() {\n    var me = this;\n    var map = this.getMap();\n    var ul = createEl('ul');\n    addClass(ul, 'maptalks-menu-items');\n    var items = this.getItems();\n\n    function onMenuClick(index) {\n      return function (e) {\n        var param = map._parseEvent(e, 'click');\n\n        param['target'] = me;\n        param['owner'] = me._owner;\n        param['index'] = index;\n\n        var result = this._callback(param);\n\n        if (result === false) {\n          return;\n        }\n\n        me.hide();\n\n        if (me._owner) {\n          me._owner.fire('closemenu');\n        }\n      };\n    }\n\n    var item, itemDOM;\n\n    for (var i = 0, len = items.length; i < len; i++) {\n      item = items[i];\n\n      if (item === '-' || item === '_') {\n        itemDOM = createEl('li');\n        addClass(itemDOM, 'maptalks-menu-splitter');\n      } else {\n        itemDOM = createEl('li');\n        var itemTitle = item['item'];\n\n        if (isFunction(itemTitle)) {\n          itemTitle = itemTitle({\n            'owner': this._owner,\n            'index': i\n          });\n        }\n\n        itemDOM.innerHTML = itemTitle;\n        itemDOM._callback = item['click'];\n        on(itemDOM, 'click', onMenuClick(i));\n      }\n\n      ul.appendChild(itemDOM);\n    }\n\n    var maxHeight = this.options['maxHeight'] || 0;\n\n    if (maxHeight > 0) {\n      setStyle(ul, 'max-height: ' + maxHeight + 'px; overflow-y: auto;');\n    }\n\n    return ul;\n  };\n\n  _proto._getMenuWidth = function _getMenuWidth() {\n    var defaultWidth = 160;\n    var width = this.options['width'] || defaultWidth;\n    return width;\n  };\n\n  return Menu;\n}(UIComponent);\n\nMenu.mergeOptions(defaultOptions);\n\nvar Menuable = {\n  setMenu: function setMenu(options) {\n    this._menuOptions = options;\n\n    if (this._menu) {\n      this._menu.setOptions(options);\n    } else {\n      this.on('contextmenu', this._defaultOpenMenu, this);\n    }\n\n    return this;\n  },\n  getMenu: function getMenu() {\n    return this._menu;\n  },\n  openMenu: function openMenu(coordinate) {\n    var map = this instanceof Map$1 ? this : this.getMap();\n\n    if (!coordinate) {\n      coordinate = this.getCenter();\n    }\n\n    if (!this._menu) {\n      if (this._menuOptions && map) {\n        this._bindMenu();\n\n        this._menu.show(coordinate);\n      }\n    } else {\n      this._menu.show(coordinate);\n    }\n\n    this.fire('openmenu', {\n      coordinate: coordinate\n    });\n    return this;\n  },\n  setMenuItems: function setMenuItems(items) {\n    if (!this._menuOptions) {\n      this._menuOptions = {};\n    }\n\n    if (Array.isArray(items)) {\n      this._menuOptions['custom'] = false;\n    }\n\n    this._menuOptions['items'] = items;\n    this.setMenu(this._menuOptions);\n    return this;\n  },\n  getMenuItems: function getMenuItems() {\n    if (this._menu) {\n      return this._menu.getItems();\n    } else if (this._menuOptions) {\n      return this._menuOptions['items'] || [];\n    }\n\n    return [];\n  },\n  closeMenu: function closeMenu() {\n    if (this._menu) {\n      this._menu.hide();\n    }\n\n    this.fire('closemenu', {});\n    return this;\n  },\n  removeMenu: function removeMenu() {\n    this.off('contextmenu', this._defaultOpenMenu, this);\n\n    this._unbindMenu();\n\n    delete this._menuOptions;\n    this.fire('removemenu', {});\n    return this;\n  },\n  _bindMenu: function _bindMenu() {\n    if (!this._menuOptions) {\n      return this;\n    }\n\n    this._menu = new Menu(this._menuOptions);\n\n    this._menu.addTo(this);\n\n    return this;\n  },\n  _unbindMenu: function _unbindMenu() {\n    if (this._menu) {\n      this.closeMenu();\n\n      this._menu.remove();\n\n      delete this._menu;\n    }\n\n    return this;\n  },\n  _defaultOpenMenu: function _defaultOpenMenu(param) {\n    this.openMenu(param['coordinate']);\n    return false;\n  }\n};\nMap$1.include(Menuable);\nGeometry.include(Menuable);\n\n\n\nvar index$4 = /*#__PURE__*/Object.freeze({\n  UIComponent: UIComponent,\n  UIMarker: UIMarker,\n  InfoWindow: InfoWindow,\n  ToolTip: ToolTip,\n  Menuable: Menuable,\n  Menu: Menu\n});\n\nvar Control = function (_Eventable) {\n  _inheritsLoose(Control, _Eventable);\n\n  function Control(options) {\n    if (options && options['position'] && !isString(options['position'])) {\n      options['position'] = extend({}, options['position']);\n    }\n\n    return _Eventable.call(this, options) || this;\n  }\n\n  var _proto = Control.prototype;\n\n  _proto.addTo = function addTo(map) {\n    this.remove();\n\n    if (!map.options['control']) {\n      return this;\n    }\n\n    this._map = map;\n    var controlContainer = map._panels.control;\n    this.__ctrlContainer = createEl('div');\n    setStyle(this.__ctrlContainer, 'position:absolute;overflow:visible;');\n    this.update();\n    controlContainer.appendChild(this.__ctrlContainer);\n\n    if (this.onAdd) {\n      this.onAdd();\n    }\n\n    this.fire('add', {\n      'dom': controlContainer\n    });\n    return this;\n  };\n\n  _proto.update = function update() {\n    this.__ctrlContainer.innerHTML = '';\n    this._controlDom = this.buildOn(this.getMap());\n\n    if (this._controlDom) {\n      this._updatePosition();\n\n      this.__ctrlContainer.appendChild(this._controlDom);\n    }\n\n    return this;\n  };\n\n  _proto.getMap = function getMap() {\n    return this._map;\n  };\n\n  _proto.getPosition = function getPosition() {\n    return extend({}, this._parse(this.options['position']));\n  };\n\n  _proto.setPosition = function setPosition(position) {\n    if (isString(position)) {\n      this.options['position'] = position;\n    } else {\n      this.options['position'] = extend({}, position);\n    }\n\n    this._updatePosition();\n\n    return this;\n  };\n\n  _proto.getContainerPoint = function getContainerPoint() {\n    var position = this.getPosition();\n    var size = this.getMap().getSize();\n    var x, y;\n\n    if (!isNil(position['left'])) {\n      x = parseInt(position['left']);\n    } else if (!isNil(position['right'])) {\n      x = size['width'] - parseInt(position['right']);\n    }\n\n    if (!isNil(position['top'])) {\n      y = parseInt(position['top']);\n    } else if (!isNil(position['bottom'])) {\n      y = size['height'] - parseInt(position['bottom']);\n    }\n\n    return new Point(x, y);\n  };\n\n  _proto.getContainer = function getContainer() {\n    return this.__ctrlContainer;\n  };\n\n  _proto.getDOM = function getDOM() {\n    return this._controlDom;\n  };\n\n  _proto.show = function show() {\n    this.__ctrlContainer.style.display = '';\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    this.__ctrlContainer.style.display = 'none';\n    return this;\n  };\n\n  _proto.isVisible = function isVisible() {\n    return this.__ctrlContainer && this.__ctrlContainer.style.display === '';\n  };\n\n  _proto.remove = function remove() {\n    if (!this._map) {\n      return this;\n    }\n\n    removeDomNode(this.__ctrlContainer);\n\n    if (this.onRemove) {\n      this.onRemove();\n    }\n\n    delete this._map;\n    delete this.__ctrlContainer;\n    delete this._controlDom;\n    this.fire('remove');\n    return this;\n  };\n\n  _proto._parse = function _parse(position) {\n    var p = position;\n\n    if (isString(position)) {\n      p = Control['positions'][p];\n    }\n\n    return p;\n  };\n\n  _proto._updatePosition = function _updatePosition() {\n    var position = this.getPosition();\n\n    if (!position) {\n      position = {\n        'top': 20,\n        'left': 20\n      };\n    }\n\n    for (var p in position) {\n      if (position.hasOwnProperty(p)) {\n        position[p] = parseInt(position[p]);\n        this.__ctrlContainer.style[p] = position[p] + 'px';\n      }\n    }\n\n    this.fire('positionchange', {\n      'position': extend({}, position)\n    });\n  };\n\n  return Control;\n}(Eventable(Class));\n\nControl.positions = {\n  'top-left': {\n    'top': 20,\n    'left': 20\n  },\n  'top-right': {\n    'top': 20,\n    'right': 20\n  },\n  'bottom-left': {\n    'bottom': 20,\n    'left': 20\n  },\n  'bottom-right': {\n    'bottom': 20,\n    'right': 20\n  }\n};\nMap$1.mergeOptions({\n  'control': true\n});\nMap$1.include({\n  addControl: function addControl(control) {\n    if (this._containerDOM.getContext) {\n      return this;\n    }\n\n    control.addTo(this);\n    return this;\n  },\n  removeControl: function removeControl(control) {\n    if (!control || control.getMap() !== this) {\n      return this;\n    }\n\n    control.remove();\n    return this;\n  }\n});\n\nvar options$n = {\n  'position': {\n    'bottom': 0,\n    'left': 0\n  },\n  'content': '<a href=\"http://maptalks.org\" target=\"_blank\">maptalks</a>'\n};\nvar layerEvents = 'addlayer removelayer setbaselayer baselayerremove';\n\nvar Attribution = function (_Control) {\n  _inheritsLoose(Attribution, _Control);\n\n  function Attribution() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Attribution.prototype;\n\n  _proto.buildOn = function buildOn() {\n    this._attributionContainer = createEl('div');\n    this._attributionContainer.className = 'maptalks-attribution';\n\n    this._update();\n\n    return this._attributionContainer;\n  };\n\n  _proto.onAdd = function onAdd() {\n    this.getMap().on(layerEvents, this._update, this);\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.getMap().off(layerEvents, this._update, this);\n  };\n\n  _proto._update = function _update() {\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    var attributions = map._getLayers(function (layer) {\n      return layer.options['attribution'];\n    }).reverse().map(function (layer) {\n      return layer.options['attribution'];\n    });\n\n    var content = this.options['content'] + (attributions.length > 0 ? ' - ' + attributions.join(', ') : '');\n    this._attributionContainer.innerHTML = '<span style=\"padding:0px 4px\">' + content + '</span>';\n  };\n\n  return Attribution;\n}(Control);\n\nAttribution.mergeOptions(options$n);\nMap$1.mergeOptions({\n  'attribution': true\n});\nMap$1.addOnLoadHook(function () {\n  var a = this.options['attribution'] || this.options['attributionControl'];\n\n  if (a) {\n    this.attributionControl = new Attribution(a);\n    this.addControl(this.attributionControl);\n  }\n});\n\nvar options$o = {\n  'position': 'top-right',\n  'baseTitle': 'Base Layers',\n  'overlayTitle': 'Layers',\n  'excludeLayers': [],\n  'containerClass': 'maptalks-layer-switcher'\n};\n\nvar LayerSwitcher = function (_Control) {\n  _inheritsLoose(LayerSwitcher, _Control);\n\n  function LayerSwitcher() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = LayerSwitcher.prototype;\n\n  _proto.buildOn = function buildOn() {\n    var container = this.container = createEl('div', this.options['containerClass']),\n        panel = this.panel = createEl('div', 'panel'),\n        button = this.button = createEl('button');\n    container.appendChild(button);\n    container.appendChild(panel);\n    return container;\n  };\n\n  _proto.onAdd = function onAdd() {\n    on(this.button, 'mouseover', this._show, this);\n    on(this.panel, 'mouseleave', this._hide, this);\n    on(this.getMap(), 'click', this._hide, this);\n  };\n\n  _proto.onRemove = function onRemove() {\n    if (this.panel) {\n      off(this.button, 'mouseover', this._show, this);\n      off(this.panel, 'mouseleave', this._hide, this);\n      off(this.getMap(), 'click', this._hide, this);\n      removeDomNode(this.panel);\n      removeDomNode(this.button);\n      delete this.panel;\n      delete this.button;\n      delete this.container;\n    }\n  };\n\n  _proto._show = function _show() {\n    if (!hasClass(this.container, 'shown')) {\n      addClass(this.container, 'shown');\n\n      this._createPanel();\n    }\n  };\n\n  _proto._hide = function _hide(e) {\n    if (!this.panel.contains(e.toElement || e.relatedTarget)) {\n      setClass(this.container, this.options['containerClass']);\n    }\n  };\n\n  _proto._createPanel = function _createPanel() {\n    this.panel.innerHTML = '';\n    var ul = createEl('ul');\n    this.panel.appendChild(ul);\n\n    this._renderLayers(this.getMap(), ul);\n  };\n\n  _proto._renderLayers = function _renderLayers(map, elm) {\n    var base = map.getBaseLayer(),\n        layers = map.getLayers(),\n        len = layers.length;\n\n    if (base) {\n      var baseLayers = base.layers || [base],\n          li = createEl('li', 'group'),\n          ul = createEl('ul'),\n          label = createEl('label');\n      label.innerHTML = this.options['baseTitle'];\n      li.appendChild(label);\n\n      for (var i = 0, _len = baseLayers.length; i < _len; i++) {\n        var layer = baseLayers[i];\n\n        if (this._isExcluded(layer)) {\n          ul.appendChild(this._renderLayer(baseLayers[i], true));\n          li.appendChild(ul);\n          elm.appendChild(li);\n        }\n      }\n    }\n\n    if (len) {\n      var _li = createEl('li', 'group'),\n          _ul = createEl('ul'),\n          _label = createEl('label');\n\n      _label.innerHTML = this.options['overlayTitle'];\n\n      _li.appendChild(_label);\n\n      for (var _i = 0; _i < len; _i++) {\n        var _layer = layers[_i];\n\n        if (this._isExcluded(_layer)) {\n          _ul.appendChild(this._renderLayer(_layer));\n        }\n      }\n\n      _li.appendChild(_ul);\n\n      elm.appendChild(_li);\n    }\n  };\n\n  _proto._isExcluded = function _isExcluded(layer) {\n    var id = layer.getId(),\n        excludeLayers = this.options['excludeLayers'];\n    return !(excludeLayers.length && excludeLayers.indexOf(id) >= 0);\n  };\n\n  _proto._renderLayer = function _renderLayer(layer, isBase) {\n    var _this = this;\n\n    var li = createEl('li', 'layer'),\n        label = createEl('label'),\n        input = createEl('input'),\n        map = this.getMap();\n    var visible = layer.options['visible'];\n    layer.options['visible'] = true;\n    var enabled = layer.isVisible();\n    layer.options['visible'] = visible;\n    li.className = 'layer';\n\n    if (isBase) {\n      input.type = 'radio';\n      input.name = 'base';\n    } else {\n      input.type = 'checkbox';\n    }\n\n    input.checked = visible && enabled;\n\n    if (!enabled) {\n      input.setAttribute('disabled', 'disabled');\n    }\n\n    input.onchange = function (e) {\n      if (e.target.type === 'radio') {\n        var baseLayer = map.getBaseLayer(),\n            baseLayers = baseLayer.layers;\n\n        if (baseLayers) {\n          for (var i = 0, len = baseLayers.length; i < len; i++) {\n            var _baseLayer = baseLayers[i];\n\n            _baseLayer[_baseLayer === layer ? 'show' : 'hide']();\n          }\n        } else if (!baseLayer.isVisible()) {\n          baseLayer.show();\n        }\n\n        map._fireEvent('setbaselayer');\n      } else {\n        layer[e.target.checked ? 'show' : 'hide']();\n      }\n\n      _this.fire('layerchange', {\n        target: layer\n      });\n    };\n\n    li.appendChild(input);\n    label.innerHTML = layer.getId();\n    li.appendChild(label);\n    return li;\n  };\n\n  return LayerSwitcher;\n}(Control);\n\nLayerSwitcher.mergeOptions(options$o);\nMap$1.mergeOptions({\n  'layerSwitcherControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['layerSwitcherControl']) {\n    this.layerSwitcherControl = new LayerSwitcher(this.options['layerSwitcherControl']);\n    this.addControl(this.layerSwitcherControl);\n  }\n});\n\nvar options$p = {\n  'level': 4,\n  'position': {\n    'right': 1,\n    'bottom': 1\n  },\n  'size': [300, 200],\n  'maximize': true,\n  'symbol': {\n    'lineWidth': 3,\n    'lineColor': '#1bbc9b',\n    'polygonFill': '#1bbc9b',\n    'polygonOpacity': 0.4\n  },\n  'containerClass': 'maptalks-overview',\n  'buttonClass': 'maptalks-overview-button'\n};\n\nvar Overview = function (_Control) {\n  _inheritsLoose(Overview, _Control);\n\n  function Overview() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Overview.prototype;\n\n  _proto.buildOn = function buildOn() {\n    var size = this.options['size'];\n\n    if (!this.options['maximize']) {\n      size = [0, 0];\n    }\n\n    var container = createEl('div');\n    var mapContainer = this.mapContainer = createEl('div');\n    mapContainer.style.width = size[0] + 'px';\n    mapContainer.style.height = size[1] + 'px';\n    mapContainer.className = this.options['containerClass'];\n    var button = this.button = createEl('div');\n    button.className = this.options['buttonClass'];\n    container.appendChild(mapContainer);\n    container.appendChild(button);\n    return container;\n  };\n\n  _proto.onAdd = function onAdd() {\n    if (this.options['maximize']) {\n      this._createOverview();\n    }\n\n    this.getMap().on('resize moving zooming rotate dragrotating viewchange', this._update, this).on('setbaselayer', this._updateBaseLayer, this).on('spatialreferencechange', this._updateSpatialReference, this);\n    on(this.button, 'click', this._onButtonClick, this);\n\n    this._updateButtonText();\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('resize moving zooming rotate dragrotating viewchange', this._update, this).off('setbaselayer', this._updateBaseLayer, this).off('spatialreferencechange', this._updateSpatialReference, this);\n\n    if (this._overview) {\n      this._overview.remove();\n\n      delete this._overview;\n      delete this._perspective;\n    }\n\n    off(this.button, 'click', this._onButtonClick, this);\n  };\n\n  _proto.maxmize = function maxmize() {\n    var size = this.options['size'];\n    var dom = this.mapContainer;\n    dom.style.width = size[0] + 'px';\n    dom.style.height = size[1] + 'px';\n\n    this._createOverview();\n\n    return this;\n  };\n\n  _proto.minimize = function minimize() {\n    if (this._overview) {\n      this._overview.remove();\n    }\n\n    delete this._overview;\n    delete this._perspective;\n    var dom = this.mapContainer;\n    dom.style.width = 0 + 'px';\n    dom.style.height = 0 + 'px';\n    return this;\n  };\n\n  _proto.getOverviewMap = function getOverviewMap() {\n    return this._overview;\n  };\n\n  _proto._onButtonClick = function _onButtonClick() {\n    if (!this._overview) {\n      this.maxmize();\n    } else {\n      this.minimize();\n    }\n\n    this._updateButtonText();\n  };\n\n  _proto._updateButtonText = function _updateButtonText() {\n    if (this._overview) {\n      this.button.innerHTML = '-';\n    } else {\n      this.button.innerHTML = '+';\n    }\n  };\n\n  _proto._createOverview = function _createOverview() {\n    var map = this.getMap(),\n        dom = this.mapContainer;\n    var options = map.config();\n    extend(options, {\n      'center': map.getCenter(),\n      'zoom': this._getOverviewZoom(),\n      'zoomAnimationDuration': 150,\n      'pitch': 0,\n      'bearing': 0,\n      'scrollWheelZoom': false,\n      'checkSize': false,\n      'doubleClickZoom': false,\n      'touchZoom': false,\n      'control': false,\n      'draggable': false,\n      'maxExtent': null\n    });\n    this._overview = new Map$1(dom, options);\n\n    this._updateBaseLayer();\n\n    this._perspective = new Polygon(this._getPerspectiveCoords(), {\n      'draggable': true,\n      'cursor': 'move',\n      'symbol': this.options['symbol']\n    }).on('dragend', this._onDragEnd, this);\n    new VectorLayer('perspective_layer', this._perspective).addTo(this._overview);\n    this.fire('load');\n  };\n\n  _proto._getOverviewZoom = function _getOverviewZoom() {\n    var map = this.getMap(),\n        zoom = map.getZoom(),\n        minZoom = map.getMinZoom(),\n        level = this.options['level'];\n\n    if (level > 0) {\n      for (var i = level; i > 0; i--) {\n        if (zoom - i >= minZoom) {\n          return zoom - i;\n        }\n      }\n    } else {\n      for (var _i = level; _i < 0; _i++) {\n        if (zoom - _i >= minZoom) {\n          return zoom - _i;\n        }\n      }\n    }\n\n    return zoom;\n  };\n\n  _proto._onDragEnd = function _onDragEnd() {\n    var center = this._perspective.getCenter();\n\n    this._overview.setCenter(center);\n\n    this.getMap().panTo(center);\n  };\n\n  _proto._getPerspectiveCoords = function _getPerspectiveCoords() {\n    var map = this.getMap();\n    return map.getContainerExtent().toArray().map(function (c) {\n      return map.containerPointToCoordinate(c);\n    });\n  };\n\n  _proto._update = function _update() {\n    if (!this._overview) {\n      return;\n    }\n\n    computeDomPosition(this._overview._containerDOM);\n\n    var coords = this._getPerspectiveCoords();\n\n    this._perspective.setCoordinates(coords);\n\n    this._overview.setCenterAndZoom(this.getMap().getCenter(), this._getOverviewZoom());\n  };\n\n  _proto._updateSpatialReference = function _updateSpatialReference() {\n    if (!this._overview) {\n      return;\n    }\n\n    var map = this.getMap();\n    var spatialRef = map.options['spatialReference'];\n\n    this._overview.setSpatialReference(spatialRef);\n  };\n\n  _proto._updateBaseLayer = function _updateBaseLayer() {\n    if (!this._overview) {\n      return;\n    }\n\n    var map = this.getMap(),\n        baseLayer = map.getBaseLayer();\n\n    if (!baseLayer) {\n      this._overview.setBaseLayer(null);\n\n      return;\n    }\n\n    var layers = baseLayer.layers;\n    var showIndex = 0;\n\n    if (layers) {\n      for (var i = 0, l = layers.length; i < l; i++) {\n        var _layer = layers[i];\n\n        if (_layer.isVisible()) {\n          showIndex = i;\n          break;\n        }\n      }\n    }\n\n    var json = baseLayer.toJSON();\n    var options = null;\n\n    if (layers) {\n      options = json.layers[showIndex].options;\n      options.visible = true;\n    } else {\n      options = json.options;\n    }\n\n    this._overview.setMinZoom(options.minZoom || null).setMaxZoom(options.maxZoom || null);\n\n    delete options.minZoom;\n    delete options.maxZoom;\n    delete json.options.canvas;\n    json.options.visible = true;\n    json.options.renderer = 'canvas';\n    var layer = Layer.fromJSON(json);\n\n    for (var p in baseLayer) {\n      if (isFunction(baseLayer[p]) && baseLayer.hasOwnProperty(p) && baseLayer[p] !== baseLayer.constructor.prototype[p]) {\n        layer[p] = baseLayer[p];\n      }\n    }\n\n    this._overview.setBaseLayer(layer);\n  };\n\n  return Overview;\n}(Control);\n\nOverview.mergeOptions(options$p);\nMap$1.mergeOptions({\n  'overviewControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['overviewControl']) {\n    this.overviewControl = new Overview(this.options['overviewControl']);\n    this.addControl(this.overviewControl);\n  }\n});\n\nvar options$q = {\n  'position': 'top-right',\n  'draggable': true,\n  'custom': false,\n  'content': '',\n  'closeButton': true\n};\n\nvar Panel = function (_Control) {\n  _inheritsLoose(Panel, _Control);\n\n  function Panel() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Panel.prototype;\n\n  _proto.buildOn = function buildOn() {\n    var dom;\n\n    if (this.options['custom']) {\n      if (isString(this.options['content'])) {\n        dom = createEl('div');\n        dom.innerHTML = this.options['content'];\n      } else {\n        dom = this.options['content'];\n      }\n    } else {\n      dom = createEl('div', 'maptalks-panel');\n\n      if (this.options['closeButton']) {\n        var closeButton = createEl('a', 'maptalks-close');\n        closeButton.href = 'javascript:;';\n\n        closeButton.onclick = function () {\n          dom.style.display = 'none';\n        };\n\n        dom.appendChild(closeButton);\n      }\n\n      var panelContent = createEl('div', 'maptalks-panel-content');\n      panelContent.innerHTML = this.options['content'];\n      dom.appendChild(panelContent);\n    }\n\n    this.draggable = new DragHandler(dom, {\n      'cancelOn': this._cancelOn.bind(this),\n      'ignoreMouseleave': true\n    });\n    this.draggable.on('dragstart', this._onDragStart, this).on('dragging', this._onDragging, this).on('dragend', this._onDragEnd, this);\n\n    if (this.options['draggable']) {\n      this.draggable.enable();\n    }\n\n    return dom;\n  };\n\n  _proto.update = function update() {\n    if (this.draggable) {\n      this.draggable.disable();\n      delete this.draggable;\n    }\n\n    return Control.prototype.update.call(this);\n  };\n\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n\n    if (this.isVisible()) {\n      this.update();\n    }\n\n    return this;\n  };\n\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n\n  _proto._cancelOn = function _cancelOn(domEvent) {\n    var target = domEvent.srcElement || domEvent.target,\n        tagName = target.tagName.toLowerCase();\n\n    if (tagName === 'button' || tagName === 'input' || tagName === 'select' || tagName === 'option' || tagName === 'textarea') {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto._onDragStart = function _onDragStart(param) {\n    this._startPos = param['mousePos'];\n    this._startPosition = extend({}, this.getPosition());\n    this.fire('dragstart', param);\n  };\n\n  _proto._onDragging = function _onDragging(param) {\n    var pos = param['mousePos'];\n    var offset = pos.sub(this._startPos);\n    var startPosition = this._startPosition;\n    var position = this.getPosition();\n\n    if (!isNil(position['top'])) {\n      position['top'] = parseInt(startPosition['top']) + offset.y;\n    }\n\n    if (!isNil(position['bottom'])) {\n      position['bottom'] = parseInt(startPosition['bottom']) - offset.y;\n    }\n\n    if (!isNil(position['left'])) {\n      position['left'] = parseInt(startPosition['left']) + offset.x;\n    }\n\n    if (!isNil(position['right'])) {\n      position['right'] = parseInt(startPosition['right']) - offset.x;\n    }\n\n    this.setPosition(position);\n    this.fire('dragging', param);\n  };\n\n  _proto._onDragEnd = function _onDragEnd(param) {\n    delete this._startPos;\n    delete this._startPosition;\n    this.fire('dragend', param);\n  };\n\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var map = this.getMap();\n    var containerPoint = this.getContainerPoint();\n    var dom = this.getDOM(),\n        width = parseInt(dom.clientWidth),\n        height = parseInt(dom.clientHeight);\n    var anchors = [map.containerPointToCoordinate(containerPoint.add(width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(width, height / 2)), map.containerPointToCoordinate(containerPoint.add(width / 2, height)), map.containerPointToCoordinate(containerPoint.add(0, height / 2))];\n    return anchors;\n  };\n\n  return Panel;\n}(Control);\n\nPanel.mergeOptions(options$q);\n\nvar options$r = {\n  'position': 'bottom-left',\n  'maxWidth': 100,\n  'metric': true,\n  'imperial': false,\n  'containerClass': null\n};\n\nvar Scale = function (_Control) {\n  _inheritsLoose(Scale, _Control);\n\n  function Scale() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Scale.prototype;\n\n  _proto.buildOn = function buildOn(map) {\n    this._map = map;\n    this._scaleContainer = createEl('div', this.options['containerClass']);\n\n    this._addScales();\n\n    map.on('zoomend', this._update, this);\n\n    if (this._map._loaded) {\n      this._update();\n    }\n\n    return this._scaleContainer;\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('zoomend', this._update, this);\n  };\n\n  _proto._addScales = function _addScales() {\n    var css = 'border: 2px solid #000000;border-top: none;line-height: 1.1;padding: 0px;' + 'color: #000000;font-size: 11px;text-align:center;white-space: nowrap;overflow: hidden' + ';-moz-box-sizing: content-box;box-sizing: content-box;background: #fff; background: rgba(255, 255, 255, 0);';\n\n    if (this.options['metric']) {\n      this._mScale = createElOn('div', this.options['containerClass'] ? null : css, this._scaleContainer);\n    }\n\n    if (this.options['imperial']) {\n      this._iScale = createElOn('div', this.options['containerClass'] ? null : css, this._scaleContainer);\n    }\n  };\n\n  _proto._update = function _update() {\n    var map = this._map;\n    var maxMeters = map.pixelToDistance(this.options['maxWidth'], 0);\n\n    this._updateScales(maxMeters);\n  };\n\n  _proto._updateScales = function _updateScales(maxMeters) {\n    if (this.options['metric'] && maxMeters) {\n      this._updateMetric(maxMeters);\n    }\n\n    if (this.options['imperial'] && maxMeters) {\n      this._updateImperial(maxMeters);\n    }\n  };\n\n  _proto._updateMetric = function _updateMetric(maxMeters) {\n    var meters = this._getRoundNum(maxMeters),\n        label = meters < 1000 ? meters + ' m' : meters / 1000 + ' km';\n\n    this._updateScale(this._mScale, label, meters / maxMeters);\n  };\n\n  _proto._updateImperial = function _updateImperial(maxMeters) {\n    var maxFeet = maxMeters * 3.2808399;\n    var maxMiles, miles, feet;\n\n    if (maxFeet > 5280) {\n      maxMiles = maxFeet / 5280;\n      miles = this._getRoundNum(maxMiles);\n\n      this._updateScale(this._iScale, miles + ' mile', miles / maxMiles);\n    } else {\n      feet = this._getRoundNum(maxFeet);\n\n      this._updateScale(this._iScale, feet + ' feet', feet / maxFeet);\n    }\n  };\n\n  _proto._updateScale = function _updateScale(scale, text, ratio) {\n    scale['style']['width'] = Math.round(this.options['maxWidth'] * ratio) + 'px';\n    scale['innerHTML'] = text;\n  };\n\n  _proto._getRoundNum = function _getRoundNum(num) {\n    var pow10 = Math.pow(10, (Math.floor(num) + '').length - 1);\n    var d = num / pow10;\n    d = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;\n    return pow10 * d;\n  };\n\n  return Scale;\n}(Control);\n\nScale.mergeOptions(options$r);\nMap$1.mergeOptions({\n  'scaleControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['scaleControl']) {\n    this.scaleControl = new Scale(this.options['scaleControl']);\n    this.addControl(this.scaleControl);\n  }\n});\n\nvar options$s = {\n  'height': 28,\n  'vertical': false,\n  'position': 'top-right',\n  'reverseMenu': false,\n  'items': {}\n};\n\nvar Toolbar = function (_Control) {\n  _inheritsLoose(Toolbar, _Control);\n\n  function Toolbar() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Toolbar.prototype;\n\n  _proto.buildOn = function buildOn(map) {\n    this._map = map;\n    var dom = createEl('div');\n    var ul = createEl('ul', 'maptalks-toolbar-hx');\n    dom.appendChild(ul);\n\n    if (this.options['vertical']) {\n      addClass(dom, 'maptalks-toolbar-vertical');\n    } else {\n      addClass(dom, 'maptalks-toolbar-horizonal');\n    }\n\n    var me = this;\n\n    function onButtonClick(fn, index, childIndex, targetDom) {\n      var item = me._getItems()[index];\n\n      return function (e) {\n        stopPropagation(e);\n        return fn({\n          'target': item,\n          'index': index,\n          'childIndex': childIndex,\n          'dom': targetDom\n        });\n      };\n    }\n\n    var items = this.options['items'];\n\n    if (isArrayHasData(items)) {\n      for (var i = 0, len = items.length; i < len; i++) {\n        var item = items[i];\n        var li = createEl('li');\n\n        if (this.options['height'] !== 28) {\n          li.style.lineHeight = this.options['height'] + 'px';\n        }\n\n        li.style.height = this.options['height'] + 'px';\n        li.style.cursor = 'pointer';\n\n        if (isHTML(item['item'])) {\n          li.style.textAlign = 'center';\n          var itemSize = measureDom('div', item['item']);\n          li.innerHTML = '<div style=\"margin-top:' + (this.options['height'] - itemSize['height']) / 2 + 'px;\">' + item['item'] + '</div>';\n        } else {\n          li.innerHTML = item['item'];\n        }\n\n        if (item['click']) {\n          on(li, 'click', onButtonClick(item['click'], i, null, li));\n        }\n\n        if (isArrayHasData(item['children'])) {\n          var dropMenu = this._createDropMenu(i);\n\n          li.appendChild(dropMenu);\n          li._menu = dropMenu;\n          on(li, 'mouseover', function () {\n            this._menu.style.display = '';\n          });\n          on(li, 'mouseout', function () {\n            this._menu.style.display = 'none';\n          });\n        }\n\n        ul.appendChild(li);\n      }\n    }\n\n    return dom;\n  };\n\n  _proto._createDropMenu = function _createDropMenu(index) {\n    var me = this;\n\n    function onButtonClick(fn, index, childIndex) {\n      var item = me._getItems()[index]['children'][childIndex];\n\n      return function (e) {\n        stopPropagation(e);\n        return fn({\n          'target': item,\n          'index': index,\n          'childIndex': childIndex\n        });\n      };\n    }\n\n    var menuDom = createEl('div', 'maptalks-dropMenu'),\n        items = this._getItems(),\n        len = items.length,\n        menuUL = createEl('ul'),\n        children = items[index]['children'];\n\n    if (index === len - 1 && children) {\n      menuDom.style.cssText = 'right: 0px;';\n      menuUL.style.cssText = 'right: 0px;position: absolute;';\n\n      if (this.options['reverseMenu']) {\n        menuUL.style.bottom = 0;\n      }\n    }\n\n    menuDom.appendChild(createEl('em', 'maptalks-ico'));\n    var liWidth = 0;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var size = stringLength(children[i]['item'], '12px');\n\n      if (size.width > liWidth) {\n        liWidth = size.width;\n      }\n    }\n\n    for (var _i = 0, _l = children.length; _i < _l; _i++) {\n      var child = children[_i];\n      var li = createEl('li');\n      li.innerHTML = '<a href=\"javascript:;\">' + child['item'] + '</a>';\n      li.style.cursor = 'pointer';\n      li.style.width = liWidth + 24 + 'px';\n      on(li.childNodes[0], 'click', onButtonClick(child['click'], index, _i));\n      menuUL.appendChild(li);\n    }\n\n    if (this.options['vertical']) {\n      var width = liWidth < 95 ? 95 : liWidth;\n\n      if (this.options['reverseMenu']) {\n        menuDom.style.right = -(width + 10 * 2) + 'px';\n      } else {\n        menuDom.style.left = -(width + 10 * 2) + 'px';\n      }\n    } else if (this.options['reverseMenu']) {\n      menuDom.style.bottom = '28px';\n    } else {\n      menuDom.style.top = '28px';\n    }\n\n    menuDom.appendChild(menuUL);\n    menuDom.style.display = 'none';\n    return menuDom;\n  };\n\n  _proto._getItems = function _getItems() {\n    return this.options['items'] || [];\n  };\n\n  return Toolbar;\n}(Control);\n\nToolbar.mergeOptions(options$s);\n\nvar options$t = {\n  'position': 'top-left',\n  'slider': true,\n  'zoomLevel': true,\n  'seamless': false\n};\nvar UNIT = 10;\n\nvar Zoom = function (_Control) {\n  _inheritsLoose(Zoom, _Control);\n\n  function Zoom() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Zoom.prototype;\n\n  _proto.buildOn = function buildOn(map) {\n    var options = this.options;\n    var dom = createEl('div', 'maptalks-zoom');\n\n    if (options['zoomLevel']) {\n      var levelDOM = createEl('span', 'maptalks-zoom-zoomlevel');\n      dom.appendChild(levelDOM);\n      this._levelDOM = levelDOM;\n    }\n\n    var zoomDOM = createEl('div', 'maptalks-zoom-slider');\n    var zoomInButton = createEl('a', 'maptalks-zoom-zoomin');\n    zoomInButton.href = 'javascript:;';\n    zoomInButton.innerHTML = '+';\n    zoomDOM.appendChild(zoomInButton);\n    this._zoomInButton = zoomInButton;\n\n    if (options['slider']) {\n      var box = createEl('div', 'maptalks-zoom-slider-box');\n      var ruler = createEl('div', 'maptalks-zoom-slider-ruler');\n      var reading = createEl('span', 'maptalks-zoom-slider-reading');\n      var dot = createEl('span', 'maptalks-zoom-slider-dot');\n      ruler.appendChild(reading);\n      box.appendChild(ruler);\n      box.appendChild(dot);\n      zoomDOM.appendChild(box);\n      this._sliderBox = box;\n      this._sliderRuler = ruler;\n      this._sliderReading = reading;\n      this._sliderDot = dot;\n    }\n\n    var zoomOutButton = createEl('a', 'maptalks-zoom-zoomout');\n    zoomOutButton.href = 'javascript:;';\n    zoomOutButton.innerHTML = '-';\n    zoomDOM.appendChild(zoomOutButton);\n    this._zoomOutButton = zoomOutButton;\n    dom.appendChild(zoomDOM);\n    map.on('_zoomend _zooming _zoomstart _spatialreferencechange', this._update, this);\n\n    this._update();\n\n    this._registerDomEvents();\n\n    return dom;\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('_zoomend _zooming _zoomstart _spatialreferencechange', this._update, this);\n\n    if (this._zoomInButton) {\n      off(this._zoomInButton, 'click', this._onZoomInClick, this);\n    }\n\n    if (this._zoomOutButton) {\n      off(this._zoomOutButton, 'click', this._onZoomOutClick, this);\n    }\n\n    if (this._sliderRuler) {\n      off(this._sliderRuler, 'click', this._onClickRuler, this);\n      this.dotDragger.disable();\n      delete this.dotDragger;\n    }\n  };\n\n  _proto._update = function _update() {\n    var map = this.getMap();\n\n    if (this._sliderBox) {\n      var totalRange = (map.getMaxZoom() - map.getMinZoom()) * UNIT;\n      this._sliderBox.style.height = totalRange + 16 + 'px';\n      this._sliderRuler.style.height = totalRange + 8 + 'px';\n      this._sliderRuler.style.cursor = 'pointer';\n      var zoomRange = (map.getMaxZoom() - map.getZoom()) * UNIT;\n      this._sliderReading.style.height = (map.getZoom() - map.getMinZoom() + 1) * UNIT + 'px';\n      this._sliderDot.style.top = zoomRange + 'px';\n    }\n\n    this._updateText();\n  };\n\n  _proto._updateText = function _updateText() {\n    if (this._levelDOM) {\n      var map = this.getMap();\n      var zoom = map.getZoom();\n\n      if (!isInteger(zoom)) {\n        zoom = Math.floor(zoom * 10) / 10;\n      }\n\n      this._levelDOM.innerHTML = zoom;\n    }\n  };\n\n  _proto._registerDomEvents = function _registerDomEvents() {\n    if (this._zoomInButton) {\n      on(this._zoomInButton, 'click', this._onZoomInClick, this);\n    }\n\n    if (this._zoomOutButton) {\n      on(this._zoomOutButton, 'click', this._onZoomOutClick, this);\n    }\n\n    if (this._sliderRuler) {\n      on(this._sliderRuler, 'click', this._onClickRuler, this);\n      this.dotDragger = new DragHandler(this._sliderDot, {\n        'ignoreMouseleave': true\n      });\n      this.dotDragger.on('dragstart', this._onDotDragstart, this).on('dragging dragend', this._onDotDrag, this).enable();\n    }\n  };\n\n  _proto._onZoomInClick = function _onZoomInClick(e) {\n    preventDefault(e);\n    this.getMap().zoomIn();\n  };\n\n  _proto._onZoomOutClick = function _onZoomOutClick(e) {\n    preventDefault(e);\n    this.getMap().zoomOut();\n  };\n\n  _proto._onClickRuler = function _onClickRuler(e) {\n    preventDefault(e);\n    var map = this.getMap(),\n        point = getEventContainerPoint(e, this._sliderRuler),\n        h = point.y;\n    var maxZoom = map.getMaxZoom(),\n        zoom = Math.floor(maxZoom - h / UNIT);\n    map.setZoom(zoom);\n  };\n\n  _proto._onDotDragstart = function _onDotDragstart(e) {\n    preventDefault(e.domEvent);\n\n    var map = this.getMap(),\n        origin = map.getSize().toPoint()._multi(1 / 2);\n\n    map.onZoomStart(map.getZoom(), origin);\n  };\n\n  _proto._onDotDrag = function _onDotDrag(e) {\n    preventDefault(e.domEvent);\n\n    var map = this.getMap(),\n        origin = map.getSize().toPoint()._multi(1 / 2),\n        point = getEventContainerPoint(e.domEvent, this._sliderRuler),\n        maxZoom = map.getMaxZoom(),\n        minZoom = map.getMinZoom();\n\n    var top = point.y,\n        z = maxZoom - top / UNIT;\n\n    if (maxZoom < z) {\n      z = maxZoom;\n      top = 0;\n    } else if (minZoom > z) {\n      z = minZoom;\n      top = (maxZoom - minZoom) * UNIT;\n    }\n\n    if (e.type === 'dragging') {\n      map.onZooming(z, origin, 1);\n    } else if (e.type === 'dragend') {\n      if (this.options['seamless']) {\n        map.onZoomEnd(z, origin);\n      } else {\n        map.onZoomEnd(Math.round(z), origin);\n      }\n    }\n\n    this._sliderDot.style.top = top + 'px';\n    this._sliderReading.style.height = (map.getZoom() - minZoom + 1) * UNIT + 'px';\n\n    this._updateText();\n  };\n\n  return Zoom;\n}(Control);\n\nZoom.mergeOptions(options$t);\nMap$1.mergeOptions({\n  'zoomControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['zoomControl']) {\n    this.zoomControl = new Zoom(this.options['zoomControl']);\n    this.addControl(this.zoomControl);\n  }\n});\n\n\n\nvar index$5 = /*#__PURE__*/Object.freeze({\n  Control: Control,\n  Attribution: Attribution,\n  LayerSwitcher: LayerSwitcher,\n  Overview: Overview,\n  Panel: Panel,\n  Scale: Scale,\n  Toolbar: Toolbar,\n  Zoom: Zoom\n});\n\nvar TileSystem = function () {\n  function TileSystem(sx, sy, ox, oy) {\n    if (Array.isArray(sx)) {\n      this.scale = {\n        x: sx[0],\n        y: sx[1]\n      };\n      this.origin = {\n        x: sx[2],\n        y: sx[3]\n      };\n    } else {\n      this.scale = {\n        x: sx,\n        y: sy\n      };\n      this.origin = {\n        x: ox,\n        y: oy\n      };\n    }\n  }\n\n  TileSystem.getDefault = function getDefault(projection) {\n    if (projection['code'].toLowerCase() === 'baidu') {\n      return 'baidu';\n    } else if (projection['code'].toLowerCase() === 'EPSG:4326'.toLowerCase()) {\n      return 'tms-global-geodetic';\n    } else if (projection['code'].toLowerCase() === 'identity') {\n      return [1, -1, 0, 0];\n    } else {\n      return 'web-mercator';\n    }\n  };\n\n  return TileSystem;\n}();\n\nvar semiCircum = 6378137 * Math.PI;\nextend(TileSystem, {\n  'web-mercator': new TileSystem([1, -1, -semiCircum, semiCircum]),\n  'tms-global-mercator': new TileSystem([1, 1, -semiCircum, -semiCircum]),\n  'tms-global-geodetic': new TileSystem([1, 1, -180, -90]),\n  'baidu': new TileSystem([1, 1, 0, 0])\n});\n\nvar TileConfig = function () {\n  function TileConfig(map, tileSystem, fullExtent, tileSize) {\n    this.map = map;\n    this.tileSize = tileSize;\n    this.fullExtent = fullExtent;\n    this.prepareTileInfo(tileSystem, fullExtent);\n    this._xScale = fullExtent['right'] >= fullExtent['left'] ? 1 : -1;\n    this._yScale = fullExtent['top'] >= fullExtent['bottom'] ? 1 : -1;\n    var glRes = map.getGLRes();\n    this._pointOrigin = map._prjToPointAtRes(new Point(this.tileSystem['origin']), glRes);\n    this._glRes = glRes;\n  }\n\n  var _proto = TileConfig.prototype;\n\n  _proto.prepareTileInfo = function prepareTileInfo(tileSystem, fullExtent) {\n    if (isString(tileSystem)) {\n      tileSystem = TileSystem[tileSystem.toLowerCase()];\n    } else if (Array.isArray(tileSystem)) {\n      tileSystem = new TileSystem(tileSystem);\n    }\n\n    if (!tileSystem) {\n      throw new Error('Invalid TileSystem');\n    }\n\n    this.tileSystem = tileSystem;\n    var a = fullExtent['right'] > fullExtent['left'] ? 1 : -1,\n        b = fullExtent['top'] > fullExtent['bottom'] ? -1 : 1,\n        c = tileSystem['origin']['x'],\n        d = tileSystem['origin']['y'];\n    this.transformation = new Transformation([a, b, c, d]);\n  };\n\n  _proto._getTileNum = function _getTileNum(point, res) {\n    var tileSystem = this.tileSystem,\n        tileSize = this['tileSize'],\n        delta = 1E-7;\n    var tileX = Math.floor(delta * tileSystem['scale']['x'] + point.x / (tileSize['width'] * res));\n    var tileY = Math.ceil(delta * tileSystem['scale']['y'] + point.y / (tileSize['height'] * res));\n    return {\n      'x': tileSystem['scale']['x'] * tileX,\n      'y': tileSystem['scale']['y'] * tileY\n    };\n  };\n\n  _proto.getTileIndex = function getTileIndex(pCoord, res, repeatWorld) {\n    var tileSystem = this.tileSystem;\n    var point = this.transformation.transform(pCoord, 1);\n\n    var tileIndex = this._getTileNum(point, res);\n\n    if (tileSystem['scale']['x'] < 0) {\n      tileIndex['x'] -= 1;\n    }\n\n    if (tileSystem['scale']['y'] > 0) {\n      tileIndex['y'] -= 1;\n    }\n\n    return this.getNeighorTileIndex(tileIndex['x'], tileIndex['y'], 0, 0, res, repeatWorld);\n  };\n\n  _proto.getNeighorTileIndex = function getNeighorTileIndex(tileX, tileY, offsetX, offsetY, res, repeatWorld) {\n    var tileSystem = this.tileSystem;\n    var x = tileX + tileSystem['scale']['x'] * offsetX;\n    var y = tileY - tileSystem['scale']['y'] * offsetY;\n    var out = false;\n    var idx = x;\n    var idy = y;\n\n    var ext = this._getTileFullIndex(res);\n\n    if (repeatWorld) {\n      if (repeatWorld === true || repeatWorld === 'x') {\n        if (ext['xmax'] === ext['xmin']) {\n          x = ext['xmin'];\n        } else if (x < ext['xmin']) {\n          x = ext['xmax'] - (ext['xmin'] - x) % (ext['xmax'] - ext['xmin']);\n\n          if (x === ext['xmax']) {\n            x = ext['xmin'];\n          }\n        } else if (x >= ext['xmax']) {\n          x = ext['xmin'] + (x - ext['xmin']) % (ext['xmax'] - ext['xmin']);\n        }\n      }\n\n      if (repeatWorld === true || repeatWorld === 'y') {\n        if (ext['ymax'] === ext['ymin']) {\n          y = ext['ymin'];\n        } else if (y >= ext['ymax']) {\n          y = ext['ymin'] + (y - ext['ymin']) % (ext['ymax'] - ext['ymin']);\n        } else if (y < ext['ymin']) {\n          y = ext['ymax'] - (ext['ymin'] - y) % (ext['ymax'] - ext['ymin']);\n\n          if (y === ext['ymax']) {\n            y = ext['ymin'];\n          }\n        }\n      }\n    }\n\n    if (x < ext['xmin'] || x > ext['xmax'] || y > ext['ymax'] || y < ext['ymin']) {\n      out = true;\n    }\n\n    return {\n      'x': x,\n      'y': y,\n      'idx': idx,\n      'idy': idy,\n      out: out\n    };\n  };\n\n  _proto._getTileFullIndex = function _getTileFullIndex(res) {\n    if (!this._tileFullIndex) {\n      this._tileFullIndex = {};\n    }\n\n    if (this._tileFullIndex[res]) {\n      return this._tileFullIndex[res];\n    }\n\n    var ext = this.fullExtent;\n    var transformation = this.transformation;\n\n    var nwIndex = this._getTileNum(transformation.transform(new Coordinate(ext['left'], ext['top']), 1), res);\n\n    var seIndex = this._getTileNum(transformation.transform(new Coordinate(ext['right'], ext['bottom']), 1), res);\n\n    var tileSystem = this.tileSystem;\n\n    if (tileSystem['scale']['x'] < 0) {\n      nwIndex.x -= 1;\n      seIndex.x -= 1;\n    }\n\n    if (tileSystem['scale']['y'] > 0) {\n      nwIndex.y -= 1;\n      seIndex.y -= 1;\n    }\n\n    this._tileFullIndex[res] = new Extent(nwIndex, seIndex);\n    return this._tileFullIndex[res];\n  };\n\n  _proto.getTilePrjNW = function getTilePrjNW(tileX, tileY, res) {\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = tileSystem['origin']['y'] + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 1 : 0)) * res * tileSize['height'];\n    var x = tileSystem['origin']['x'] + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 0 : 1)) * res * tileSize['width'];\n    return new Coordinate(x, y);\n  };\n\n  _proto.getTilePointNW = function getTilePointNW(tileX, tileY, res) {\n    var scale = this._glRes / res;\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = this._pointOrigin.y * scale + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 1 : 0)) * tileSize['height'];\n    var x = this._pointOrigin.x * scale + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 0 : 1)) * tileSize['width'];\n    return new Point(x, y);\n  };\n\n  _proto.getTilePrjSE = function getTilePrjSE(tileX, tileY, res) {\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = tileSystem['origin']['y'] + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 0 : 1)) * res * tileSize['height'];\n    var x = tileSystem['origin']['x'] + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 1 : 0)) * res * tileSize['width'];\n    return new Coordinate(x, y);\n  };\n\n  _proto.getTilePointSE = function getTilePointSE(tileX, tileY, res) {\n    var scale = this._glRes / res;\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = this._pointOrigin.y * scale + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 0 : 1)) * tileSize['height'];\n    var x = this._pointOrigin.x * scale + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 1 : 0)) * tileSize['width'];\n    return new Point(x, y);\n  };\n\n  _proto.getTilePrjExtent = function getTilePrjExtent(tileX, tileY, res) {\n    var nw = this.getTilePrjNW(tileX, tileY, res),\n        se = this.getTilePrjSE(tileX, tileY, res);\n    return new Extent(nw, se);\n  };\n\n  return TileConfig;\n}();\n\nvar DEFAULT_MAXERROR = 1;\nvar TEMP_POINT = new Point(0, 0);\nvar MAX_ROOT_NODES = 32;\nvar isSetAvailable = typeof Set !== 'undefined';\n\nvar TileHashset = function () {\n  function TileHashset() {\n    this._table = isSetAvailable ? new Set() : {};\n  }\n\n  var _proto = TileHashset.prototype;\n\n  _proto.add = function add$$1(key) {\n    if (isSetAvailable) {\n      this._table.add(key);\n    } else {\n      this._table[key] = true;\n    }\n  };\n\n  _proto.has = function has(key) {\n    if (isSetAvailable) {\n      return this._table.has(key);\n    } else {\n      return this._table[key];\n    }\n  };\n\n  _proto.reset = function reset() {\n    if (isSetAvailable) {\n      this._table.clear();\n    } else {\n      this._table = {};\n    }\n  };\n\n  return TileHashset;\n}();\n\nvar options$u = {\n  'urlTemplate': null,\n  'subdomains': null,\n  'errorUrl': null,\n  'repeatWorld': true,\n  'background': true,\n  'backgroundZoomDiff': 6,\n  'loadingLimitOnInteracting': 3,\n  'tileRetryCount': 0,\n  'placeholder': false,\n  'crossOrigin': null,\n  'tileSize': [256, 256],\n  'offset': [0, 0],\n  'tileSystem': null,\n  'fadeAnimation': !IS_NODE,\n  'debug': false,\n  'spatialReference': null,\n  'maxCacheSize': 256,\n  'renderer': function () {\n    return Browser$1.webgl ? 'gl' : 'canvas';\n  }(),\n  'clipByPitch': true,\n  'maxAvailableZoom': null,\n  'cascadeTiles': true,\n  'zoomOffset': 0,\n  'pyramidMode': 1,\n  'decodeImageInWorker': false\n};\nvar URL_PATTERN$1 = /\\{ *([\\w_]+) *\\}/g;\nvar TEMP_POINT0$4 = new Point(0, 0);\nvar TEMP_POINT1$1 = new Point(0, 0);\nvar TEMP_POINT2$1 = new Point(0, 0);\nvar TEMP_POINT3$1 = new Point(0, 0);\nvar TEMP_POINT4 = new Point(0, 0);\nvar TEMP_POINT6 = new Point(0, 0);\nvar TILE_BOX = [[0, 0, 0], [0, 0, 0]];\nvar TILE_MIN = [0, 0, 0];\nvar TILE_MAX = [0, 0, 0];\nvar ARR3 = [];\n\nvar TileLayer = function (_Layer) {\n  _inheritsLoose(TileLayer, _Layer);\n\n  function TileLayer() {\n    return _Layer.apply(this, arguments) || this;\n  }\n\n  TileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'TileLayer') {\n      return null;\n    }\n\n    return new TileLayer(layerJSON['id'], layerJSON['options']);\n  };\n\n  var _proto2 = TileLayer.prototype;\n\n  _proto2.getTileSize = function getTileSize() {\n    if (this._tileSize) {\n      return this._tileSize;\n    }\n\n    var size = this.options['tileSize'];\n\n    if (isNumber(size)) {\n      size = [size, size];\n    }\n\n    this._tileSize = new Size(size);\n    return this._tileSize;\n  };\n\n  _proto2.getTiles = function getTiles(z, parentLayer) {\n    this._coordCache = {};\n    var sr = this.getSpatialReference();\n\n    if (!this._disablePyramid && !this._hasOwnSR && this.options['pyramidMode'] && sr && sr.isPyramid()) {\n      return this._getPyramidTiles(z, parentLayer);\n    } else {\n      return this._getCascadeTiles(z, parentLayer);\n    }\n  };\n\n  _proto2._getTileFullExtent = function _getTileFullExtent() {\n    if (this._tileFullExtent) {\n      return this._tileFullExtent;\n    }\n\n    var sr = this.getSpatialReference();\n    var fullExtent = sr.getFullExtent();\n    var res = sr.getResolution(0);\n    var map = this.getMap();\n    this._tileFullExtent = fullExtent.convertTo(function (c) {\n      return map._prjToPointAtRes(c, res, TEMP_POINT);\n    });\n    return this._tileFullExtent;\n  };\n\n  _proto2._getRootNodes = function _getRootNodes(offset0) {\n    var map = this.getMap();\n\n    if (this._rootNodes) {\n      var _this$_rootNodes = this._rootNodes,\n          _tiles = _this$_rootNodes.tiles,\n          mapWidth = _this$_rootNodes.mapWidth,\n          mapHeight = _this$_rootNodes.mapHeight;\n\n      if (map.width !== mapWidth || map.height !== mapHeight) {\n        var _error = this._getRootError();\n\n        for (var i = 0; i < _tiles.length; i++) {\n          _tiles[i].error = _error;\n        }\n\n        this._rootNodes.mapWidth = map.width;\n        this._rootNodes.mapHeight = map.height;\n      }\n\n      for (var _i = 0; _i < _tiles.length; _i++) {\n        _tiles[_i].offset[0] = offset0[0];\n        _tiles[_i].offset[1] = offset0[1];\n      }\n\n      return this._rootNodes;\n    }\n\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(0);\n\n    var tileConfig = this._getTileConfig();\n\n    var fullExtent = sr.getFullExtent();\n    var _tileConfig$tileSyste = tileConfig.tileSystem,\n        origin = _tileConfig$tileSyste.origin,\n        scale = _tileConfig$tileSyste.scale;\n    var extent000 = tileConfig.getTilePrjExtent(0, 0, res);\n    var w = extent000.getWidth();\n    var h = extent000.getHeight();\n    var delta = 1E-5;\n    var left = Math.abs((origin.x - fullExtent.left) / w);\n    left = Math.ceil(left - delta);\n    var right = Math.abs((fullExtent.right - origin.x) / w);\n    right = Math.ceil(right - delta);\n    var top = Math.ceil(Math.abs(fullExtent.top - origin.y) / h);\n    top = Math.ceil(top - delta);\n    var bottom = Math.ceil(Math.abs(fullExtent.bottom - origin.y) / h);\n    bottom = Math.ceil(bottom - delta);\n\n    if ((right + left) * (bottom + top) > MAX_ROOT_NODES) {\n      return {\n        status: 0,\n        error: 'Too many root nodes'\n      };\n    }\n\n    var error = this._getRootError();\n\n    var tiles = [];\n    var z = 0;\n\n    for (var _i2 = -left; _i2 < right; _i2++) {\n      for (var j = -top; j < bottom; j++) {\n        var y = scale.y < 0 ? j : -(j + 1);\n        tiles.push({\n          x: _i2,\n          y: y,\n          z: z,\n          idx: _i2,\n          idy: y,\n          extent2d: tileConfig.getTilePrjExtent(_i2, y, res).convertTo(function (c) {\n            return map._prjToPointAtRes(c, res, TEMP_POINT);\n          }),\n          id: this._getTileId(_i2, y, z),\n          url: this.getTileUrl(_i2, y, z + this.options['zoomOffset']),\n          offset: [0, 0],\n          error: error\n        });\n      }\n    }\n\n    this._rootNodes = {\n      status: 1,\n      tiles: tiles,\n      mapWidth: map.width,\n      mapHeight: map.height\n    };\n    return this._getRootNodes(offset0);\n  };\n\n  _proto2._getRootError = function _getRootError() {\n    var map = this.getMap();\n    var fov = toRadian(map.getFov());\n    var aspectRatio = map.width / map.height;\n    var cameraZ = map.cameraPosition[2];\n    var heightZ = cameraZ * Math.tan(0.5 * fov);\n    var widthZ = heightZ * aspectRatio;\n    var diagonalZ = Math.sqrt(cameraZ * cameraZ + heightZ * heightZ + widthZ * widthZ);\n\n    var fov0 = map._getFovZ(0);\n\n    var error = fov0 * (diagonalZ / cameraZ);\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(0);\n    return error * res / map.getResolution(0);\n  };\n\n  _proto2._getPyramidTiles = function _getPyramidTiles(z, layer) {\n    var map = this.getMap();\n\n    if (isNaN(+z)) {\n      z = this._getTileZoom(map.getZoom());\n    }\n\n    var sr = this.getSpatialReference();\n    var maxZoom = Math.min(z, this.getMaxZoom());\n    var projectionView = map.projViewMatrix;\n\n    var fullExtent = this._getTileFullExtent();\n\n    var offset0 = this._getTileOffset(0);\n\n    var queue;\n\n    if (this.options['repeatWorld']) {\n      var mapContainerExtent = map.getContainerExtent();\n\n      var mapExtent2D = this._convertToExtent2d(mapContainerExtent);\n\n      var scale = sr.getResolution(0) / map.getResolution();\n\n      if (!mapExtent2D.within(fullExtent.copy()._scale(scale))) {\n        var pitch = map.getPitch();\n        var cascadePitch1 = map.options['cascadePitches'][1];\n        var visualHeight1 = Math.floor(map._getVisualHeight(cascadePitch1));\n        var visualContainerExtent = pitch <= cascadePitch1 ? mapContainerExtent : new PointExtent(0, map.height - visualHeight1, map.width, map.height);\n        this._visitedTiles = new TileHashset();\n\n        var tileGrid = this._getTiles(0, visualContainerExtent, 2, layer && layer.getRenderer(), true);\n\n        var error = this._getRootError();\n\n        tileGrid.tiles.forEach(function (t) {\n          t.error = error;\n        });\n        queue = tileGrid.tiles;\n      } else {\n        var rootNodes = this._getRootNodes(offset0);\n\n        if (rootNodes.status !== 1) {\n          console.warn(rootNodes.error);\n          this._disablePyramid = true;\n          return this.getTiles(z, layer);\n        }\n\n        queue = rootNodes.tiles.concat();\n      }\n    } else {\n      var _rootNodes = this._getRootNodes(offset0);\n\n      if (_rootNodes.status !== 1) {\n        console.warn(_rootNodes.error);\n        this._disablePyramid = true;\n        return this.getTiles(z, layer);\n      }\n\n      queue = _rootNodes.tiles.concat();\n    }\n\n    var glRes = map.getGLRes();\n    var offsets = {\n      0: offset0\n    };\n    var extent = new PointExtent();\n    var tiles = [];\n\n    while (queue.length > 0) {\n      var node = queue.pop();\n\n      if (node.z === maxZoom) {\n        extent._combine(node.extent2d);\n\n        tiles.push(node);\n        continue;\n      }\n\n      if (!offsets[node.z + 1]) {\n        offsets[node.z + 1] = this._getTileOffset(node.z + 1);\n      }\n\n      this._splitNode(node, projectionView, queue, tiles, extent, maxZoom, offsets[node.z + 1], layer && layer.getRenderer(), glRes);\n    }\n\n    return {\n      tileGrids: [{\n        extent: extent,\n        count: tiles.length,\n        tiles: tiles,\n        offset: [0, 0],\n        zoom: z\n      }],\n      count: tiles.length\n    };\n  };\n\n  _proto2._splitNode = function _splitNode(node, projectionView, queue, tiles, gridExtent, maxZoom, offset, parentRenderer, glRes) {\n    var tileSystem = this._getTileConfig().tileSystem;\n\n    var scaleY = tileSystem.scale.y;\n    var z = node.z + 1;\n    var sr = this.getSpatialReference();\n    var x = node.x,\n        y = node.y,\n        extent2d = node.extent2d,\n        idx = node.idx,\n        idy = node.idy;\n    var childScale = 2;\n    var width = extent2d.getWidth() / 2 * childScale;\n    var height = extent2d.getHeight() / 2 * childScale;\n    var minx = extent2d.xmin * childScale;\n    var maxy = extent2d.ymax * childScale;\n    var miny = extent2d.ymin * childScale;\n    var renderer = parentRenderer || this.getRenderer();\n    var hasCurrentIn = false;\n    var children = [];\n    var glScale = sr.getResolution(z) / glRes;\n\n    for (var i = 0; i < 4; i++) {\n      var dx = i % 2;\n      var dy = i >> 1;\n      var childX = (x << 1) + dx;\n      var childY = (y << 1) + dy;\n      var childIdx = (idx << 1) + dx;\n      var childIdy = (idy << 1) + dy;\n\n      var tileId = this._getTileId(childIdx, childIdy, z);\n\n      var cached = renderer.isTileCachedOrLoading(tileId);\n      var extent = void 0;\n\n      if (!cached) {\n        if (scaleY < 0) {\n          var nwx = minx + dx * width;\n          var nwy = maxy - dy * height;\n          extent = new PointExtent(nwx, nwy - height, nwx + width, nwy);\n        } else {\n          var swx = minx + dx * width;\n          var swy = miny + dy * height;\n          extent = new PointExtent(swx, swy, swx + width, swy + height);\n        }\n      }\n\n      var childNode = cached && cached.info;\n\n      if (!childNode) {\n        childNode = {\n          x: childX,\n          y: childY,\n          idx: childIdx,\n          idy: childIdy,\n          z: z,\n          extent2d: extent,\n          error: node.error / 2,\n          id: tileId,\n          url: this.getTileUrl(childX, childY, z + this.options['zoomOffset']),\n          offset: offset\n        };\n\n        if (parentRenderer) {\n          childNode['layer'] = this.getId();\n        }\n      }\n\n      childNode.error = node.error / 2;\n      childNode.offset[0] = offset[0];\n      childNode.offset[1] = offset[1];\n\n      var visible = this._isTileVisible(childNode, projectionView, glScale, maxZoom, offset);\n\n      if (visible === 1) {\n        hasCurrentIn = true;\n      } else if (visible === -1) {\n        continue;\n      } else if (visible === 0 && z !== maxZoom) {\n        tiles.push(node);\n\n        gridExtent._combine(node.extent2d);\n\n        return;\n      }\n\n      children.push(childNode);\n    }\n\n    if (z === maxZoom) {\n      if (hasCurrentIn) {\n        queue.push.apply(queue, children);\n      } else {\n        tiles.push(node);\n\n        gridExtent._combine(node.extent2d);\n      }\n    } else {\n      queue.push.apply(queue, children);\n    }\n  };\n\n  _proto2._isTileVisible = function _isTileVisible(node, projectionView, glScale, maxZoom, offset) {\n    if (node.z === 0) {\n      return 1;\n    }\n\n    if (!this._isTileInFrustum(node, projectionView, glScale, offset)) {\n        return -1;\n      }\n\n    var maxError = this.options['maxError'];\n\n    if (isNil(maxError)) {\n      maxError = DEFAULT_MAXERROR;\n    }\n\n    var error = this._getScreenSpaceError(node, glScale, maxZoom, offset);\n\n    return error >= maxError ? 1 : 0;\n  };\n\n  _proto2._isTileInFrustum = function _isTileInFrustum(node, projectionView, glScale, offset) {\n    var _node$extent2d = node.extent2d,\n        xmin = _node$extent2d.xmin,\n        ymin = _node$extent2d.ymin,\n        xmax = _node$extent2d.xmax,\n        ymax = _node$extent2d.ymax;\n    TILE_BOX[0][0] = (xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (ymin - offset[1]) * glScale;\n    TILE_BOX[1][0] = (xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (ymax - offset[1]) * glScale;\n    return intersectsBox(projectionView, TILE_BOX);\n  };\n\n  _proto2._getScreenSpaceError = function _getScreenSpaceError(node, glScale, maxZoom, offset) {\n    var geometricError = node.error;\n    var map = this.getMap();\n    var _node$extent2d2 = node.extent2d,\n        xmin = _node$extent2d2.xmin,\n        ymin = _node$extent2d2.ymin,\n        xmax = _node$extent2d2.xmax,\n        ymax = _node$extent2d2.ymax;\n    TILE_MIN[0] = (xmin - offset[0]) * glScale;\n    TILE_MIN[1] = (ymin - offset[1]) * glScale;\n    TILE_MAX[0] = (xmax - offset[0]) * glScale;\n    TILE_MAX[1] = (ymax - offset[1]) * glScale;\n    var distanceToCamera = distanceToRect(TILE_MIN, TILE_MAX, map.cameraPosition);\n    var distance$$1 = Math.max(Math.abs(distanceToCamera), 1E-7);\n    var gap = Math.abs(node.z - maxZoom);\n    var r;\n\n    if (map.height < 1000) {\n      r = 1;\n    } else {\n      r = gap <= 1 ? 1 : gap <= 2 ? 0.7 : 0.605;\n    }\n\n    var error = geometricError * r / distance$$1;\n    return error;\n  };\n\n  _proto2._getCascadeTiles = function _getCascadeTiles(z, parentLayer) {\n    var map = this.getMap();\n    var pitch = map.getPitch();\n    var parentRenderer = parentLayer && parentLayer.getRenderer();\n    var mapExtent = map.getContainerExtent();\n    var tileGrids = [];\n    var count = 0;\n    var minZoom = this.getMinZoom();\n    var cascadePitch0 = map.options['cascadePitches'][0];\n    var cascadePitch1 = map.options['cascadePitches'][1];\n    var visualHeight1 = Math.floor(map._getVisualHeight(cascadePitch1));\n    var tileZoom = isNil(z) ? this._getTileZoom(map.getZoom()) : z;\n    this._visitedTiles = new TileHashset();\n\n    if (!isNil(z) || !this.options['cascadeTiles'] || pitch <= cascadePitch0 || !isNil(minZoom) && tileZoom <= minZoom) {\n      var containerExtent = pitch <= cascadePitch1 ? mapExtent : new PointExtent(0, map.height - visualHeight1, map.width, map.height);\n\n      var _currentTiles = this._getTiles(tileZoom, containerExtent, 2, parentRenderer);\n\n      if (_currentTiles) {\n        count += _currentTiles.tiles.length;\n        tileGrids.push(_currentTiles);\n      }\n\n      return {\n        tileGrids: tileGrids,\n        count: count\n      };\n    }\n\n    var visualHeight0 = Math.floor(map._getVisualHeight(cascadePitch0));\n    var extent0 = new PointExtent(0, map.height - visualHeight0, map.width, map.height);\n\n    var currentTiles = this._getTiles(tileZoom, extent0, 0, parentRenderer);\n\n    count += currentTiles ? currentTiles.tiles.length : 0;\n    tileGrids.push(currentTiles);\n    var cascadeHeight = extent0.ymin;\n    var d = map.getSpatialReference().getZoomDirection();\n    var cascadeLevels = d;\n    var cascadeTiles1;\n\n    if (pitch > cascadePitch1) {\n      if (tileZoom - cascadeLevels <= minZoom) {\n        cascadeLevels = 0;\n      }\n\n      var extent1 = new PointExtent(0, map.height - visualHeight1, map.width, cascadeHeight);\n      cascadeTiles1 = this._getTiles(tileZoom - cascadeLevels, extent1, 1, parentRenderer);\n      count += cascadeTiles1 ? cascadeTiles1.tiles.length : 0;\n      cascadeHeight = extent1.ymin;\n      cascadeLevels += 4 * d;\n    }\n\n    var cascadeTiles2;\n\n    if (tileZoom - cascadeLevels >= minZoom) {\n      var extent2 = new PointExtent(0, mapExtent.ymin, map.width, cascadeHeight);\n      cascadeTiles2 = this._getTiles(tileZoom - cascadeLevels, extent2, 2, parentRenderer);\n      count += cascadeTiles2 ? cascadeTiles2.tiles.length : 0;\n      tileGrids.push(cascadeTiles2);\n    }\n\n    if (cascadeTiles1 && cascadeTiles2) {\n      tileGrids[1] = cascadeTiles2;\n      tileGrids[2] = cascadeTiles1;\n    }\n\n    return {\n      tileGrids: tileGrids,\n      count: count\n    };\n  };\n\n  _proto2.getTileUrl = function getTileUrl(x, y, z) {\n    var urlTemplate = this.options['urlTemplate'];\n    var domain = '';\n\n    if (this.options['subdomains']) {\n      var subdomains = this.options['subdomains'];\n\n      if (isArrayHasData(subdomains)) {\n        var length$$1 = subdomains.length;\n        var s = (x + y) % length$$1;\n\n        if (s < 0) {\n          s = 0;\n        }\n\n        domain = subdomains[s];\n      }\n    }\n\n    if (isFunction(urlTemplate)) {\n      return urlTemplate(x, y, z, domain);\n    }\n\n    var data = {\n      'x': x,\n      'y': y,\n      'z': z,\n      's': domain\n    };\n\n    if (this.options.token) {\n      data.token = this.options.token;\n    }\n\n    return urlTemplate.replace(URL_PATTERN$1, function (str, key) {\n      var value = data[key];\n\n      if (value === undefined) {\n        throw new Error('No value provided for variable ' + str);\n      } else if (typeof value === 'function') {\n        value = value(data);\n      }\n\n      return value;\n    });\n  };\n\n  _proto2.clear = function clear() {\n    if (this._renderer) {\n      this._renderer.clear();\n    }\n\n    this.fire('clear');\n    return this;\n  };\n\n  _proto2.toJSON = function toJSON() {\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'options': this.config()\n    };\n    return profile;\n  };\n\n  _proto2.getSpatialReference = function getSpatialReference() {\n    var map = this.getMap();\n\n    if (map && (!this.options['spatialReference'] || SpatialReference.equals(this.options['spatialReference'], map.options['spatialReference']))) {\n      return map.getSpatialReference();\n    }\n\n    if (this._sr) {\n      return this._sr;\n    }\n\n    var config = this.options['spatialReference'];\n\n    if (isString(config)) {\n      config = SpatialReference.getPreset(config);\n\n      if (!config) {\n        throw new Error(\"Unsupported spatial reference: \" + this.options['spatialReference'] + \", possible values: \" + SpatialReference.getAllPresets().join());\n      }\n    }\n\n    this._sr = new SpatialReference(config);\n    this._srMinZoom = this._sr.getMinZoom();\n    this._srMaxZoom = this._sr.getMaxZoom();\n    this._hasOwnSR = this._sr.toJSON().projection !== map.getSpatialReference().toJSON().projection;\n    return this._sr;\n  };\n\n  _proto2.getMinZoom = function getMinZoom() {\n    var sr = this.getSpatialReference();\n\n    if (sr !== this.getMap().getSpatialReference()) {\n      return Math.max(_Layer.prototype.getMinZoom.call(this), this._srMinZoom);\n    }\n\n    return _Layer.prototype.getMinZoom.call(this);\n  };\n\n  _proto2.getMaxZoom = function getMaxZoom() {\n    var sr = this.getSpatialReference();\n\n    if (sr !== this.getMap().getSpatialReference()) {\n      return Math.min(_Layer.prototype.getMaxZoom.call(this), this._srMaxZoom);\n    }\n\n    return _Layer.prototype.getMaxZoom.call(this);\n  };\n\n  _proto2._getTileZoom = function _getTileZoom(zoom) {\n    if (!this._hasOwnSR) {\n      var res0 = this.getMap().getResolution(zoom);\n      var res1 = this.getSpatialReference().getResolution(zoom);\n      var dz = Math.log(res1 / res0) * Math.LOG2E;\n      zoom += dz;\n    }\n\n    var maxZoom = this.options['maxAvailableZoom'];\n\n    if (!isNil(maxZoom) && zoom > maxZoom) {\n      zoom = maxZoom;\n    }\n\n    if (!isInteger(zoom)) {\n      zoom = Math.round(zoom);\n    }\n\n    zoom = Math.max(0, zoom);\n    return zoom;\n  };\n\n  _proto2._getTiles = function _getTiles(tileZoom, containerExtent, cascadeLevel, parentRenderer, ignoreMinZoom) {\n    var map = this.getMap();\n    var z = tileZoom;\n    var frustumMatrix = map.projViewMatrix;\n\n    if (cascadeLevel < 2) {\n      if (cascadeLevel === 0) {\n        z -= 1;\n      }\n\n      frustumMatrix = cascadeLevel === 0 ? map.cascadeFrustumMatrix0 : cascadeLevel === 1 ? map.cascadeFrustumMatrix1 : map.projViewMatrix;\n    }\n\n    var zoom = z + this.options['zoomOffset'];\n\n    var offset = this._getTileOffset(zoom),\n        hasOffset = offset[0] || offset[1];\n\n    var emptyGrid = {\n      'zoom': z,\n      'extent': null,\n      'offset': offset,\n      'tiles': []\n    };\n\n    if (zoom < 0) {\n      return emptyGrid;\n    }\n\n    if (!map || !this.isVisible() || !map.width || !map.height) {\n      return emptyGrid;\n    }\n\n    if (!ignoreMinZoom) {\n      var minZoom = this.getMinZoom(),\n          maxZoom = this.getMaxZoom();\n\n      if (!isNil(minZoom) && z < minZoom || !isNil(maxZoom) && z > maxZoom) {\n        return emptyGrid;\n      }\n    }\n\n    var tileConfig = this._getTileConfig();\n\n    if (!tileConfig) {\n      return emptyGrid;\n    }\n\n    var tileOffsets = {\n      zoom: offset\n    };\n    var sr = this.getSpatialReference();\n    var res = sr.getResolution(zoom);\n    var glScale;\n\n    if (this._hasOwnSR) {\n      glScale = map.getGLScale(z);\n    } else {\n      glScale = res / map.getGLRes();\n    }\n\n    var repeatWorld = !this._hasOwnSR && this.options['repeatWorld'];\n\n    var extent2d = this._convertToExtent2d(containerExtent);\n\n    var maskExtent = this._getMask2DExtent();\n\n    if (maskExtent) {\n      var intersection = maskExtent.intersection(extent2d);\n\n      if (!intersection) {\n        return emptyGrid;\n      }\n\n      containerExtent = intersection.convertTo(function (c) {\n        return map._pointToContainerPoint(c, undefined, 0, TEMP_POINT);\n      });\n    }\n\n    var prjCenter = map._containerPointToPrj(containerExtent.getCenter(), TEMP_POINT0$4);\n\n    var centerPoint = map._prjToPoint(prjCenter, zoom, TEMP_POINT1$1);\n\n    var c;\n\n    if (hasOffset) {\n      c = this._project(map._pointToPrj(centerPoint._add(offset), zoom, TEMP_POINT1$1), TEMP_POINT1$1);\n    } else {\n      c = this._project(prjCenter, TEMP_POINT1$1);\n    }\n\n    var extentScale = map.getGLScale() / map.getGLScale(zoom);\n    TEMP_POINT2$1.x = extent2d.xmin * extentScale;\n    TEMP_POINT2$1.y = extent2d.ymax * extentScale;\n    TEMP_POINT3$1.x = extent2d.xmax * extentScale;\n    TEMP_POINT3$1.y = extent2d.ymin * extentScale;\n\n    var pmin = this._project(map._pointToPrj(TEMP_POINT2$1._add(offset), zoom, TEMP_POINT2$1), TEMP_POINT2$1);\n\n    var pmax = this._project(map._pointToPrj(TEMP_POINT3$1._add(offset), zoom, TEMP_POINT3$1), TEMP_POINT3$1);\n\n    var centerTile = tileConfig.getTileIndex(c, res, repeatWorld);\n    var ltTile = tileConfig.getTileIndex(pmin, res, repeatWorld);\n    var rbTile = tileConfig.getTileIndex(pmax, res, repeatWorld);\n    var top = Math.ceil(Math.abs(centerTile.idy - ltTile.idy)),\n        left = Math.ceil(Math.abs(centerTile.idx - ltTile.idx)),\n        bottom = Math.ceil(Math.abs(centerTile.idy - rbTile.idy)),\n        right = Math.ceil(Math.abs(centerTile.idx - rbTile.idx));\n    var allCount = (top + bottom + 1) * (left + right + 1);\n    var tileSize = this.getTileSize();\n\n    var renderer = this.getRenderer() || parentRenderer,\n        scale = this._getTileConfig().tileSystem.scale;\n\n    var tiles = [],\n        extent = new PointExtent();\n    var tilePoint = new Point(0, 0);\n\n    for (var i = -top; i <= bottom; i++) {\n      var j = -left;\n      var leftVisitEnd = -Infinity;\n      var rightVisitEnd = false;\n\n      while (j >= leftVisitEnd && j <= right) {\n        var idx = tileConfig.getNeighorTileIndex(centerTile.idx, centerTile.idy, j, i, res, repeatWorld);\n\n        if (leftVisitEnd === -Infinity) {\n          j++;\n        } else {\n          j--;\n        }\n\n        var tileId = this._getTileId(idx.idx, idx.idy, z);\n\n        if (idx.out || this._visitedTiles && this._visitedTiles.has(tileId)) {\n          continue;\n        }\n\n        var tileInfo = renderer && renderer.isTileCachedOrLoading(tileId);\n\n        if (tileInfo) {\n          tileInfo = tileInfo.info;\n        }\n\n        var p = void 0;\n\n        if (tileInfo) {\n          var _tileInfo = tileInfo,\n              _extent2d = _tileInfo.extent2d;\n          tilePoint.set(_extent2d.xmin, _extent2d.ymax);\n          p = tilePoint;\n        } else if (!this._hasOwnSR) {\n          p = tileConfig.getTilePointNW(idx.x, idx.y, res);\n        } else {\n          var pnw = tileConfig.getTilePrjNW(idx.x, idx.y, res);\n          p = map._prjToPoint(this._unproject(pnw, TEMP_POINT3$1), z);\n        }\n\n        var width = void 0,\n            height = void 0;\n\n        if (!this._hasOwnSR) {\n          width = tileSize.width;\n          height = tileSize.height;\n        } else {\n          var pp = void 0;\n\n          if (!this._hasOwnSR) {\n            pp = tileConfig.getTilePointSE(idx.x, idx.y, res);\n          } else {\n            var pse = tileConfig.getTilePrjSE(idx.x, idx.y, res);\n            pp = map._prjToPoint(this._unproject(pse, TEMP_POINT3$1), z, TEMP_POINT3$1);\n          }\n\n          width = Math.ceil(Math.abs(pp.x - p.x));\n          height = Math.ceil(Math.abs(pp.y - p.y));\n        }\n\n        var dx = scale.x * (idx.idx - idx.x) * width,\n            dy = scale.y * (idx.idy - idx.y) * height;\n\n        if (!tileInfo && (dx || dy)) {\n          p._add(dx, dy);\n        }\n\n        var tileExtent = tileInfo && tileInfo.extent2d || new PointExtent(p.x, p.y - height, p.x + width, p.y);\n\n        if (allCount <= 4 || rightVisitEnd || this._isTileInExtent(frustumMatrix, tileExtent, offset, glScale)) {\n          if (this._visitedTiles && cascadeLevel === 0) {\n            this._visitedTiles.add(tileId);\n          }\n\n          if (cascadeLevel === 0) {\n            this._splitTiles(frustumMatrix, tiles, renderer, idx, z + 1, tileExtent, dx, dy, tileOffsets, parentRenderer);\n\n            extent._combine(tileExtent);\n          } else {\n            if (!tileInfo) {\n              tileInfo = {\n                'z': z,\n                'x': idx.x,\n                'y': idx.y,\n                'idx': idx.idx,\n                'idy': idx.idy,\n                'extent2d': tileExtent,\n                'offset': offset,\n                'id': tileId,\n                'url': this.getTileUrl(idx.x, idx.y, z)\n              };\n\n              if (parentRenderer) {\n                tileInfo['layer'] = this.getId();\n              }\n            } else {\n              tileInfo.offset[0] = offset[0];\n              tileInfo.offset[1] = offset[1];\n            }\n\n            tiles.push(tileInfo);\n\n            extent._combine(tileExtent);\n          }\n\n          if (leftVisitEnd === -Infinity) {\n            leftVisitEnd = j;\n            j = right;\n          } else if (!rightVisitEnd) {\n            rightVisitEnd = true;\n          }\n        }\n      }\n    }\n\n    if (tiles.length) {\n      var center = map._containerPointToPoint(containerExtent.getCenter(), z, TEMP_POINT)._add(offset);\n\n      var point0 = new Point(0, 0);\n      var point1 = new Point(0, 0);\n      tiles.sort(function (a, b) {\n        point0.set((a.extent2d.xmin + a.extent2d.xmax) / 2, (a.extent2d.ymin + a.extent2d.ymax) / 2);\n        point1.set((b.extent2d.xmin + b.extent2d.xmax) / 2, (b.extent2d.ymin + b.extent2d.ymax) / 2);\n        return point0.distanceTo(center) - point1.distanceTo(center);\n      });\n    }\n\n    return {\n      'offset': offset,\n      'zoom': tileZoom,\n      'extent': extent,\n      'tiles': tiles\n    };\n  };\n\n  _proto2._convertToExtent2d = function _convertToExtent2d(containerExtent) {\n    var _this = this;\n\n    var map = this.getMap();\n    return containerExtent.convertTo(function (c) {\n      var result;\n\n      if (c.y > 0 && c.y < map.height) {\n        var key = (c.x === 0 ? 0 : 1) + c.y;\n\n        if (!_this._coordCache[key]) {\n          _this._coordCache[key] = map._containerPointToPoint(c);\n        }\n\n        result = _this._coordCache[key];\n      }\n\n      result = map._containerPointToPoint(c, undefined, TEMP_POINT);\n      return result;\n    });\n  };\n\n  _proto2._splitTiles = function _splitTiles(frustumMatrix, tiles, renderer, tileIdx, z, tileExtent, dx, dy, tileOffsets, parentRenderer) {\n    var yOrder = this._getTileConfig().tileSystem.scale.y;\n\n    var glScale = this.getMap().getGLScale(z);\n    var corner = TEMP_POINT4.set(tileExtent.xmin * 2, yOrder < 0 ? tileExtent.ymax * 2 : tileExtent.ymin * 2);\n    var w = tileExtent.getWidth();\n    var h = tileExtent.getHeight();\n    var idx = tileIdx.idx * 2;\n    var idy = tileIdx.idy * 2;\n    var x = tileIdx.x * 2;\n    var y = tileIdx.y * 2;\n\n    var tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, 0, 0, w, h, corner, glScale, tileOffsets, parentRenderer);\n\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, 0, 1, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, 1, 0, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, 1, 1, w, h, corner, glScale, tileOffsets, parentRenderer);\n    if (tile) tiles.push(tile);\n  };\n\n  _proto2._checkAndAddTile = function _checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, i, j, w, h, corner, glScale, tileOffsets, parentRenderer) {\n    var tileId = this._getTileId(idx + i, idy + j, z);\n\n    if (this._visitedTiles && this._visitedTiles.has(tileId)) {\n      return null;\n    }\n\n    var offset = tileOffsets[z];\n\n    if (!offset) {\n      offset = tileOffsets[z] = this._getTileOffset(z);\n    }\n\n    var yOrder = this._getTileConfig().tileSystem.scale.y;\n\n    var childExtent = new PointExtent(corner.x + i * w, corner.y + yOrder * j * h, corner.x + (i + 1) * w, corner.y + yOrder * (j + 1) * h);\n\n    if (!this._isSplittedTileInExtent(frustumMatrix, childExtent, offset, glScale)) {\n      return null;\n    }\n\n    var tileInfo = renderer && renderer.isTileCachedOrLoading(tileId);\n\n    if (!tileInfo) {\n      tileInfo = {\n        'z': z,\n        'x': x + i,\n        'y': y + j,\n        'extent2d': childExtent,\n        'id': tileId,\n        'offset': offset,\n        'url': this.getTileUrl(x + i, y + j, z + this.options['zoomOffset'])\n      };\n\n      if (parentRenderer) {\n        tileInfo['layer'] = this.getId();\n      }\n    } else {\n      tileInfo = tileInfo.info;\n    }\n\n    return tileInfo;\n  };\n\n  _proto2._getTileOffset = function _getTileOffset(z) {\n    var offset = this.options['offset'];\n\n    if (isFunction(offset)) {\n      offset = offset(z);\n    }\n\n    return offset;\n  };\n\n  _proto2._getTileId = function _getTileId(x, y, zoom, id) {\n    return (id || this.getId()) + \"_\" + y + \"_\" + x + \"_\" + zoom;\n  };\n\n  _proto2._project = function _project(pcoord, out) {\n    if (this._hasOwnSR) {\n      var map = this.getMap();\n      var mapProjection = map.getProjection();\n      var projection = this.getSpatialReference().getProjection();\n      return projection.project(mapProjection.unproject(pcoord, out), out);\n    } else {\n      return pcoord;\n    }\n  };\n\n  _proto2._unproject = function _unproject(pcoord, out) {\n    if (this._hasOwnSR) {\n      var map = this.getMap();\n      var sr = this.getSpatialReference();\n      var mapProjection = map.getProjection();\n      var projection = sr.getProjection();\n      return mapProjection.project(projection.unproject(pcoord, out), out);\n    } else {\n      return pcoord;\n    }\n  };\n\n  _proto2._initTileConfig = function _initTileConfig() {\n    var map = this.getMap(),\n        tileSize = this.getTileSize();\n    var sr = this.getSpatialReference();\n    var projection = sr.getProjection(),\n        fullExtent = sr.getFullExtent();\n    this._defaultTileConfig = new TileConfig(map, TileSystem.getDefault(projection), fullExtent, tileSize);\n\n    if (this.options.hasOwnProperty('tileSystem')) {\n      this._tileConfig = new TileConfig(map, this.options['tileSystem'], fullExtent, tileSize);\n    }\n\n    delete this._rootNodes;\n    delete this._tileFullExtent;\n    delete this._disablePyramid;\n  };\n\n  _proto2._getTileConfig = function _getTileConfig() {\n    if (!this._defaultTileConfig) {\n      this._initTileConfig();\n    }\n\n    return this._tileConfig || this._defaultTileConfig;\n  };\n\n  _proto2._bindMap = function _bindMap(map) {\n    var baseLayer = map.getBaseLayer();\n\n    if (baseLayer === this) {\n      if (!baseLayer.options.hasOwnProperty('forceRenderOnMoving')) {\n        this.config({\n          'forceRenderOnMoving': true\n        });\n      }\n    }\n\n    this._onSpatialReferenceChange();\n\n    return _Layer.prototype._bindMap.apply(this, arguments);\n  };\n\n  _proto2._isTileInExtent = function _isTileInExtent(frustumMatrix, tileExtent, offset, glScale) {\n    var map = this.getMap();\n    var matrix;\n\n    if (frustumMatrix !== map.projViewMatrix) {\n      var tileCenter = tileExtent.getCenter(TEMP_POINT6)._sub(offset[0], offset[1])._multi(glScale);\n\n      set$2(ARR3, tileCenter.x, tileCenter.y, 0);\n      var ndc = transformMat4(ARR3, ARR3, map.projViewMatrix);\n      matrix = ndc[1] < 0 ? map.projViewMatrix : frustumMatrix;\n    } else {\n      matrix = map.projViewMatrix;\n    }\n\n    TILE_BOX[0][0] = (tileExtent.xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (tileExtent.ymin - offset[1]) * glScale;\n    TILE_BOX[1][0] = (tileExtent.xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (tileExtent.ymax - offset[1]) * glScale;\n    return intersectsBox(matrix, TILE_BOX);\n  };\n\n  _proto2._isSplittedTileInExtent = function _isSplittedTileInExtent(frustumMatrix, tileExtent, offset, glScale) {\n    var map = this.getMap();\n    TILE_BOX[0][0] = (tileExtent.xmin - offset[0]) * glScale;\n    TILE_BOX[0][1] = (tileExtent.ymin - offset[1]) * glScale;\n    TILE_BOX[1][0] = (tileExtent.xmax - offset[0]) * glScale;\n    TILE_BOX[1][1] = (tileExtent.ymax - offset[1]) * glScale;\n    return intersectsBox(map.projViewMatrix, TILE_BOX);\n  };\n\n  _proto2.getEvents = function getEvents() {\n    return {\n      'spatialreferencechange': this._onSpatialReferenceChange\n    };\n  };\n\n  _proto2._onSpatialReferenceChange = function _onSpatialReferenceChange() {\n    delete this._tileConfig;\n    delete this._defaultTileConfig;\n    delete this._sr;\n    delete this._srMinZoom;\n    delete this._hasOwnSR;\n    var renderer = this.getRenderer();\n\n    if (renderer) {\n      renderer.clear();\n    }\n  };\n\n  return TileLayer;\n}(Layer);\n\nTileLayer.registerJSONType('TileLayer');\nTileLayer.mergeOptions(options$u);\n\nfunction distanceToRect(min, max, xyz) {\n  var dx = Math.max(min[0] - xyz[0], 0, xyz[0] - max[0]);\n  var dy = Math.max(min[1] - xyz[1], 0, xyz[1] - max[1]);\n  var dz = Math.max(min[2] - xyz[2], 0, xyz[2] - max[2]);\n  return Math.sqrt(dx * dx + dy * dy + dz * dz);\n}\n\nvar workerSource = \"\\nfunction (exports) {\\n    exports.onmessage = function (msg, postResponse) {\\n        var url = msg.data.url;\\n        var fetchOptions = msg.data.fetchOptions;\\n        requestImageOffscreen(url, function (err, data) {\\n            var buffers = [];\\n            if (data && data.data && data.data.buffer) {\\n                buffers.push(data.data.buffer);\\n            }\\n            postResponse(err, data, buffers);\\n        }, fetchOptions);\\n    };\\n\\n    var offCanvas, offCtx;\\n    function requestImageOffscreen(url, cb, fetchOptions) {\\n        if (!offCanvas) {\\n            offCanvas = new OffscreenCanvas(2, 2);\\n            offCtx = offCanvas.getContext('2d');\\n        }\\n        fetch(url, fetchOptions ? fetchOptions : {})\\n            .then(response => response.blob())\\n            .then(blob => createImageBitmap(blob))\\n            .then(bitmap => {\\n                var { width, height } = bitmap;\\n                offCanvas.width = width;\\n                offCanvas.height = height;\\n                offCtx.drawImage(bitmap, 0, 0);\\n                bitmap.close();\\n                var imgData = offCtx.getImageData(0, 0, width, height);\\n                // debugger\\n                cb(null, { width, height, data: new Uint8Array(imgData.data) });\\n            }).catch(err => {\\n                console.warn('error when loading tile:', url);\\n                console.warn(err);\\n                cb(err);\\n            });\\n    }\\n}\";\n\nfunction registerWorkerSource() {\n  if (!Browser$1.decodeImageInWorker) {\n    return;\n  }\n\n  registerWorkerAdapter(imageFetchWorkerKey, function () {\n    return workerSource;\n  });\n}\n\nregisterWorkerSource();\n\nvar options$v = {\n  'maxCacheSize': 1024\n};\nvar DEFAULT_TILESIZE = new Size(256, 256);\n\nvar GroupTileLayer = function (_TileLayer) {\n  _inheritsLoose(GroupTileLayer, _TileLayer);\n\n  GroupTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'GroupTileLayer') {\n      return null;\n    }\n\n    var layers = layerJSON['layers'].map(function (json) {\n      return Layer.fromJSON(json);\n    });\n    return new GroupTileLayer(layerJSON['id'], layers, layerJSON['options']);\n  };\n\n  function GroupTileLayer(id, layers, options) {\n    var _this;\n\n    _this = _TileLayer.call(this, id, options) || this;\n    _this.layers = layers || [];\n\n    _this._checkChildren();\n\n    _this.layerMap = {};\n    _this._groupChildren = [];\n    return _this;\n  }\n\n  var _proto = GroupTileLayer.prototype;\n\n  _proto.getLayers = function getLayers() {\n    return this.layers;\n  };\n\n  _proto.toJSON = function toJSON() {\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'layers': this.layers.map(function (layer) {\n        return layer.toJSON();\n      }),\n      'options': this.config()\n    };\n    return profile;\n  };\n\n  _proto.getTileSize = function getTileSize(id) {\n    var layer = this.getLayer(id);\n\n    if (!layer) {\n      return DEFAULT_TILESIZE;\n    }\n\n    return layer.getTileSize();\n  };\n\n  _proto.getTiles = function getTiles(z, parentLayer) {\n    var layers = this.layers;\n    var tiles = [];\n    var count = 0;\n\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var layer = layers[i];\n\n      if (!layer.options['visible']) {\n        continue;\n      }\n\n      var childGrid = layer.getTiles(z, parentLayer || this);\n\n      if (!childGrid || childGrid.count === 0) {\n        continue;\n      }\n\n      count += childGrid.count;\n      pushIn(tiles, childGrid.tileGrids);\n    }\n\n    return {\n      count: count,\n      tileGrids: tiles\n    };\n  };\n\n  _proto.onAdd = function onAdd() {\n    var _this2 = this;\n\n    var map = this.getMap();\n    this.layers.forEach(function (layer) {\n      _this2.layerMap[layer.getId()] = layer;\n\n      if (layer.getChildLayer) {\n        _this2._groupChildren.push(layer);\n      }\n\n      layer._bindMap(map);\n\n      layer.on('show hide', _this2._onLayerShowHide, _this2);\n    });\n\n    _TileLayer.prototype.onAdd.call(this);\n  };\n\n  _proto.onRemove = function onRemove() {\n    var _this3 = this;\n\n    this.layers.forEach(function (layer) {\n      layer._doRemove();\n\n      layer.off('show hide', _this3._onLayerShowHide, _this3);\n    });\n    this.layerMap = {};\n    this._groupChildren = [];\n\n    _TileLayer.prototype.onRemove.call(this);\n  };\n\n  _proto.getLayer = function getLayer(id) {\n    return this.getChildLayer(id);\n  };\n\n  _proto.getChildLayer = function getChildLayer(id) {\n    var layer = this.layerMap[id];\n\n    if (layer) {\n      return layer;\n    }\n\n    for (var i = 0; i < this._groupChildren.length; i++) {\n      var child = this._groupChildren[i].getChildLayer(id);\n\n      if (child) {\n        return child;\n      }\n    }\n\n    return null;\n  };\n\n  _proto._onLayerShowHide = function _onLayerShowHide() {\n    var renderer = this.getRenderer();\n\n    if (renderer) {\n      renderer.setToRedraw();\n    }\n  };\n\n  _proto.isVisible = function isVisible() {\n    if (!_TileLayer.prototype.isVisible.call(this)) {\n      return false;\n    }\n\n    var children = this.layers;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      if (children[i].isVisible()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto._checkChildren = function _checkChildren() {\n    var _this4 = this;\n\n    var ids = {};\n    this.layers.forEach(function (layer) {\n      var layerId = layer.getId();\n\n      if (ids[layerId]) {\n        throw new Error(\"Duplicate child layer id (\" + layerId + \") in the GroupTileLayer (\" + _this4.getId() + \")\");\n      } else {\n        ids[layerId] = 1;\n      }\n    });\n  };\n\n  return GroupTileLayer;\n}(TileLayer);\n\nGroupTileLayer.registerJSONType('GroupTileLayer');\nGroupTileLayer.mergeOptions(options$v);\n\nvar options$w = {\n  crs: null,\n  uppercase: false,\n  detectRetina: false\n};\nvar defaultWmsParams = {\n  service: 'WMS',\n  request: 'GetMap',\n  layers: '',\n  styles: '',\n  format: 'image/jpeg',\n  transparent: false,\n  version: '1.1.1'\n};\n\nvar WMSTileLayer = function (_TileLayer) {\n  _inheritsLoose(WMSTileLayer, _TileLayer);\n\n  function WMSTileLayer(id, options) {\n    var _this;\n\n    _this = _TileLayer.call(this, id) || this;\n    var wmsParams = extend({}, defaultWmsParams);\n\n    for (var p in options) {\n      if (!(p in _this.options)) {\n        wmsParams[p] = options[p];\n      }\n    }\n\n    _this.setOptions(options);\n\n    _this.setZIndex(options.zIndex);\n\n    var tileSize = _this.getTileSize();\n\n    wmsParams.width = tileSize.width;\n    wmsParams.height = tileSize.height;\n    _this.wmsParams = wmsParams;\n    _this._wmsVersion = parseFloat(wmsParams.version);\n    return _this;\n  }\n\n  var _proto = WMSTileLayer.prototype;\n\n  _proto.onAdd = function onAdd() {\n    var dpr = this.getMap().getDevicePixelRatio();\n    var r = options$w.detectRetina ? dpr : 1;\n    this.wmsParams.width *= r;\n    this.wmsParams.height *= r;\n    var crs = this.options.crs || this.getMap().getProjection().code;\n    var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\n    this.wmsParams[projectionKey] = crs;\n\n    _TileLayer.prototype.onAdd.call(this);\n  };\n\n  _proto.getTileUrl = function getTileUrl(x, y, z) {\n    var res = this.getSpatialReference().getResolution(z),\n        tileConfig = this._getTileConfig(),\n        tileExtent = tileConfig.getTilePrjExtent(x, y, res);\n\n    var max = tileExtent.getMax(),\n        min = tileExtent.getMin();\n    var bbox = (this._wmsVersion >= 1.3 && this.wmsParams.crs === 'EPSG:4326' ? [min.y, min.x, max.y, max.x] : [min.x, min.y, max.x, max.y]).join(',');\n\n    var url = _TileLayer.prototype.getTileUrl.call(this, x, y, z);\n\n    return url + getParamString(this.wmsParams, url, this.options.uppercase) + (this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;\n  };\n\n  _proto.toJSON = function toJSON() {\n    return {\n      'type': 'WMSTileLayer',\n      'id': this.getId(),\n      'options': this.config()\n    };\n  };\n\n  WMSTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'WMSTileLayer') {\n      return null;\n    }\n\n    return new WMSTileLayer(layerJSON['id'], layerJSON['options']);\n  };\n\n  return WMSTileLayer;\n}(TileLayer);\n\nWMSTileLayer.registerJSONType('WMSTileLayer');\nWMSTileLayer.mergeOptions(options$w);\nfunction getParamString(obj, existingUrl, uppercase) {\n  var params = [];\n\n  for (var i in obj) {\n    params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n  }\n\n  return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');\n}\n\nvar CanvasTileLayer = function (_TileLayer) {\n  _inheritsLoose(CanvasTileLayer, _TileLayer);\n\n  function CanvasTileLayer(id, options) {\n    var _this;\n\n    _this = _TileLayer.call(this, id, options) || this;\n\n    if (!_this.options.hasOwnProperty('forceRenderOnMoving')) {\n      _this.options['forceRenderOnMoving'] = false;\n    }\n\n    return _this;\n  }\n\n  var _proto = CanvasTileLayer.prototype;\n\n  _proto.drawTile = function drawTile() {};\n\n  _proto.toJSON = function toJSON() {\n    return {\n      'type': 'CanvasTileLayer',\n      'id': this.getId(),\n      'options': this.config()\n    };\n  };\n\n  CanvasTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'CanvasTileLayer') {\n      return null;\n    }\n\n    return new CanvasTileLayer(layerJSON['id'], layerJSON['options']);\n  };\n\n  return CanvasTileLayer;\n}(TileLayer);\n\nCanvasTileLayer.registerJSONType('CanvasTileLayer');\n\nfunction createGLContext(canvas, options) {\n  var attributes = {\n    'alpha': true,\n    'stencil': true,\n    'preserveDrawingBuffer': true,\n    'antialias': false\n  };\n  var names = ['webgl', 'experimental-webgl'];\n  var context = null;\n\n  for (var i = 0; i < names.length; ++i) {\n    try {\n      context = canvas.getContext(names[i], options || attributes);\n    } catch (e) {}\n\n    if (context) {\n      break;\n    }\n  }\n\n  return context;\n}\nfunction compileShader(gl, type, source) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n  if (!compiled) {\n    var error = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    throw new Error('Failed to compile shader: ' + error);\n  }\n\n  return shader;\n}\nfunction createProgram(gl, vert, frag) {\n  var vertexShader = compileShader(gl, gl.VERTEX_SHADER, vert);\n  var fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, frag);\n\n  if (!vertexShader || !fragmentShader) {\n    return null;\n  }\n\n  var program = gl.createProgram();\n\n  if (!program) {\n    return null;\n  }\n\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  return {\n    program: program,\n    vertexShader: vertexShader,\n    fragmentShader: fragmentShader\n  };\n}\nfunction enableVertexAttrib(gl, program, attributes) {\n  if (Array.isArray(attributes[0])) {\n    var FSIZE = Float32Array.BYTES_PER_ELEMENT;\n    var STRIDE = 0;\n\n    for (var i = 0; i < attributes.length; i++) {\n      STRIDE += attributes[i][1] || 0;\n    }\n\n    var offset = 0;\n\n    for (var _i = 0; _i < attributes.length; _i++) {\n      var attr = gl.getAttribLocation(program, attributes[_i][0]);\n\n      if (attr < 0) {\n        throw new Error('Failed to get the storage location of ' + attributes[_i][0]);\n      }\n\n      gl.vertexAttribPointer(attr, attributes[_i][1], gl[attributes[_i][2] || 'FLOAT'], false, FSIZE * STRIDE, FSIZE * offset);\n      offset += attributes[_i][1] || 0;\n      gl.enableVertexAttribArray(attr);\n    }\n  } else {\n    var _attr = gl.getAttribLocation(program, attributes[0]);\n\n    gl.vertexAttribPointer(_attr, attributes[1], gl[attributes[2] || 'FLOAT'], false, 0, 0);\n    gl.enableVertexAttribArray(_attr);\n  }\n}\n\nvar shaders = {\n  'vertexShader': \"\\n        attribute vec2 a_position;\\n\\n        attribute vec2 a_texCoord;\\n\\n        uniform mat4 u_matrix;\\n\\n        varying vec2 v_texCoord;\\n\\n        void main() {\\n            gl_Position = u_matrix * vec4(a_position, 0., 1.);\\n\\n            v_texCoord = a_texCoord;\\n        }\\n    \",\n  'fragmentShader': \"\\n        precision mediump float;\\n\\n        uniform sampler2D u_image;\\n\\n        uniform float u_opacity;\\n        uniform float u_debug_line;\\n\\n        varying vec2 v_texCoord;\\n\\n        void main() {\\n            if (u_debug_line == 1.) {\\n                gl_FragColor = vec4(0., 1., 0., 1.);\\n            } else {\\n                gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\\n            }\\n        }\\n    \"\n};\nvar v2 = [0, 0],\n    v3 = [0, 0, 0],\n    arr16 = new Array(16);\nvar DEBUG_POINT = new Point(20, 20);\n\nvar ImageGLRenderable = function ImageGLRenderable(Base) {\n  var renderable = function (_Base) {\n    _inheritsLoose(renderable, _Base);\n\n    function renderable() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    var _proto = renderable.prototype;\n\n    _proto.drawGLImage = function drawGLImage(image, x, y, w, h, scale$$1, opacity, debug) {\n      if (this.gl.program !== this.program) {\n        this.useProgram(this.program);\n      }\n\n      var gl = this.gl;\n      this.loadTexture(image);\n      v3[0] = x || 0;\n      v3[1] = y || 0;\n      var uMatrix = identity(arr16);\n      translate(uMatrix, uMatrix, v3);\n      scale(uMatrix, uMatrix, [scale$$1, scale$$1, 1]);\n      multiply(uMatrix, this.getMap().projViewMatrix, uMatrix);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, uMatrix);\n      gl.uniform1f(this.program['u_opacity'], opacity);\n      gl.uniform1f(this.program['u_debug_line'], 0);\n      var glBuffer = image.glBuffer;\n\n      if (glBuffer && (glBuffer.width !== w || glBuffer.height !== h)) {\n        this.saveImageBuffer(glBuffer);\n        delete image.glBuffer;\n      }\n\n      if (!image.glBuffer) {\n        image.glBuffer = this.bufferTileData(0, 0, w, h);\n      } else {\n        gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);\n      }\n\n      v2[0] = 'a_position';\n      v2[1] = 2;\n      v2[2] = image.glBuffer.type;\n      this.enableVertexAttrib(v2);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n      if (debug) {\n        this.drawDebug(uMatrix, v2, 0, 0, w, h, debug);\n      }\n    };\n\n    _proto.drawDebug = function drawDebug(uMatrix, attrib, x, y, w, h, debugInfo) {\n      var gl = this.gl;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this._debugBuffer);\n      this.enableVertexAttrib(['a_position', 2, 'FLOAT']);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([x, y, x + w, y, x + w, y - h, x, y - h, x, y]), gl.DYNAMIC_DRAW);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, uMatrix);\n      gl.uniform1f(this.program['u_debug_line'], 1);\n      gl.drawArrays(gl.LINE_STRIP, 0, 5);\n      var canvas = this._debugInfoCanvas;\n\n      if (!canvas) {\n        var dpr = this.getMap().getDevicePixelRatio() > 1 ? 2 : 1;\n        canvas = this._debugInfoCanvas = document.createElement('canvas');\n        canvas.width = 256 * dpr;\n        canvas.height = 32 * dpr;\n\n        var _ctx = canvas.getContext('2d');\n\n        _ctx.font = '20px monospace';\n\n        _ctx.scale(dpr, dpr);\n      }\n\n      var ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      var color = this.layer.options['debugOutline'];\n      Canvas.fillText(ctx, debugInfo, DEBUG_POINT, color);\n      this.loadTexture(canvas);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n      w = 256;\n      h = 32;\n      var x1 = x;\n      var x2 = x + w;\n      var y1 = y;\n      var y2 = y - h;\n      gl.bufferData(gl.ARRAY_BUFFER, this.set8(x1, y1, x1, y2, x2, y1, x2, y2), gl.DYNAMIC_DRAW);\n      gl.uniform1f(this.program['u_debug_line'], 0);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n\n    _proto.bufferTileData = function bufferTileData(x, y, w, h, buffer) {\n      var x1 = x;\n      var x2 = x + w;\n      var y1 = y;\n      var y2 = y - h;\n      var data;\n\n      if (isInteger(x1) && isInteger(x2) && isInteger(y1) && isInteger(y2)) {\n        data = this.set8Int(x1, y1, x1, y2, x2, y1, x2, y2);\n      } else {\n        data = this.set8(x1, y1, x1, y2, x2, y1, x2, y2);\n      }\n\n      var glBuffer = this.loadImageBuffer(data, buffer);\n      glBuffer.width = w;\n      glBuffer.height = h;\n      glBuffer.type = data instanceof Int16Array ? 'SHORT' : 'FLOAT';\n      return glBuffer;\n    };\n\n    _proto.drawTinImage = function drawTinImage(image, vertices, texCoords, indices, opacity) {\n      var gl = this.gl;\n      this.loadTexture(image);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, this.getMap().projViewMatrix);\n      gl.uniform1f(this.program['u_opacity'], opacity);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.posBuffer);\n      this.enableVertexAttrib(['a_position', 3]);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.DYNAMIC_DRAW);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texBuffer);\n      this.enableVertexAttrib(['a_texCoord', 2]);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(texCoords), gl.DYNAMIC_DRAW);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.DYNAMIC_DRAW);\n      gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);\n    };\n\n    _proto.createCanvas2 = function createCanvas2() {\n      this.canvas2 = Canvas.createCanvas(this.canvas.width, this.canvas.height);\n    };\n\n    _proto.createGLContext = function createGLContext$$1() {\n      if (this.canvas.gl && this.canvas.gl.wrap) {\n        this.gl = this.canvas.gl.wrap();\n      } else {\n        this.gl = createGLContext(this.canvas2 || this.canvas, this.layer.options['glOptions']);\n      }\n\n      var gl = this.gl;\n      gl.clearColor(0.0, 0.0, 0.0, 0.0);\n      gl.disable(gl.DEPTH_TEST);\n      gl.enable(gl.STENCIL_TEST);\n      gl.enable(gl.BLEND);\n      gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n      this.program = this.createProgram(shaders['vertexShader'], this.layer.options['fragmentShader'] || shaders['fragmentShader']);\n      this._debugBuffer = this.createBuffer();\n      this.useProgram(this.program);\n      this.texBuffer = this.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texBuffer);\n      this.enableVertexAttrib(['a_texCoord', 2, 'UNSIGNED_BYTE']);\n      gl.bufferData(gl.ARRAY_BUFFER, new Uint8Array([0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), gl.STATIC_DRAW);\n      this.enableSampler('u_image');\n      gl.activeTexture(gl['TEXTURE0']);\n      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n    };\n\n    _proto.resizeGLCanvas = function resizeGLCanvas() {\n      if (this.gl) {\n        this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n      }\n\n      if (!this.canvas2) {\n        return;\n      }\n\n      if (this.canvas2.width !== this.canvas.width || this.canvas2.height !== this.canvas.height) {\n        this.canvas2.width = this.canvas.width;\n        this.canvas2.height = this.canvas.height;\n      }\n    };\n\n    _proto.clearGLCanvas = function clearGLCanvas() {\n      if (this.gl) {\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT);\n      }\n    };\n\n    _proto.disposeImage = function disposeImage(image) {\n      if (!image) {\n        return;\n      }\n\n      if (image.texture) {\n        this.saveTexture(image.texture);\n      }\n\n      if (image.glBuffer) {\n        this.saveImageBuffer(image.glBuffer);\n      }\n\n      delete image.texture;\n      delete image.glBuffer;\n    };\n\n    _proto._createTexture = function _createTexture(image) {\n      var gl = this.gl;\n      var texture = this.getTexture() || gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\n      if (isInteger(log2(image.width)) && isInteger(log2(image.width))) {\n        gl.generateMipmap(gl.TEXTURE_2D);\n      }\n\n      return texture;\n    };\n\n    _proto.getTexture = function getTexture() {\n      if (!this._textures) {\n        this._textures = [];\n      }\n\n      var textures = this._textures;\n      return textures && textures.length > 0 ? textures.pop() : null;\n    };\n\n    _proto.saveTexture = function saveTexture(texture) {\n      this._textures.push(texture);\n    };\n\n    _proto.loadTexture = function loadTexture(image) {\n      var gl = this.gl;\n      var texture = image.texture;\n\n      if (!texture) {\n        texture = this._createTexture(image);\n        image.texture = texture;\n      }\n\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      return texture;\n    };\n\n    _proto.getImageBuffer = function getImageBuffer() {\n      if (!this._imageBuffers) {\n        this._imageBuffers = [];\n      }\n\n      var imageBuffers = this._imageBuffers;\n      return imageBuffers && imageBuffers.length > 0 ? imageBuffers.pop() : null;\n    };\n\n    _proto.saveImageBuffer = function saveImageBuffer(buffer) {\n      if (!this._imageBuffers) {\n        this._imageBuffers = [];\n      }\n\n      this._imageBuffers.push(buffer);\n    };\n\n    _proto.loadImageBuffer = function loadImageBuffer(data, glBuffer) {\n      var gl = this.gl;\n      var buffer = glBuffer || this.createImageBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n      return buffer;\n    };\n\n    _proto.createImageBuffer = function createImageBuffer() {\n      return this.getImageBuffer() || this.createBuffer();\n    };\n\n    _proto.removeGLCanvas = function removeGLCanvas() {\n      var gl = this.gl;\n\n      if (!gl) {\n        return;\n      }\n\n      if (this._debugBuffer) {\n        gl.deleteBuffer(this._debugBuffer);\n        delete this._debugBuffer;\n      }\n\n      if (this._buffers) {\n        this._buffers.forEach(function (b) {\n          gl.deleteBuffer(b);\n        });\n\n        delete this._buffers;\n      }\n\n      if (this._textures) {\n        this._textures.forEach(function (t) {\n          return gl.deleteTexture(t);\n        });\n\n        delete this._textures;\n      }\n\n      if (this._debugInfoCanvas) {\n        var texture = this._debugInfoCanvas.texture;\n\n        if (texture) {\n          gl.deleteTexture(texture);\n        }\n\n        delete this._debugInfoCanvas.texture;\n        delete this._debugInfoCanvas;\n      }\n\n      var program = gl.program;\n      gl.deleteShader(program.fragmentShader);\n      gl.deleteShader(program.vertexShader);\n      gl.deleteProgram(program);\n      delete this.gl;\n      delete this.canvas2;\n    };\n\n    _proto.createBuffer = function createBuffer() {\n      var gl = this.gl;\n      var buffer = gl.createBuffer();\n\n      if (!buffer) {\n        throw new Error('Failed to create the buffer object');\n      }\n\n      if (!this._buffers) {\n        this._buffers = [];\n      }\n\n      this._buffers.push(buffer);\n\n      return buffer;\n    };\n\n    _proto.enableVertexAttrib = function enableVertexAttrib$$1(attributes) {\n      enableVertexAttrib(this.gl, this.gl.program, attributes);\n    };\n\n    _proto.createProgram = function createProgram$$1(vert, frag) {\n      var gl = this.gl;\n\n      var _createProgram2 = createProgram(gl, vert, frag),\n          program = _createProgram2.program,\n          vertexShader = _createProgram2.vertexShader,\n          fragmentShader = _createProgram2.fragmentShader;\n\n      var numUniforms = gl.getProgramParameter(program, 0x8B86);\n      var activeUniforms = [];\n\n      for (var i = 0; i < numUniforms; ++i) {\n        var info = gl.getActiveUniform(program, i);\n        activeUniforms.push(info.name);\n      }\n\n      program.vertexShader = vertexShader;\n      program.fragmentShader = fragmentShader;\n\n      this._initUniforms(program, activeUniforms);\n\n      return program;\n    };\n\n    _proto.useProgram = function useProgram(program) {\n      var gl = this.gl;\n      gl.useProgram(program);\n      gl.program = program;\n      return this;\n    };\n\n    _proto.enableSampler = function enableSampler(sampler, texIdx) {\n      var gl = this.gl;\n\n      var uSampler = this._getUniform(gl.program, sampler);\n\n      if (!texIdx) {\n        texIdx = 0;\n      }\n\n      gl.uniform1i(uSampler, texIdx);\n      return uSampler;\n    };\n\n    _proto._initUniforms = function _initUniforms(program, uniforms) {\n      for (var i = 0; i < uniforms.length; i++) {\n        var name = uniforms[i];\n        var uniform = uniforms[i];\n        var b = name.indexOf('[');\n\n        if (b >= 0) {\n          name = name.substring(0, b);\n\n          if (!IS_NODE) {\n            uniform = uniform.substring(0, b);\n          }\n        }\n\n        program[name] = this._getUniform(program, uniform);\n      }\n    };\n\n    _proto._getUniform = function _getUniform(program, uniformName) {\n      var gl = this.gl;\n      var uniform = gl.getUniformLocation(program, uniformName);\n\n      if (!uniform) {\n        throw new Error('Failed to get the storage location of ' + uniformName);\n      }\n\n      return uniform;\n    };\n\n    return renderable;\n  }(Base);\n\n  extend(renderable.prototype, {\n    set8: function () {\n      var out = Browser$1.ie9 ? null : new Float32Array(8);\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a4;\n        out[5] = a5;\n        out[6] = a6;\n        out[7] = a7;\n        return out;\n      };\n    }(),\n    set8Int: function () {\n      var out = Browser$1.ie9 ? null : new Int16Array(8);\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a4;\n        out[5] = a5;\n        out[6] = a6;\n        out[7] = a7;\n        return out;\n      };\n    }()\n  });\n  return renderable;\n};\n\nvar options$x = {\n  renderer: Browser$1.webgl ? 'gl' : 'canvas',\n  crossOrigin: null\n};\nvar TEMP_POINT$1 = new Point(0, 0);\n\nvar ImageLayer = function (_Layer) {\n  _inheritsLoose(ImageLayer, _Layer);\n\n  function ImageLayer(id, images, options) {\n    var _this;\n\n    if (images && !Array.isArray(images) && !images.url) {\n      options = images;\n      images = null;\n    }\n\n    _this = _Layer.call(this, id, options) || this;\n    _this._images = images;\n    return _this;\n  }\n\n  var _proto = ImageLayer.prototype;\n\n  _proto.onAdd = function onAdd() {\n    this._prepareImages(this._images);\n  };\n\n  _proto.setImages = function setImages(images) {\n    this._images = images;\n\n    this._prepareImages(images);\n\n    return this;\n  };\n\n  _proto.getImages = function getImages() {\n    return this._images;\n  };\n\n  _proto._prepareImages = function _prepareImages(images) {\n    images = images || [];\n\n    if (!Array.isArray(images)) {\n      images = [images];\n    }\n\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    this._imageData = images.map(function (img) {\n      var extent = new Extent(img.extent);\n      return extend({}, img, {\n        extent: extent,\n        extent2d: extent.convertTo(function (c) {\n          return map.coordToPointAtRes(c, glRes);\n        })\n      });\n    });\n    this._images = images;\n    var renderer = this.getRenderer();\n\n    if (renderer) {\n      renderer.refreshImages();\n    }\n  };\n\n  return ImageLayer;\n}(Layer);\n\nImageLayer.mergeOptions(options$x);\nvar EMPTY_ARRAY$1 = [];\nvar ImageLayerCanvasRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(ImageLayerCanvasRenderer, _CanvasRenderer);\n\n  function ImageLayerCanvasRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto2 = ImageLayerCanvasRenderer.prototype;\n\n  _proto2.isDrawable = function isDrawable() {\n    if (this.getMap().getPitch()) {\n      if (console) {\n        console.warn('ImageLayer with canvas renderer can\\'t be pitched, use gl renderer (\\'renderer\\' : \\'gl\\') instead.');\n      }\n\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto2.checkResources = function checkResources() {\n    var _this2 = this;\n\n    if (this._imageLoaded) {\n      return EMPTY_ARRAY$1;\n    }\n\n    var layer = this.layer;\n\n    var urls = layer._imageData.map(function (img) {\n      return [img.url, null, null];\n    });\n\n    if (this.resources) {\n      var unloaded = [];\n      var resources = new ResourceCache();\n      urls.forEach(function (url) {\n        if (_this2.resources.isResourceLoaded(url)) {\n          var img = _this2.resources.getImage(url);\n\n          resources.addResource(url, img);\n        } else {\n          unloaded.push(url);\n        }\n      });\n      this.resources.forEach(function (url, res) {\n        if (!resources.isResourceLoaded(url)) {\n          _this2.retireImage(res.image);\n        }\n      });\n      this.resources = resources;\n      urls = unloaded;\n    }\n\n    this._imageLoaded = true;\n    return urls;\n  };\n\n  _proto2.retireImage = function retireImage(image) {\n    if (image.close) {\n      image.close();\n    }\n  };\n\n  _proto2.refreshImages = function refreshImages() {\n    this._imageLoaded = false;\n    this.setToRedraw();\n  };\n\n  _proto2.draw = function draw() {\n    if (!this.isDrawable()) {\n      return;\n    }\n\n    this.prepareCanvas();\n    this._painted = false;\n\n    this._drawImages();\n\n    this.completeRender();\n  };\n\n  _proto2._drawImages = function _drawImages() {\n    var imgData = this.layer._imageData;\n    var map = this.getMap();\n\n    var mapExtent = map._get2DExtentAtRes(map.getGLRes());\n\n    if (imgData && imgData.length) {\n      for (var i = 0; i < imgData.length; i++) {\n        var extent = imgData[i].extent2d;\n        var image = this.resources && this.resources.getImage(imgData[i].url);\n\n        if (image && mapExtent.intersects(extent)) {\n          this._painted = true;\n\n          this._drawImage(image, extent, imgData[i].opacity || 1);\n        }\n      }\n    }\n  };\n\n  _proto2._drawImage = function _drawImage(image, extent, opacity) {\n    var globalAlpha = 0;\n    var ctx = this.context;\n\n    if (opacity < 1) {\n      globalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = opacity;\n    }\n\n    var map = this.getMap();\n    var nw = TEMP_POINT$1.set(extent.xmin, extent.ymax);\n\n    var point = map._pointAtResToContainerPoint(nw, map.getGLRes());\n\n    var x = point.x,\n        y = point.y;\n    var bearing = map.getBearing();\n\n    if (bearing) {\n      ctx.save();\n      ctx.translate(x, y);\n\n      if (bearing) {\n        ctx.rotate(-bearing * Math.PI / 180);\n      }\n\n      x = y = 0;\n    }\n\n    var scale = map.getGLScale();\n    ctx.drawImage(image, x, y, extent.getWidth() / scale, extent.getHeight() / scale);\n\n    if (bearing) {\n      ctx.restore();\n    }\n\n    if (globalAlpha) {\n      ctx.globalAlpha = globalAlpha;\n    }\n  };\n\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n  };\n\n  return ImageLayerCanvasRenderer;\n}(CanvasRenderer);\nvar ImageLayerGLRenderer = function (_ImageGLRenderable) {\n  _inheritsLoose(ImageLayerGLRenderer, _ImageGLRenderable);\n\n  function ImageLayerGLRenderer() {\n    return _ImageGLRenderable.apply(this, arguments) || this;\n  }\n\n  var _proto3 = ImageLayerGLRenderer.prototype;\n\n  _proto3.isDrawable = function isDrawable() {\n    return true;\n  };\n\n  _proto3._drawImage = function _drawImage(image, extent, opacity) {\n    this.drawGLImage(image, extent.xmin, extent.ymax, extent.getWidth(), extent.getHeight(), 1, opacity);\n  };\n\n  _proto3.createContext = function createContext() {\n    this.createGLContext();\n  };\n\n  _proto3.resizeCanvas = function resizeCanvas(canvasSize) {\n    if (!this.canvas) {\n      return;\n    }\n\n    _ImageGLRenderable.prototype.resizeCanvas.call(this, canvasSize);\n\n    this.resizeGLCanvas();\n  };\n\n  _proto3.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n\n    _ImageGLRenderable.prototype.clearCanvas.call(this);\n\n    this.clearGLCanvas();\n  };\n\n  _proto3.retireImage = function retireImage(image) {\n    if (image.close) {\n      image.close();\n    }\n\n    this.disposeImage(image);\n  };\n\n  _proto3.onRemove = function onRemove() {\n    this.removeGLCanvas();\n\n    _ImageGLRenderable.prototype.onRemove.call(this);\n  };\n\n  return ImageLayerGLRenderer;\n}(ImageGLRenderable(ImageLayerCanvasRenderer));\nImageLayer.registerRenderer('canvas', ImageLayerCanvasRenderer);\nImageLayer.registerRenderer('gl', ImageLayerGLRenderer);\n\nvar CanvasLayerRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(CanvasLayerRenderer, _CanvasRenderer);\n\n  function CanvasLayerRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto = CanvasLayerRenderer.prototype;\n\n  _proto.getPrepareParams = function getPrepareParams() {\n    return [];\n  };\n\n  _proto.getDrawParams = function getDrawParams() {\n    return [];\n  };\n\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    if (this.canvas && this.layer.options['doubleBuffer']) {\n      this.buffer = Canvas.createCanvas(this.canvas.width, this.canvas.height, this.getMap().CanvasClass);\n    }\n  };\n\n  _proto.needToRedraw = function needToRedraw() {\n    if (this.layer.options['animation']) {\n      return true;\n    }\n\n    var map = this.getMap();\n\n    if (map.isInteracting() && !this.layer.drawOnInteracting) {\n      return false;\n    }\n\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n\n  _proto.draw = function draw() {\n    this.prepareCanvas();\n    this.prepareDrawContext();\n\n    this._drawLayer.apply(this, arguments);\n  };\n\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    this._drawLayerOnInteracting.apply(this, arguments);\n  };\n\n  _proto.getCanvasImage = function getCanvasImage() {\n    var canvasImg = _CanvasRenderer.prototype.getCanvasImage.call(this);\n\n    if (canvasImg && canvasImg.image && this.layer.options['doubleBuffer']) {\n      var canvas = canvasImg.image;\n\n      if (this.buffer.width !== canvas.width || this.buffer.height !== canvas.height) {\n        this.buffer.width = canvas.width;\n        this.buffer.height = canvas.height;\n      }\n\n      var bufferContext = this.buffer.getContext('2d');\n      var prevent = this.layer.doubleBuffer(bufferContext, this.context);\n\n      if (prevent === undefined || prevent) {\n        Canvas.image(bufferContext, canvas, 0, 0);\n        canvasImg.image = this.buffer;\n      }\n    }\n\n    return canvasImg;\n  };\n\n  _proto.remove = function remove() {\n    delete this._drawContext;\n    return _CanvasRenderer.prototype.remove.call(this);\n  };\n\n  _proto.onZoomStart = function onZoomStart(param) {\n    this.layer.onZoomStart(param);\n\n    _CanvasRenderer.prototype.onZoomStart.call(this, param);\n  };\n\n  _proto.onZooming = function onZooming(param) {\n    this.layer.onZooming(param);\n\n    _CanvasRenderer.prototype.onZooming.call(this, param);\n  };\n\n  _proto.onZoomEnd = function onZoomEnd(param) {\n    this.layer.onZoomEnd(param);\n\n    _CanvasRenderer.prototype.onZoomEnd.call(this, param);\n  };\n\n  _proto.onMoveStart = function onMoveStart(param) {\n    this.layer.onMoveStart(param);\n\n    _CanvasRenderer.prototype.onMoveStart.call(this, param);\n  };\n\n  _proto.onMoving = function onMoving(param) {\n    this.layer.onMoving(param);\n\n    _CanvasRenderer.prototype.onMoving.call(this, param);\n  };\n\n  _proto.onMoveEnd = function onMoveEnd(param) {\n    this.layer.onMoveEnd(param);\n\n    _CanvasRenderer.prototype.onMoveEnd.call(this, param);\n  };\n\n  _proto.onResize = function onResize(param) {\n    this.layer.onResize(param);\n\n    _CanvasRenderer.prototype.onResize.call(this, param);\n  };\n\n  _proto.prepareDrawContext = function prepareDrawContext() {\n    if (!this._predrawed) {\n      var params = ensureParams(this.getPrepareParams());\n      this._drawContext = this.layer.prepareToDraw.apply(this.layer, [this.context].concat(params));\n\n      if (!this._drawContext) {\n        this._drawContext = [];\n      }\n\n      if (!Array.isArray(this._drawContext)) {\n        this._drawContext = [this._drawContext];\n      }\n\n      this._predrawed = true;\n    }\n  };\n\n  _proto._prepareDrawParams = function _prepareDrawParams() {\n    if (!this.getMap()) {\n      return null;\n    }\n\n    var view = this.getViewExtent();\n\n    if (view['maskExtent'] && !view['extent'].intersects(view['maskExtent'])) {\n      this.completeRender();\n      return null;\n    }\n\n    var args = [this.context, view];\n    var params = ensureParams(this.getDrawParams());\n    args.push.apply(args, params);\n    args.push.apply(args, this._drawContext);\n    return args;\n  };\n\n  _proto._drawLayer = function _drawLayer() {\n    var params = this._prepareDrawParams();\n\n    if (!params) {\n      return;\n    }\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    this.layer.draw.apply(this.layer, params.concat(args));\n    this.completeRender();\n  };\n\n  _proto._drawLayerOnInteracting = function _drawLayerOnInteracting() {\n    if (!this.layer.drawOnInteracting) {\n      return;\n    }\n\n    var params = this._prepareDrawParams();\n\n    if (!params) {\n      return;\n    }\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    this.layer.drawOnInteracting.apply(this.layer, params.concat(args));\n    this.completeRender();\n  };\n\n  return CanvasLayerRenderer;\n}(CanvasRenderer);\n\nfunction ensureParams(params) {\n  if (!params) {\n    params = [];\n  }\n\n  if (!Array.isArray(params)) {\n    params = [params];\n  }\n\n  return params;\n}\n\nvar options$y = {\n  'doubleBuffer': false,\n  'animation': false\n};\n\nvar CanvasLayer = function (_Layer) {\n  _inheritsLoose(CanvasLayer, _Layer);\n\n  function CanvasLayer() {\n    return _Layer.apply(this, arguments) || this;\n  }\n\n  var _proto = CanvasLayer.prototype;\n\n  _proto.isCanvasRender = function isCanvasRender() {\n    return true;\n  };\n\n  _proto.prepareToDraw = function prepareToDraw() {};\n\n  _proto.draw = function draw() {};\n\n  _proto.redraw = function redraw() {\n    if (this._getRenderer()) {\n      this._getRenderer().setToRedraw();\n    }\n\n    return this;\n  };\n\n  _proto.play = function play() {\n    this.config('animation', true);\n    return this;\n  };\n\n  _proto.pause = function pause() {\n    this.config('animation', false);\n    return this;\n  };\n\n  _proto.isPlaying = function isPlaying() {\n    return this.options['animation'];\n  };\n\n  _proto.clearCanvas = function clearCanvas() {\n    if (this._getRenderer()) {\n      this._getRenderer().clearCanvas();\n    }\n\n    return this;\n  };\n\n  _proto.requestMapToRender = function requestMapToRender() {\n    if (this._getRenderer()) {\n      this._getRenderer().requestMapToRender();\n    }\n\n    return this;\n  };\n\n  _proto.completeRender = function completeRender() {\n    if (this._getRenderer()) {\n      this._getRenderer().completeRender();\n    }\n\n    return this;\n  };\n\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    return this;\n  };\n\n  _proto.onZoomStart = function onZoomStart() {};\n\n  _proto.onZooming = function onZooming() {};\n\n  _proto.onZoomEnd = function onZoomEnd() {};\n\n  _proto.onMoveStart = function onMoveStart() {};\n\n  _proto.onMoving = function onMoving() {};\n\n  _proto.onMoveEnd = function onMoveEnd() {};\n\n  _proto.onResize = function onResize() {};\n\n  _proto.doubleBuffer = function doubleBuffer(bufferContext) {\n    bufferContext.clearRect(0, 0, bufferContext.canvas.width, bufferContext.canvas.height);\n    return this;\n  };\n\n  return CanvasLayer;\n}(Layer);\n\nCanvasLayer.mergeOptions(options$y);\nCanvasLayer.registerRenderer('canvas', CanvasLayerRenderer);\n\nvar TEMP_POINT$2 = new Point(0, 0);\nvar options$z = {\n  'animation': true\n};\n\nvar ParticleLayer = function (_CanvasLayer) {\n  _inheritsLoose(ParticleLayer, _CanvasLayer);\n\n  function ParticleLayer() {\n    return _CanvasLayer.apply(this, arguments) || this;\n  }\n\n  var _proto = ParticleLayer.prototype;\n\n  _proto.getParticles = function getParticles() {};\n\n  _proto.draw = function draw(context, view) {\n    var points = this.getParticles(now());\n\n    if (!points || points.length === 0) {\n      var renderer = this._getRenderer();\n\n      if (renderer) {\n        this._getRenderer()._shouldClear = true;\n      }\n\n      return;\n    }\n\n    var map = this.getMap();\n    var extent = view.extent;\n\n    if (view.maskExtent) {\n      extent = view.extent.intersection(view.maskExtent);\n    }\n\n    extent = extent.convertTo(function (c) {\n      return map._pointToContainerPoint(c, undefined, 0, TEMP_POINT$2);\n    });\n    var e = 2 * Math.PI;\n\n    for (var i = 0, l = points.length; i < l; i++) {\n      var pos = points[i].point;\n\n      if (extent.contains(pos)) {\n        var color = points[i].color || this.options['lineColor'] || '#fff',\n            r = points[i].r;\n\n        if (context.fillStyle !== color) {\n          context.fillStyle = color;\n        }\n\n        if (r <= 2) {\n          context.fillRect(pos.x - r / 2, pos.y - r / 2, r, r);\n        } else {\n          context.beginPath();\n          context.arc(pos.x, pos.y, r / 2, 0, e);\n          context.fill();\n        }\n      }\n    }\n\n    this._fillCanvas(context);\n  };\n\n  _proto._fillCanvas = function _fillCanvas(context) {\n    var g = context.globalCompositeOperation;\n    context.globalCompositeOperation = 'destination-out';\n    var trail = this.options['trail'] || 30;\n    context.fillStyle = 'rgba(0, 0, 0, ' + 1 / trail + ')';\n    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n    context.globalCompositeOperation = g;\n  };\n\n  return ParticleLayer;\n}(CanvasLayer);\n\nParticleLayer.mergeOptions(options$z);\nParticleLayer.registerRenderer('canvas', function (_CanvasLayerRenderer) {\n  _inheritsLoose(_class, _CanvasLayerRenderer);\n\n  function _class() {\n    return _CanvasLayerRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto2 = _class.prototype;\n\n  _proto2.draw = function draw() {\n    if (!this.canvas || !this.layer.options['animation'] || this._shouldClear) {\n      this.prepareCanvas();\n      this._shouldClear = false;\n    }\n\n    this.prepareDrawContext();\n\n    this._drawLayer();\n  };\n\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n    this._shouldClear = false;\n  };\n\n  _proto2.onSkipDrawOnInteracting = function onSkipDrawOnInteracting() {\n    this._shouldClear = true;\n  };\n\n  return _class;\n}(CanvasLayerRenderer));\n\nvar resources = new ResourceCache();\nvar prevX, prevY;\n\nvar EditHandle = function (_Eventable) {\n  _inheritsLoose(EditHandle, _Eventable);\n\n  function EditHandle(target, map, options) {\n    var _this;\n\n    _this = _Eventable.call(this, options) || this;\n    _this.target = target;\n    target.once('remove', _this.delete, _assertThisInitialized(_assertThisInitialized(_this)));\n    var symbol = _this.options['symbol'];\n    var lineWidth = symbol['markerLineWidth'] || 1;\n    _this.w = symbol['markerWidth'] + lineWidth;\n    _this.h = symbol['markerHeight'] + lineWidth;\n    _this.dx = symbol['markerDx'] || 0;\n    _this.dy = symbol['markerDy'] || 0;\n    _this.opacity = isNil(symbol['opacity']) ? 1 : symbol['opacity'];\n    _this.map = map;\n    _this.events = options.events;\n\n    _this._fetchImage();\n\n    _this.addTo(map);\n\n    return _this;\n  }\n\n  var _proto = EditHandle.prototype;\n\n  _proto.getCursor = function getCursor() {\n    return this.options['cursor'] || 'default';\n  };\n\n  _proto._fetchImage = function _fetchImage() {\n    var map = this.map;\n    var symbol = this.options.symbol;\n    var markerFile = symbol.markerFile;\n    this.url = markerFile || getSymbolHash(symbol);\n    var img = resources.getImage(this.url);\n\n    if (!img) {\n      var w = this.w;\n      var h = this.h;\n\n      if (markerFile) {\n        img = new Image();\n\n        img.onload = function () {\n          var renderer = map.getRenderer();\n\n          if (renderer) {\n            renderer.setToRedraw();\n          }\n        };\n\n        img.src = this.url;\n      } else {\n        var canvas = document.createElement('canvas');\n        canvas.width = w;\n        canvas.height = h;\n        var ctx = canvas.getContext('2d');\n        img = drawVectorMarker(ctx, {\n          x: w / 2,\n          y: h / 2\n        }, symbol, resources);\n      }\n\n      resources.addResource([this.url, w, h], img);\n    }\n\n    resources.login(this.url);\n    this._img = img;\n  };\n\n  _proto.setContainerPoint = function setContainerPoint(cp) {\n    this._point = cp;\n\n    this._point._sub(this.w / 2, this.h / 2);\n  };\n\n  _proto.getContainerPoint = function getContainerPoint() {\n    return this._point.add(this.w / 2, this.h / 2);\n  };\n\n  _proto.offset = function offset(p) {\n    this._point._add(p);\n  };\n\n  _proto.render = function render(ctx) {\n    if (!this._img) {\n      return false;\n    }\n\n    var map = this.map;\n    var _this$_point = this._point,\n        x = _this$_point.x,\n        y = _this$_point.y;\n    var w = this.w;\n    var h = this.h;\n\n    if (x + w > 0 && x < map.width && y + h > 0 && y < map.height) {\n      var dpr = map.getDevicePixelRatio();\n      ctx.globalAlpha = this.opacity;\n      ctx.drawImage(this._img, Math.round((x + this.dx) * dpr) + this.dx, Math.round((y + this.dy) * dpr), Math.round(w * dpr), Math.round(h * dpr));\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.delete = function _delete() {\n    if (this.map) {\n      var renderer = this.map.getRenderer();\n\n      if (renderer) {\n        renderer.removeTopElement(this);\n      }\n    }\n\n    resources.logout(this.url);\n\n    if (this._dragger) {\n      this._dragger.disable();\n\n      delete this._dragger;\n    }\n\n    delete this.map;\n  };\n\n  _proto.hitTest = function hitTest(p) {\n    var w = this.w;\n    var h = this.h;\n    var x = this._point.x + this.dx;\n    var y = this._point.y + this.dy;\n    return p.x >= x && p.x <= x + w && p.y >= y && p.y <= y + h;\n  };\n\n  _proto.addTo = function addTo(map) {\n    this.map = map;\n    var renderer = map.getRenderer();\n    renderer.addTopElement(this);\n  };\n\n  _proto.onEvent = function onEvent(e) {\n    this.fire(e.type, e);\n  };\n\n  _proto.mousedown = function mousedown(e) {\n    var map = e.target;\n    var cursor = this.options['cursor'];\n\n    if (cursor) {\n      map.setCursor(cursor);\n    }\n\n    this.onDragstart(e);\n  };\n\n  _proto.onDragstart = function onDragstart(e) {\n    var containerPoint = e.containerPoint,\n        map = e.target;\n    var dom = map._panels.mapWrapper || map._containerDOM;\n    var dragHandler = this._dragger = new DragHandler(dom);\n    dragHandler.on('dragging', this.onDragging, this).on('mouseup', this.onDragend, this).enable();\n    dragHandler.type = 'handle';\n    dragHandler.onMouseDown(e['domEvent']);\n    prevX = containerPoint.x;\n    prevY = containerPoint.y;\n    this.fire('dragstart', {\n      containerPoint: containerPoint\n    });\n  };\n\n  _proto.onDragging = function onDragging(e) {\n    if (!this._dragger) {\n      return;\n    }\n\n    var activeMap = this.map;\n    var containerPoint = getEventContainerPoint(e.domEvent, activeMap._containerDOM);\n    var offset = {\n      x: containerPoint.x - prevX,\n      y: containerPoint.y - prevY\n    };\n    var prevCoord = activeMap.containerPointToCoord(new Point(prevX, prevY));\n    var currentCoord = activeMap.containerPointToCoord(containerPoint);\n    prevX = containerPoint.x;\n    prevY = containerPoint.y;\n    this.offset(offset);\n    this.fire('dragging', {\n      containerPoint: containerPoint,\n      coordOffset: currentCoord._sub(prevCoord)\n    });\n  };\n\n  _proto.onDragend = function onDragend(e) {\n    if (!this._dragger) {\n      return;\n    }\n\n    var map = this.map;\n    map.resetCursor();\n    var containerPoint = getEventContainerPoint(e.domEvent, map._containerDOM);\n    var offset = {\n      x: containerPoint.x - prevX,\n      y: containerPoint.y - prevY\n    };\n    this.offset(offset);\n\n    this._dragger.disable();\n\n    delete this._dragger;\n    this.fire('dragend', {\n      containerPoint: containerPoint\n    });\n  };\n\n  return EditHandle;\n}(Eventable(Class));\n\nvar EditOutline = function () {\n  function EditOutline(target, map) {\n    this.target = target;\n    target.once('remove', this.delete, this);\n    this.map = map;\n    this.addTo(map);\n  }\n\n  var _proto = EditOutline.prototype;\n\n  _proto.setPoints = function setPoints(points) {\n    this.points = points;\n    var allX = points.map(function (p) {\n      return p.x;\n    });\n    var allY = points.map(function (p) {\n      return p.y;\n    });\n    this.xmin = Math.min.apply(Math, allX);\n    this.xmax = Math.max.apply(Math, allX);\n    this.ymin = Math.min.apply(Math, allY);\n    this.ymax = Math.max.apply(Math, allY);\n  };\n\n  _proto.hitTest = function hitTest() {\n    return false;\n  };\n\n  _proto.render = function render(ctx) {\n    var map = this.map;\n\n    if (this.xmax <= 0 || this.xmin >= map.width || this.ymax <= 0 || this.ymin >= map.height) {\n      return;\n    }\n\n    var dpr = map.getDevicePixelRatio();\n    var padding = 0.5;\n\n    function c(v) {\n      return Math.round(v) * dpr + padding;\n    }\n\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = '#000';\n    ctx.globalAlpha = 1;\n    ctx.beginPath();\n    var points = this.points;\n    ctx.moveTo(c(points[0].x), c(points[0].y));\n\n    for (var i = 1; i < this.points.length; i++) {\n      ctx.lineTo(c(points[i].x), c(points[i].y));\n    }\n\n    ctx.closePath();\n    ctx.stroke();\n  };\n\n  _proto.addTo = function addTo(map) {\n    this.map = map;\n    var renderer = map.getRenderer();\n    renderer.addTopElement(this);\n  };\n\n  _proto.delete = function _delete() {\n    if (this.map) {\n      var renderer = this.map.getRenderer();\n\n      if (renderer) {\n        renderer.removeTopElement(this);\n      }\n    }\n  };\n\n  return EditOutline;\n}();\n\nvar EDIT_STAGE_LAYER_PREFIX = INTERNAL_LAYER_PREFIX + '_edit_stage_';\n\nfunction createHandleSymbol(markerType, opacity) {\n  return {\n    'markerType': markerType,\n    'markerFill': '#fff',\n    'markerLineColor': '#000',\n    'markerLineWidth': 2,\n    'markerWidth': 10,\n    'markerHeight': 10,\n    'opacity': opacity\n  };\n}\n\nvar options$A = {\n  'fixAspectRatio': false,\n  'symbol': null,\n  'removeVertexOn': 'contextmenu',\n  'centerHandleSymbol': createHandleSymbol('ellipse', 1),\n  'vertexHandleSymbol': createHandleSymbol('square', 1),\n  'newVertexHandleSymbol': createHandleSymbol('square', 0.4)\n};\n\nvar GeometryEditor = function (_Eventable) {\n  _inheritsLoose(GeometryEditor, _Eventable);\n\n  function GeometryEditor(geometry, opts) {\n    var _this;\n\n    _this = _Eventable.call(this, opts) || this;\n    _this._geometry = geometry;\n\n    if (!_this._geometry) {\n      return _assertThisInitialized(_this);\n    }\n\n    return _this;\n  }\n\n  var _proto = GeometryEditor.prototype;\n\n  _proto.getMap = function getMap() {\n    return this._geometry.getMap();\n  };\n\n  _proto.prepare = function prepare() {\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    map.on('drawtopstart', this._refresh, this);\n\n    if (this.options['symbol']) {\n      this._originalSymbol = this._geometry.getSymbol();\n\n      this._geometry.setSymbol(this.options['symbol']);\n    }\n\n    this._prepareEditStageLayer();\n  };\n\n  _proto._prepareEditStageLayer = function _prepareEditStageLayer() {\n    var layer = this._geometry.getLayer();\n\n    if (layer.options['renderer'] !== 'canvas') {\n      return;\n    }\n\n    var map = this.getMap();\n    var uid = UID();\n    var shadowId = EDIT_STAGE_LAYER_PREFIX + uid + '_shadow';\n    this._shadowLayer = map.getLayer(shadowId);\n\n    if (!this._shadowLayer) {\n      var LayerType = layer.constructor;\n      this._shadowLayer = new LayerType(shadowId);\n      map.addLayer(this._shadowLayer);\n    }\n  };\n\n  _proto.start = function start() {\n    if (!this._geometry || !this._geometry.getMap() || this._geometry.editing) {\n      return;\n    }\n\n    this.editing = true;\n    this.prepare();\n    var geometry = this._geometry;\n    var shadow;\n\n    var layer = this._geometry.getLayer();\n\n    var needShadow = layer.options['renderer'] === 'canvas';\n    this._geometryDraggble = geometry.options['draggable'];\n\n    if (needShadow) {\n      geometry.config('draggable', false);\n      shadow = geometry.copy();\n      shadow.setSymbol(geometry._getInternalSymbol());\n      shadow.copyEventListeners(geometry);\n\n      if (geometry._getParent()) {\n        shadow.copyEventListeners(geometry._getParent());\n      }\n\n      shadow._setEventTarget(geometry);\n\n      shadow.setId(null).config({\n        'draggable': false\n      });\n      this._shadow = shadow;\n      geometry.hide();\n    } else if (geometry instanceof Marker) {\n      geometry.config('draggable', true);\n    }\n\n    this._switchGeometryEvents('on');\n\n    if (geometry instanceof Marker || geometry instanceof Circle || geometry instanceof Rectangle || geometry instanceof Ellipse) {\n      this._createOrRefreshOutline();\n    }\n\n    if (this._shadowLayer) {\n      this._shadowLayer.bringToFront().addGeometry(shadow);\n    }\n\n    if (!(geometry instanceof Marker)) {\n      this._createCenterHandle();\n    } else if (shadow) {\n      shadow.config('draggable', true);\n      shadow.on('dragend', this._onMarkerDragEnd, this);\n    }\n\n    if (geometry instanceof Marker && this.options['resize'] !== false) {\n      this.createMarkerEditor();\n    } else if (geometry instanceof Circle) {\n      this.createCircleEditor();\n    } else if (geometry instanceof Rectangle) {\n      this.createEllipseOrRectEditor();\n    } else if (geometry instanceof Ellipse) {\n      this.createEllipseOrRectEditor();\n    } else if (geometry instanceof Sector) ; else if (geometry instanceof Polygon || geometry instanceof LineString) {\n      this.createPolygonEditor();\n    }\n  };\n\n  _proto.stop = function stop() {\n    delete this._history;\n    delete this._historyPointer;\n    delete this._editOutline;\n\n    this._switchGeometryEvents('off');\n\n    var map = this.getMap();\n\n    if (!map) {\n      this.fire('remove');\n      return;\n    }\n\n    this._geometry.config('draggable', this._geometryDraggble);\n\n    if (this._shadow) {\n      delete this._shadow;\n      delete this._geometryDraggble;\n\n      this._geometry.show();\n    }\n\n    if (this._shadowLayer) {\n      this._shadowLayer.remove();\n\n      delete this._shadowLayer;\n    }\n\n    this._refreshHooks = [];\n\n    if (this.options['symbol']) {\n      this._geometry.setSymbol(this._originalSymbol);\n\n      delete this._originalSymbol;\n    }\n\n    this.editing = false;\n    this.fire('remove');\n  };\n\n  _proto.isEditing = function isEditing() {\n    if (isNil(this.editing)) {\n      return false;\n    }\n\n    return this.editing;\n  };\n\n  _proto._getGeometryEvents = function _getGeometryEvents() {\n    return {\n      'symbolchange': this._onGeoSymbolChange,\n      'dragstart': this._onDragStart,\n      'dragend': this._onDragEnd,\n      'positionchange shapechange': this._exeAndReset\n    };\n  };\n\n  _proto._switchGeometryEvents = function _switchGeometryEvents(oper) {\n    if (this._geometry) {\n      var events = this._getGeometryEvents();\n\n      for (var p in events) {\n        this._geometry[oper](p, events[p], this);\n      }\n    }\n  };\n\n  _proto._onGeoSymbolChange = function _onGeoSymbolChange(param) {\n    if (this._shadow) {\n      this._shadow.setSymbol(param.target._getInternalSymbol());\n    }\n  };\n\n  _proto._onMarkerDragEnd = function _onMarkerDragEnd() {\n    this._update('setCoordinates', this._shadow.getCoordinates().toArray());\n  };\n\n  _proto._createOrRefreshOutline = function _createOrRefreshOutline() {\n    var geometry = this._geometry;\n    var outline = this._editOutline;\n\n    if (!outline) {\n      this._editOutline = new EditOutline(this, this.getMap());\n\n      this._addRefreshHook(this._createOrRefreshOutline);\n    }\n\n    var points = this._editOutline.points;\n\n    if (geometry instanceof Marker) {\n      this._editOutline.setPoints(geometry.getContainerExtent().toArray(points));\n    } else {\n      var map = this.getMap();\n\n      var extent = geometry._getPrjExtent();\n\n      points = extent.toArray(points);\n      points.forEach(function (c) {\n        return map._prjToContainerPoint(c, null, c);\n      });\n\n      this._editOutline.setPoints(points);\n    }\n\n    return outline;\n  };\n\n  _proto._createCenterHandle = function _createCenterHandle() {\n    var _this2 = this;\n\n    var map = this.getMap();\n    var symbol = this.options['centerHandleSymbol'];\n\n    if (this._geometry instanceof LineString) {\n      symbol['markerDx'] = 5;\n    }\n\n    var shadow;\n    var cointainerPoint = map.coordToContainerPoint(this._geometry.getCenter());\n    var handle = this.createHandle(cointainerPoint, {\n      'symbol': symbol,\n      'cursor': 'move',\n      onDown: function onDown() {\n        if (_this2._shadow) {\n          shadow = _this2._shadow.copy();\n\n          var _symbol = lowerSymbolOpacity(shadow._getInternalSymbol(), 0.5);\n\n          shadow.setSymbol(_symbol).addTo(_this2._geometry.getLayer());\n        }\n      },\n      onMove: function onMove(param) {\n        var offset = param['coordOffset'];\n\n        if (shadow) {\n          shadow.translate(offset);\n        } else {\n          _this2._geometry.translate(offset);\n        }\n      },\n      onUp: function onUp() {\n        var geo = shadow || _this2._geometry;\n\n        _this2._update('setCoordinates', Coordinate.toNumberArrays(geo.getCoordinates()));\n\n        if (shadow) {\n          shadow.remove();\n        }\n      }\n    });\n\n    this._addRefreshHook(function () {\n      var center = _this2._geometry.getCenter();\n\n      handle.setContainerPoint(map.coordToContainerPoint(center));\n    });\n  };\n\n  _proto._createHandleInstance = function _createHandleInstance(containerPoint, opts) {\n    var map = this.getMap();\n    var symbol = loadFunctionTypes(opts['symbol'], function () {\n      return [map.getZoom(), {\n        '{bearing}': map.getBearing(),\n        '{pitch}': map.getPitch(),\n        '{zoom}': map.getZoom()\n      }];\n    });\n    var removeVertexOn = this.options['removeVertexOn'];\n    var handle = new EditHandle(this, map, {\n      symbol: symbol,\n      cursor: opts['cursor'],\n      events: removeVertexOn\n    });\n    handle.setContainerPoint(containerPoint);\n    return handle;\n  };\n\n  _proto.createHandle = function createHandle(containerPoint, opts) {\n    if (!opts) {\n      opts = {};\n    }\n\n    var handle = this._createHandleInstance(containerPoint, opts);\n\n    var me = this;\n\n    function onHandleDragstart(param) {\n      this._updating = true;\n\n      if (opts.onDown) {\n        this._geometry.fire('handledragstart');\n\n        opts.onDown.call(me, param['containerPoint'], param);\n      }\n\n      return false;\n    }\n\n    function onHandleDragging(param) {\n      me._hideContext();\n\n      if (opts.onMove) {\n        this._geometry.fire('handledragging');\n\n        opts.onMove.call(me, param);\n      }\n\n      return false;\n    }\n\n    function onHandleDragEnd(ev) {\n      if (opts.onUp) {\n        this._geometry.fire('handledragend');\n\n        opts.onUp.call(me, ev);\n      }\n\n      this._updating = false;\n      return false;\n    }\n\n    handle.on('dragstart', onHandleDragstart, this);\n    handle.on('dragging', onHandleDragging, this);\n    handle.on('dragend', onHandleDragEnd, this);\n\n    if (opts.onRefresh) {\n      handle.refresh = opts.onRefresh;\n    }\n\n    return handle;\n  };\n\n  _proto._createResizeHandles = function _createResizeHandles(blackList, onHandleMove, onHandleUp) {\n    var _this3 = this;\n\n    var cursors = ['nw-resize', 'n-resize', 'ne-resize', 'w-resize', 'e-resize', 'sw-resize', 's-resize', 'se-resize'];\n    var axis = [null, 'y', null, 'x', 'x', null, 'y', null];\n    var geometry = this._geometry;\n    var isMarker = geometry instanceof Marker;\n\n    function getResizeAnchors() {\n      if (isMarker) {\n        var _ext = geometry.getContainerExtent();\n\n        return [new Point(_ext['xmin'], _ext['ymin']), new Point((_ext['xmax'] + _ext['xmin']) / 2, _ext['ymin']), new Point(_ext['xmax'], _ext['ymin']), new Point(_ext['xmin'], (_ext['ymin'] + _ext['ymax']) / 2), new Point(_ext['xmax'], (_ext['ymin'] + _ext['ymax']) / 2), new Point(_ext['xmin'], _ext['ymax']), new Point((_ext['xmax'] + _ext['xmin']) / 2, _ext['ymax']), new Point(_ext['xmax'], _ext['ymax'])];\n      }\n\n      var ext = geometry._getPrjExtent();\n\n      return [new Point(ext['xmin'], ext['ymax']), new Point((ext['xmax'] + ext['xmin']) / 2, ext['ymax']), new Point(ext['xmax'], ext['ymax']), new Point(ext['xmin'], (ext['ymax'] + ext['ymin']) / 2), new Point(ext['xmax'], (ext['ymax'] + ext['ymin']) / 2), new Point(ext['xmin'], ext['ymin']), new Point((ext['xmax'] + ext['xmin']) / 2, ext['ymin']), new Point(ext['xmax'], ext['ymin'])];\n    }\n\n    if (!blackList) {\n      blackList = [];\n    }\n\n    var me = this;\n    var resizeHandles = [],\n        anchorIndexes = {},\n        map = this.getMap(),\n        handleSymbol = this.options['vertexHandleSymbol'];\n\n    var fnLocateHandles = function fnLocateHandles() {\n      var anchors = getResizeAnchors();\n\n      var _loop = function _loop(i) {\n        if (Array.isArray(blackList)) {\n          var isBlack = blackList.some(function (ele) {\n            return ele === i;\n          });\n\n          if (isBlack) {\n            return \"continue\";\n          }\n        }\n\n        var anchor = anchors[i],\n            point = isMarker ? anchor : map._prjToContainerPoint(anchor);\n\n        if (resizeHandles.length < anchors.length - blackList.length) {\n          var handle = _this3.createHandle(point, {\n            'symbol': handleSymbol,\n            'cursor': cursors[i],\n            'axis': axis[i],\n            onMove: function (_index) {\n              return function (e) {\n                me._updating = true;\n                onHandleMove(e.containerPoint, _index);\n                geometry.fire('resizing');\n              };\n            }(i),\n            onUp: function onUp() {\n              me._updating = false;\n              onHandleUp();\n            }\n          });\n\n          anchorIndexes[i] = resizeHandles.length;\n          resizeHandles.push(handle);\n        } else {\n          resizeHandles[anchorIndexes[i]].setContainerPoint(point);\n        }\n      };\n\n      for (var i = 0; i < anchors.length; i++) {\n        var _ret = _loop(i);\n\n        if (_ret === \"continue\") continue;\n      }\n    };\n\n    fnLocateHandles();\n\n    this._addRefreshHook(fnLocateHandles);\n\n    return resizeHandles;\n  };\n\n  _proto.createMarkerEditor = function createMarkerEditor() {\n    var _this4 = this;\n\n    var geometryToEdit = this._shadow || this._geometry,\n        map = this.getMap();\n\n    if (!geometryToEdit._canEdit()) {\n      if (console) {\n        console.warn('A marker can\\'t be resized with symbol:', geometryToEdit.getSymbol());\n      }\n\n      return;\n    }\n\n    if (!this._history) {\n      this._recordHistory(getUpdates());\n    }\n\n    var symbol = geometryToEdit._getInternalSymbol();\n\n    var dxdy = new Point(0, 0);\n\n    if (isNumber(symbol['markerDx'])) {\n      dxdy.x = symbol['markerDx'];\n    }\n\n    if (isNumber(symbol['markerDy'])) {\n      dxdy.y = symbol['markerDy'];\n    }\n\n    var blackList = null;\n    var verticalAnchor = 'middle';\n    var horizontalAnchor = 'middle';\n\n    if (VectorMarkerSymbolizer.test(symbol)) {\n      var type = symbol['markerType'];\n\n      if (type === 'pin' || type === 'pie' || type === 'bar') {\n        blackList = [5, 6, 7];\n        verticalAnchor = 'bottom';\n      } else if (type === 'rectangle') {\n        blackList = [0, 1, 2, 3, 5];\n        verticalAnchor = 'top';\n        horizontalAnchor = 'left';\n      }\n    } else if (ImageMarkerSymbolizer.test(symbol) || VectorPathMarkerSymbolizer.test(symbol)) {\n      verticalAnchor = 'bottom';\n      blackList = [5, 6, 7];\n    }\n\n    var resizeAbilities = [2, 1, 2, 0, 0, 2, 1, 2];\n    var aspectRatio;\n\n    if (this.options['fixAspectRatio']) {\n      var size = geometryToEdit.getSize();\n      aspectRatio = size.width / size.height;\n    }\n\n    var resizeHandles = this._createResizeHandles(blackList, function (containerPoint, i) {\n      if (blackList && blackList.indexOf(i) >= 0) {\n        var newCoordinates = map.containerPointToCoordinate(containerPoint.sub(dxdy));\n        var coordinates = geometryToEdit.getCoordinates();\n        newCoordinates.x = coordinates.x;\n        geometryToEdit.setCoordinates(newCoordinates);\n\n        _this4._updateCoordFromShadow(true);\n\n        var mirrorHandle = resizeHandles[resizeHandles.length - 1 - i];\n        var mirror = mirrorHandle.getContainerPoint();\n        containerPoint = mirror;\n      }\n\n      var viewCenter = map.coordToContainerPoint(geometryToEdit.getCoordinates()).add(dxdy),\n          symbol = geometryToEdit._getInternalSymbol();\n\n      var wh = containerPoint.sub(viewCenter);\n\n      if (verticalAnchor === 'bottom' && containerPoint.y > viewCenter.y) {\n        wh.y = 0;\n      }\n\n      var vr = verticalAnchor === 'middle' ? 2 : 1;\n      var hr = horizontalAnchor === 'left' ? 1 : 2;\n      var width = Math.abs(wh.x) * hr,\n          height = Math.abs(wh.y) * vr;\n\n      if (aspectRatio) {\n        width = Math.max(width, height * aspectRatio);\n        height = width / aspectRatio;\n      }\n\n      var ability = resizeAbilities[i];\n\n      if (!(geometryToEdit instanceof TextBox)) {\n        if (aspectRatio || ability === 0 || ability === 2) {\n          symbol['markerWidth'] = Math.min(width, _this4._geometry.options['maxMarkerWidth'] || Infinity);\n        }\n\n        if (aspectRatio || ability === 1 || ability === 2) {\n          symbol['markerHeight'] = Math.min(height, _this4._geometry.options['maxMarkerHeight'] || Infinity);\n        }\n\n        geometryToEdit.setSymbol(symbol);\n\n        if (geometryToEdit !== _this4._geometry) {\n          _this4._geometry.setSymbol(symbol);\n        }\n      } else {\n        if (aspectRatio || ability === 0 || ability === 2) {\n          geometryToEdit.setWidth(width);\n\n          if (geometryToEdit !== _this4._geometry) {\n            _this4._geometry.setWidth(width);\n          }\n        }\n\n        if (aspectRatio || ability === 1 || ability === 2) {\n          geometryToEdit.setHeight(height);\n\n          if (geometryToEdit !== _this4._geometry) {\n            _this4._geometry.setHeight(height);\n          }\n        }\n      }\n    }, function () {\n      _this4._update(getUpdates());\n    });\n\n    function getUpdates() {\n      var updates = [['setCoordinates', geometryToEdit.getCoordinates().toArray()]];\n\n      if (geometryToEdit instanceof TextBox) {\n        updates.push(['setWidth', geometryToEdit.getWidth()]);\n        updates.push(['setHeight', geometryToEdit.getHeight()]);\n      } else {\n        updates.push(['setSymbol', geometryToEdit.getSymbol()]);\n      }\n\n      return updates;\n    }\n  };\n\n  _proto.createCircleEditor = function createCircleEditor() {\n    var _this5 = this;\n\n    var geo = this._shadow || this._geometry;\n    var map = this.getMap();\n\n    if (!this._history) {\n      this._recordHistory([['setCoordinates', geo.getCoordinates().toArray()], ['setRadius', geo.getRadius()]]);\n    }\n\n    this._createResizeHandles(null, function (handleContainerPoint) {\n      var center = geo.getCenter();\n      var mouseCoordinate = map.containerPointToCoord(handleContainerPoint);\n      var wline = new LineString([[center.x, center.y], [mouseCoordinate.x, center.y]]);\n      var hline = new LineString([[center.x, center.y], [center.x, mouseCoordinate.y]]);\n      var r = Math.max(map.computeGeometryLength(wline), map.computeGeometryLength(hline));\n      geo.setRadius(r);\n\n      if (geo !== _this5._geometry) {\n        _this5._geometry.setRadius(r);\n      }\n    }, function () {\n      _this5._update('setRadius', geo.getRadius());\n    });\n  };\n\n  _proto.createEllipseOrRectEditor = function createEllipseOrRectEditor() {\n    var _this6 = this;\n\n    var resizeAbilities = [2, 1, 2, 0, 0, 2, 1, 2];\n    var geometryToEdit = this._shadow || this._geometry;\n\n    if (!this._history) {\n      this._recordHistory(getUpdates());\n    }\n\n    var map = this.getMap();\n    var isRect = this._geometry instanceof Rectangle;\n    var aspectRatio;\n\n    if (this.options['fixAspectRatio']) {\n      aspectRatio = geometryToEdit.getWidth() / geometryToEdit.getHeight();\n    }\n\n    var resizeHandles = this._createResizeHandles(null, function (mouseContainerPoint, i) {\n      var r = isRect ? 1 : 2;\n      var pointSub, w, h;\n      var handle = resizeHandles[i];\n      var targetPoint = handle.getContainerPoint();\n      var ability = resizeAbilities[i];\n\n      if (isRect) {\n        var mirror = resizeHandles[7 - i];\n        var mirrorContainerPoint = mirror.getContainerPoint();\n        pointSub = targetPoint.sub(mirrorContainerPoint);\n        var absSub = pointSub.abs();\n        w = map.pixelToDistance(absSub.x, 0);\n        h = map.pixelToDistance(0, absSub.y);\n        var size = geometryToEdit.getSize();\n        var geoCoord = geometryToEdit.getCoordinates();\n        var width = geometryToEdit.getWidth();\n        var height = geometryToEdit.getHeight();\n        var mouseCoordinate = map.containerPointToCoord(mouseContainerPoint);\n        var mirrorCoordinate = map.containerPointToCoord(mirrorContainerPoint);\n        var wline = new LineString([[mirrorCoordinate.x, mirrorCoordinate.y], [mouseCoordinate.x, mirrorCoordinate.y]]);\n        var hline = new LineString([[mirrorCoordinate.x, mirrorCoordinate.y], [mirrorCoordinate.x, mouseCoordinate.y]]);\n        w = map.computeGeometryLength(wline);\n        h = map.computeGeometryLength(hline);\n\n        if (ability === 0) {\n          if (aspectRatio) {\n            absSub.y = absSub.x / aspectRatio;\n            size.height = Math.abs(absSub.y);\n            h = w / aspectRatio;\n          }\n\n          targetPoint.y = mirrorContainerPoint.y - size.height / 2;\n          mouseCoordinate.y = geoCoord.y;\n\n          if (i === 4) {\n            mouseCoordinate.x = Math.min(mouseCoordinate.x, geoCoord.x);\n          } else {\n            var mirrorCoord = map.locate(geoCoord, width, 0);\n            mouseCoordinate.x = map.locate(new Coordinate(mirrorCoord.x, mouseCoordinate.y), -w, 0).x;\n          }\n        } else if (ability === 1) {\n          if (aspectRatio) {\n            absSub.x = absSub.y * aspectRatio;\n            size.width = Math.abs(absSub.x);\n            w = h * aspectRatio;\n          }\n\n          targetPoint.x = mirrorContainerPoint.x - size.width / 2;\n          mouseCoordinate.x = geoCoord.x;\n          mouseCoordinate.y = Math.max(mouseCoordinate.y, mirrorCoordinate.y);\n        } else {\n          if (aspectRatio) {\n            if (w > h * aspectRatio) {\n              h = w / aspectRatio;\n              targetPoint.y = mirrorContainerPoint.y + absSub.x * sign(pointSub.y) / aspectRatio;\n            } else {\n              w = h * aspectRatio;\n              targetPoint.x = mirrorContainerPoint.x + absSub.y * sign(pointSub.x) * aspectRatio;\n            }\n          }\n\n          if (i === 0 || i === 5) {\n            var _mirrorCoord = i === 0 ? map.locate(geoCoord, width, 0) : map.locate(geoCoord, width, -height);\n\n            mouseCoordinate.x = map.locate(new Coordinate(_mirrorCoord.x, mouseCoordinate.y), -w, 0).x;\n          } else {\n            mouseCoordinate.x = Math.min(mouseCoordinate.x, mirrorCoordinate.x);\n          }\n\n          mouseCoordinate.y = Math.max(mouseCoordinate.y, mirrorCoordinate.y);\n        }\n\n        geometryToEdit.setCoordinates(mouseCoordinate);\n\n        _this6._updateCoordFromShadow(true);\n      } else {\n        var center = geometryToEdit.getCenter();\n\n        var _mouseCoordinate = map.containerPointToCoord(targetPoint);\n\n        var _wline = new LineString([[center.x, center.y], [_mouseCoordinate.x, center.y]]);\n\n        var _hline = new LineString([[center.x, center.y], [center.x, _mouseCoordinate.y]]);\n\n        w = map.computeGeometryLength(_wline);\n        h = map.computeGeometryLength(_hline);\n\n        if (aspectRatio) {\n          w = Math.max(w, h * aspectRatio);\n          h = w / aspectRatio;\n        }\n      }\n\n      if (aspectRatio || ability === 0 || ability === 2) {\n        geometryToEdit.setWidth(w * r);\n\n        if (geometryToEdit !== _this6._geometry) {\n          _this6._geometry.setWidth(w * r);\n        }\n      }\n\n      if (aspectRatio || ability === 1 || ability === 2) {\n        geometryToEdit.setHeight(h * r);\n\n        if (geometryToEdit !== _this6._geometry) {\n          _this6._geometry.setHeight(h * r);\n        }\n      }\n    }, function () {\n      _this6._update(getUpdates());\n    });\n\n    function getUpdates() {\n      return [['setCoordinates', geometryToEdit.getCoordinates().toArray()], ['setWidth', geometryToEdit.getWidth()], ['setHeight', geometryToEdit.getHeight()]];\n    }\n  };\n\n  _proto.createPolygonEditor = function createPolygonEditor() {\n    var map = this.getMap(),\n        geoToEdit = this._shadow || this._geometry,\n        me = this;\n\n    if (!this._history) {\n      this._recordHistory('setCoordinates', Coordinate.toNumberArrays(geoToEdit.getCoordinates()));\n    }\n\n    var verticeLimit = geoToEdit instanceof Polygon ? 3 : 2;\n    var propertyOfVertexIndex = 'maptalks--editor-vertex-index';\n    var vertexHandles = {\n      0: []\n    },\n        newVertexHandles = {\n      0: []\n    };\n\n    function getVertexCoordinates(ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      if (geoToEdit instanceof Polygon) {\n        var coordinates = geoToEdit.getCoordinates()[ringIndex] || [];\n        return coordinates.slice(0, coordinates.length - 1);\n      } else {\n        return geoToEdit.getCoordinates();\n      }\n    }\n\n    function getVertexPrjCoordinates(ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      if (ringIndex === 0) {\n        return geoToEdit._getPrjCoordinates();\n      }\n\n      return geoToEdit._getPrjHoles()[ringIndex - 1];\n    }\n\n    function onVertexAddOrRemove() {\n      for (var ringIndex in vertexHandles) {\n        for (var i = vertexHandles[ringIndex].length - 1; i >= 0; i--) {\n          vertexHandles[ringIndex][i][propertyOfVertexIndex] = i;\n        }\n\n        for (var _i = newVertexHandles[ringIndex].length - 1; _i >= 0; _i--) {\n          newVertexHandles[ringIndex][_i][propertyOfVertexIndex] = _i;\n        }\n      }\n\n      me._updateCoordFromShadow();\n    }\n\n    function removeVertex(param) {\n      me._updating = true;\n      var handle = param['target'],\n          index = handle[propertyOfVertexIndex];\n      var ringIndex = isNumber(handle._ringIndex) ? handle._ringIndex : 0;\n      var prjCoordinates = getVertexPrjCoordinates(ringIndex);\n\n      if (prjCoordinates.length <= verticeLimit) {\n        return;\n      }\n\n      var isEnd = geoToEdit instanceof LineString && (index === 0 || index === prjCoordinates.length - 1);\n      prjCoordinates.splice(index, 1);\n\n      if (ringIndex > 0) {\n        geoToEdit._prjHoles[ringIndex - 1] = prjCoordinates;\n      } else {\n        geoToEdit._setPrjCoordinates(prjCoordinates);\n      }\n\n      geoToEdit._updateCache();\n\n      vertexHandles[ringIndex].splice(index, 1)[0].delete();\n\n      if (index < newVertexHandles[ringIndex].length) {\n        newVertexHandles[ringIndex].splice(index, 1)[0].delete();\n      }\n\n      var nextIndex;\n\n      if (index === 0) {\n        nextIndex = newVertexHandles[ringIndex].length - 1;\n      } else {\n        nextIndex = index - 1;\n      }\n\n      newVertexHandles[ringIndex].splice(nextIndex, 1)[0].delete();\n\n      if (!isEnd) {\n        newVertexHandles[ringIndex].splice(nextIndex, 0, createNewVertexHandle.call(me, nextIndex, ringIndex));\n      }\n\n      onVertexAddOrRemove();\n      me._updating = false;\n    }\n\n    function moveVertexHandle(handleConatainerPoint, index, ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      var vertice = getVertexPrjCoordinates(ringIndex);\n\n      var nVertex = map._containerPointToPrj(handleConatainerPoint.sub(getDxDy()));\n\n      var pVertex = vertice[index];\n      pVertex.x = nVertex.x;\n      pVertex.y = nVertex.y;\n\n      geoToEdit._updateCache();\n\n      geoToEdit.onShapeChanged();\n\n      me._updateCoordFromShadow(true);\n\n      var nextIndex;\n\n      if (index === 0) {\n        nextIndex = newVertexHandles[ringIndex].length - 1;\n      } else {\n        nextIndex = index - 1;\n      }\n\n      if (newVertexHandles[ringIndex][index]) {\n        newVertexHandles[ringIndex][index].refresh();\n      }\n\n      if (newVertexHandles[ringIndex][nextIndex]) {\n        newVertexHandles[ringIndex][nextIndex].refresh();\n      }\n    }\n\n    var hanldeDxdy = new Point(0, 0);\n\n    function getDxDy() {\n      var compiledSymbol = geoToEdit._getCompiledSymbol();\n\n      hanldeDxdy.x = compiledSymbol.lineDx || 0;\n      hanldeDxdy.y = compiledSymbol.lineDy || 0;\n      return hanldeDxdy;\n    }\n\n    function createVertexHandle(index, ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      var vertex = getVertexCoordinates(ringIndex)[index];\n      var handle = me.createHandle(map.coordToContainerPoint(vertex)._add(getDxDy()), {\n        'symbol': me.options['vertexHandleSymbol'],\n        'cursor': 'pointer',\n        'axis': null,\n        onMove: function onMove() {\n          moveVertexHandle(handle.getContainerPoint(), handle[propertyOfVertexIndex], ringIndex);\n        },\n        onRefresh: function onRefresh() {\n          vertex = getVertexCoordinates(ringIndex)[handle[propertyOfVertexIndex]];\n          var containerPoint = map.coordToContainerPoint(vertex);\n          handle.setContainerPoint(containerPoint._add(getDxDy()));\n        },\n        onUp: function onUp() {\n          me._updateCoordFromShadow();\n        },\n        onDown: function onDown(param, e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n        }\n      });\n      handle[propertyOfVertexIndex] = index;\n      handle._ringIndex = ringIndex;\n      handle.on(me.options['removeVertexOn'], removeVertex);\n      return handle;\n    }\n\n    var pauseRefresh = false;\n\n    function createNewVertexHandle(index, ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      var vertexCoordinates = getVertexCoordinates(ringIndex);\n      var nextVertex;\n\n      if (index + 1 >= vertexCoordinates.length) {\n        nextVertex = vertexCoordinates[0];\n      } else {\n        nextVertex = vertexCoordinates[index + 1];\n      }\n\n      var vertex = vertexCoordinates[index].add(nextVertex).multi(1 / 2);\n      var handle = me.createHandle(vertex, {\n        'symbol': me.options['newVertexHandleSymbol'],\n        'cursor': 'pointer',\n        'axis': null,\n        onDown: function onDown(param, e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n\n          var prjCoordinates = getVertexPrjCoordinates(ringIndex);\n          var vertexIndex = handle[propertyOfVertexIndex];\n          var cp = handle.getContainerPoint();\n\n          var pVertex = map._containerPointToPrj(cp);\n\n          prjCoordinates.splice(vertexIndex + 1, 0, pVertex);\n\n          if (ringIndex > 0) {\n            geoToEdit._prjHoles[ringIndex - 1] = prjCoordinates;\n          } else {\n            geoToEdit._setPrjCoordinates(prjCoordinates);\n          }\n\n          geoToEdit._updateCache();\n\n          handle.opacity = 1;\n          newVertexHandles[ringIndex].splice(vertexIndex, 0, createNewVertexHandle.call(me, vertexIndex, ringIndex), createNewVertexHandle.call(me, vertexIndex + 1, ringIndex));\n          pauseRefresh = true;\n        },\n        onMove: function onMove() {\n          moveVertexHandle(handle.getContainerPoint(), handle[propertyOfVertexIndex] + 1, ringIndex);\n        },\n        onUp: function onUp(e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            pauseRefresh = false;\n            return;\n          }\n\n          var vertexIndex = handle[propertyOfVertexIndex];\n          removeFromArray(handle, newVertexHandles[ringIndex]);\n          handle.delete();\n          vertexHandles[ringIndex].splice(vertexIndex + 1, 0, createVertexHandle.call(me, vertexIndex + 1, ringIndex));\n          onVertexAddOrRemove();\n\n          me._updateCoordFromShadow();\n\n          pauseRefresh = false;\n        },\n        onRefresh: function onRefresh(i) {\n          vertexCoordinates = getVertexCoordinates(i);\n          var vertexIndex = handle[propertyOfVertexIndex];\n          var nextIndex;\n\n          if (vertexIndex === vertexCoordinates.length - 1) {\n            nextIndex = 0;\n          } else {\n            nextIndex = vertexIndex + 1;\n          }\n\n          var refreshVertex = vertexCoordinates[vertexIndex].add(vertexCoordinates[nextIndex]).multi(1 / 2);\n          var containerPoint = map.coordToContainerPoint(refreshVertex);\n          handle.setContainerPoint(containerPoint._add(getDxDy()));\n        }\n      });\n      handle[propertyOfVertexIndex] = index;\n      return handle;\n    }\n\n    if (geoToEdit instanceof Polygon) {\n      var rings = geoToEdit.getHoles().length + 1;\n\n      for (var ringIndex = 0; ringIndex < rings; ringIndex++) {\n        vertexHandles[ringIndex] = [];\n        newVertexHandles[ringIndex] = [];\n        var vertexCoordinates = getVertexCoordinates(ringIndex);\n\n        for (var i = 0, len = vertexCoordinates.length; i < len; i++) {\n          vertexHandles[ringIndex].push(createVertexHandle.call(this, i, ringIndex));\n\n          if (i < len - 1) {\n            newVertexHandles[ringIndex].push(createNewVertexHandle.call(this, i, ringIndex));\n          }\n        }\n\n        newVertexHandles[ringIndex].push(createNewVertexHandle.call(this, vertexCoordinates.length - 1, ringIndex));\n      }\n    } else {\n      var _ringIndex = 0;\n\n      var _vertexCoordinates = getVertexCoordinates(_ringIndex);\n\n      for (var _i2 = 0, _len = _vertexCoordinates.length; _i2 < _len; _i2++) {\n        vertexHandles[_ringIndex].push(createVertexHandle.call(this, _i2, _ringIndex));\n\n        if (_i2 < _len - 1) {\n          newVertexHandles[_ringIndex].push(createNewVertexHandle.call(this, _i2, _ringIndex));\n        }\n      }\n    }\n\n    this._addRefreshHook(function () {\n      if (pauseRefresh) {\n        return;\n      }\n\n      for (var _ringIndex2 in newVertexHandles) {\n        for (var _i3 = newVertexHandles[_ringIndex2].length - 1; _i3 >= 0; _i3--) {\n          newVertexHandles[_ringIndex2][_i3].refresh(_ringIndex2);\n        }\n      }\n\n      for (var _ringIndex3 in vertexHandles) {\n        for (var _i4 = vertexHandles[_ringIndex3].length - 1; _i4 >= 0; _i4--) {\n          vertexHandles[_ringIndex3][_i4].refresh(_ringIndex3);\n        }\n      }\n    });\n  };\n\n  _proto._refresh = function _refresh() {\n    if (this._refreshHooks) {\n      for (var i = this._refreshHooks.length - 1; i >= 0; i--) {\n        this._refreshHooks[i].call(this);\n      }\n    }\n  };\n\n  _proto._hideContext = function _hideContext() {\n    if (this._geometry) {\n      this._geometry.closeMenu();\n\n      this._geometry.closeInfoWindow();\n    }\n  };\n\n  _proto._addRefreshHook = function _addRefreshHook(fn) {\n    if (!fn) {\n      return;\n    }\n\n    if (!this._refreshHooks) {\n      this._refreshHooks = [];\n    }\n\n    this._refreshHooks.push(fn);\n  };\n\n  _proto._update = function _update(method) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key = 1; _key < _len2; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    this._exeHistory([method, args]);\n\n    this._recordHistory.apply(this, [method].concat(args));\n  };\n\n  _proto._updateCoordFromShadow = function _updateCoordFromShadow(ignoreRecord) {\n    var geoToEdit = this._shadow || this._geometry;\n    var coords = geoToEdit.getCoordinates();\n    var geo = this._geometry;\n    var updating = this._updating;\n    this._updating = true;\n    geo.setCoordinates(coords);\n\n    if (!ignoreRecord) {\n      this._recordHistory('setCoordinates', Coordinate.toNumberArrays(geo.getCoordinates()));\n    }\n\n    this._updating = updating;\n  };\n\n  _proto._recordHistory = function _recordHistory(method) {\n    if (!this._history) {\n      this._history = [];\n      this._historyPointer = 0;\n    }\n\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key2 = 1; _key2 < _len3; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    if (this._history.length) {\n      var lastOperation = this._history[this._history.length - 1];\n\n      if (lastOperation[0] === method && JSON.stringify(lastOperation[1]) === JSON.stringify(args)) {\n        return;\n      }\n    }\n\n    if (this._historyPointer < this._history.length - 1) {\n      this._history.splice(this._historyPointer + 1);\n    }\n\n    this._history.push([method, args]);\n\n    this._historyPointer = this._history.length - 1;\n\n    this._geometry.fire('editrecord');\n  };\n\n  _proto.cancel = function cancel() {\n    if (!this._history || this._historyPointer === 0) {\n      return this;\n    }\n\n    this._historyPointer = 0;\n    var record = this._history[0];\n\n    this._exeAndReset(record);\n\n    return this;\n  };\n\n  _proto.undo = function undo() {\n    if (!this._history || this._historyPointer === 0) {\n      return this;\n    }\n\n    var record = this._history[--this._historyPointer];\n\n    this._exeAndReset(record);\n\n    return this;\n  };\n\n  _proto.redo = function redo() {\n    if (!this._history || this._historyPointer === this._history.length - 1) {\n      return this;\n    }\n\n    var record = this._history[++this._historyPointer];\n\n    this._exeAndReset(record);\n\n    return this;\n  };\n\n  _proto._exeAndReset = function _exeAndReset(record) {\n    if (this._updating) {\n      return;\n    }\n\n    this._exeHistory(record);\n\n    var history = this._history,\n        pointer = this._historyPointer;\n    this.stop();\n    this._history = history;\n    this._historyPointer = pointer;\n    this.start();\n  };\n\n  _proto._onDragStart = function _onDragStart() {\n    this._updating = true;\n  };\n\n  _proto._onDragEnd = function _onDragEnd() {\n    this._updating = false;\n  };\n\n  _proto._exeHistory = function _exeHistory(record) {\n    if (!Array.isArray(record)) {\n      return;\n    }\n\n    var updating = this._updating;\n    this._updating = true;\n    var geoToEdit = this._shadow || this._geometry;\n    var geo = this._geometry;\n\n    if (Array.isArray(record[0])) {\n      record[0].forEach(function (o) {\n        var m = o[0],\n            args = o.slice(1);\n        geoToEdit[m].apply(geoToEdit, args);\n\n        if (geoToEdit !== geo) {\n          geo[m].apply(geo, args);\n        }\n      });\n    } else {\n      geoToEdit[record[0]].apply(geoToEdit, record[1]);\n\n      if (geoToEdit !== geo) {\n        geo[record[0]].apply(geo, record[1]);\n      }\n    }\n\n    this._updating = updating;\n  };\n\n  return GeometryEditor;\n}(Eventable(Class));\n\nGeometryEditor.mergeOptions(options$A);\n\nvar TextEditable = {\n  startEditText: function startEditText() {\n    if (!this.getMap()) {\n      return this;\n    }\n\n    this.hide();\n    this.endEditText();\n\n    this._prepareEditor();\n\n    this._fireEvent('edittextstart');\n\n    return this;\n  },\n  endEditText: function endEditText() {\n    if (this._textEditor) {\n      var html = this._textEditor.innerHTML;\n      html = html.replace(/<p>/ig, '').replace(/<\\/p>/ig, '<br/>');\n      this._textEditor.innerHTML = html;\n\n      var content = this._textEditor.innerText.replace(/[\\r\\n]+$/gi, '');\n\n      this.setContent(content);\n      off(this._textEditor, 'mousedown dblclick', stopPropagation);\n      this.getMap().off('mousedown', this.endEditText, this);\n\n      this._editUIMarker.remove();\n\n      delete this._editUIMarker;\n      this._textEditor.onkeyup = null;\n      delete this._textEditor;\n      this.show();\n\n      this._fireEvent('edittextend');\n    }\n\n    return this;\n  },\n  isEditingText: function isEditingText() {\n    if (this._textEditor) {\n      return true;\n    }\n\n    return false;\n  },\n  getTextEditor: function getTextEditor() {\n    return this._editUIMarker;\n  },\n  _prepareEditor: function _prepareEditor() {\n    var map = this.getMap();\n\n    var editContainer = this._createEditor();\n\n    this._textEditor = editContainer;\n    map.on('mousedown', this.endEditText, this);\n\n    var offset = this._getEditorOffset();\n\n    this._editUIMarker = new UIMarker(this.getCoordinates(), {\n      'animation': null,\n      'content': editContainer,\n      'dx': offset.dx,\n      'dy': offset.dy\n    }).addTo(map);\n\n    this._setCursorToLast(this._textEditor);\n  },\n  _getEditorOffset: function _getEditorOffset() {\n    var symbol = this._getInternalSymbol() || {};\n    var dx = 0,\n        dy = 0;\n    var textAlign = symbol['textHorizontalAlignment'];\n\n    if (textAlign === 'middle' || isNil(textAlign)) {\n      dx = (symbol['textDx'] || 0) - 2;\n      dy = (symbol['textDy'] || 0) - 2;\n    } else {\n      dx = (symbol['markerDx'] || 0) - 2;\n      dy = (symbol['markerDy'] || 0) - 2;\n    }\n\n    return {\n      'dx': dx,\n      'dy': dy\n    };\n  },\n  _createEditor: function _createEditor() {\n    var content = this.getContent();\n    var labelSize = this.getSize(),\n        symbol = this._getInternalSymbol() || {},\n        width = labelSize.width,\n        textColor = symbol['textFill'] || '#000000',\n        textSize = symbol['textSize'] || 12,\n        height = labelSize.height,\n        lineColor = symbol['markerLineColor'] || '#000',\n        fill = symbol['markerFill'] || '#3398CC',\n        spacing = symbol['textLineSpacing'] || 0;\n    var editor = createEl('div');\n    editor.contentEditable = true;\n    editor.style.cssText = \"background:\" + fill + \"; border:1px solid \" + lineColor + \";\\n            color:\" + textColor + \";font-size:\" + textSize + \"px;width:\" + (width - 2) + \"px;height:\" + (height - 2) + \"px;margin: auto;\\n            line-height:\" + (textSize + spacing) + \"px;outline: 0; padding:0; margin:0;word-wrap: break-word;\\n            overflow: hidden;-webkit-user-modify: read-write-plaintext-only;\";\n    editor.innerText = content;\n    on(editor, 'mousedown dblclick', stopPropagation);\n\n    editor.onkeyup = function (event) {\n      var h = editor.style.height || 0;\n\n      if (event.keyCode === 13) {\n        editor.style.height = parseInt(h) + textSize / 2 + 'px';\n      }\n    };\n\n    return editor;\n  },\n  _setCursorToLast: function _setCursorToLast(obj) {\n    var range;\n\n    if (window.getSelection) {\n      obj.focus();\n      range = window.getSelection();\n      range.selectAllChildren(obj);\n      range.collapseToEnd();\n    } else if (document.selection) {\n      range = document.selection.createRange();\n      range.moveToElementText(obj);\n      range.collapse(false);\n      range.select();\n    }\n  }\n};\nTextMarker.include(TextEditable);\n\nGeometry.include({\n  animate: function animate(styles, options, step) {\n    var _this = this;\n\n    if (this._animPlayer) {\n      this._animPlayer.finish();\n    }\n\n    if (isFunction(options)) {\n      step = options;\n    }\n\n    if (!options) {\n      options = {};\n    }\n\n    var map = this.getMap(),\n        projection = this._getProjection(),\n        stylesToAnimate = this._prepareAnimationStyles(styles);\n\n    var preTranslate;\n    var isFocusing = options['focus'];\n    delete this._animationStarted;\n\n    if (map) {\n      var renderer = map._getRenderer();\n\n      var framer = function framer(fn) {\n        renderer.callInNextFrame(fn);\n      };\n\n      options['framer'] = framer;\n    }\n\n    var player = Animation.animate(stylesToAnimate, options, function (frame) {\n      if (map && map.isRemoved()) {\n        player.finish();\n        return;\n      }\n\n      if (map && !_this._animationStarted && isFocusing) {\n        map.onMoveStart();\n      }\n\n      var styles = frame.styles;\n\n      for (var p in styles) {\n        if (p !== 'symbol' && p !== 'translate' && styles.hasOwnProperty(p)) {\n          var fnName = 'set' + p[0].toUpperCase() + p.slice(1);\n\n          _this[fnName](styles[p]);\n        }\n      }\n\n      var translate = styles['translate'];\n\n      if (translate) {\n        var toTranslate = translate;\n\n        if (preTranslate) {\n          toTranslate = translate.sub(preTranslate);\n        }\n\n        preTranslate = translate;\n\n        _this.translate(toTranslate);\n      }\n\n      var dSymbol = styles['symbol'];\n\n      if (dSymbol) {\n        var symbol = _this.getSymbol() || {};\n\n        _this.setSymbol(extendSymbol(symbol, dSymbol));\n      }\n\n      if (map && isFocusing) {\n        var pcenter = projection.project(_this.getCenter());\n\n        map._setPrjCenter(pcenter);\n\n        var e = map._parseEventFromCoord(projection.unproject(pcenter));\n\n        if (player.playState !== 'running') {\n          map.onMoveEnd(e);\n        } else {\n          map.onMoving(e);\n        }\n      }\n\n      _this._fireAnimateEvent(player.playState);\n\n      if (step) {\n        step(frame);\n      }\n    }, this);\n    this._animPlayer = player;\n    return this._animPlayer.play();\n  },\n  _prepareAnimationStyles: function _prepareAnimationStyles(styles) {\n    var symbol = this._getInternalSymbol();\n\n    var stylesToAnimate = {};\n\n    for (var p in styles) {\n      if (styles.hasOwnProperty(p)) {\n        var v = styles[p];\n\n        if (p !== 'translate' && p !== 'symbol') {\n          var fnName = 'get' + p[0].toUpperCase() + p.substring(1);\n          var current = this[fnName]();\n          stylesToAnimate[p] = [current, v];\n        } else if (p === 'symbol') {\n          var symbolToAnimate = void 0;\n\n          if (Array.isArray(styles['symbol'])) {\n            if (!Array.isArray(symbol)) {\n              throw new Error('geometry\\'symbol isn\\'t a composite symbol, while the symbol in styles is.');\n            }\n\n            symbolToAnimate = [];\n            var symbolInStyles = styles['symbol'];\n\n            for (var i = 0; i < symbolInStyles.length; i++) {\n              if (!symbolInStyles[i]) {\n                symbolToAnimate.push(null);\n                continue;\n              }\n\n              var a = {};\n\n              for (var sp in symbolInStyles[i]) {\n                if (symbolInStyles[i].hasOwnProperty(sp)) {\n                  a[sp] = [symbol[i][sp], symbolInStyles[i][sp]];\n                }\n              }\n\n              symbolToAnimate.push(a);\n            }\n          } else {\n            if (Array.isArray(symbol)) {\n              throw new Error('geometry\\'symbol is a composite symbol, while the symbol in styles isn\\'t.');\n            }\n\n            symbolToAnimate = {};\n\n            for (var _sp in v) {\n              if (v.hasOwnProperty(_sp)) {\n                symbolToAnimate[_sp] = [symbol[_sp], v[_sp]];\n              }\n            }\n          }\n\n          stylesToAnimate['symbol'] = symbolToAnimate;\n        } else if (p === 'translate') {\n          stylesToAnimate['translate'] = new Coordinate(v);\n        }\n      }\n    }\n\n    return stylesToAnimate;\n  },\n  _fireAnimateEvent: function _fireAnimateEvent(playState) {\n    if (playState === 'finished') {\n      delete this._animationStarted;\n\n      this._fireEvent('animateend');\n    } else if (playState === 'running') {\n      if (this._animationStarted) {\n        this._fireEvent('animating');\n      } else {\n        this._fireEvent('animatestart');\n\n        this._animationStarted = true;\n      }\n    }\n  }\n});\n\nvar DRAG_STAGE_LAYER_ID = INTERNAL_LAYER_PREFIX + '_drag_stage';\nvar EVENTS$2 = Browser$1.touch ? 'touchstart mousedown' : 'mousedown';\n\nvar GeometryDragHandler = function (_Handler) {\n  _inheritsLoose(GeometryDragHandler, _Handler);\n\n  function GeometryDragHandler(target) {\n    return _Handler.call(this, target) || this;\n  }\n\n  var _proto = GeometryDragHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    this.target.on(EVENTS$2, this._startDrag, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    this._endDrag();\n\n    this.target.off(EVENTS$2, this._startDrag, this);\n    delete this.container;\n  };\n\n  _proto._prepareDragHandler = function _prepareDragHandler() {\n    this._dragHandler = new DragHandler(this.container);\n\n    this._dragHandler.on('dragging', this._dragging, this).on('mouseup', this._endDrag, this).enable();\n  };\n\n  _proto._prepareShadow = function _prepareShadow() {\n    var _this = this;\n\n    var target = this.target;\n    var needShadow = target.getLayer().options['renderer'] === 'canvas';\n\n    if (!needShadow) {\n      return;\n    }\n\n    this._prepareDragStageLayer();\n\n    if (this._shadow) {\n      this._shadow.remove();\n    }\n\n    var shadow = this._shadow = target.copy();\n\n    if (shadow.getGeometries) {\n      var shadows = shadow.getGeometries();\n      var geos = target.getGeometries();\n      shadows.forEach(function (g, i) {\n        _this._updateShadowSymbol(g, geos[i]);\n      });\n    } else {\n      this._updateShadowSymbol(shadow, target);\n    }\n\n    shadow.setId(null);\n\n    this._prepareShadowConnectors();\n  };\n\n  _proto._updateShadowSymbol = function _updateShadowSymbol(shadow, target) {\n    shadow.setSymbol(target._getInternalSymbol());\n\n    if (target.options['dragShadow']) {\n      var symbol = lowerSymbolOpacity(shadow._getInternalSymbol(), 0.5);\n      shadow.setSymbol(symbol);\n    }\n  };\n\n  _proto._prepareShadowConnectors = function _prepareShadowConnectors() {\n    var target = this.target;\n    var shadow = this._shadow;\n\n    var resources = this._dragStageLayer._getRenderer().resources;\n\n    var shadowConnectors = [];\n\n    if (ConnectorLine._hasConnectors(target)) {\n      var connectors = ConnectorLine._getConnectors(target);\n\n      for (var i = 0, l = connectors.length; i < l; i++) {\n        var targetConn = connectors[i];\n\n        var connOptions = targetConn.config(),\n            connSymbol = targetConn._getInternalSymbol();\n\n        connOptions['symbol'] = lowerSymbolOpacity(connSymbol, 0.5);\n        var conn = void 0;\n\n        if (targetConn.getConnectSource() === target) {\n          conn = new targetConn.constructor(shadow, targetConn.getConnectTarget(), connOptions);\n        } else {\n          conn = new targetConn.constructor(targetConn.getConnectSource(), shadow, connOptions);\n        }\n\n        shadowConnectors.push(conn);\n\n        if (targetConn.getLayer() && targetConn.getLayer()._getRenderer()) {\n          resources.merge(targetConn.getLayer()._getRenderer().resources);\n        }\n      }\n    }\n\n    this._shadowConnectors = shadowConnectors;\n    shadowConnectors.push(shadow);\n\n    this._dragStageLayer.bringToFront().addGeometry(shadowConnectors);\n  };\n\n  _proto._onTargetUpdated = function _onTargetUpdated() {\n    if (this._shadow) {\n      this._shadow.setSymbol(this.target._getSymbol());\n    }\n  };\n\n  _proto._prepareDragStageLayer = function _prepareDragStageLayer() {\n    var map = this.target.getMap(),\n        layer = this.target.getLayer();\n    this._dragStageLayer = map.getLayer(DRAG_STAGE_LAYER_ID);\n\n    if (!this._dragStageLayer) {\n      this._dragStageLayer = new VectorLayer(DRAG_STAGE_LAYER_ID, {\n        enableAltitude: layer.options['enableAltitude'],\n        altitudeProperty: layer.options['altitudeProperty']\n      });\n      map.addLayer(this._dragStageLayer);\n    }\n\n    var resources = new ResourceCache();\n    resources.merge(layer._getRenderer().resources);\n    this._dragStageLayer._getRenderer().resources = resources;\n  };\n\n  _proto._startDrag = function _startDrag(param) {\n    var map = this.target.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    var parent = this.target._getParent();\n\n    if (parent) {\n      return;\n    }\n\n    if (this.isDragging()) {\n      return;\n    }\n\n    var domEvent = param['domEvent'];\n\n    if (domEvent.touches && domEvent.touches.length > 1 || domEvent.button === 2) {\n      return;\n    }\n\n    this.container = map._panels.mapWrapper || map._containerDOM;\n    this.target.on('click', this._endDrag, this);\n    this._lastCoord = this._correctCoord(param['coordinate']);\n    this._lastPoint = param['containerPoint'];\n\n    this._prepareDragHandler();\n\n    this._dragHandler.onMouseDown(param['domEvent']);\n\n    on(this.container, 'mouseleave', this._endDrag, this);\n    this._startParam = param;\n    this._moved = false;\n    return;\n  };\n\n  _proto._dragging = function _dragging(param) {\n    var target = this.target;\n\n    var map = target.getMap(),\n        e = map._parseEvent(param['domEvent']);\n\n    var domEvent = e['domEvent'];\n\n    if (domEvent.touches && domEvent.touches.length > 1) {\n      return;\n    }\n\n    if (!this._moved) {\n      this._moved = true;\n      target.on('symbolchange', this._onTargetUpdated, this);\n      this._isDragging = true;\n\n      this._prepareShadow();\n\n      if (this._shadow) {\n        if (!target.options['dragShadow']) {\n          target.hide();\n        }\n\n        this._shadow._fireEvent('dragstart', e);\n      }\n\n      this.target._fireEvent('dragstart', this._startParam || e);\n\n      delete this._startParam;\n      return;\n    }\n\n    var geo = this._shadow || target;\n    var axis = geo.options['dragOnAxis'],\n        dragOnScreenAxis = geo.options['dragOnScreenAxis'],\n        point = e['containerPoint'];\n    var coord = e['coordinate'];\n    this._lastPoint = this._lastPoint || point;\n    this._lastCoord = this._lastCoord || coord;\n\n    if (dragOnScreenAxis) {\n      if (axis === 'x') {\n        point.y = this._lastPoint.y;\n      } else if (axis === 'y') {\n        point.x = this._lastPoint.x;\n      }\n\n      coord = map.containerPointToCoord(point);\n    } else {\n      coord = this._correctCoord(coord);\n    }\n\n    var pointOffset = point.sub(this._lastPoint);\n    var coordOffset = coord.sub(this._lastCoord);\n\n    if (!dragOnScreenAxis) {\n      if (axis === 'x') {\n        pointOffset.y = coordOffset.y = 0;\n      } else if (axis === 'y') {\n        pointOffset.x = coordOffset.x = 0;\n      }\n    }\n\n    this._lastPoint = point;\n    this._lastCoord = coord;\n    geo.translate(coordOffset);\n\n    if (geo !== target && !target.options['dragShadow']) {\n      target.translate(coordOffset);\n    }\n\n    e['coordOffset'] = coordOffset;\n    e['pointOffset'] = pointOffset;\n\n    geo._fireEvent('dragging', e);\n\n    if (geo !== target) {\n      target._fireEvent('dragging', e);\n    }\n  };\n\n  _proto._endDrag = function _endDrag(param) {\n    if (this._dragHandler) {\n      this._dragHandler.disable();\n\n      delete this._dragHandler;\n    }\n\n    if (this.container) {\n      off(this.container, 'mouseleave', this._endDrag, this);\n    }\n\n    if (!this.target) {\n      return;\n    }\n\n    var target = this.target;\n    target.off('click', this._endDrag, this);\n    target.off('symbolchange', this._onTargetUpdated, this);\n    delete this._lastCoord;\n    delete this._lastPoint;\n    this._isDragging = false;\n    var map = target.getMap();\n\n    if (this.enabled() && map) {\n      var e = map._parseEvent(param ? param['domEvent'] : null);\n\n      this._updateTargetAndRemoveShadow(e);\n\n      if (this._moved) {\n        target._fireEvent('dragend', e);\n      }\n    }\n  };\n\n  _proto.isDragging = function isDragging() {\n    if (!this._isDragging) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto._updateTargetAndRemoveShadow = function _updateTargetAndRemoveShadow(eventParam) {\n    if (!this._shadow) {\n      return;\n    }\n\n    var target = this.target,\n        map = target.getMap();\n\n    if (!target.options['dragShadow']) {\n      target.show();\n    }\n\n    var shadow = this._shadow;\n\n    if (shadow) {\n      if (target.options['dragShadow']) {\n        if (target.getGeometries) {\n          var shadows = shadow.getGeometries();\n          var geos = target.getGeometries();\n          shadows.forEach(function (g, i) {\n            geos[i].setCoordinates(shadows[i].getCoordinates());\n          });\n        } else {\n          target.setCoordinates(shadow.getCoordinates());\n        }\n      }\n\n      shadow._fireEvent('dragend', eventParam);\n\n      shadow.remove();\n      delete this._shadow;\n    }\n\n    if (this._shadowConnectors) {\n      map.getLayer(DRAG_STAGE_LAYER_ID).removeGeometry(this._shadowConnectors);\n      delete this._shadowConnectors;\n    }\n\n    if (this._dragStageLayer) {\n      this._dragStageLayer._getRenderer().resources = new ResourceCache();\n\n      this._dragStageLayer.remove();\n    }\n  };\n\n  _proto._correctCoord = function _correctCoord(coord) {\n    var map = this.target.getMap();\n\n    if (!map.getPitch()) {\n      return coord;\n    }\n\n    var target = this.target;\n\n    if (!target.getMinAltitude()) {\n      return coord;\n    }\n\n    var alt = (target.getMinAltitude() + target.getMaxAltitude()) / 2;\n    return map.locateByPoint(coord, 0, -alt);\n  };\n\n  return GeometryDragHandler;\n}(Handler$1);\n\nGeometry.mergeOptions({\n  'draggable': false,\n  'dragShadow': true,\n  'dragOnAxis': null,\n  'dragOnScreenAxis': false\n});\nGeometry.addInitHook('addHandler', 'draggable', GeometryDragHandler);\nGeometry.include({\n  isDragging: function isDragging() {\n    if (this._getParent()) {\n      return this._getParent().isDragging();\n    }\n\n    if (this['draggable']) {\n      return this['draggable'].isDragging();\n    }\n\n    return false;\n  }\n});\n\nGeometry.include({\n  startEdit: function startEdit(opts) {\n    if (!this.getMap() || !this.options['editable']) {\n      return this;\n    }\n\n    this.endEdit();\n    this._editor = new GeometryEditor(this, opts);\n\n    this._editor.start();\n\n    this.fire('editstart');\n    return this;\n  },\n  endEdit: function endEdit() {\n    if (this._editor) {\n      this._editor.stop();\n\n      delete this._editor;\n      this.fire('editend');\n    }\n\n    return this;\n  },\n  redoEdit: function redoEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n\n    this._editor.redo();\n\n    this.fire('redoedit');\n    return this;\n  },\n  undoEdit: function undoEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n\n    this._editor.undo();\n\n    this.fire('undoedit');\n    return this;\n  },\n  cancelEdit: function cancelEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n\n    this._editor.cancel();\n\n    this.fire('canceledit');\n    return this;\n  },\n  isEditing: function isEditing() {\n    if (this._editor) {\n      return this._editor.isEditing();\n    }\n\n    return false;\n  }\n});\n\nGeometry.include({\n  _onEvent: function _onEvent(event, type) {\n    if (!this.getMap()) {\n      return;\n    }\n\n    var eventType = type || this._getEventTypeToFire(event);\n\n    if (eventType === 'contextmenu' && this.listens('contextmenu')) {\n      stopPropagation(event);\n      preventDefault(event);\n    }\n\n    var params = this._getEventParams(event);\n\n    this._fireEvent(eventType, params);\n  },\n  _getEventTypeToFire: function _getEventTypeToFire(domEvent) {\n    return domEvent.type;\n  },\n  _getEventParams: function _getEventParams(e) {\n    var map = this.getMap();\n    var eventParam = {\n      'domEvent': e\n    };\n    var actual = e.touches && e.touches.length > 0 ? e.touches[0] : e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e;\n\n    if (actual) {\n      var containerPoint = getEventContainerPoint(actual, map._containerDOM);\n      eventParam['coordinate'] = map.containerPointToCoordinate(containerPoint);\n      eventParam['containerPoint'] = containerPoint;\n      eventParam['viewPoint'] = map.containerPointToViewPoint(containerPoint);\n      eventParam['pont2d'] = map._containerPointToPoint(containerPoint);\n    }\n\n    return eventParam;\n  }\n});\n\nGeometry.include({\n  setInfoWindow: function setInfoWindow(options) {\n    this.removeInfoWindow();\n\n    if (options instanceof InfoWindow) {\n      this._infoWindow = options;\n      this._infoWinOptions = extend({}, this._infoWindow.options);\n\n      this._infoWindow.addTo(this);\n\n      return this;\n    }\n\n    this._infoWinOptions = extend({}, options);\n\n    if (this._infoWindow) {\n      this._infoWindow.setOptions(options);\n    } else if (this.getMap()) {\n      this._bindInfoWindow();\n    }\n\n    return this;\n  },\n  getInfoWindow: function getInfoWindow() {\n    if (!this._infoWindow) {\n      return null;\n    }\n\n    return this._infoWindow;\n  },\n  openInfoWindow: function openInfoWindow(coordinate) {\n    if (!this.getMap()) {\n      return this;\n    }\n\n    if (!coordinate) {\n      coordinate = this.getCenter();\n    }\n\n    if (!this._infoWindow) {\n      if (this._infoWinOptions && this.getMap()) {\n        this._bindInfoWindow();\n\n        this._infoWindow.show(coordinate);\n      }\n    } else {\n      this._infoWindow.show(coordinate);\n    }\n\n    return this;\n  },\n  closeInfoWindow: function closeInfoWindow() {\n    if (this._infoWindow) {\n      this._infoWindow.hide();\n    }\n\n    return this;\n  },\n  removeInfoWindow: function removeInfoWindow() {\n    this._unbindInfoWindow();\n\n    delete this._infoWinOptions;\n    delete this._infoWindow;\n    return this;\n  },\n  _bindInfoWindow: function _bindInfoWindow() {\n    var options = this._infoWinOptions;\n\n    if (!options) {\n      return this;\n    }\n\n    this._infoWindow = new InfoWindow(options);\n\n    this._infoWindow.addTo(this);\n\n    return this;\n  },\n  _unbindInfoWindow: function _unbindInfoWindow() {\n    if (this._infoWindow) {\n      this.closeInfoWindow();\n\n      this._infoWindow.remove();\n\n      delete this._infoWindow;\n    }\n\n    return this;\n  }\n});\n\nvar TILE_POINT = new Point(0, 0);\nvar TEMP_POINT$3 = new Point(0, 0);\nvar TEMP_POINT1$2 = new Point(0, 0);\nvar TEMP_POINT2$2 = new Point(0, 0);\nvar EMPTY_ARRAY$2 = [];\n\nvar TileWorkerConnection = function (_Actor) {\n  _inheritsLoose(TileWorkerConnection, _Actor);\n\n  function TileWorkerConnection() {\n    return _Actor.call(this, imageFetchWorkerKey) || this;\n  }\n\n  var _proto = TileWorkerConnection.prototype;\n\n  _proto.checkUrl = function checkUrl(url) {\n    if (!url || !isString(url)) {\n      return url;\n    }\n\n    return getAbsoluteURL(url);\n  };\n\n  _proto.fetchImage = function fetchImage(url, workerId, cb, fetchOptions) {\n    url = this.checkUrl(url);\n    var data = {\n      url: url,\n      fetchOptions: fetchOptions\n    };\n    this.send(data, EMPTY_ARRAY$2, cb, workerId);\n  };\n\n  return TileWorkerConnection;\n}(Actor);\n\nvar BLANK_IMAGE = new Image();\n\nvar TileLayerCanvasRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(TileLayerCanvasRenderer, _CanvasRenderer);\n\n  function TileLayerCanvasRenderer(layer) {\n    var _this;\n\n    _this = _CanvasRenderer.call(this, layer) || this;\n    _this.tilesInView = {};\n    _this.tilesLoading = {};\n    _this._parentTiles = [];\n    _this._childTiles = [];\n    _this.tileCache = new LRUCache(layer.options['maxCacheSize'], _this.deleteTile.bind(_assertThisInitialized(_assertThisInitialized(_this))));\n\n    if (Browser$1.decodeImageInWorker && _this.layer.options['decodeImageInWorker']) {\n      _this._tileImageWorkerConn = new TileWorkerConnection();\n    }\n\n    return _this;\n  }\n\n  var _proto2 = TileLayerCanvasRenderer.prototype;\n\n  _proto2.getCurrentTileZoom = function getCurrentTileZoom() {\n    return this._tileZoom;\n  };\n\n  _proto2.draw = function draw() {\n    var map = this.getMap();\n\n    if (!this.isDrawable()) {\n      return;\n    }\n\n    var mask2DExtent = this.prepareCanvas();\n\n    if (mask2DExtent) {\n      if (!mask2DExtent.intersects(this.canvasExtent2D)) {\n        this.completeRender();\n        return;\n      }\n    }\n\n    var layer = this.layer;\n    var tileGrids = layer.getTiles().tileGrids;\n\n    if (!tileGrids || !tileGrids.length) {\n      this.completeRender();\n      return;\n    }\n\n    var count = tileGrids.reduce(function (acc, curr) {\n      return acc + (curr && curr.tiles && curr.tiles.length || 0);\n    }, 0);\n\n    if (count >= this.tileCache.max / 2) {\n      this.tileCache.setMaxSize(count * 2 + 1);\n    }\n\n    var loadingCount = 0;\n    var loading = false;\n    var checkedTiles = {};\n    var tiles = [],\n        parentTiles = [],\n        parentKeys = {},\n        childTiles = [],\n        childKeys = {},\n        placeholders = [],\n        placeholderKeys = {};\n    var tileQueue = {};\n\n    var preLoadingCount = this._markTiles(),\n        loadingLimit = this._getLoadLimit();\n\n    var l = tileGrids.length;\n    this._tileZoom = tileGrids[0]['zoom'];\n\n    for (var i = 0; i < l; i++) {\n      var tileGrid = tileGrids[i];\n      var allTiles = tileGrid['tiles'];\n\n      var placeholder = this._generatePlaceHolder(tileGrid.zoom);\n\n      for (var _i = 0, _l = allTiles.length; _i < _l; _i++) {\n        var tile = allTiles[_i],\n            tileId = tile['id'];\n        var tileLoading = false;\n\n        if (this._isLoadingTile(tileId)) {\n          tileLoading = loading = true;\n          this.tilesLoading[tileId].current = true;\n        } else {\n          var cached = this._getCachedTile(tileId);\n\n          if (cached) {\n            if (cached.image && this.getTileOpacity(cached.image) < 1) {\n              tileLoading = loading = true;\n            }\n\n            tiles.push(cached);\n          } else {\n            tileLoading = loading = true;\n            var hitLimit = loadingLimit && loadingCount + preLoadingCount[0] > loadingLimit;\n\n            if (!hitLimit && (!map.isInteracting() || map.isMoving() || map.isRotating())) {\n              loadingCount++;\n              var key = tileId;\n              tileQueue[key] = tile;\n            }\n          }\n        }\n\n        if (!tileLoading) continue;\n\n        if (checkedTiles[tileId]) {\n          continue;\n        }\n\n        checkedTiles[tileId] = 1;\n\n        if (placeholder && !placeholderKeys[tileId]) {\n          tile.cache = false;\n          placeholders.push({\n            image: placeholder,\n            info: tile\n          });\n          placeholderKeys[tileId] = 1;\n        }\n\n        var parentTile = this._findParentTile(tile);\n\n        if (parentTile) {\n          var parentId = parentTile.info.id;\n\n          if (parentKeys[parentId] === undefined) {\n            parentKeys[parentId] = parentTiles.length;\n            parentTiles.push(parentTile);\n          }\n        } else if (!parentTiles.length) {\n          var children = this._findChildTiles(tile);\n\n          if (children.length) {\n            children.forEach(function (c) {\n              if (!childKeys[c.info.id]) {\n                childTiles.push(c);\n                childKeys[c.info.id] = 1;\n              }\n            });\n          }\n        }\n      }\n    }\n\n    if (parentTiles.length) {\n      childTiles.length = 0;\n      this._childTiles.length = 0;\n    }\n\n    this._drawTiles(tiles, parentTiles, childTiles, placeholders);\n\n    if (!loadingCount) {\n      if (!loading) {\n        if (!map.isAnimating() && (this._parentTiles.length || this._childTiles.length)) {\n          this._parentTiles = [];\n          this._childTiles = [];\n          this.setToRedraw();\n        }\n\n        this.completeRender();\n      }\n    } else {\n      this.loadTileQueue(tileQueue);\n    }\n\n    this._retireTiles();\n  };\n\n  _proto2.isTileCachedOrLoading = function isTileCachedOrLoading(tileId) {\n    return this.tileCache.get(tileId) || this.tilesInView[tileId] || this.tilesLoading[tileId];\n  };\n\n  _proto2._drawTiles = function _drawTiles(tiles, parentTiles, childTiles, placeholders) {\n    var _this2 = this;\n\n    if (parentTiles.length) {\n      parentTiles.sort(function (t1, t2) {\n        return Math.abs(t2.info.z - _this2._tileZoom) - Math.abs(t1.info.z - _this2._tileZoom);\n      });\n      this._parentTiles = parentTiles;\n    }\n\n    if (childTiles.length) {\n      this._childTiles = childTiles;\n    }\n\n    var context = {\n      tiles: tiles,\n      parentTiles: this._parentTiles,\n      childTiles: this._childTiles\n    };\n    this.onDrawTileStart(context);\n\n    this._parentTiles.forEach(function (t) {\n      return _this2._drawTileAndCache(t);\n    });\n\n    this._childTiles.forEach(function (t) {\n      return _this2._drawTile(t.info, t.image);\n    });\n\n    placeholders.forEach(function (t) {\n      return _this2._drawTile(t.info, t.image);\n    });\n    var layer = this.layer,\n        map = this.getMap();\n\n    if (!layer.options['cascadeTiles'] || map.getPitch() <= map.options['cascadePitches'][0]) {\n      tiles.forEach(function (t) {\n        return _this2._drawTileAndCache(t);\n      });\n    } else {\n      this.writeZoomStencil();\n      var started = false;\n\n      for (var i = 0, l = tiles.length; i < l; i++) {\n        if (tiles[i].info.z !== this._tileZoom) {\n          if (!started) {\n            this.startZoomStencilTest();\n            started = true;\n          } else {\n            this.resumeZoomStencilTest();\n          }\n        } else if (started) {\n          this.pauseZoomStencilTest();\n        }\n\n        this._drawTileAndCache(tiles[i]);\n      }\n\n      this.endZoomStencilTest();\n    }\n\n    this.onDrawTileEnd(context);\n  };\n\n  _proto2.writeZoomStencil = function writeZoomStencil() {};\n\n  _proto2.startZoomStencilTest = function startZoomStencilTest() {};\n\n  _proto2.endZoomStencilTest = function endZoomStencilTest() {};\n\n  _proto2.pauseZoomStencilTest = function pauseZoomStencilTest() {};\n\n  _proto2.resumeZoomStencilTest = function resumeZoomStencilTest() {};\n\n  _proto2.onDrawTileStart = function onDrawTileStart() {};\n\n  _proto2.onDrawTileEnd = function onDrawTileEnd() {};\n\n  _proto2._drawTile = function _drawTile(info, image) {\n    if (image) {\n      this.drawTile(info, image);\n    }\n  };\n\n  _proto2._drawTileAndCache = function _drawTileAndCache(tile) {\n    tile.current = true;\n    this.tilesInView[tile.info.id] = tile;\n\n    this._drawTile(tile.info, tile.image);\n\n    this.tileCache.add(tile.info.id, tile);\n  };\n\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n  };\n\n  _proto2.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (map.getPitch()) {\n      return _CanvasRenderer.prototype.needToRedraw.call(this);\n    }\n\n    if (map.isRotating() || map.isZooming()) {\n      return true;\n    }\n\n    if (map.isMoving()) {\n      return !!this.layer.options['forceRenderOnMoving'];\n    }\n\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n\n  _proto2.hitDetect = function hitDetect() {\n    return false;\n  };\n\n  _proto2._getLoadLimit = function _getLoadLimit() {\n    if (this.getMap().isInteracting()) {\n      return this.layer.options['loadingLimitOnInteracting'];\n    }\n\n    return 0;\n  };\n\n  _proto2.isDrawable = function isDrawable() {\n    if (this.getMap().getPitch()) {\n      if (console) {\n        console.warn('TileLayer with canvas renderer can\\'t be pitched, use gl renderer (\\'renderer\\' : \\'gl\\') instead.');\n      }\n\n      this.clear();\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto2.clear = function clear() {\n    this._retireTiles(true);\n\n    this.tileCache.reset();\n    this.tilesInView = {};\n    this.tilesLoading = {};\n    this._parentTiles = [];\n    this._childTiles = [];\n\n    _CanvasRenderer.prototype.clear.call(this);\n  };\n\n  _proto2._isLoadingTile = function _isLoadingTile(tileId) {\n    return !!this.tilesLoading[tileId];\n  };\n\n  _proto2.clipCanvas = function clipCanvas(context) {\n    return _CanvasRenderer.prototype.clipCanvas.call(this, context);\n  };\n\n  _proto2._clipByPitch = function _clipByPitch(ctx) {\n    var map = this.getMap();\n\n    if (map.getPitch() <= map.options['maxVisualPitch']) {\n      return false;\n    }\n\n    if (!this.layer.options['clipByPitch']) {\n      return false;\n    }\n\n    var clipExtent = map.getContainerExtent();\n    var r = map.getDevicePixelRatio();\n    ctx.save();\n    ctx.strokeStyle = 'rgba(0, 0, 0, 0)';\n    ctx.beginPath();\n    ctx.rect(0, Math.ceil(clipExtent.ymin) * r, Math.ceil(clipExtent.getWidth()) * r, Math.ceil(clipExtent.getHeight()) * r);\n    ctx.stroke();\n    ctx.clip();\n    return true;\n  };\n\n  _proto2.loadTileQueue = function loadTileQueue(tileQueue) {\n    for (var p in tileQueue) {\n      if (tileQueue.hasOwnProperty(p)) {\n        var tile = tileQueue[p];\n        var tileImage = this.loadTile(tile);\n\n        if (tileImage.loadTime === undefined) {\n          this.tilesLoading[tile['id']] = {\n            image: tileImage,\n            current: true,\n            info: tile\n          };\n        }\n      }\n    }\n  };\n\n  _proto2.loadTile = function loadTile(tile) {\n    var tileImage;\n\n    if (this._tileImageWorkerConn && this.loadTileImage === this.constructor.prototype.loadTileImage) {\n      tileImage = {};\n\n      this._fetchImage(tileImage, tile);\n    } else {\n      var tileSize = this.layer.getTileSize(tile.layer);\n      tileImage = new Image();\n      tileImage.width = tileSize['width'];\n      tileImage.height = tileSize['height'];\n      tileImage.onload = this.onTileLoad.bind(this, tileImage, tile);\n      tileImage.onerror = this.onTileError.bind(this, tileImage, tile);\n      this.loadTileImage(tileImage, tile['url']);\n    }\n\n    return tileImage;\n  };\n\n  _proto2._fetchImage = function _fetchImage(image, tile) {\n    var _this3 = this;\n\n    if (image instanceof Image) {\n      image.src = tile.url;\n    } else {\n      var x = tile.x,\n          y = tile.y;\n\n      var workerId = Math.abs(x + y) % this._tileImageWorkerConn.workers.length;\n\n      this._tileImageWorkerConn.fetchImage(tile.url, workerId, function (err, data) {\n        if (err) {\n          _this3.onTileError(image, tile, err);\n        } else {\n          getImageBitMap(data, function (bitmap) {\n            _this3.onTileLoad(bitmap, tile);\n          });\n        }\n      }, this.layer.options['fetchOptions'] || {\n        referrer: document.location.href,\n        headers: {\n          accept: 'image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8'\n        }\n      });\n    }\n  };\n\n  _proto2.loadTileImage = function loadTileImage(tileImage, url) {\n    var crossOrigin = this.layer.options['crossOrigin'];\n\n    if (!isNil(crossOrigin)) {\n      tileImage.crossOrigin = crossOrigin;\n    }\n\n    return loadImage(tileImage, [url]);\n  };\n\n  _proto2.abortTileLoading = function abortTileLoading(tileImage) {\n    if (!tileImage) return;\n    tileImage.onload = falseFn;\n    tileImage.onerror = falseFn;\n    tileImage.src = emptyImageUrl;\n  };\n\n  _proto2.onTileLoad = function onTileLoad(tileImage, tileInfo) {\n    if (!this.layer) {\n      return;\n    }\n\n    var id = tileInfo['id'];\n\n    if (!this.tilesInView) {\n      return;\n    }\n\n    var e = {\n      tile: tileInfo,\n      tileImage: tileImage\n    };\n    this.layer.fire('tileload', e);\n    tileImage = e.tileImage;\n    tileImage.loadTime = now();\n    delete this.tilesLoading[id];\n\n    this._addTileToCache(tileInfo, tileImage);\n\n    this.setToRedraw();\n  };\n\n  _proto2.onTileError = function onTileError(tileImage, tileInfo) {\n    if (!this.layer) {\n      return;\n    }\n\n    tileImage.onerrorTick = tileImage.onerrorTick || 0;\n    var tileRetryCount = this.layer.options['tileRetryCount'];\n\n    if (tileRetryCount > tileImage.onerrorTick) {\n      tileImage.onerrorTick++;\n\n      this._fetchImage(tileImage, tileInfo);\n\n      return;\n    }\n\n    var errorUrl = this.layer.options['errorUrl'];\n\n    if (errorUrl) {\n      if (tileImage instanceof Image && tileImage.src !== errorUrl) {\n        tileImage.src = errorUrl;\n        return;\n      } else {\n        tileImage = new Image();\n        tileImage.src = errorUrl;\n      }\n    }\n\n    tileImage = tileImage instanceof Image ? tileImage : BLANK_IMAGE;\n    this.abortTileLoading(tileImage, tileInfo);\n    tileImage.loadTime = 0;\n    delete this.tilesLoading[tileInfo['id']];\n\n    this._addTileToCache(tileInfo, tileImage);\n\n    this.setToRedraw();\n    this.layer.fire('tileerror', {\n      tile: tileInfo\n    });\n  };\n\n  _proto2.drawTile = function drawTile(tileInfo, tileImage) {\n    if (!tileImage || !this.getMap()) {\n      return;\n    }\n\n    var extent2d = tileInfo.extent2d,\n        offset = tileInfo.offset;\n    var point = TILE_POINT.set(extent2d.xmin - offset[0], extent2d.ymax - offset[1]),\n        tileZoom = tileInfo.z,\n        tileId = tileInfo.id;\n\n    var map = this.getMap(),\n        zoom = map.getZoom(),\n        ctx = this.context,\n        cp = map._pointToContainerPoint(point, tileZoom, 0, TEMP_POINT$3),\n        bearing = map.getBearing(),\n        transformed = bearing || zoom !== tileZoom;\n\n    var opacity = this.getTileOpacity(tileImage);\n    var alpha = ctx.globalAlpha;\n\n    if (opacity < 1) {\n      ctx.globalAlpha = opacity;\n      this.setToRedraw();\n    }\n\n    if (!transformed) {\n      cp._round();\n    }\n\n    var x = cp.x,\n        y = cp.y;\n    var w = tileInfo.extent2d.xmax - tileInfo.extent2d.xmin;\n    var h = tileInfo.extent2d.ymax - tileInfo.extent2d.ymin;\n\n    if (transformed) {\n      ctx.save();\n      ctx.translate(x, y);\n\n      if (bearing) {\n        ctx.rotate(-bearing * Math.PI / 180);\n        w += 0.1;\n        h += 0.1;\n      }\n\n      if (zoom !== tileZoom) {\n        var scale = map._getResolution(tileZoom) / map._getResolution();\n\n        ctx.scale(scale, scale);\n      }\n\n      x = y = 0;\n    }\n\n    Canvas.image(ctx, tileImage, x, y, w, h);\n\n    if (this.layer.options['debug']) {\n      var color = this.layer.options['debugOutline'];\n      ctx.save();\n      ctx.strokeStyle = color;\n      ctx.fillStyle = color;\n      ctx.strokeWidth = 10;\n      ctx.font = '20px monospace';\n\n      var _point = new Point(x, y);\n\n      Canvas.rectangle(ctx, _point, {\n        width: w,\n        height: h\n      }, 1, 0);\n      Canvas.fillText(ctx, this.getDebugInfo(tileId), _point._add(10, 20), color);\n      Canvas.drawCross(ctx, x + w / 2, y + h / 2, 2, color);\n      ctx.restore();\n    }\n\n    if (transformed) {\n      ctx.restore();\n    }\n\n    if (ctx.globalAlpha !== alpha) {\n      ctx.globalAlpha = alpha;\n    }\n\n    this.setCanvasUpdated();\n  };\n\n  _proto2.getDebugInfo = function getDebugInfo(tileId) {\n    var xyz = tileId.split('_');\n    var length = xyz.length;\n    return 'x:' + xyz[length - 2] + ', y:' + xyz[length - 3] + ', z:' + xyz[length - 1];\n  };\n\n  _proto2._findChildTiles = function _findChildTiles(info) {\n    var layer = this._getLayerOfTile(info.layer);\n\n    if (!layer.options['background']) {\n      return [];\n    }\n\n    var map = this.getMap();\n    var children = [];\n    var sr = layer.getSpatialReference();\n    var res = sr.getResolution(info.z);\n\n    var min = info.extent2d.getMin(),\n        max = info.extent2d.getMax(),\n        pmin = layer._project(map._pointToPrjAtRes(min, res, TEMP_POINT1$2), TEMP_POINT1$2),\n        pmax = layer._project(map._pointToPrjAtRes(max, res, TEMP_POINT2$2), TEMP_POINT2$2);\n\n    var zoomDiff = 2;\n\n    for (var i = 1; i < zoomDiff; i++) {\n      this._findChildTilesAt(children, pmin, pmax, layer, info.z + i);\n    }\n\n    return children;\n  };\n\n  _proto2._findChildTilesAt = function _findChildTilesAt(children, pmin, pmax, layer, childZoom) {\n    var zoomOffset = layer.options['zoomOffset'];\n    var layerId = layer.getId(),\n        res = layer.getSpatialReference().getResolution(childZoom + zoomOffset);\n\n    if (!res) {\n      return;\n    }\n\n    var dmin = layer._getTileConfig().getTileIndex(pmin, res),\n        dmax = layer._getTileConfig().getTileIndex(pmax, res);\n\n    var sx = Math.min(dmin.idx, dmax.idx),\n        ex = Math.max(dmin.idx, dmax.idx);\n    var sy = Math.min(dmin.idy, dmax.idy),\n        ey = Math.max(dmin.idy, dmax.idy);\n    var id, tile;\n\n    for (var i = sx; i < ex; i++) {\n      for (var ii = sy; ii < ey; ii++) {\n        id = layer._getTileId(i, ii, childZoom + zoomOffset, layerId);\n\n        if (this.tileCache.has(id)) {\n          tile = this.tileCache.getAndRemove(id);\n          children.push(tile);\n          this.tileCache.add(id, tile);\n        }\n      }\n    }\n  };\n\n  _proto2._findParentTile = function _findParentTile(info) {\n    var map = this.getMap(),\n        layer = this._getLayerOfTile(info.layer);\n\n    if (!layer.options['background']) {\n      return null;\n    }\n\n    var sr = layer.getSpatialReference();\n    var d = sr.getZoomDirection(),\n        zoomOffset = layer.options['zoomOffset'],\n        zoomDiff = layer.options['backgroundZoomDiff'];\n    var res = sr.getResolution(info.z);\n\n    var center = info.extent2d.getCenter(),\n        prj = layer._project(map._pointToPrjAtRes(center, res));\n\n    for (var diff = 1; diff <= zoomDiff; diff++) {\n      var z = info.z - d * diff;\n\n      var _res = sr.getResolution(z + zoomOffset);\n\n      if (!_res) continue;\n\n      var tileIndex = layer._getTileConfig().getTileIndex(prj, _res);\n\n      var id = layer._getTileId(tileIndex.x, tileIndex.y, z + zoomOffset, info.layer);\n\n      if (this.tileCache.has(id)) {\n        var tile = this.tileCache.getAndRemove(id);\n        this.tileCache.add(id, tile);\n        return tile;\n      }\n    }\n\n    return null;\n  };\n\n  _proto2._getLayerOfTile = function _getLayerOfTile(layerId) {\n    return this.layer.getChildLayer ? this.layer.getChildLayer(layerId) : this.layer;\n  };\n\n  _proto2._getCachedTile = function _getCachedTile(tileId) {\n    var tilesInView = this.tilesInView;\n    var cached = this.tileCache.getAndRemove(tileId);\n\n    if (cached) {\n      tilesInView[tileId] = cached;\n      var tilesLoading = this.tilesLoading;\n\n      if (tilesLoading && tilesLoading[tileId]) {\n        tilesLoading[tileId].current = false;\n        var _tilesLoading$tileId = tilesLoading[tileId],\n            image = _tilesLoading$tileId.image,\n            info = _tilesLoading$tileId.info;\n        this.abortTileLoading(image, info);\n        delete tilesLoading[tileId];\n      }\n    } else {\n      cached = tilesInView[tileId];\n    }\n\n    return cached;\n  };\n\n  _proto2._addTileToCache = function _addTileToCache(tileInfo, tileImage) {\n    this.tilesInView[tileInfo.id] = {\n      image: tileImage,\n      current: true,\n      info: tileInfo\n    };\n  };\n\n  _proto2.getTileOpacity = function getTileOpacity(tileImage) {\n    if (!this.layer.options['fadeAnimation'] || !tileImage.loadTime) {\n      return 1;\n    }\n\n    return Math.min(1, (now() - tileImage.loadTime) / (1000 / 60 * 10));\n  };\n\n  _proto2.onRemove = function onRemove() {\n    this.clear();\n    delete this.tileCache;\n    delete this._tilePlaceHolder;\n\n    _CanvasRenderer.prototype.onRemove.call(this);\n  };\n\n  _proto2._markTiles = function _markTiles() {\n    var a = 0,\n        b = 0;\n\n    if (this.tilesLoading) {\n      for (var p in this.tilesLoading) {\n        this.tilesLoading[p].current = false;\n        a++;\n      }\n    }\n\n    if (this.tilesInView) {\n      for (var _p in this.tilesInView) {\n        this.tilesInView[_p].current = false;\n        b++;\n      }\n    }\n\n    return [a, b];\n  };\n\n  _proto2._retireTiles = function _retireTiles(force) {\n    for (var i in this.tilesLoading) {\n      var tile = this.tilesLoading[i];\n\n      if (force || !tile.current) {\n        if (tile.image) {\n          this.abortTileLoading(tile.image, tile.info);\n        }\n\n        this.deleteTile(tile);\n        delete this.tilesLoading[i];\n      }\n    }\n\n    for (var _i2 in this.tilesInView) {\n      var _tile = this.tilesInView[_i2];\n\n      if (!_tile.current) {\n        delete this.tilesInView[_i2];\n\n        if (!this.tileCache.has(_i2)) {\n          this.deleteTile(_tile);\n        }\n      }\n    }\n  };\n\n  _proto2.deleteTile = function deleteTile(tile) {\n    if (!tile || !tile.image) {\n      return;\n    }\n\n    if (tile.image.close) {\n      tile.image.close();\n    }\n\n    tile.image.onload = null;\n    tile.image.onerror = null;\n  };\n\n  _proto2._generatePlaceHolder = function _generatePlaceHolder(z) {\n    var map = this.getMap();\n    var placeholder = this.layer.options['placeholder'];\n\n    if (!placeholder || map.getPitch()) {\n      return null;\n    }\n\n    var tileSize = this.layer.getTileSize(),\n        scale = map._getResolution(z) / map._getResolution(),\n        canvas = this._tilePlaceHolder = this._tilePlaceHolder || Canvas.createCanvas(1, 1, map.CanvasClass);\n\n    canvas.width = tileSize.width * scale;\n    canvas.height = tileSize.height * scale;\n\n    if (isFunction(placeholder)) {\n      placeholder(canvas);\n    } else {\n      defaultPlaceholder(canvas);\n    }\n\n    return canvas;\n  };\n\n  return TileLayerCanvasRenderer;\n}(CanvasRenderer);\n\nTileLayer.registerRenderer('canvas', TileLayerCanvasRenderer);\n\nfunction falseFn() {\n  return false;\n}\n\nfunction defaultPlaceholder(canvas) {\n  var ctx = canvas.getContext('2d'),\n      cw = canvas.width,\n      ch = canvas.height,\n      w = cw / 16,\n      h = ch / 16;\n  ctx.beginPath();\n\n  for (var i = 0; i < 16; i++) {\n    ctx.moveTo(0, i * h);\n    ctx.lineTo(cw, i * h);\n    ctx.moveTo(i * w, 0);\n    ctx.lineTo(i * w, ch);\n  }\n\n  ctx.strokeStyle = 'rgba(180, 180, 180, 0.1)';\n  ctx.lineWidth = 1;\n  ctx.stroke();\n  ctx.beginPath();\n  var path = [[0, 0], [cw, 0], [0, ch], [cw, ch], [0, 0], [0, ch], [cw, 0], [cw, ch], [0, ch / 2], [cw, ch / 2], [cw / 2, 0], [cw / 2, ch]];\n\n  for (var _i3 = 1; _i3 < path.length; _i3 += 2) {\n    ctx.moveTo(path[_i3 - 1][0], path[_i3 - 1][1]);\n    ctx.lineTo(path[_i3][0], path[_i3][1]);\n  }\n\n  ctx.lineWidth = 1 * 4;\n  ctx.stroke();\n}\n\nvar TILE_POINT$1 = new Point(0, 0);\n\nvar TileLayerGLRenderer = function (_ImageGLRenderable) {\n  _inheritsLoose(TileLayerGLRenderer, _ImageGLRenderable);\n\n  function TileLayerGLRenderer() {\n    return _ImageGLRenderable.apply(this, arguments) || this;\n  }\n\n  var _proto = TileLayerGLRenderer.prototype;\n\n  _proto.isDrawable = function isDrawable() {\n    return true;\n  };\n\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (this._gl() && !map.getPitch() && map.isZooming() && !map.isMoving() && !map.isRotating()) {\n      return true;\n    }\n\n    return _ImageGLRenderable.prototype.needToRedraw.call(this);\n  };\n\n  _proto.drawTile = function drawTile(tileInfo, tileImage) {\n    var map = this.getMap();\n\n    if (!tileInfo || !map || !tileImage) {\n      return;\n    }\n\n    var scale = tileInfo._glScale = tileInfo._glScale || map.getGLScale(tileInfo.z);\n    var w = tileInfo.extent2d.xmax - tileInfo.extent2d.xmin;\n    var h = tileInfo.extent2d.ymax - tileInfo.extent2d.ymin;\n\n    if (tileInfo.cache !== false) {\n      this._bindGLBuffer(tileImage, w, h);\n    }\n\n    if (!this._gl()) {\n      _ImageGLRenderable.prototype.drawTile.call(this, tileInfo, tileImage);\n\n      return;\n    }\n\n    var extent2d = tileInfo.extent2d,\n        offset = tileInfo.offset;\n    var point = TILE_POINT$1.set(extent2d.xmin - offset[0], tileInfo.extent2d.ymax - offset[1]);\n    var x = point.x * scale,\n        y = point.y * scale;\n    var opacity = this.getTileOpacity(tileImage);\n    var debugInfo = null;\n\n    if (this.layer.options['debug']) {\n      debugInfo = this.getDebugInfo(tileInfo.id);\n    }\n\n    this.drawGLImage(tileImage, x, y, w, h, scale, opacity, debugInfo);\n\n    if (opacity < 1) {\n      this.setToRedraw();\n    } else {\n      this.setCanvasUpdated();\n    }\n  };\n\n  _proto.writeZoomStencil = function writeZoomStencil() {\n    var gl = this.gl;\n    gl.stencilFunc(gl.ALWAYS, 1, 0xFF);\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);\n  };\n\n  _proto.startZoomStencilTest = function startZoomStencilTest() {\n    var gl = this.gl;\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n    gl.stencilFunc(gl.EQUAL, 0, 0xFF);\n  };\n\n  _proto.endZoomStencilTest = function endZoomStencilTest() {\n    this.pauseZoomStencilTest();\n  };\n\n  _proto.pauseZoomStencilTest = function pauseZoomStencilTest() {\n    var gl = this.gl;\n    gl.stencilFunc(gl.ALWAYS, 1, 0xFF);\n  };\n\n  _proto.resumeZoomStencilTest = function resumeZoomStencilTest() {\n    var gl = this.gl;\n    gl.stencilFunc(gl.EQUAL, 0, 0xFF);\n  };\n\n  _proto._bindGLBuffer = function _bindGLBuffer(image, w, h) {\n    if (!image.glBuffer) {\n      image.glBuffer = this.bufferTileData(0, 0, w, h);\n    }\n  };\n\n  _proto.loadTileImage = function loadTileImage(tileImage, url) {\n    var crossOrigin = this.layer.options['crossOrigin'];\n    tileImage.crossOrigin = crossOrigin !== null ? crossOrigin : '';\n    tileImage.src = url;\n    return;\n  };\n\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    if (!this.canvas.gl || !this.canvas.gl.wrap) {\n      this.createCanvas2();\n    }\n  };\n\n  _proto.createContext = function createContext() {\n    _ImageGLRenderable.prototype.createContext.call(this);\n\n    this.createGLContext();\n  };\n\n  _proto.resizeCanvas = function resizeCanvas(canvasSize) {\n    if (!this.canvas) {\n      return;\n    }\n\n    _ImageGLRenderable.prototype.resizeCanvas.call(this, canvasSize);\n\n    this.resizeGLCanvas();\n  };\n\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n\n    _ImageGLRenderable.prototype.clearCanvas.call(this);\n\n    this.clearGLCanvas();\n  };\n\n  _proto.getCanvasImage = function getCanvasImage() {\n    if (!this._gl() || !this.canvas2) {\n      return _ImageGLRenderable.prototype.getCanvasImage.call(this);\n    }\n\n    var img = _ImageGLRenderable.prototype.getCanvasImage.call(this);\n\n    if (img) {\n      img.image = this.canvas2;\n    }\n\n    return img;\n  };\n\n  _proto._gl = function _gl() {\n    if (this.canvas.gl && this.canvas.gl.wrap) {\n      return true;\n    }\n\n    var map = this.getMap();\n    return map && (map.getPitch() || map.getBearing()) || this.layer && !!this.layer.options['fragmentShader'];\n  };\n\n  _proto.deleteTile = function deleteTile(tile) {\n    _ImageGLRenderable.prototype.deleteTile.call(this, tile);\n\n    if (tile && tile.image) {\n      this.disposeImage(tile.image);\n    }\n\n    delete tile.image;\n  };\n\n  _proto.onRemove = function onRemove() {\n    _ImageGLRenderable.prototype.onRemove.call(this);\n\n    this.removeGLCanvas();\n  };\n\n  return TileLayerGLRenderer;\n}(ImageGLRenderable(TileLayerCanvasRenderer));\n\nTileLayer.registerRenderer('gl', TileLayerGLRenderer);\n\nfunction _loadTile(tile) {\n  var tileSize = this.layer.getTileSize(),\n      canvasClass = this.canvas.constructor,\n      map = this.getMap();\n  var r = map.getDevicePixelRatio();\n  var tileCanvas = Canvas.createCanvas(tileSize['width'] * r, tileSize['height'] * r, canvasClass);\n  tileCanvas['layer'] = this.layer;\n  var me = this;\n  var point = new Point(tile['extent2d'].xmin, tile['extent2d'].ymax);\n  var extent = new Extent(map.pointToCoordinate(point), map.pointToCoordinate(point.add(tileSize.width, tileSize.height)), map.getProjection());\n  this.layer.drawTile(tileCanvas, {\n    'url': tile['url'],\n    'point': point,\n    'center': map.pointToCoordinate(point.add(tileSize['width'] / 2, tileSize['height'] / 2)),\n    'extent': extent,\n    'z': tile['z'],\n    'x': tile['x'],\n    'y': tile['y']\n  }, function (error) {\n    if (error) {\n      me.onTileError(tileCanvas, tile);\n      return;\n    }\n\n    me.onTileLoad(tileCanvas, tile);\n  });\n  return tileCanvas;\n}\n\nvar CanvasRenderer$1 = function (_TileLayerCanvasRende) {\n  _inheritsLoose(CanvasRenderer, _TileLayerCanvasRende);\n\n  function CanvasRenderer() {\n    return _TileLayerCanvasRende.apply(this, arguments) || this;\n  }\n\n  var _proto = CanvasRenderer.prototype;\n\n  _proto.loadTile = function loadTile() {\n    return _loadTile.apply(this, arguments);\n  };\n\n  return CanvasRenderer;\n}(TileLayerCanvasRenderer);\n\nvar GLRenderer = function (_TileLayerGLRenderer) {\n  _inheritsLoose(GLRenderer, _TileLayerGLRenderer);\n\n  function GLRenderer() {\n    return _TileLayerGLRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto2 = GLRenderer.prototype;\n\n  _proto2.loadTile = function loadTile() {\n    return _loadTile.apply(this, arguments);\n  };\n\n  return GLRenderer;\n}(TileLayerGLRenderer);\n\nCanvasTileLayer.registerRenderer('canvas', CanvasRenderer$1);\nCanvasTileLayer.registerRenderer('gl', GLRenderer);\n\nvar quadVertices = typeof Int8Array !== 'undefined' ? new Int8Array([-1, 1, 0, -1, -1, 0, 1, 1, 0, 1, -1, 0]) : [];\nvar vert = \"\\n    attribute vec3 a_position;\\n    uniform mat4 transform;\\n\\n    void main()\\n    {\\n        gl_Position = transform * vec4(a_position, 1.0);\\n    }\\n\";\nvar frag = \"\\n    precision mediump float;\\n    uniform vec3 color;\\n    void main()\\n    {\\n        gl_FragColor = vec4(color, 1.0);\\n    }\\n\";\n\nvar QuadStencil = function () {\n  function QuadStencil(gl, vertices, debug) {\n    this.gl = gl;\n    this.quadVertices = vertices || quadVertices;\n    this.attributes = ['a_position', 3, getType(vertices)];\n    this.debug = debug;\n  }\n\n  var _proto = QuadStencil.prototype;\n\n  _proto.start = function start() {\n    var gl = this.gl;\n    gl.enable(gl.STENCIL_TEST);\n    gl.stencilMask(0xFF);\n    gl.stencilOp(gl.KEEP, gl.REPLACE, gl.REPLACE);\n    gl.depthMask(false);\n\n    this._save();\n\n    if (!this.buffer) {\n      this._createBuffer();\n\n      this._createProgram();\n    }\n\n    gl.useProgram(this.program);\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    enableVertexAttrib(gl, this.program, this.attributes);\n\n    if (!this.transformLoc) {\n      this.transformLoc = gl.getUniformLocation(this.program, 'transform');\n    }\n\n    if (!this.colorLoc) {\n      this.colorLoc = gl.getUniformLocation(this.program, 'color');\n    }\n\n    if (this.debug) {\n      return;\n    }\n\n    gl.colorMask(false, false, false, false);\n  };\n\n  _proto.end = function end() {\n    var gl = this.gl;\n    gl.depthMask(true);\n\n    this._restore();\n\n    if (this.debug) {\n      return;\n    }\n\n    gl.colorMask(true, true, true, true);\n  };\n\n  _proto.draw = function draw(transform) {\n    var gl = this.gl;\n    gl.uniformMatrix4fv(this.transformLoc, false, transform);\n    gl.uniform3fv(this.colorLoc, [Math.random(), Math.random(), Math.random()]);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  };\n\n  _proto.remove = function remove() {\n    var gl = this.gl;\n\n    if (this.buffer) {\n      gl.deleteBuffer(this.buffer);\n    }\n\n    if (this.program) {\n      gl.deleteShader(this.program.fragmentShader);\n      gl.deleteShader(this.program.vertexShader);\n      gl.deleteProgram(this.program);\n    }\n\n    delete this.transformLoc;\n    delete this.gl;\n    return this;\n  };\n\n  _proto.stencilMask = function stencilMask(mask) {\n    this.gl.stencilMask(mask);\n    return this;\n  };\n\n  _proto.stencilFunc = function stencilFunc(func, ref, mask) {\n    this.ref = ref;\n    this.gl.stencilFunc(func, ref, mask);\n    return this;\n  };\n\n  _proto.stencilOp = function stencilOp(fail, zfail, zpass) {\n    this.gl.stencilOp(fail, zfail, zpass);\n    return this;\n  };\n\n  _proto.resetFunc = function resetFunc() {\n    this.ref = 1;\n    this.gl.stencilFunc(this.gl.ALWAYS, 1, 0xFF);\n    return this;\n  };\n\n  _proto._save = function _save() {\n    var gl = this.gl;\n    this._savedProgram = gl.program;\n  };\n\n  _proto._restore = function _restore() {\n    var gl = this.gl;\n    gl.program = this._savedProgram;\n\n    if (gl.program) {\n      gl.useProgram(gl.program);\n    }\n  };\n\n  _proto._createBuffer = function _createBuffer() {\n    var gl = this.gl;\n    this.buffer = gl.createBuffer();\n\n    if (!this.buffer) {\n      throw new Error('Failed to create the buffer object');\n    }\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this.quadVertices, gl.STATIC_DRAW);\n  };\n\n  _proto._createProgram = function _createProgram() {\n    var _createProgram2 = createProgram(this.gl, vert, frag),\n        program = _createProgram2.program,\n        vertexShader = _createProgram2.vertexShader,\n        fragmentShader = _createProgram2.fragmentShader;\n\n    program.vertexShader = vertexShader;\n    program.fragmentShader = fragmentShader;\n    this.program = program;\n  };\n\n  return QuadStencil;\n}();\n\nfunction getType(arr) {\n  if (arr instanceof Float32Array) {\n    return 'FLOAT';\n  } else if (arr instanceof Int16Array) {\n    return 'SHORT';\n  } else if (arr instanceof Uint16Array) {\n    return 'UNSIGNED_SHORT';\n  } else if (arr instanceof Int8Array) {\n    return 'BYTE';\n  } else if (arr instanceof Uint8Array || arr instanceof Uint8ClampedArray) {\n    return 'UNSIGNED_BYTE';\n  }\n\n  return 'FLOAT';\n}\n\nvar OverlayLayerRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(OverlayLayerRenderer, _CanvasRenderer);\n\n  function OverlayLayerRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto = OverlayLayerRenderer.prototype;\n\n  _proto.checkResources = function checkResources() {\n    var geometries = this._geosToCheck;\n\n    if (!this._resourceChecked && !geometries) {\n      geometries = this.layer._geoList;\n    }\n\n    if (!isArrayHasData(geometries)) {\n      return [];\n    }\n\n    var resources = [];\n    var cache = {};\n\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      var geo = geometries[i];\n\n      var res = geo._getExternalResources();\n\n      if (!res.length) {\n        continue;\n      }\n\n      if (!this.resources) {\n        resources.push.apply(resources, res);\n      } else {\n        for (var _i = 0; _i < res.length; _i++) {\n          var url = res[_i][0];\n\n          if (!this.resources.isResourceLoaded(res[_i]) && !cache[url]) {\n            resources.push(res[_i]);\n            cache[url] = 1;\n          }\n        }\n      }\n    }\n\n    this._resourceChecked = true;\n    delete this._geosToCheck;\n    return resources;\n  };\n\n  _proto.render = function render() {\n    this.layer._sortGeometries();\n\n    return _CanvasRenderer.prototype.render.apply(this, arguments);\n  };\n\n  _proto._addGeoToCheckRes = function _addGeoToCheckRes(res) {\n    if (!res) {\n      return;\n    }\n\n    if (!Array.isArray(res)) {\n      res = [res];\n    }\n\n    if (!this._geosToCheck) {\n      this._geosToCheck = [];\n    }\n\n    pushIn(this._geosToCheck, res);\n  };\n\n  _proto.onGeometryAdd = function onGeometryAdd(geometries) {\n    this._addGeoToCheckRes(geometries);\n\n    redraw(this);\n  };\n\n  _proto.onGeometryRemove = function onGeometryRemove() {\n    redraw(this);\n  };\n\n  _proto.onGeometrySymbolChange = function onGeometrySymbolChange(e) {\n    this._addGeoToCheckRes(e.target);\n\n    redraw(this);\n  };\n\n  _proto.onGeometryShapeChange = function onGeometryShapeChange() {\n    redraw(this);\n  };\n\n  _proto.onGeometryPositionChange = function onGeometryPositionChange() {\n    redraw(this);\n  };\n\n  _proto.onGeometryZIndexChange = function onGeometryZIndexChange() {\n    redraw(this);\n  };\n\n  _proto.onGeometryShow = function onGeometryShow() {\n    redraw(this);\n  };\n\n  _proto.onGeometryHide = function onGeometryHide() {\n    redraw(this);\n  };\n\n  _proto.onGeometryPropertiesChange = function onGeometryPropertiesChange() {\n    redraw(this);\n  };\n\n  return OverlayLayerRenderer;\n}(CanvasRenderer);\n\nfunction redraw(renderer) {\n  if (renderer.layer.options['drawImmediate']) {\n    renderer.render();\n  }\n\n  renderer.setToRedraw();\n}\n\nvar TEMP_EXTENT$6 = new PointExtent();\nvar TEMP_VEC3 = [];\nvar TEMP_FIXEDEXTENT = new PointExtent();\nvar PLACEMENT_CENTER = 'center';\n\nvar VectorLayerRenderer = function (_OverlayLayerCanvasRe) {\n  _inheritsLoose(VectorLayerRenderer, _OverlayLayerCanvasRe);\n\n  function VectorLayerRenderer() {\n    return _OverlayLayerCanvasRe.apply(this, arguments) || this;\n  }\n\n  var _proto = VectorLayerRenderer.prototype;\n\n  _proto.getImageData = function getImageData() {\n    if (!this.layer.options['geometryEvents'] || !this._lastRenderTime || now() - this._lastRenderTime < 32) {\n      return null;\n    }\n\n    if (!this._imageData) {\n      var _this$context$canvas = this.context.canvas,\n          width = _this$context$canvas.width,\n          height = _this$context$canvas.height;\n\n      try {\n        this._imageData = this.context.getImageData(0, 0, width, height);\n      } catch (error) {\n        console.warn('hit detect failed with tainted canvas, some geometries have external resources in another domain:\\n', error);\n      }\n    }\n\n    return this._imageData;\n  };\n\n  _proto.clearImageData = function clearImageData() {\n    this._imageData = null;\n    delete this._imageData;\n    this._lastRenderTime = now();\n  };\n\n  _proto.checkResources = function checkResources() {\n    var _this = this;\n\n    var resources = _OverlayLayerCanvasRe.prototype.checkResources.apply(this, arguments);\n\n    var style = this.layer.getStyle();\n\n    if (style) {\n      if (!Array.isArray(style)) {\n        style = [style];\n      }\n\n      style.forEach(function (s) {\n        var res = getExternalResources(s['symbol'], true);\n\n        for (var i = 0, l = res.length; i < l; i++) {\n          if (!_this.resources.isResourceLoaded(res[i])) {\n            resources.push(res[i]);\n          }\n        }\n      });\n    }\n\n    return resources;\n  };\n\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (map.isInteracting() && this.layer.options['enableAltitude']) {\n      return true;\n    }\n\n    if (map.isZooming() && !map.isRotating() && !map.getPitch() && !this._hasPoint && this.layer.constructor === VectorLayer) {\n      return false;\n    }\n\n    return _OverlayLayerCanvasRe.prototype.needToRedraw.call(this);\n  };\n\n  _proto.draw = function draw() {\n    if (!this.getMap()) {\n      return;\n    }\n\n    if (!this.layer.isVisible() || this.layer.isEmpty()) {\n      this.clearCanvas();\n      this.completeRender();\n      return;\n    }\n\n    this.prepareCanvas();\n    this.drawGeos();\n    this.completeRender();\n  };\n\n  _proto.isBlank = function isBlank() {\n    if (!this.context) {\n      return false;\n    }\n\n    return !this.context.canvas._drawn;\n  };\n\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    if (!this._geosToDraw) {\n      return;\n    }\n\n    this._updateMapStateCache();\n\n    this._updateDisplayExtent();\n\n    var map = this.getMap();\n    var count = this.layer.getCount();\n    var res = this.mapStateCache.resolution;\n\n    if (map.isZooming() && map.options['seamlessZoom'] && this._drawnRes !== undefined && res > this._drawnRes * 1.5 && this._geosToDraw.length < count || map.isMoving() || map.isInteracting()) {\n      this.prepareToDraw();\n\n      this._batchConversionMarkers(this.mapStateCache.glRes);\n\n      if (!this._onlyHasPoint) {\n        this.forEachGeo(this.checkGeo, this);\n      }\n\n      this._drawnRes = res;\n    }\n\n    this._sortByDistanceToCamera(map.cameraPosition);\n\n    for (var i = 0, l = this._geosToDraw.length; i < l; i++) {\n      var geo = this._geosToDraw[i];\n\n      if (!geo._isCheck) {\n        if (!geo.isVisible()) {\n          delete geo._cPoint;\n          delete geo._inCurrentView;\n          continue;\n        }\n      }\n\n      geo._paint(this._displayExtent);\n\n      this._geosToDraw[i]._cPoint = undefined;\n      this._geosToDraw[i]._inCurrentView = undefined;\n    }\n\n    this.clearImageData();\n  };\n\n  _proto.show = function show() {\n    this.layer.forEach(function (geo) {\n      geo._repaint();\n    });\n\n    _OverlayLayerCanvasRe.prototype.show.apply(this, arguments);\n  };\n\n  _proto.forEachGeo = function forEachGeo(fn, context) {\n    this.layer.forEach(fn, context);\n  };\n\n  _proto.drawGeos = function drawGeos() {\n    this._updateMapStateCache();\n\n    this._drawnRes = this.mapStateCache.resolution;\n\n    this._updateDisplayExtent();\n\n    this.prepareToDraw();\n\n    this._batchConversionMarkers(this.mapStateCache.glRes);\n\n    if (!this._onlyHasPoint) {\n      this.forEachGeo(this.checkGeo, this);\n    }\n\n    this._sortByDistanceToCamera(this.getMap().cameraPosition);\n\n    for (var i = 0, len = this._geosToDraw.length; i < len; i++) {\n      this._geosToDraw[i]._paint();\n\n      this._geosToDraw[i]._cPoint = undefined;\n      this._geosToDraw[i]._inCurrentView = undefined;\n    }\n\n    this.clearImageData();\n  };\n\n  _proto.prepareToDraw = function prepareToDraw() {\n    this._hasPoint = false;\n    this._geosToDraw = [];\n  };\n\n  _proto.checkGeo = function checkGeo(geo) {\n    if (geo.type === 'Point' && this._onlyHasPoint !== undefined) {\n      if (geo._inCurrentView) {\n        this._hasPoint = true;\n        geo._isCheck = true;\n\n        this._geosToDraw.push(geo);\n      }\n\n      return;\n    }\n\n    geo._isCheck = false;\n\n    if (!geo || !geo.isVisible() || !geo.getMap() || !geo.getLayer() || !geo.getLayer().isCanvasRender()) {\n      return;\n    }\n\n    var painter = geo._getPainter();\n\n    var inCurrentView = true;\n\n    if (geo._inCurrentView) {\n      inCurrentView = true;\n    } else if (geo._inCurrentView === false) {\n      inCurrentView = false;\n    } else {\n      var extent2D = painter.get2DExtent(this.resources, TEMP_EXTENT$6);\n\n      if (!extent2D || !extent2D.intersects(this._displayExtent)) {\n        inCurrentView = false;\n      }\n    }\n\n    if (!inCurrentView) {\n      return;\n    }\n\n    if (painter.hasPoint()) {\n      this._hasPoint = true;\n    }\n\n    geo._isCheck = true;\n\n    this._geosToDraw.push(geo);\n  };\n\n  _proto.onZoomEnd = function onZoomEnd() {\n    delete this.canvasExtent2D;\n\n    _OverlayLayerCanvasRe.prototype.onZoomEnd.apply(this, arguments);\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.forEachGeo(function (g) {\n      g.onHide();\n    });\n    delete this._geosToDraw;\n  };\n\n  _proto.onGeometryPropertiesChange = function onGeometryPropertiesChange(param) {\n    if (param) {\n      this.layer._styleGeometry(param['target']);\n    }\n\n    _OverlayLayerCanvasRe.prototype.onGeometryPropertiesChange.call(this, param);\n  };\n\n  _proto._updateDisplayExtent = function _updateDisplayExtent() {\n    var extent2D = this.canvasExtent2D;\n\n    if (this._maskExtent) {\n      if (!this._maskExtent.intersects(extent2D)) {\n        this.completeRender();\n        return;\n      }\n\n      extent2D = extent2D.intersection(this._maskExtent);\n    }\n\n    this._displayExtent = extent2D;\n  };\n\n  _proto.identifyAtPoint = function identifyAtPoint(point, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var geometries = this._geosToDraw;\n\n    if (!geometries) {\n      return [];\n    }\n\n    return this.layer._hitGeos(geometries, point, options);\n  };\n\n  _proto._updateMapStateCache = function _updateMapStateCache() {\n    var map = this.getMap();\n\n    var offset = map._pointToContainerPoint(this.southWest)._add(0, -map.height);\n\n    var resolution = map.getResolution();\n    var pitch = map.getPitch();\n    var bearing = map.getBearing();\n    var glScale = map.getGLScale();\n    var glRes = map.getGLRes();\n    var containerExtent = map.getContainerExtent();\n\n    var _2DExtent = map._get2DExtent();\n\n    var glExtent = map._get2DExtentAtRes(glRes);\n\n    this.mapStateCache = {\n      resolution: resolution,\n      pitch: pitch,\n      bearing: bearing,\n      glScale: glScale,\n      glRes: glRes,\n      _2DExtent: _2DExtent,\n      glExtent: glExtent,\n      containerExtent: containerExtent,\n      offset: offset\n    };\n    return this;\n  };\n\n  _proto._batchConversionMarkers = function _batchConversionMarkers(glRes) {\n    this._onlyHasPoint = undefined;\n\n    if (!this._constructorIsThis()) {\n      return [];\n    }\n\n    var cPoints = [];\n    var markers = [];\n    var altitudes = [];\n    var altitudeCache = {};\n    var layer = this.layer;\n    var layerOpts = layer.options;\n    var layerAltitude = layer.getAltitude ? layer.getAltitude() : 0;\n    var isCanvasRender = layer.isCanvasRender();\n    this._onlyHasPoint = true;\n    var idx = 0;\n\n    for (var i = 0, len = this.layer._geoList.length; i < len; i++) {\n      var geo = this.layer._geoList[i];\n      var type = geo.getType();\n\n      if (type === 'Point') {\n        var painter = geo._painter;\n\n        if (!painter) {\n          painter = geo._getPainter();\n        }\n\n        var point = painter.getRenderPoints(PLACEMENT_CENTER)[0][0];\n        var altitude = layerOpts['enableAltitude'] ? geo.getAltitude() : layerAltitude;\n\n        if (altitudeCache[altitude] === undefined) {\n          altitudeCache[altitude] = painter.getAltitude();\n        }\n\n        cPoints[idx] = point;\n        altitudes[idx] = altitudeCache[altitude];\n        markers[idx] = geo;\n        idx++;\n      } else {\n        this._onlyHasPoint = false;\n      }\n    }\n\n    if (idx === 0) {\n      return [];\n    }\n\n    var map = this.getMap();\n    var pts = getPointsResultPts(cPoints, '_pt');\n    pts = map._pointsAtResToContainerPoints(cPoints, glRes, altitudes, pts);\n    var containerExtent = map.getContainerExtent();\n    var xmax = containerExtent.xmax,\n        ymax = containerExtent.ymax,\n        xmin = containerExtent.xmin,\n        ymin = containerExtent.ymin;\n    var extentCache = {};\n\n    for (var _i = 0, _len = markers.length; _i < _len; _i++) {\n      var _geo = markers[_i];\n      _geo._cPoint = pts[_i];\n\n      if (!_geo._cPoint) {\n        _geo._inCurrentView = false;\n        continue;\n      }\n\n      var _pts$_i = pts[_i],\n          x = _pts$_i.x,\n          y = _pts$_i.y;\n      _geo._inCurrentView = x >= xmin && y >= ymin && x <= xmax && y <= ymax;\n\n      if (!_geo._inCurrentView) {\n        var symbolkey = _geo.getSymbolHash();\n\n        var fixedExtent = void 0;\n\n        if (symbolkey) {\n          fixedExtent = extentCache[symbolkey] = extentCache[symbolkey] || _geo._painter.getFixedExtent();\n        } else {\n          fixedExtent = _geo._painter.getFixedExtent();\n        }\n\n        TEMP_FIXEDEXTENT.set(fixedExtent.xmin, fixedExtent.ymin, fixedExtent.xmax, fixedExtent.ymax);\n\n        TEMP_FIXEDEXTENT._add(pts[_i]);\n\n        _geo._inCurrentView = TEMP_FIXEDEXTENT.intersects(containerExtent);\n      }\n\n      if (_geo._inCurrentView) {\n        if (!_geo.isVisible() || !isCanvasRender) {\n          _geo._inCurrentView = false;\n        }\n\n        if (this._onlyHasPoint && _geo._inCurrentView) {\n          this._hasPoint = true;\n          _geo._isCheck = true;\n\n          this._geosToDraw.push(_geo);\n        }\n      }\n    }\n\n    return pts;\n  };\n\n  _proto._sortByDistanceToCamera = function _sortByDistanceToCamera(cameraPosition) {\n    if (!this.layer.options['sortByDistanceToCamera']) {\n      return;\n    }\n\n    if (!this._geosToDraw.length) {\n      return;\n    }\n\n    var map = this.getMap();\n    var p = map.distanceToPoint(1000, 0, map.getGLScale()).x;\n    var meterScale = p / 1000;\n    var placement = 'center';\n\n    this._geosToDraw.sort(function (a, b) {\n      var type0 = a.getType();\n      var type1 = b.getType();\n\n      if (type0 !== 'Point' || type1 !== 'Point') {\n        return 0;\n      }\n\n      var painter0 = a._painter;\n      var painter1 = b._painter;\n\n      if (!painter0 || !painter1) {\n        return 0;\n      }\n\n      var point0 = painter0.getRenderPoints(placement)[0][0];\n      var point1 = painter1.getRenderPoints(placement)[0][0];\n      var alt0 = painter0.getAltitude() * meterScale;\n      var alt1 = painter1.getAltitude() * meterScale;\n      set$2(TEMP_VEC3, point0.x, point0.y, alt0);\n      var dist0 = distance(TEMP_VEC3, cameraPosition);\n      set$2(TEMP_VEC3, point1.x, point1.y, alt1);\n      var dist1 = distance(TEMP_VEC3, cameraPosition);\n      return dist1 - dist0;\n    });\n  };\n\n  _proto._constructorIsThis = function _constructorIsThis() {\n    return this.constructor === VectorLayerRenderer;\n  };\n\n  return VectorLayerRenderer;\n}(OverlayLayerRenderer);\n\nVectorLayer.registerRenderer('canvas', VectorLayerRenderer);\n\nvar MapRenderer = function (_Class) {\n  _inheritsLoose(MapRenderer, _Class);\n\n  function MapRenderer(map) {\n    var _this;\n\n    _this = _Class.call(this) || this;\n    _this.map = map;\n    _this._handlerQueue = [];\n    return _this;\n  }\n\n  var _proto = MapRenderer.prototype;\n\n  _proto.callInNextFrame = function callInNextFrame(fn) {\n    this._handlerQueue.push(fn);\n  };\n\n  _proto.executeFrameCallbacks = function executeFrameCallbacks() {\n    var running = this._handlerQueue;\n    this._handlerQueue = [];\n\n    for (var i = 0, l = running.length; i < l; i++) {\n      running[i]();\n    }\n  };\n\n  _proto.offsetPlatform = function offsetPlatform(offset, force) {\n    if (!this.map._panels.front) {\n      return this;\n    }\n\n    if (!force && offset.x === 0 && offset.y === 0) {\n      return this;\n    }\n\n    var panels = this.map._panels;\n    var hasFront = this._frontCount = panels.back.layerDOM.childElementCount;\n    var hasBack = this._backCount = panels.front.layerDOM.childElementCount;\n    var hasUI = this._uiCount = panels.front.uiDOM.childElementCount;\n\n    if (hasFront || hasBack || hasUI) {\n      var pos = this.map.offsetPlatform();\n\n      if (offset) {\n        pos = pos.add(offset)._round();\n      } else {\n        pos = pos.round();\n      }\n\n      if (hasBack) {\n        offsetDom(panels.back, pos);\n      }\n\n      if (hasFront || hasUI) {\n        offsetDom(panels.front, pos);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.domChanged = function domChanged() {\n    var panels = this.map._panels;\n\n    if (!panels.front) {\n      return false;\n    }\n\n    var frontCount = panels.back.layerDOM.childElementCount;\n\n    if (this._frontCount === undefined || this._frontCount !== frontCount) {\n      return true;\n    }\n\n    var backCount = panels.front.layerDOM.childElementCount;\n\n    if (this._backCount === undefined || this._backCount !== backCount) {\n      return true;\n    }\n\n    var uiCount = panels.front.uiDOM.childElementCount;\n\n    if (this._uiCount === undefined || this._uiCount !== uiCount) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.resetContainer = function resetContainer() {\n    if (!this.map) {\n      return;\n    }\n\n    this.map._resetMapViewPoint();\n\n    if (this.map._panels.front) {\n      var pos = new Point(0, 0);\n      offsetDom(this.map._panels.back, pos);\n      offsetDom(this.map._panels.front, pos);\n    }\n  };\n\n  _proto.onZoomEnd = function onZoomEnd() {\n    this.resetContainer();\n  };\n\n  _proto.onLoad = function onLoad() {\n    this._frameLoop();\n  };\n\n  return MapRenderer;\n}(Class);\n\nvar MapCanvasRenderer = function (_MapRenderer) {\n  _inheritsLoose(MapCanvasRenderer, _MapRenderer);\n\n  function MapCanvasRenderer(map) {\n    var _this;\n\n    _this = _MapRenderer.call(this, map) || this;\n    _this._containerIsCanvas = !!map._containerDOM.getContext;\n    _this._thisVisibilitychange = _this._onVisibilitychange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this._registerEvents();\n\n    _this._loopTime = 0;\n    return _this;\n  }\n\n  var _proto = MapCanvasRenderer.prototype;\n\n  _proto.load = function load() {\n    this.initContainer();\n  };\n\n  _proto.renderFrame = function renderFrame(framestamp) {\n    if (!this.map || !this.map.options['renderable']) {\n      return false;\n    }\n\n    this._updateDomPosition(framestamp);\n\n    delete this._isViewChanged;\n    var map = this.map;\n\n    map._fireEvent('framestart');\n\n    this.updateMapDOM();\n    map.clearCollisionIndex();\n\n    var layers = this._getAllLayerToRender();\n\n    this.drawLayers(layers, framestamp);\n    var updated = this.drawLayerCanvas(layers);\n\n    if (updated) {\n      this.drawTops();\n\n      this._drawCenterCross();\n    }\n\n    map._fireEvent('frameend');\n\n    this._recordView();\n\n    this._mapview = this._getMapView();\n    delete this._spatialRefChanged;\n\n    this._fireLayerLoadEvents();\n\n    this.executeFrameCallbacks();\n    this._canvasUpdated = false;\n    return true;\n  };\n\n  _proto.updateMapDOM = function updateMapDOM() {\n    var map = this.map;\n\n    if (map.isZooming()) {\n      return;\n    }\n\n    var offset = map._getViewPointFrameOffset();\n\n    if (offset) {\n      map.offsetPlatform(offset);\n    } else if (this.domChanged()) {\n      this.offsetPlatform(null, true);\n    }\n  };\n\n  _proto.drawLayers = function drawLayers(layers, framestamp) {\n    var map = this.map,\n        isInteracting = map.isInteracting(),\n        canvasIds = [],\n        updatedIds = [],\n        fps = map.options['fpsOnInteracting'] || 0,\n        timeLimit = fps === 0 ? 0 : 1000 / fps,\n        layerLimit = this.map.options['layerCanvasLimitOnInteracting'],\n        l = layers.length;\n    var baseLayer = map.getBaseLayer();\n    var t = 0;\n\n    for (var i = 0; i < l; i++) {\n      var layer = layers[i];\n\n      if (!layer.isVisible()) {\n        continue;\n      }\n\n      var isCanvas = layer.isCanvasRender();\n\n      if (isCanvas) {\n        canvasIds.push(layer.getId());\n      }\n\n      var renderer = layer._getRenderer();\n\n      if (!renderer) {\n        continue;\n      }\n\n      var needsRedraw = this._checkLayerRedraw(layer);\n\n      if (isCanvas && renderer.isCanvasUpdated()) {\n        if (!needsRedraw) {\n          updatedIds.push(layer.getId());\n        }\n\n        this.setLayerCanvasUpdated();\n      }\n\n      var transformMatrix = renderer.__zoomTransformMatrix;\n      delete renderer.__zoomTransformMatrix;\n\n      if (!needsRedraw) {\n        if (isCanvas && isInteracting) {\n          if (map.isZooming() && !map.getPitch()) {\n            renderer.prepareRender();\n            renderer.__zoomTransformMatrix = this._zoomMatrix;\n          } else if (map.getPitch() || map.isRotating()) {\n            renderer.clearCanvas();\n          }\n        }\n\n        continue;\n      }\n\n      if (isInteracting && isCanvas) {\n        if (layerLimit > 0 && l - 1 - i > layerLimit && layer !== baseLayer) {\n          layer._getRenderer().clearCanvas();\n\n          continue;\n        }\n\n        t += this._drawCanvasLayerOnInteracting(layer, t, timeLimit, framestamp);\n      } else if (isInteracting && renderer.drawOnInteracting) {\n        if (renderer.prepareRender) {\n          renderer.prepareRender();\n        }\n\n        if (renderer.checkAndDraw) {\n          renderer.checkAndDraw(renderer.drawOnInteracting, this._eventParam, framestamp);\n        } else {\n          renderer.drawOnInteracting(this._eventParam, framestamp);\n        }\n      } else {\n        renderer.render(framestamp);\n\n        if (isCanvas && transformMatrix && renderer.isLoadingResource()) {\n          renderer.__zoomTransformMatrix = transformMatrix;\n        }\n      }\n\n      if (isCanvas) {\n        updatedIds.push(layer.getId());\n        this.setLayerCanvasUpdated();\n      }\n    }\n\n    var preCanvasIds = this._canvasIds || [];\n    var preUpdatedIds = this._updatedIds || [];\n    this._canvasIds = canvasIds;\n    this._updatedIds = updatedIds;\n\n    if (!this.isLayerCanvasUpdated()) {\n      var sep = '---';\n\n      if (preCanvasIds.join(sep) !== canvasIds.join(sep) || preUpdatedIds.join(sep) !== updatedIds.join(sep)) {\n        this.setLayerCanvasUpdated();\n      }\n    }\n  };\n\n  _proto._checkLayerRedraw = function _checkLayerRedraw(layer) {\n    if (this.isSpatialReferenceChanged()) {\n      return true;\n    }\n\n    var map = this.map;\n\n    var renderer = layer._getRenderer();\n\n    if (layer.isCanvasRender()) {\n      return renderer.testIfNeedRedraw();\n    } else {\n      if (renderer.needToRedraw && renderer.needToRedraw()) {\n        return true;\n      }\n\n      return map.isInteracting() || this.isViewChanged();\n    }\n  };\n\n  _proto._drawCanvasLayerOnInteracting = function _drawCanvasLayerOnInteracting(layer, t, timeLimit, framestamp) {\n    var map = this.map,\n        renderer = layer._getRenderer(),\n        drawTime = renderer.getDrawTime(),\n        inTime = timeLimit === 0 || timeLimit > 0 && t + drawTime <= timeLimit;\n\n    if (renderer.mustRenderOnInteracting && renderer.mustRenderOnInteracting()) {\n      renderer.render(framestamp);\n    } else if (renderer.drawOnInteracting && (layer === map.getBaseLayer() || inTime || map.isZooming() && layer.options['forceRenderOnZooming'] || map.isMoving() && layer.options['forceRenderOnMoving'] || map.isRotating() && layer.options['forceRenderOnRotating'])) {\n      renderer.prepareRender();\n      renderer.prepareCanvas();\n\n      if (renderer.checkAndDraw) {\n        renderer.checkAndDraw(renderer.drawOnInteracting, this._eventParam, framestamp);\n      } else {\n        renderer.drawOnInteracting(this._eventParam, framestamp);\n      }\n\n      return drawTime;\n    } else if (map.isZooming() && !map.getPitch() && !map.isRotating()) {\n      renderer.prepareRender();\n      renderer.__zoomTransformMatrix = this._zoomMatrix;\n    } else if (map.getPitch() || map.isRotating()) {\n      renderer.clearCanvas();\n    }\n\n    if (renderer.drawOnInteracting && !inTime) {\n      renderer.onSkipDrawOnInteracting(this._eventParam, framestamp);\n    }\n\n    return 0;\n  };\n\n  _proto._fireLayerLoadEvents = function _fireLayerLoadEvents() {\n    if (this._updatedIds && this._updatedIds.length > 0) {\n      var map = this.map;\n\n      this._updatedIds.reverse().forEach(function (id) {\n        var layer = map.getLayer(id);\n\n        if (!layer) {\n          return;\n        }\n\n        var renderer = layer._getRenderer();\n\n        if (!renderer || !renderer.isRenderComplete()) {\n          return;\n        }\n\n        layer.fire('layerload');\n      });\n    }\n  };\n\n  _proto.isLayerCanvasUpdated = function isLayerCanvasUpdated() {\n    return this._canvasUpdated;\n  };\n\n  _proto.setLayerCanvasUpdated = function setLayerCanvasUpdated() {\n    this._canvasUpdated = true;\n  };\n\n  _proto.drawLayerCanvas = function drawLayerCanvas(layers) {\n    var map = this.map;\n\n    if (!map) {\n      return false;\n    }\n\n    if (!this.isLayerCanvasUpdated() && !this.isViewChanged()) {\n      return false;\n    }\n\n    if (!this.canvas) {\n      this.createCanvas();\n    }\n\n    map._fireEvent('renderstart', {\n      'context': this.context\n    });\n\n    if (!this._updateCanvasSize()) {\n      this.clearCanvas();\n    }\n\n    var interacting = map.isInteracting(),\n        limit = map.options['layerCanvasLimitOnInteracting'];\n    var len = layers.length;\n    var baseLayerImage;\n    var images = [];\n\n    for (var i = 0; i < len; i++) {\n      if (!layers[i].isVisible() || !layers[i].isCanvasRender()) {\n        continue;\n      }\n\n      var renderer = layers[i]._getRenderer();\n\n      if (!renderer) {\n        continue;\n      }\n\n      var layerImage = this._getLayerImage(layers[i]);\n\n      if (layerImage && layerImage['image']) {\n        if (layers[i] === map.getBaseLayer()) {\n          baseLayerImage = [layers[i], layerImage];\n        } else {\n          images.push([layers[i], layerImage]);\n        }\n      }\n    }\n\n    var targetWidth = this.canvas.width;\n    var targetHeight = this.canvas.height;\n\n    if (baseLayerImage) {\n      this._drawLayerCanvasImage(baseLayerImage[0], baseLayerImage[1], targetWidth, targetHeight);\n\n      this._drawFog();\n    }\n\n    len = images.length;\n    var start = interacting && limit >= 0 && len > limit ? len - limit : 0;\n\n    for (var _i = start; _i < len; _i++) {\n      this._drawLayerCanvasImage(images[_i][0], images[_i][1], targetWidth, targetHeight);\n    }\n\n    map._fireEvent('renderend', {\n      'context': this.context\n    });\n\n    return true;\n  };\n\n  _proto.setToRedraw = function setToRedraw() {\n    var layers = this._getAllLayerToRender();\n\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var renderer = layers[i].getRenderer();\n\n      if (renderer && renderer.canvas && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n\n  _proto.updateMapSize = function updateMapSize(size) {\n    if (!size || this._containerIsCanvas) {\n      return;\n    }\n\n    var width = size['width'] + 'px',\n        height = size['height'] + 'px';\n    var panels = this.map._panels;\n    panels.mapWrapper.style.width = width;\n    panels.mapWrapper.style.height = height;\n\n    this._updateCanvasSize();\n  };\n\n  _proto.getMainPanel = function getMainPanel() {\n    if (!this.map) {\n      return null;\n    }\n\n    if (this._containerIsCanvas) {\n      return this.map._containerDOM;\n    }\n\n    if (this.map._panels) {\n      return this.map._panels.mapWrapper;\n    }\n\n    return null;\n  };\n\n  _proto.toDataURL = function toDataURL(mimeType, quality) {\n    if (!this.canvas) {\n      return null;\n    }\n\n    return this.canvas.toDataURL(mimeType, quality);\n  };\n\n  _proto.remove = function remove() {\n    if (Browser$1.webgl && typeof document !== 'undefined') {\n      removeDomEvent(document, 'visibilitychange', this._thisVisibilitychange, this);\n    }\n\n    if (this._resizeInterval) {\n      clearInterval(this._resizeInterval);\n    }\n\n    delete this.context;\n    delete this.canvas;\n    delete this.map;\n    delete this._spatialRefChanged;\n\n    this._cancelFrameLoop();\n  };\n\n  _proto.hitDetect = function hitDetect(point) {\n    var map = this.map;\n\n    if (!map || !map.options['hitDetect'] || map.isInteracting()) {\n      return;\n    }\n\n    var layers = map._getLayers();\n\n    var cursor = 'default';\n    var limit = map.options['hitDetectLimit'] || 0;\n    var counter = 0;\n\n    for (var i = layers.length - 1; i >= 0; i--) {\n      var layer = layers[i];\n\n      if (!layer.options['hitDetect'] || layer.isEmpty && layer.isEmpty()) {\n        continue;\n      }\n\n      var renderer = layer._getRenderer();\n\n      if (!renderer || !renderer.hitDetect) {\n        continue;\n      }\n\n      if (renderer.isBlank && renderer.isBlank()) {\n        continue;\n      }\n\n      if (layer.options['cursor'] !== 'default' && renderer.hitDetect(point)) {\n        cursor = layer.options['cursor'] || 'pointer';\n        break;\n      }\n\n      counter++;\n\n      if (limit > 0 && counter > limit) {\n        break;\n      }\n    }\n\n    map._trySetCursor(cursor);\n  };\n\n  _proto._getLayerImage = function _getLayerImage(layer) {\n    var renderer = layer._getRenderer();\n\n    if (renderer.getCanvasImage) {\n      return renderer.getCanvasImage();\n    }\n\n    return null;\n  };\n\n  _proto.initContainer = function initContainer() {\n    var panels = this.map._panels;\n\n    function createContainer(name, className, cssText, enableSelect) {\n      var c = createEl('div', className);\n\n      if (cssText) {\n        c.style.cssText = cssText;\n      }\n\n      panels[name] = c;\n\n      if (!enableSelect) {\n        preventSelection(c);\n      }\n\n      return c;\n    }\n\n    var containerDOM = this.map._containerDOM;\n\n    if (this._containerIsCanvas) {\n      return;\n    }\n\n    containerDOM.innerHTML = '';\n    var POSITION0 = 'position:absolute;top:0px;left:0px;';\n    var mapWrapper = createContainer('mapWrapper', 'maptalks-wrapper', 'position:absolute;overflow:hidden;', true),\n        mapAllLayers = createContainer('allLayers', 'maptalks-all-layers', POSITION0 + 'padding:0px;margin:0px;z-index:0;overflow:visible;', true),\n        backStatic = createContainer('backStatic', 'maptalks-back-static', POSITION0 + 'z-index:0;', true),\n        back = createContainer('back', 'maptalks-back', POSITION0 + 'z-index:1;'),\n        backLayer = createContainer('backLayer', 'maptalks-back-layer', POSITION0),\n        canvasContainer = createContainer('canvasContainer', 'maptalks-canvas-layer', POSITION0 + 'border:none;z-index:2;'),\n        frontStatic = createContainer('frontStatic', 'maptalks-front-static', POSITION0 + 'z-index:3;', true),\n        front = createContainer('front', 'maptalks-front', POSITION0 + 'z-index:4;', true),\n        frontLayer = createContainer('frontLayer', 'maptalks-front-layer', POSITION0 + 'z-index:0;'),\n        ui = createContainer('ui', 'maptalks-ui', POSITION0 + 'border:none;z-index:1;', true),\n        control = createContainer('control', 'maptalks-control', 'z-index:1', true);\n    containerDOM.appendChild(mapWrapper);\n    mapAllLayers.appendChild(backStatic);\n    back.appendChild(backLayer);\n    back.layerDOM = backLayer;\n    mapAllLayers.appendChild(back);\n    mapAllLayers.appendChild(canvasContainer);\n    front.appendChild(frontLayer);\n    front.layerDOM = frontLayer;\n    front.uiDOM = ui;\n    mapAllLayers.appendChild(frontStatic);\n    mapAllLayers.appendChild(front);\n    front.appendChild(ui);\n    mapWrapper.appendChild(mapAllLayers);\n    mapWrapper.appendChild(control);\n    this.createCanvas();\n    this.resetContainer();\n\n    var mapSize = this.map._getContainerDomSize();\n\n    this.updateMapSize(mapSize);\n  };\n\n  _proto.isViewChanged = function isViewChanged() {\n    if (this._isViewChanged !== undefined) {\n      return this._isViewChanged;\n    }\n\n    var previous = this._mapview;\n\n    var view = this._getMapView();\n\n    this._isViewChanged = !previous || !equalMapView(previous, view);\n    return this._isViewChanged;\n  };\n\n  _proto._recordView = function _recordView() {\n    var map = this.map;\n\n    if (!map._onViewChange || map.isInteracting() || map.isAnimating()) {\n      return;\n    }\n\n    if (!equalMapView(map.getView(), map._getCurrentView())) {\n      map._onViewChange(map.getView());\n    }\n  };\n\n  _proto.isSpatialReferenceChanged = function isSpatialReferenceChanged() {\n    return this._spatialRefChanged;\n  };\n\n  _proto._getMapView = function _getMapView() {\n    var map = this.map;\n\n    var center = map._getPrjCenter();\n\n    return {\n      x: center.x,\n      y: center.y,\n      zoom: map.getZoom(),\n      pitch: map.getPitch(),\n      bearing: map.getBearing(),\n      width: map.width,\n      height: map.height\n    };\n  };\n\n  _proto._frameLoop = function _frameLoop(framestamp) {\n    var _this2 = this;\n\n    if (!this.map) {\n      this._cancelFrameLoop();\n\n      return;\n    }\n\n    framestamp = framestamp || 0;\n    this._frameTimestamp = framestamp;\n    this._resizeCount = 0;\n    this.renderFrame(framestamp);\n    getGlobalWorkerPool().commit();\n    this._animationFrame = requestAnimFrame(function (framestamp) {\n      _this2._frameLoop(framestamp);\n    });\n  };\n\n  _proto._cancelFrameLoop = function _cancelFrameLoop() {\n    if (this._animationFrame) {\n      cancelAnimFrame(this._animationFrame);\n    }\n  };\n\n  _proto._drawLayerCanvasImage = function _drawLayerCanvasImage(layer, layerImage, targetWidth, targetHeight) {\n    var ctx = this.context;\n    var point = layerImage['point'].round();\n    var dpr = this.map.getDevicePixelRatio();\n\n    if (dpr !== 1) {\n      point._multi(dpr);\n    }\n\n    var canvasImage = layerImage['image'];\n    var width = canvasImage.width,\n        height = canvasImage.height;\n\n    if (point.x + width <= 0 || point.y + height <= 0) {\n      return;\n    }\n\n    var op = layer.options['opacity'];\n\n    if (!isNumber(op)) {\n      op = 1;\n    }\n\n    if (op <= 0) {\n      return;\n    }\n\n    var imgOp = layerImage['opacity'];\n\n    if (!isNumber(imgOp)) {\n      imgOp = 1;\n    }\n\n    if (imgOp <= 0) {\n      return;\n    }\n\n    var alpha = ctx.globalAlpha;\n\n    if (op < 1) {\n      ctx.globalAlpha *= op;\n    }\n\n    if (imgOp < 1) {\n      ctx.globalAlpha *= imgOp;\n    }\n\n    if (layer.options['cssFilter']) {\n      ctx.filter = layer.options['cssFilter'];\n    }\n\n    var renderer = layer.getRenderer();\n    var matrix = renderer.__zoomTransformMatrix;\n    var clipped = renderer.clipCanvas(this.context);\n\n    if (matrix) {\n      ctx.save();\n      ctx.setTransform.apply(ctx, matrix);\n    }\n\n    ctx.drawImage(canvasImage, 0, 0, width, height, point.x, point.y, targetWidth, targetHeight);\n\n    if (matrix) {\n      ctx.restore();\n    }\n\n    if (clipped) {\n      ctx.restore();\n    }\n\n    if (ctx.filter !== 'none') {\n      ctx.filter = 'none';\n    }\n\n    ctx.globalAlpha = alpha;\n  };\n\n  _proto._drawCenterCross = function _drawCenterCross() {\n    var cross = this.map.options['centerCross'];\n\n    if (cross) {\n      var ctx = this.context;\n      var p = new Point(this.canvas.width / 2, this.canvas.height / 2);\n\n      if (isFunction(cross)) {\n        cross(ctx, p);\n      } else {\n        Canvas.drawCross(this.context, p.x, p.y, 2, '#f00');\n      }\n    }\n  };\n\n  _proto._drawContainerExtent = function _drawContainerExtent() {\n    var cascadePitches = this.map.options.cascadePitches;\n\n    var h30 = this.map.height - this.map._getVisualHeight(cascadePitches[0]);\n\n    var h60 = this.map.height - this.map._getVisualHeight(cascadePitches[1]);\n\n    var extent = this.map.getContainerExtent();\n    var ctx = this.context;\n    ctx.beginPath();\n    ctx.moveTo(0, extent.ymin);\n    ctx.lineTo(extent.xmax, extent.ymin);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(0, h30);\n    ctx.lineTo(extent.xmax, h30);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(0, h60);\n    ctx.lineTo(extent.xmax, h60);\n    ctx.stroke();\n  };\n\n  _proto._drawFog = function _drawFog() {\n    var map = this.map;\n\n    if (map.getPitch() <= map.options['maxVisualPitch'] || !map.options['fog']) {\n      return;\n    }\n\n    var fogThickness = 30;\n    var r = map.getDevicePixelRatio();\n    var ctx = this.context,\n        clipExtent = map.getContainerExtent();\n    var top = (map.height - map._getVisualHeight(75)) * r;\n    if (top < 0) top = 0;\n    var bottom = clipExtent.ymin * r,\n        h = Math.ceil(bottom - top),\n        color = map.options['fogColor'].join();\n    var gradient = ctx.createLinearGradient(0, top, 0, bottom + fogThickness);\n    var landscape = 1 - fogThickness / (h + fogThickness);\n    gradient.addColorStop(0, \"rgba(\" + color + \", 0)\");\n    gradient.addColorStop(0.3, \"rgba(\" + color + \", 0.3)\");\n    gradient.addColorStop(landscape, \"rgba(\" + color + \", 1)\");\n    gradient.addColorStop(1, \"rgba(\" + color + \", 0)\");\n    ctx.beginPath();\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, top, Math.ceil(clipExtent.getWidth()) * r, Math.ceil(h + fogThickness));\n  };\n\n  _proto._getAllLayerToRender = function _getAllLayerToRender() {\n    return this.map._getLayers();\n  };\n\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n\n    Canvas.clearRect(this.context, 0, 0, this.canvas.width, this.canvas.height);\n  };\n\n  _proto._updateCanvasSize = function _updateCanvasSize() {\n    if (!this.canvas || this._containerIsCanvas) {\n      return false;\n    }\n\n    var map = this.map,\n        mapSize = map.getSize(),\n        canvas = this.canvas,\n        r = map.getDevicePixelRatio();\n\n    var _calCanvasSize = calCanvasSize(mapSize, r),\n        width = _calCanvasSize.width,\n        height = _calCanvasSize.height,\n        cssWidth = _calCanvasSize.cssWidth,\n        cssHeight = _calCanvasSize.cssHeight;\n\n    if (canvas.style && (canvas.style.width !== cssWidth || canvas.style.height !== cssHeight)) {\n      canvas.style.width = cssWidth;\n      canvas.style.height = cssHeight;\n    }\n\n    if (width === canvas.width && height === canvas.height) {\n      return false;\n    }\n\n    canvas.height = height;\n    canvas.width = width;\n    this.topLayer.width = canvas.width;\n    this.topLayer.height = canvas.height;\n    return true;\n  };\n\n  _proto.createCanvas = function createCanvas() {\n    this.topLayer = createEl('canvas');\n    this.topCtx = this.topLayer.getContext('2d');\n\n    if (this._containerIsCanvas) {\n      this.canvas = this.map._containerDOM;\n    } else {\n      this.canvas = createEl('canvas');\n\n      this._updateCanvasSize();\n\n      this.map._panels.canvasContainer.appendChild(this.canvas);\n    }\n\n    this.context = this.canvas.getContext('2d');\n  };\n\n  _proto._updateDomPosition = function _updateDomPosition(framestamp) {\n    if (this._checkPositionTime === undefined) {\n      this._checkPositionTime = -Infinity;\n    }\n\n    var dTime = Math.abs(framestamp - this._checkPositionTime);\n\n    if (dTime >= 500) {\n      computeDomPosition(this.map._containerDOM);\n      this._checkPositionTime = Math.min(framestamp, this._checkPositionTime);\n    }\n\n    return this;\n  };\n\n  _proto._checkSize = function _checkSize() {\n    if (!this.map) {\n      return;\n    }\n\n    this.map.checkSize();\n  };\n\n  _proto._setCheckSizeInterval = function _setCheckSizeInterval(interval) {\n    var _this3 = this;\n\n    if (Browser$1.resizeObserver) {\n      if (this._resizeObserver) {\n        this._resizeObserver.disconnect();\n      }\n\n      if (this.map) {\n        this._resizeObserver = new ResizeObserver(function (entries) {\n          if (!_this3.map || _this3.map.isRemoved()) {\n            _this3._resizeObserver.disconnect();\n          } else if (entries.length) {\n            _this3.map._containerDomContentRect = entries[0].contentRect;\n\n            _this3._checkSize(entries[0].contentRect);\n\n            _this3._resizeCount = _this3._resizeCount || 0;\n\n            _this3.renderFrame((_this3._frameTimestamp || 0) + ++_this3._resizeCount / 100);\n          }\n        });\n\n        this._resizeObserver.observe(this.map._containerDOM);\n      }\n    } else {\n      clearInterval(this._resizeInterval);\n      this._checkSizeInterval = interval;\n      this._resizeInterval = setInterval(function () {\n        if (!_this3.map || _this3.map.isRemoved()) {\n          clearInterval(_this3._resizeInterval);\n        } else {\n          _this3._checkSize();\n        }\n      }, this._checkSizeInterval);\n    }\n  };\n\n  _proto._registerEvents = function _registerEvents() {\n    var _this4 = this;\n\n    var map = this.map;\n\n    if (map.options['checkSize'] && !IS_NODE && typeof window !== 'undefined') {\n      this._setCheckSizeInterval(map.options['checkSizeInterval']);\n    }\n\n    if (!Browser$1.mobile) {\n      map.on('_mousemove', this._onMapMouseMove, this);\n    }\n\n    map.on('_dragrotatestart _dragrotating _dragrotateend _movestart _moving _moveend _zoomstart', function (param) {\n      _this4._eventParam = param;\n    });\n    map.on('_zooming', function (param) {\n      if (!map.getPitch()) {\n        _this4._zoomMatrix = param['matrix']['container'];\n      }\n\n      _this4._eventParam = param;\n    });\n    map.on('_zoomend', function (param) {\n      _this4._eventParam = param;\n      delete _this4._zoomMatrix;\n    });\n    map.on('_spatialreferencechange', function () {\n      _this4._spatialRefChanged = true;\n    });\n\n    if (Browser$1.webgl && typeof document !== 'undefined') {\n      addDomEvent(document, 'visibilitychange', this._thisVisibilitychange, this);\n    }\n\n    if (Browser$1.addDPRListening) {\n      Browser$1.addDPRListening(this.map);\n    }\n  };\n\n  _proto._onMapMouseMove = function _onMapMouseMove(param) {\n    var _this5 = this;\n\n    var map = this.map;\n\n    if (map.isInteracting() || !map.options['hitDetect']) {\n      return;\n    }\n\n    if (this._hitDetectFrame) {\n      cancelAnimFrame(this._hitDetectFrame);\n    }\n\n    this._hitDetectFrame = requestAnimFrame(function () {\n      _this5.hitDetect(param['containerPoint']);\n    });\n  };\n\n  _proto._getCanvasLayers = function _getCanvasLayers() {\n    return this.map._getLayers(function (layer) {\n      return layer.isCanvasRender();\n    });\n  };\n\n  _proto._onVisibilitychange = function _onVisibilitychange() {\n    if (document.visibilityState !== 'visible') {\n      return;\n    }\n\n    this.setToRedraw();\n  };\n\n  _proto.addTopElement = function addTopElement(e) {\n    if (!this._tops) {\n      this._tops = [];\n    }\n\n    this._tops.push(e);\n  };\n\n  _proto.removeTopElement = function removeTopElement(e) {\n    if (!this._tops) {\n      return;\n    }\n\n    var idx = this._tops.indexOf(e);\n\n    if (idx >= 0) {\n      this._tops.splice(idx, 1);\n    }\n  };\n\n  _proto.getTopElements = function getTopElements() {\n    return this._tops || [];\n  };\n\n  _proto.drawTops = function drawTops() {\n    this.topCtx.clearRect(0, 0, this.topLayer.width, this.topLayer.height);\n    this.map.fire('drawtopstart');\n    this.map.fire('drawtops');\n    var tops = this.getTopElements();\n    var updated = false;\n\n    for (var i = 0; i < tops.length; i++) {\n      if (tops[i].render(this.topCtx)) {\n        updated = true;\n      }\n    }\n\n    if (updated) {\n      this.context.drawImage(this.topLayer, 0, 0);\n    }\n\n    this.map.fire('drawtopsend');\n  };\n\n  return MapCanvasRenderer;\n}(MapRenderer);\n\nMap$1.registerRenderer('canvas', MapCanvasRenderer);\nMap$1.mergeOptions({\n  'fog': false,\n  'fogColor': [233, 233, 233]\n});\n\n\n\nvar index$6 = /*#__PURE__*/Object.freeze({\n  ResourceCache: ResourceCache,\n  CanvasRenderer: CanvasRenderer,\n  ImageGLRenderable: ImageGLRenderable,\n  MapRenderer: MapRenderer,\n  MapCanvasRenderer: MapCanvasRenderer,\n  Renderable: Renderable,\n  ImageLayerCanvasRenderer: ImageLayerCanvasRenderer,\n  ImageLayerGLRenderer: ImageLayerGLRenderer,\n  TileLayerCanvasRenderer: TileLayerCanvasRenderer,\n  TileLayerGLRenderer: TileLayerGLRenderer,\n  CanvasTileLayerCanvasRenderer: CanvasRenderer$1,\n  CanvasTileLayerGLRenderer: GLRenderer,\n  QuadStencil: QuadStencil,\n  OverlayLayerCanvasRenderer: OverlayLayerRenderer,\n  VectorLayerCanvasRenderer: VectorLayerRenderer,\n  CanvasLayerRenderer: CanvasLayerRenderer\n});\n\nvar CenterPointRenderer = {\n  _getRenderPoints: function _getRenderPoints() {\n    return [[this._getCenter2DPoint(this.getMap().getGLRes())], null];\n  }\n};\nMarker.include(CenterPointRenderer);\nEllipse.include(CenterPointRenderer);\nCircle.include(CenterPointRenderer);\nSector.include(CenterPointRenderer);\nRectangle.include({\n  _getRenderPoints: function _getRenderPoints(placement) {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n\n    if (placement === 'vertex') {\n      var shell = this._trimRing(this.getShell());\n\n      var points = [];\n\n      for (var i = 0, len = shell.length; i < len; i++) {\n        points.push(map.coordToPointAtRes(shell[i], glRes));\n      }\n\n      return [points, null];\n    } else {\n      var c = map.coordToPointAtRes(this.getCenter(), glRes);\n      return [[c], null];\n    }\n  }\n});\nvar PolyRenderer = {\n  _getRenderPoints: function _getRenderPoints(placement) {\n    var map = this.getMap();\n    var glRes = map.getGLRes();\n    var points,\n        rotations = null;\n\n    if (placement === 'point') {\n      points = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes);\n\n      if (points && points.length > 0 && Array.isArray(points[0])) {\n        points = points[0].concat(points[1]);\n      }\n    } else if (placement === 'vertex') {\n      points = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes);\n      rotations = [];\n\n      if (points && points.length > 0 && Array.isArray(points[0])) {\n        for (var i = 0, l = points.length; i < l; i++) {\n          for (var ii = 0, ll = points[i].length; ii < ll; ii++) {\n            if (ii === 0) {\n              rotations.push([points[i][ii], points[i][ii + 1]]);\n            } else {\n              rotations.push([points[i][ii - 1], points[i][ii]]);\n            }\n          }\n        }\n\n        points = points[0].concat(points[1]);\n      } else {\n        for (var _i = 0, _l = points.length; _i < _l; _i++) {\n          if (_i === 0) {\n            rotations.push([points[_i], points[_i + 1]]);\n          } else {\n            rotations.push([points[_i - 1], points[_i]]);\n          }\n        }\n      }\n    } else if (placement === 'line') {\n      points = [];\n      rotations = [];\n\n      var vertice = this._getPath2DPoints(this._getPrjCoordinates(), false, glRes),\n          isSplitted = vertice.length > 0 && Array.isArray(vertice[0]);\n\n      if (isSplitted) {\n        var ring;\n\n        for (var _i2 = 1, _l2 = vertice.length; _i2 < _l2; _i2++) {\n          ring = vertice[_i2];\n\n          if (this instanceof Polygon && ring.length > 0 && !ring[0].equals(ring[ring.length - 1])) {\n            ring.push(ring[0]);\n          }\n\n          for (var _ii = 1, _ll = ring.length; _ii < _ll; _ii++) {\n            points.push(ring[_ii].add(ring[_ii - 1])._multi(0.5));\n            rotations.push([ring[_ii - 1], ring[_ii]]);\n          }\n        }\n      } else {\n        if (this instanceof Polygon && vertice.length > 0 && !vertice[0].equals(vertice[vertice.length - 1])) {\n          vertice.push(vertice[0]);\n        }\n\n        for (var _i3 = 1, _l3 = vertice.length; _i3 < _l3; _i3++) {\n          points.push(vertice[_i3].add(vertice[_i3 - 1])._multi(0.5));\n          rotations.push([vertice[_i3 - 1], vertice[_i3]]);\n        }\n      }\n    } else if (placement === 'vertex-first') {\n      var coords = this._getPrjCoordinates();\n\n      var _l4 = coords.length;\n      var point0 = _l4 ? map._prjToPointAtRes(coords[0], glRes) : null;\n      points = _l4 ? [point0] : [];\n      rotations = _l4 ? [[point0, coords[1] ? map._prjToPointAtRes(coords[1], glRes) : point0]] : [];\n    } else if (placement === 'vertex-last') {\n      var _coords = this._getPrjCoordinates();\n\n      var _l5 = _coords.length;\n      var curretPoint = _l5 ? map._prjToPointAtRes(_coords[_l5 - 1], glRes) : null;\n      points = _l5 ? [curretPoint] : [];\n      var previous = _l5 > 1 ? _l5 - 2 : _l5 - 1;\n      rotations = _l5 ? [[_coords[previous] ? map._prjToPointAtRes(_coords[previous], glRes) : curretPoint, curretPoint]] : [];\n    } else {\n      var pcenter = this._getProjection().project(this.getCenter());\n\n      points = [map._prjToPointAtRes(pcenter, glRes)];\n    }\n\n    return [points, rotations];\n  }\n};\nLineString.include(PolyRenderer);\nPolygon.include(PolyRenderer);\n\nvar TEMP_WITHIN = {\n  within: false,\n  center: [0, 0]\n};\n\nfunction isWithinPixel(painter) {\n  if (!painter || !painter._containerBbox) {\n    TEMP_WITHIN.within = false;\n  } else {\n    TEMP_WITHIN.within = false;\n    var _painter$_containerBb = painter._containerBbox,\n        minx = _painter$_containerBb.minx,\n        miny = _painter$_containerBb.miny,\n        maxx = _painter$_containerBb.maxx,\n        maxy = _painter$_containerBb.maxy;\n    var offsetx = Math.abs(maxx - minx);\n    var offsety = Math.abs(maxy - miny);\n\n    if (offsetx <= 1 && offsety <= 1) {\n      TEMP_WITHIN.within = true;\n      TEMP_WITHIN.center[0] = (minx + maxx) / 2;\n      TEMP_WITHIN.center[1] = (miny + maxy) / 2;\n    }\n\n    delete painter._containerBbox;\n  }\n\n  return TEMP_WITHIN;\n}\n\nGeometry.include({\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return false;\n  },\n  _redrawWhenRotate: function _redrawWhenRotate() {\n    return false;\n  }\n});\nvar el = {\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return true;\n  },\n  _redrawWhenRotate: function _redrawWhenRotate() {\n    return this instanceof Ellipse || this instanceof Sector;\n  },\n  _paintAsPath: function _paintAsPath() {\n    var map = this.getMap();\n    var altitude = this.getAltitude();\n    return altitude > 0 || map.getPitch() || this instanceof Ellipse && map.getBearing();\n  },\n  _getPaintParams: function _getPaintParams() {\n    var map = this.getMap();\n\n    if (this._paintAsPath()) {\n      return Polygon.prototype._getPaintParams.call(this, true);\n    }\n\n    var pcenter = this._getPrjCoordinates();\n\n    var pt = map._prjToPointAtRes(pcenter, map.getGLRes());\n\n    var size = this._getRenderSize(pt);\n\n    return [pt].concat(size);\n  },\n  _paintOn: function _paintOn() {\n    if (this._paintAsPath()) {\n      return Canvas.polygon.apply(Canvas, arguments);\n    } else {\n      return Canvas.ellipse.apply(Canvas, arguments);\n    }\n  },\n  _getRenderSize: function _getRenderSize(pt) {\n    var map = this.getMap(),\n        glRes = map.getGLRes();\n\n    var prjExtent = this._getPrjExtent();\n\n    var pmin = map._prjToPointAtRes(prjExtent.getMin(), glRes),\n        pmax = map._prjToPointAtRes(prjExtent.getMax(), glRes);\n\n    return [Math.abs(pmax.x - pmin.x) / 2, Math.abs(pmax.y - pt.y), Math.abs(pt.y - pmin.y)];\n  }\n};\nEllipse.include(el);\nCircle.include(el);\nRectangle.include({\n  _getPaintParams: function _getPaintParams() {\n    var map = this.getMap();\n\n    var shell = this._getPrjShell();\n\n    var points = this._getPath2DPoints(shell, false, map.getGLRes());\n\n    return [points];\n  },\n  _paintOn: Canvas.polygon\n});\nSector.include(el, {\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return true;\n  },\n  _getPaintParams: function _getPaintParams() {\n    if (this._paintAsPath()) {\n      return Polygon.prototype._getPaintParams.call(this, true);\n    }\n\n    var map = this.getMap();\n\n    var pt = map._prjToPointAtRes(this._getPrjCoordinates(), map.getGLRes());\n\n    var size = this._getRenderSize(pt);\n\n    return [pt, size[0], [this.getStartAngle(), this.getEndAngle()]];\n  },\n  _paintOn: function _paintOn() {\n    if (this._paintAsPath()) {\n      return Canvas.polygon.apply(Canvas, arguments);\n    } else {\n      var r = this.getMap().getBearing();\n      var args = arguments;\n\n      if (r) {\n        args[3] = args[3].slice(0);\n        args[3][0] += r;\n        args[3][1] += r;\n      }\n\n      return Canvas.sector.apply(Canvas, args);\n    }\n  }\n});\nPath.include({\n  _paintAsPath: function _paintAsPath() {\n    return true;\n  }\n});\nLineString.include({\n  arrowStyles: {\n    'classic': [3, 4]\n  },\n  _getArrowShape: function _getArrowShape(prePoint, point, lineWidth, arrowStyle, tolerance) {\n    if (!prePoint || !point || prePoint.equals(point)) {\n      return null;\n    }\n\n    if (!tolerance) {\n      tolerance = 0;\n    }\n\n    var width = lineWidth * arrowStyle[0],\n        height = lineWidth * arrowStyle[1] + tolerance,\n        hw = width / 2 + tolerance;\n    var normal;\n\n    if (point.nextCtrlPoint || point.prevCtrlPoint) {\n      if (point.prevCtrlPoint) {\n        normal = point.sub(new Point(point.prevCtrlPoint));\n      } else {\n        normal = point.sub(new Point(point.nextCtrlPoint));\n      }\n    } else {\n      normal = point.sub(prePoint);\n    }\n\n    normal._unit();\n\n    var p1 = point.sub(normal.multi(height));\n\n    normal._perp();\n\n    var p0 = p1.add(normal.multi(hw));\n\n    normal._multi(-1);\n\n    var p2 = p1.add(normal.multi(hw));\n    return [p0, point, p2, p0];\n  },\n  _getPaintParams: function _getPaintParams() {\n    var prjVertexes = this._getPrjCoordinates();\n\n    var points = this._getPath2DPoints(prjVertexes, false, this.getMap().getGLRes());\n\n    return [points];\n  },\n  _paintOn: function _paintOn(ctx, points, lineOpacity, fillOpacity, dasharray) {\n    var r = isWithinPixel(this._painter);\n\n    if (r.within) {\n      Canvas.pixelRect(ctx, r.center, lineOpacity, fillOpacity);\n    } else if (this.options['smoothness']) {\n      Canvas.paintSmoothLine(ctx, points, lineOpacity, this.options['smoothness'], false, this._animIdx, this._animTailRatio);\n    } else {\n      Canvas.path(ctx, points, lineOpacity, null, dasharray);\n    }\n\n    this._paintArrow(ctx, points, lineOpacity);\n  },\n  _getArrowPlacement: function _getArrowPlacement() {\n    return this.options['arrowPlacement'];\n  },\n  _getArrowStyle: function _getArrowStyle() {\n    var arrowStyle = this.options['arrowStyle'];\n\n    if (arrowStyle) {\n      return Array.isArray(arrowStyle) ? arrowStyle : this.arrowStyles[arrowStyle];\n    }\n\n    return null;\n  },\n  _getArrows: function _getArrows(points, lineWidth, tolerance) {\n    var arrowStyle = this._getArrowStyle();\n\n    if (!arrowStyle || points.length < 2) {\n      return [];\n    }\n\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n    var segments = isSplitted ? points : [points];\n\n    var placement = this._getArrowPlacement();\n\n    var arrows = [];\n    var map = this.getMap(),\n        first = map.coordToContainerPoint(this.getFirstCoordinate()),\n        last = map.coordToContainerPoint(this.getLastCoordinate());\n\n    for (var i = segments.length - 1; i >= 0; i--) {\n      if (placement === 'vertex-first' || placement === 'vertex-firstlast' && segments[i][0].closeTo(first, 0.01)) {\n        var arrow = this._getArrowShape(segments[i][1], segments[i][0], lineWidth, arrowStyle, tolerance);\n\n        if (arrow) {\n          arrows.push(arrow);\n        }\n      }\n\n      if (placement === 'vertex-last' || placement === 'vertex-firstlast' && segments[i][segments[i].length - 1].closeTo(last, 0.01)) {\n        var _arrow = this._getArrowShape(segments[i][segments[i].length - 2], segments[i][segments[i].length - 1], lineWidth, arrowStyle, tolerance);\n\n        if (_arrow) {\n          arrows.push(_arrow);\n        }\n      } else if (placement === 'point') {\n        this._getArrowPoints(arrows, segments[i], lineWidth, arrowStyle, tolerance);\n      }\n    }\n\n    return arrows;\n  },\n  _getArrowPoints: function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    for (var ii = 0, ll = segments.length - 1; ii < ll; ii++) {\n      var arrow = this._getArrowShape(segments[ii], segments[ii + 1], lineWidth, arrowStyle, tolerance);\n\n      if (arrow) {\n        arrows.push(arrow);\n      }\n    }\n  },\n  _paintArrow: function _paintArrow(ctx, points, lineOpacity) {\n    var lineWidth = this._getInternalSymbol()['lineWidth'];\n\n    if (!isNumber(lineWidth) || lineWidth < 3) {\n      lineWidth = 3;\n    }\n\n    var arrows = this._getArrows(points, lineWidth);\n\n    if (!arrows.length) {\n      return;\n    }\n\n    if (ctx.setLineDash) {\n      ctx.setLineDash([]);\n    }\n\n    for (var i = arrows.length - 1; i >= 0; i--) {\n      ctx.fillStyle = ctx.strokeStyle;\n      Canvas.polygon(ctx, arrows[i], lineOpacity, lineOpacity);\n    }\n  }\n});\nPolygon.include({\n  _getPaintParams: function _getPaintParams(disableSimplify) {\n    var glRes = this.getMap().getGLRes();\n\n    var prjVertexes = this._getPrjShell();\n\n    var points = this._getPath2DPoints(prjVertexes, disableSimplify, glRes);\n\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n\n    if (isSplitted) {\n      points = [[points[0]], [points[1]]];\n    }\n\n    var prjHoles = this._getPrjHoles();\n\n    var holePoints = [];\n\n    if (prjHoles && prjHoles.length > 0) {\n      var simplified = this._simplified;\n\n      for (var i = 0; i < prjHoles.length; i++) {\n        var hole = this._getPath2DPoints(prjHoles[i], disableSimplify, glRes);\n\n        if (Array.isArray(hole) && isSplitted) {\n          if (Array.isArray(hole[0])) {\n            points[0].push(hole[0]);\n            points[1].push(hole[1]);\n          } else {\n            points[0].push(hole);\n          }\n        } else {\n          holePoints.push(hole);\n        }\n      }\n\n      if (simplified) {\n        this._simplified = simplified;\n      }\n    }\n\n    if (!isSplitted) {\n      points = [points];\n      pushIn(points, holePoints);\n    }\n\n    return [points];\n  },\n  _paintOn: function _paintOn(ctx, points, lineOpacity, fillOpacity, dasharray) {\n    var r = isWithinPixel(this._painter);\n\n    if (r.within) {\n      Canvas.pixelRect(ctx, r.center, lineOpacity, fillOpacity);\n    } else {\n      Canvas.polygon(ctx, points, lineOpacity, fillOpacity, dasharray, this.options['smoothness']);\n    }\n  }\n});\n\nMap$1.VERSION = version;\nvar worker = {\n  Actor: Actor\n};\n\nexport { index$1 as Util, dom as DomUtil, strings as StringUtil, index as MapboxUtil, Map$1 as Map, index$4 as ui, index$5 as control, index$6 as renderer, index$3 as symbolizer, Animation$1 as animation, worker, Browser$1 as Browser, LRUCache, Ajax, Canvas, Promise$1 as Promise, Class, Eventable, JSONAble, CollisionIndex, Handlerable, Handler$1 as Handler, DragHandler, MapTool, DrawTool, AreaTool, DistanceTool, SpatialReference, registerWorkerAdapter, INTERNAL_LAYER_PREFIX, GEOMETRY_COLLECTION_TYPES, GEOJSON_TYPES, RESOURCE_PROPERTIES, RESOURCE_SIZE_PROPERTIES, NUMERICAL_PROPERTIES, COLOR_PROPERTIES, DEFAULT_TEXT_SIZE, projections as projection, index$2 as measurer, Coordinate, CRS, Extent, Point, PointExtent, Size, Transformation, Layer, TileLayer, GroupTileLayer, WMSTileLayer, CanvasTileLayer, ImageLayer, OverlayLayer, VectorLayer, CanvasLayer, ParticleLayer, TileSystem, TileConfig, ArcCurve, Circle, ConnectorLine, ArcConnectorLine, CubicBezierCurve, Curve, Ellipse, GeoJSON, Geometry, GeometryCollection, Label, LineString, Marker, MultiLineString, MultiPoint, MultiPolygon, Polygon, QuadBezierCurve, Rectangle, Sector, TextBox, TextMarker };\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind');\nvar aConstructor = require('../internals/a-constructor');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\nvar ObjectPrototype = Object.prototype;\nvar push = [].push;\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\n\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\n\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aConstructor(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      apply(push, $args, args);\n      return new (apply(bind, Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : ObjectPrototype);\n    var result = apply(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","/*\n (c) 2017, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\n(function () { 'use strict';\n\n// to suit your point format, run search/replace for '.x' and '.y';\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSqDist(p1, p2) {\n\n    var dx = p1.x - p2.x,\n        dy = p1.y - p2.y;\n\n    return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, p1, p2) {\n\n    var x = p1.x,\n        y = p1.y,\n        dx = p2.x - x,\n        dy = p2.y - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = p2.x;\n            y = p2.y;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = p.x - x;\n    dy = p.y - y;\n\n    return dx * dx + dy * dy;\n}\n// rest of the code doesn't care about point format\n\n// basic distance-based simplification\nfunction simplifyRadialDist(points, sqTolerance) {\n\n    var prevPoint = points[0],\n        newPoints = [prevPoint],\n        point;\n\n    for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSqDist(point, prevPoint) > sqTolerance) {\n            newPoints.push(point);\n            prevPoint = point;\n        }\n    }\n\n    if (prevPoint !== point) newPoints.push(point);\n\n    return newPoints;\n}\n\nfunction simplifyDPStep(points, first, last, sqTolerance, simplified) {\n    var maxSqDist = sqTolerance,\n        index;\n\n    for (var i = first + 1; i < last; i++) {\n        var sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n        if (sqDist > maxSqDist) {\n            index = i;\n            maxSqDist = sqDist;\n        }\n    }\n\n    if (maxSqDist > sqTolerance) {\n        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\n        simplified.push(points[index]);\n        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\n    }\n}\n\n// simplification using Ramer-Douglas-Peucker algorithm\nfunction simplifyDouglasPeucker(points, sqTolerance) {\n    var last = points.length - 1;\n\n    var simplified = [points[0]];\n    simplifyDPStep(points, 0, last, sqTolerance, simplified);\n    simplified.push(points[last]);\n\n    return simplified;\n}\n\n// both algorithms combined for awesome performance\nfunction simplify(points, tolerance, highestQuality) {\n\n    if (points.length <= 2) return points;\n\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n}\n\n// export as AMD module / Node module / browser or worker variable\nif (typeof define === 'function' && define.amd) define(function() { return simplify; });\nelse if (typeof module !== 'undefined') {\n    module.exports = simplify;\n    module.exports.default = simplify;\n} else if (typeof self !== 'undefined') self.simplify = simplify;\nelse window.simplify = simplify;\n\n})();\n","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    var filteredBridge = filterPoints(bridge, bridge.next);\n    filterPoints(bridgeReverse, bridgeReverse.next);\n\n    // Check if input node was removed by the filtering\n    return outerNode === bridge ? filteredBridge : outerNode;\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m; // hole touches outer segment; pick leftmost endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","import * as THREE from 'three';\r\n/**\r\n * three api adapt\r\n */\r\nconst REVISION = parseInt(THREE.REVISION.replace('dev', ''));\r\n//Three does not print version information now. Output the version of three to find compatibility problems\r\nconsole.log(`maptalks.three log: current three.js version is %c${REVISION}`, 'color:red;font-size: 16px;font-weight: bold;');\r\n/**\r\n *\r\n * @param {THREE.BufferGeometry} bufferGeomertry\r\n * @param {String} key\r\n * @param {*} value\r\n */\r\nexport function addAttribute(bufferGeomertry, key, value) {\r\n    if (REVISION > 109) {\r\n        bufferGeomertry.setAttribute(key, value);\r\n    }\r\n    else {\r\n        bufferGeomertry.addAttribute(key, value);\r\n    }\r\n    return bufferGeomertry;\r\n}\r\nexport function setRaycasterLinePrecision(raycaster, linePrecision) {\r\n    if (REVISION > 113) {\r\n        raycaster.params.Line.threshold = linePrecision;\r\n    }\r\n    else {\r\n        raycaster.linePrecision = linePrecision;\r\n    }\r\n}\r\nexport function getVertexColors() {\r\n    if (THREE.VertexColors) {\r\n        return THREE.VertexColors;\r\n    }\r\n    return true;\r\n}\r\n//# sourceMappingURL=ThreeAdaptUtil.js.map","/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n */\r\nimport * as THREE from 'three';\r\nimport { addAttribute } from '../ThreeAdaptUtil';\r\nclass LineSegmentsGeometry extends THREE.InstancedBufferGeometry {\r\n    constructor() {\r\n        super();\r\n        this.isLineSegmentsGeometry = true;\r\n        this.type = 'LineSegmentsGeometry';\r\n        var positions = [-1, 2, 0, 1, 2, 0, -1, 1, 0, 1, 1, 0, -1, 0, 0, 1, 0, 0, -1, -1, 0, 1, -1, 0];\r\n        var uvs = [-1, 2, 1, 2, -1, 1, 1, 1, -1, -1, 1, -1, -1, -2, 1, -2];\r\n        var index = [0, 2, 1, 2, 3, 1, 2, 4, 3, 4, 5, 3, 4, 6, 5, 6, 7, 5];\r\n        this.setIndex(index);\r\n        addAttribute(this, 'position', new THREE.Float32BufferAttribute(positions, 3));\r\n        addAttribute(this, 'uv', new THREE.Float32BufferAttribute(uvs, 2));\r\n    }\r\n    // THREE.InstancedBufferGeometry.call(this);\r\n    // var plane = new THREE.BufferGeometry();\r\n    // this.addAttribute('position', new THREE.Float32BufferAttribute(positions, 3));\r\n    // this.addAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\r\n    applyMatrix(matrix) {\r\n        var start = this.attributes.instanceStart;\r\n        var end = this.attributes.instanceEnd;\r\n        if (start !== undefined) {\r\n            matrix.applyToBufferAttribute(start);\r\n            matrix.applyToBufferAttribute(end);\r\n            start.data.needsUpdate = true;\r\n        }\r\n        if (this.boundingBox !== null) {\r\n            this.computeBoundingBox();\r\n        }\r\n        if (this.boundingSphere !== null) {\r\n            this.computeBoundingSphere();\r\n        }\r\n        return this;\r\n    }\r\n    setPositions(array) {\r\n        var lineSegments;\r\n        if (array instanceof Float32Array) {\r\n            lineSegments = array;\r\n        }\r\n        else if (Array.isArray(array)) {\r\n            lineSegments = new Float32Array(array);\r\n        }\r\n        var instanceBuffer = new THREE.InstancedInterleavedBuffer(lineSegments, 6, 1); // xyz, xyz\r\n        addAttribute(this, 'instanceStart', new THREE.InterleavedBufferAttribute(instanceBuffer, 3, 0));\r\n        addAttribute(this, 'instanceEnd', new THREE.InterleavedBufferAttribute(instanceBuffer, 3, 3));\r\n        // this.addAttribute('instanceStart', new THREE.InterleavedBufferAttribute(instanceBuffer, 3, 0)); // xyz\r\n        // this.addAttribute('instanceEnd', new THREE.InterleavedBufferAttribute(instanceBuffer, 3, 3)); // xyz\r\n        //\r\n        this.computeBoundingBox();\r\n        this.computeBoundingSphere();\r\n        return this;\r\n    }\r\n    setColors(array) {\r\n        var colors;\r\n        if (array instanceof Float32Array) {\r\n            colors = array;\r\n        }\r\n        else if (Array.isArray(array)) {\r\n            colors = new Float32Array(array);\r\n        }\r\n        var instanceColorBuffer = new THREE.InstancedInterleavedBuffer(colors, 6, 1); // rgb, rgb\r\n        addAttribute(this, 'instanceColorStart', new THREE.InterleavedBufferAttribute(instanceColorBuffer, 3, 0));\r\n        addAttribute(this, 'instanceColorEnd', new THREE.InterleavedBufferAttribute(instanceColorBuffer, 3, 3));\r\n        // this.addAttribute('instanceColorStart', new THREE.InterleavedBufferAttribute(instanceColorBuffer, 3, 0)); // rgb\r\n        // this.addAttribute('instanceColorEnd', new THREE.InterleavedBufferAttribute(instanceColorBuffer, 3, 3)); // rgb\r\n        return this;\r\n    }\r\n    fromWireframeGeometry(geometry) {\r\n        this.setPositions(geometry.attributes.position.array);\r\n        return this;\r\n    }\r\n    fromEdgesGeometry(geometry) {\r\n        this.setPositions(geometry.attributes.position.array);\r\n        return this;\r\n    }\r\n    fromMesh(mesh) {\r\n        this.fromWireframeGeometry(new THREE.WireframeGeometry(mesh.geometry));\r\n        // set colors, maybe\r\n        return this;\r\n    }\r\n    fromLineSegements(lineSegments) {\r\n        var geometry = lineSegments.geometry;\r\n        if (geometry.isGeometry) {\r\n            this.setPositions(geometry.vertices);\r\n        }\r\n        else if (geometry.isBufferGeometry) {\r\n            this.setPositions(geometry.position.array); // assumes non-indexed\r\n        }\r\n        // set colors, maybe\r\n        return this;\r\n    }\r\n    computeBoundingBox() {\r\n        var box = new THREE.Box3();\r\n        if (this.boundingBox === null) {\r\n            this.boundingBox = new THREE.Box3();\r\n        }\r\n        var start = this.attributes.instanceStart;\r\n        var end = this.attributes.instanceEnd;\r\n        if (start !== undefined && end !== undefined) {\r\n            this.boundingBox.setFromBufferAttribute(start);\r\n            box.setFromBufferAttribute(end);\r\n            this.boundingBox.union(box);\r\n        }\r\n    }\r\n    computeBoundingSphere() {\r\n        var vector = new THREE.Vector3();\r\n        if (this.boundingSphere === null) {\r\n            this.boundingSphere = new THREE.Sphere();\r\n        }\r\n        if (this.boundingBox === null) {\r\n            this.computeBoundingBox();\r\n        }\r\n        var start = this.attributes.instanceStart;\r\n        var end = this.attributes.instanceEnd;\r\n        if (start !== undefined && end !== undefined) {\r\n            var center = this.boundingSphere.center;\r\n            this.boundingBox.getCenter(center);\r\n            var maxRadiusSq = 0;\r\n            for (var i = 0, il = start.count; i < il; i++) {\r\n                vector.fromBufferAttribute(start, i);\r\n                maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(vector));\r\n                vector.fromBufferAttribute(end, i);\r\n                maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(vector));\r\n            }\r\n            this.boundingSphere.radius = Math.sqrt(maxRadiusSq);\r\n            if (isNaN(this.boundingSphere.radius)) {\r\n                console.error('THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.', this);\r\n            }\r\n        }\r\n    }\r\n    toJSON() {\r\n        // todo\r\n    }\r\n    // clone: function () {\r\n    //     // todo\r\n    // },\r\n    // eslint-disable-next-line no-unused-vars\r\n    copy(source) {\r\n        // todo\r\n        return this;\r\n    }\r\n}\r\n;\r\nexport default LineSegmentsGeometry;\r\n//# sourceMappingURL=LineSegmentsGeometry.js.map","/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  linewidth: <float>,\r\n *  dashed: <boolean>,\r\n *  dashScale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>,\r\n *  resolution: <Vector2>, // to be set by renderer\r\n * }\r\n */\r\nimport * as THREE from 'three';\r\nconst UniformsLib = {}, ShaderLib = {};\r\nUniformsLib.line = {\r\n    linewidth: { value: 1 },\r\n    resolution: { value: new THREE.Vector2(1, 1) },\r\n    dashScale: { value: 1 },\r\n    dashSize: { value: 1 },\r\n    gapSize: { value: 1 } // todo FIX - maybe change to totalSize\r\n};\r\nShaderLib['line'] = {\r\n    uniforms: THREE.UniformsUtils.merge([\r\n        THREE.UniformsLib.common,\r\n        THREE.UniformsLib.fog,\r\n        UniformsLib.line\r\n    ]),\r\n    vertexShader: `\r\n\t\t#include <common>\r\n\t\t#include <color_pars_vertex>\r\n\t\t#include <fog_pars_vertex>\r\n\t\t#include <logdepthbuf_pars_vertex>\r\n\t\t#include <clipping_planes_pars_vertex>\r\n\r\n\t\tuniform float linewidth;\r\n\t\tuniform vec2 resolution;\r\n\r\n\t\tattribute vec3 instanceStart;\r\n\t\tattribute vec3 instanceEnd;\r\n\r\n\t\tattribute vec3 instanceColorStart;\r\n\t\tattribute vec3 instanceColorEnd;\r\n\r\n\t\tvarying vec2 vUv;\r\n\r\n\t\t#ifdef USE_DASH\r\n\r\n\t\t\tuniform float dashScale;\r\n\t\t\tattribute float instanceDistanceStart;\r\n\t\t\tattribute float instanceDistanceEnd;\r\n\t\t\tvarying float vLineDistance;\r\n\r\n\t\t#endif\r\n\r\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\r\n\r\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\r\n\r\n\t\t\t// conservative estimate of the near plane\r\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\r\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\r\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\r\n\r\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\r\n\r\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\r\n\r\n\t\t}\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\t#ifdef USE_COLOR\r\n\r\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\t#ifdef USE_DASH\r\n\r\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tfloat aspect = resolution.x / resolution.y;\r\n\r\n\t\t\tvUv = uv;\r\n\r\n\t\t\t// camera space\r\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\r\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\r\n\r\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\r\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\r\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\r\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\r\n\r\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\r\n\r\n\t\t\tif ( perspective ) {\r\n\r\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\r\n\r\n\t\t\t\t\ttrimSegment( start, end );\r\n\r\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\r\n\r\n\t\t\t\t\ttrimSegment( end, start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// clip space\r\n\t\t\tvec4 clipStart = projectionMatrix * start;\r\n\t\t\tvec4 clipEnd = projectionMatrix * end;\r\n\r\n\t\t\t// ndc space\r\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\r\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\r\n\r\n\t\t\t// direction\r\n\t\t\tvec2 dir = ndcEnd - ndcStart;\r\n\r\n\t\t\t// account for clip-space aspect ratio\r\n\t\t\tdir.x *= aspect;\r\n\t\t\tdir = normalize( dir );\r\n\r\n\t\t\t// perpendicular to dir\r\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\r\n\r\n\t\t\t// undo aspect ratio adjustment\r\n\t\t\tdir.x /= aspect;\r\n\t\t\toffset.x /= aspect;\r\n\r\n\t\t\t// sign flip\r\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\r\n\r\n\t\t\t// endcaps\r\n\t\t\tif ( position.y < 0.0 ) {\r\n\r\n\t\t\t\toffset += - dir;\r\n\r\n\t\t\t} else if ( position.y > 1.0 ) {\r\n\r\n\t\t\t\toffset += dir;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// adjust for linewidth\r\n\t\t\toffset *= linewidth;\r\n\r\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\r\n\t\t\toffset /= resolution.y;\r\n\r\n\t\t\t// select end\r\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\r\n\r\n\t\t\t// back to clip space\r\n\t\t\toffset *= clip.w;\r\n\r\n\t\t\tclip.xy += offset;\r\n\r\n\t\t\tgl_Position = clip;\r\n\r\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\r\n\r\n\t\t\t#include <logdepthbuf_vertex>\r\n\t\t\t#include <clipping_planes_vertex>\r\n\t\t\t#include <fog_vertex>\r\n\r\n\t\t}\r\n\t\t`,\r\n    fragmentShader: `\r\n\t\tuniform vec3 diffuse;\r\n\t\tuniform float opacity;\r\n\r\n\t\t#ifdef USE_DASH\r\n\r\n\t\t\tuniform float dashSize;\r\n\t\t\tuniform float gapSize;\r\n\r\n\t\t#endif\r\n\r\n\t\tvarying float vLineDistance;\r\n\r\n\t\t#include <common>\r\n\t\t#include <color_pars_fragment>\r\n\t\t#include <fog_pars_fragment>\r\n\t\t#include <logdepthbuf_pars_fragment>\r\n\t\t#include <clipping_planes_pars_fragment>\r\n\r\n\t\tvarying vec2 vUv;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\t#include <clipping_planes_fragment>\r\n\r\n\t\t\t#ifdef USE_DASH\r\n\r\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\r\n\r\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\r\n\r\n\t\t\t#endif\r\n\r\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\r\n\r\n\t\t\t\tfloat a = vUv.x;\r\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\r\n\t\t\t\tfloat len2 = a * a + b * b;\r\n\r\n\t\t\t\tif ( len2 > 1.0 ) discard;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\r\n\r\n\t\t\t#include <logdepthbuf_fragment>\r\n\t\t\t#include <color_fragment>\r\n\r\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\r\n\r\n\t\t\t#include <premultiplied_alpha_fragment>\r\n\t\t\t#include <tonemapping_fragment>\r\n\t\t\t#include <encodings_fragment>\r\n\t\t\t#include <fog_fragment>\r\n\r\n\t\t}\r\n\t\t`\r\n};\r\nclass LineMaterial extends THREE.ShaderMaterial {\r\n    constructor(parameters) {\r\n        super({\r\n            uniforms: THREE.UniformsUtils.clone(ShaderLib['line'].uniforms),\r\n            vertexShader: ShaderLib['line'].vertexShader,\r\n            fragmentShader: ShaderLib['line'].fragmentShader\r\n        });\r\n        this.dashed = true;\r\n        this.isLineMaterial = true;\r\n        this.type = 'LineMaterial';\r\n        Object.defineProperties(this, {\r\n            color: {\r\n                enumerable: true,\r\n                get: function () {\r\n                    return this.uniforms.diffuse.value;\r\n                },\r\n                set: function (value) {\r\n                    this.uniforms.diffuse.value = value;\r\n                }\r\n            },\r\n            linewidth: {\r\n                enumerable: true,\r\n                get: function () {\r\n                    return this.uniforms.linewidth.value;\r\n                },\r\n                set: function (value) {\r\n                    this.uniforms.linewidth.value = value;\r\n                }\r\n            },\r\n            dashScale: {\r\n                enumerable: true,\r\n                get: function () {\r\n                    return this.uniforms.dashScale.value;\r\n                },\r\n                set: function (value) {\r\n                    this.uniforms.dashScale.value = value;\r\n                }\r\n            },\r\n            dashSize: {\r\n                enumerable: true,\r\n                get: function () {\r\n                    return this.uniforms.dashSize.value;\r\n                },\r\n                set: function (value) {\r\n                    this.uniforms.dashSize.value = value;\r\n                }\r\n            },\r\n            gapSize: {\r\n                enumerable: true,\r\n                get: function () {\r\n                    return this.uniforms.gapSize.value;\r\n                },\r\n                set: function (value) {\r\n                    this.uniforms.gapSize.value = value;\r\n                }\r\n            },\r\n            resolution: {\r\n                enumerable: true,\r\n                get: function () {\r\n                    return this.uniforms.resolution.value;\r\n                },\r\n                set: function (value) {\r\n                    this.uniforms.resolution.value.copy(value);\r\n                }\r\n            }\r\n        });\r\n        this.setValues(parameters);\r\n    }\r\n}\r\n;\r\n// LineMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype);\r\n// LineMaterial.prototype.constructor = LineMaterial;\r\n// LineMaterial.prototype.isLineMaterial = true;\r\n// LineMaterial.prototype.copy = function (source) {\r\n// \t// THREE.ShaderMaterial.prototype.copy.call(this, source);\r\n// \tthis.color.copy(source.color);\r\n// \tthis.linewidth = source.linewidth;\r\n// \tthis.resolution = source.resolution;\r\n// \t// todo\r\n// \treturn this;\r\n// };\r\nexport default LineMaterial;\r\n//# sourceMappingURL=LineMaterial.js.map","/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n */\r\nimport * as THREE from 'three';\r\nimport LineSegmentsGeometry from './LineSegmentsGeometry';\r\nimport { addAttribute } from '../ThreeAdaptUtil';\r\nimport LineMaterial from './LineMaterial';\r\nclass LineSegments2 extends THREE.Mesh {\r\n    constructor(geometry, material) {\r\n        super(geometry, material);\r\n        this.isLineSegments2 = true;\r\n        this.type = 'LineSegments2';\r\n        this.geometry = geometry !== undefined ? geometry : new LineSegmentsGeometry();\r\n        this.material = material !== undefined ? material : new LineMaterial({ color: Math.random() * 0xffffff });\r\n    }\r\n    computeLineDistances() {\r\n        var start = new THREE.Vector3();\r\n        var end = new THREE.Vector3();\r\n        var geometry = this.geometry;\r\n        var instanceStart = geometry.attributes.instanceStart;\r\n        var instanceEnd = geometry.attributes.instanceEnd;\r\n        if (!instanceStart || !instanceEnd) {\r\n            return this;\r\n        }\r\n        var lineDistances = new Float32Array(2 * instanceStart.data.count);\r\n        for (var i = 0, j = 0, l = instanceStart.data.count; i < l; i++, j += 2) {\r\n            start.fromBufferAttribute(instanceStart, i);\r\n            end.fromBufferAttribute(instanceEnd, i);\r\n            lineDistances[j] = (j === 0) ? 0 : lineDistances[j - 1];\r\n            lineDistances[j + 1] = lineDistances[j] + start.distanceTo(end);\r\n        }\r\n        var instanceDistanceBuffer = new THREE.InstancedInterleavedBuffer(lineDistances, 2, 1); // d0, d1\r\n        addAttribute(geometry, 'instanceDistanceStart', new THREE.InterleavedBufferAttribute(instanceDistanceBuffer, 1, 0));\r\n        addAttribute(geometry, 'instanceDistanceEnd', new THREE.InterleavedBufferAttribute(instanceDistanceBuffer, 1, 1));\r\n        // geometry.addAttribute('instanceDistanceStart', new THREE.InterleavedBufferAttribute(instanceDistanceBuffer, 1, 0)); // d0\r\n        // geometry.addAttribute('instanceDistanceEnd', new THREE.InterleavedBufferAttribute(instanceDistanceBuffer, 1, 1)); // d1\r\n        return this;\r\n    }\r\n}\r\n;\r\nexport default LineSegments2;\r\n//# sourceMappingURL=LineSegments2.js.map","/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n */\r\n// import * as THREE from 'three';\r\nimport LineSegmentsGeometry from './LineSegmentsGeometry';\r\nclass LineGeometry extends LineSegmentsGeometry {\r\n    constructor() {\r\n        super();\r\n        this.isLineGeometry = true;\r\n        this.type = 'LineGeometry';\r\n    }\r\n    fromLine(line) {\r\n        var geometry = line.geometry;\r\n        if (geometry.isGeometry) {\r\n            this.setPositions(geometry.vertices);\r\n        }\r\n        else if (geometry.isBufferGeometry) {\r\n            this.setPositions(geometry.position.array); // assumes non-indexed\r\n        }\r\n        return this;\r\n    }\r\n}\r\n;\r\nexport default LineGeometry;\r\n//# sourceMappingURL=LineGeometry.js.map","/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n */\r\n// import * as THREE from 'three';\r\nimport LineSegments2 from './LineSegments2';\r\nimport LineGeometry from './LineGeometry';\r\nimport LineMaterial from './LineMaterial';\r\nclass Line2 extends LineSegments2 {\r\n    constructor(geometry, material) {\r\n        super(geometry, material);\r\n        this.isLine2 = true;\r\n        this.type = 'Line2';\r\n        this.geometry = geometry !== undefined ? geometry : new LineGeometry();\r\n        this.material = material !== undefined ? material : new LineMaterial({ color: Math.random() * 0xffffff });\r\n    }\r\n    copy(source) {\r\n        return this;\r\n    }\r\n}\r\n;\r\nexport default Line2;\r\n//# sourceMappingURL=Line2.js.map","\"use strict\";\r\nimport * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport Line2 from './util/fatline/Line2';\r\nimport { addAttribute } from './util/ThreeAdaptUtil';\r\nconst OPTIONS = {\r\n    interactive: true,\r\n    altitude: 0,\r\n    minZoom: 0,\r\n    maxZoom: 30,\r\n    asynchronous: false\r\n};\r\n/**\r\n * a Class for Eventable\r\n */\r\nfunction Base() {\r\n}\r\n// class Base {\r\n//     constructor() {\r\n//     }\r\n// }\r\n/**\r\n * EVENTS=[\r\n *  'add',\r\n *  'remove',\r\n    'mousemove',\r\n    'click',\r\n    'mousedown',\r\n    'mouseup',\r\n    'dblclick',\r\n    'contextmenu',\r\n    'touchstart',\r\n    'touchmove',\r\n    'touchend',\r\n    'mouseover',\r\n    'mouseout',\r\n    'idchange',\r\n    'propertieschange',\r\n    'show',\r\n    'hide',\r\n    'symbolchange'\r\n     empty\r\n];\r\n * This is the base class for all 3D objects\r\n *\r\n *\r\n * Its function and maptalks.geometry are as similar as possible\r\n *\r\n * maptalks.Eventable(Base) return a Class  https://github.com/maptalks/maptalks.js/blob/master/src/core/Eventable.js\r\n *\r\n */\r\nclass BaseObject extends maptalks.Eventable(Base) {\r\n    constructor(id) {\r\n        super();\r\n        this.isAdd = false;\r\n        this._mouseover = false;\r\n        this._visible = true;\r\n        this._zoomVisible = true;\r\n        this.picked = false;\r\n        this.isBaseObject = true;\r\n        if (id === undefined) {\r\n            id = maptalks.Util.GUID();\r\n        }\r\n        this.id = id;\r\n    }\r\n    addTo(layer) {\r\n        if (layer && layer.type === 'ThreeLayer') {\r\n            layer.addMesh([this]);\r\n        }\r\n        else {\r\n            console.error('layer only support maptalks.ThreeLayer');\r\n        }\r\n        return this;\r\n    }\r\n    remove() {\r\n        const layer = this.getLayer();\r\n        if (layer) {\r\n            layer.removeMesh([this]);\r\n        }\r\n        return this;\r\n    }\r\n    getObject3d() {\r\n        return this.object3d;\r\n    }\r\n    getId() {\r\n        return this.id;\r\n    }\r\n    setId(id) {\r\n        const oldId = this.getId();\r\n        this.id = id;\r\n        this._fire('idchange', {\r\n            'old': oldId,\r\n            'new': id,\r\n            'target': this\r\n        });\r\n        return this;\r\n    }\r\n    getType() {\r\n        return this.type;\r\n    }\r\n    getOptions() {\r\n        return this.options;\r\n    }\r\n    getProperties() {\r\n        return (this.options || {}).properties;\r\n    }\r\n    setProperties(property) {\r\n        const old = Object.assign({}, this.getProperties());\r\n        this.options.properties = property;\r\n        this._fire('propertieschange', {\r\n            'old': old,\r\n            'new': property,\r\n            'target': this\r\n        });\r\n        return this;\r\n    }\r\n    getLayer() {\r\n        return this.options.layer;\r\n    }\r\n    // eslint-disable-next-line consistent-return\r\n    getMap() {\r\n        const layer = this.getLayer();\r\n        if (layer) {\r\n            return layer.getMap();\r\n        }\r\n    }\r\n    // eslint-disable-next-line consistent-return\r\n    getCenter() {\r\n        const options = this.getOptions();\r\n        const { coordinate, lineString, polygon } = options;\r\n        if (coordinate) {\r\n            return coordinate instanceof maptalks.Coordinate ? coordinate : new maptalks.Coordinate(coordinate);\r\n        }\r\n        else {\r\n            const geometry = polygon || lineString;\r\n            if (geometry && geometry.getCenter) {\r\n                return geometry.getCenter();\r\n            }\r\n        }\r\n    }\r\n    getAltitude() {\r\n        return this.getOptions().altitude;\r\n    }\r\n    /**\r\n     * Different objects need to implement their own methods\r\n     * @param {*} altitude\r\n     */\r\n    setAltitude(altitude) {\r\n        if (maptalks.Util.isNumber(altitude)) {\r\n            const z = this.getLayer().distanceToVector3(altitude, altitude).x;\r\n            this.getObject3d().position.z = z;\r\n            this.options.altitude = altitude;\r\n            if (this.pickObject3d) {\r\n                this.pickObject3d.position.z = z;\r\n            }\r\n            //fix merged mesh\r\n            if (this._baseObjects && Array.isArray(this._baseObjects)) {\r\n                for (let i = 0, len = this._baseObjects.length; i < len; i++) {\r\n                    if (this._baseObjects[i]) {\r\n                        this._baseObjects[i].getObject3d().position.z = z;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    supportHeight() {\r\n        return this.getOptions().heightEnable;\r\n    }\r\n    getHeight() {\r\n        const { height } = this.getOptions();\r\n        return maptalks.Util.isNumber(height) ? height : 0;\r\n    }\r\n    setHeight(height) {\r\n        if (!maptalks.Util.isNumber(height) || this._baseObjects || !this.supportHeight()) {\r\n            return this;\r\n        }\r\n        const layer = this.getLayer();\r\n        if (!layer) {\r\n            return this;\r\n        }\r\n        const { geometry } = this.getObject3d();\r\n        if (geometry instanceof THREE.BufferGeometry) {\r\n            const { position } = geometry.attributes || {};\r\n            if (!position) {\r\n                return this;\r\n            }\r\n            const array = position.array;\r\n            let min = Infinity, max = -Infinity;\r\n            for (let i = 0, len = array.length; i < len; i += 3) {\r\n                const z = array[i + 2];\r\n                min = Math.min(z, min);\r\n                max = Math.max(z, max);\r\n            }\r\n            const middle = (min + max) / 2;\r\n            const z = layer.distanceToVector3(height, height).x;\r\n            for (let i = 0, len = array.length; i < len; i += 3) {\r\n                if (array[i + 2] > middle) {\r\n                    array[i + 2] = z;\r\n                }\r\n            }\r\n            geometry.attributes.position.needsUpdate = true;\r\n            geometry.computeBoundingBox();\r\n            geometry.computeBoundingSphere();\r\n            this.getOptions().height = height;\r\n        }\r\n        return this;\r\n    }\r\n    show() {\r\n        //  in zoom range\r\n        if (this._zoomVisible) {\r\n            this.getObject3d().visible = true;\r\n            this._fire('show');\r\n        }\r\n        this._visible = true;\r\n        return this;\r\n    }\r\n    hide() {\r\n        this.getObject3d().visible = false;\r\n        this._fire('hide');\r\n        this._visible = false;\r\n        return this;\r\n    }\r\n    isVisible() {\r\n        return (!!this.getObject3d().visible);\r\n    }\r\n    /**\r\n     *  Different objects need to implement their own methods\r\n     */\r\n    getSymbol() {\r\n        return this.getObject3d().material;\r\n    }\r\n    /**\r\n     *  Different objects need to implement their own methods\r\n     * @param {*} material\r\n     */\r\n    setSymbol(material) {\r\n        if (material && material instanceof THREE.Material) {\r\n            material.needsUpdate = true;\r\n            material.vertexColors = this.getObject3d().material.vertexColors;\r\n            const old = this.getObject3d().material.clone();\r\n            this.getObject3d().material = material;\r\n            this._fire('symbolchange', {\r\n                'old': old,\r\n                'new': material,\r\n                'target': this\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n    setInfoWindow(options) {\r\n        this.removeInfoWindow();\r\n        this.infoWindow = new maptalks.ui.InfoWindow(options);\r\n        this.infoWindow.addTo(this);\r\n        return this;\r\n    }\r\n    getInfoWindow() {\r\n        return this.infoWindow;\r\n    }\r\n    openInfoWindow(coordinate) {\r\n        coordinate = coordinate || this.getCenter();\r\n        if (!(coordinate instanceof maptalks.Coordinate)) {\r\n            coordinate = new maptalks.Coordinate(coordinate);\r\n        }\r\n        // eslint-disable-next-line no-unused-expressions\r\n        (coordinate && this.infoWindow && this.infoWindow.show(coordinate));\r\n        return this;\r\n    }\r\n    closeInfoWindow() {\r\n        // eslint-disable-next-line no-unused-expressions\r\n        (this.infoWindow && this.infoWindow.hide());\r\n        return this;\r\n    }\r\n    removeInfoWindow() {\r\n        // eslint-disable-next-line no-unused-expressions\r\n        if (this.infoWindow) {\r\n            this.infoWindow.remove();\r\n            delete this.infoWindow;\r\n        }\r\n        return this;\r\n    }\r\n    setToolTip(content, options) {\r\n        this.removeToolTip();\r\n        this.toolTip = new maptalks.ui.ToolTip(content, options);\r\n        this.toolTip.addTo(this);\r\n        return this;\r\n    }\r\n    getToolTip() {\r\n        return this.toolTip;\r\n    }\r\n    openToolTip(coordinate) {\r\n        coordinate = coordinate || this.getCenter();\r\n        if (!(coordinate instanceof maptalks.Coordinate)) {\r\n            coordinate = new maptalks.Coordinate(coordinate);\r\n        }\r\n        // eslint-disable-next-line no-unused-expressions\r\n        (coordinate && this.toolTip && this.toolTip.show(coordinate));\r\n        return this;\r\n    }\r\n    closeToolTip() {\r\n        // eslint-disable-next-line no-unused-expressions\r\n        (this.toolTip && this.toolTip.hide());\r\n        return this;\r\n    }\r\n    removeToolTip() {\r\n        // eslint-disable-next-line no-unused-expressions\r\n        if (this.toolTip) {\r\n            this.toolTip.remove();\r\n            delete this.toolTip;\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * different components should implement their own animation methods\r\n     * @param {*} options\r\n     * @param {*} cb\r\n     */\r\n    // eslint-disable-next-line no-unused-vars\r\n    animateShow(options = {}, cb) {\r\n        if (this._showPlayer) {\r\n            this._showPlayer.cancel();\r\n        }\r\n        if (maptalks.Util.isFunction(options)) {\r\n            options = {};\r\n            cb = options;\r\n        }\r\n        const duration = options['duration'] || 1000, easing = options['easing'] || 'out';\r\n        const player = this._showPlayer = maptalks.animation.Animation.animate({\r\n            'scale': 1\r\n        }, {\r\n            'duration': duration,\r\n            'easing': easing\r\n        }, frame => {\r\n            const scale = frame.styles.scale;\r\n            if (scale > 0) {\r\n                this.getObject3d().scale.z = scale;\r\n            }\r\n            if (cb) {\r\n                cb(frame, scale);\r\n            }\r\n        });\r\n        player.play();\r\n        return player;\r\n    }\r\n    getMinZoom() {\r\n        return this.getOptions().minZoom;\r\n    }\r\n    getMaxZoom() {\r\n        return this.getOptions().maxZoom;\r\n    }\r\n    isAsynchronous() {\r\n        return this.getOptions().asynchronous;\r\n    }\r\n    fire(eventType, param) {\r\n        this._fire(eventType, param);\r\n        if (this._vt && this._vt.onSelectMesh) {\r\n            this._vt.onSelectMesh(eventType, param);\r\n        }\r\n        return this;\r\n    }\r\n    config() {\r\n        return this;\r\n    }\r\n    setPickObject3d(object3d) {\r\n        this.pickObject3d = object3d;\r\n        this.pickObject3d['__parent'] = this;\r\n        return this;\r\n    }\r\n    /**\r\n     * more method support\r\n     * @param {*} options\r\n     */\r\n    /**\r\n     *\r\n     * @param {*} options\r\n     */\r\n    _initOptions(options) {\r\n        this.options = maptalks.Util.extend({}, OPTIONS, options);\r\n        return this;\r\n    }\r\n    _createMesh(geometry, material) {\r\n        this.object3d = new THREE.Mesh(geometry, material);\r\n        this.object3d['__parent'] = this;\r\n        return this;\r\n    }\r\n    _createGroup() {\r\n        this.object3d = new THREE.Group();\r\n        this.object3d['__parent'] = this;\r\n        return this;\r\n    }\r\n    _createLine(geometry, material) {\r\n        this.object3d = new THREE.Line(geometry, material);\r\n        // (this.object3d as THREE.Line).computeLineDistances();\r\n        this._computeLineDistances(geometry);\r\n        this.object3d['__parent'] = this;\r\n        return this;\r\n    }\r\n    _createLine2(geometry, material) {\r\n        this.object3d = new Line2(geometry, material);\r\n        this.object3d.computeLineDistances();\r\n        this.object3d['__parent'] = this;\r\n        return this;\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    _createPoints(geometry, material) {\r\n        //Serving for particles\r\n        this.object3d = new THREE.Points(geometry, material);\r\n        this.object3d['__parent'] = this;\r\n        return this;\r\n    }\r\n    _createLineSegments(geometry, material) {\r\n        this.object3d = new THREE.LineSegments(geometry, material);\r\n        // (this.object3d as THREE.LineSegments).computeLineDistances();\r\n        this._computeLineDistances(geometry);\r\n        this.object3d['__parent'] = this;\r\n        return this;\r\n    }\r\n    /**\r\n     * rewrite three.js computeLineDistances ,1.7 speed\r\n     * @param geometry\r\n     */\r\n    _computeLineDistances(geometry) {\r\n        const position = geometry.attributes.position.array;\r\n        const count = geometry.attributes.position.count;\r\n        const lineDistances = new Float32Array(count);\r\n        lineDistances[0] = 0;\r\n        const start = new THREE.Vector3(0, 0, 0), end = new THREE.Vector3(0, 0, 0);\r\n        for (let i = 1; i < count; i++) {\r\n            const idx = (i - 1) * 3;\r\n            start.x = position[idx];\r\n            start.y = position[idx + 1];\r\n            start.z = position[idx + 2];\r\n            const idx1 = i * 3;\r\n            end.x = position[idx1];\r\n            end.y = position[idx1 + 1];\r\n            end.z = position[idx1 + 2];\r\n            const distance = end.distanceTo(start);\r\n            lineDistances[i] = lineDistances[i - 1] + distance;\r\n        }\r\n        addAttribute(geometry, 'lineDistance', new THREE.BufferAttribute(lineDistances, 1));\r\n    }\r\n}\r\nexport default BaseObject;\r\n//# sourceMappingURL=BaseObject.js.map","import * as THREE from 'three';\r\nimport { addAttribute } from './ThreeAdaptUtil';\r\nexport function mergeBufferGeometries(geometries) {\r\n    const { position, normal, uv, indices } = mergeBufferGeometriesAttribute(geometries);\r\n    const bufferGeomertry = new THREE.BufferGeometry();\r\n    const color = new Float32Array(position.length);\r\n    color.fill(1, 0, position.length);\r\n    addAttribute(bufferGeomertry, 'color', new THREE.BufferAttribute(color, 3));\r\n    addAttribute(bufferGeomertry, 'normal', new THREE.BufferAttribute(normal, 3));\r\n    addAttribute(bufferGeomertry, 'position', new THREE.BufferAttribute(position, 3));\r\n    if (uv && uv.length) {\r\n        addAttribute(bufferGeomertry, 'uv', new THREE.BufferAttribute(uv, 2));\r\n    }\r\n    bufferGeomertry.setIndex(new THREE.BufferAttribute(indices, 1));\r\n    return bufferGeomertry;\r\n}\r\nexport function mergeBufferGeometriesAttribute(geometries) {\r\n    const attributes = {}, attributesLen = {};\r\n    for (let i = 0; i < geometries.length; ++i) {\r\n        const geometry = geometries[i];\r\n        for (const name in geometry) {\r\n            if (attributes[name] === undefined) {\r\n                attributes[name] = [];\r\n                attributesLen[name] = 0;\r\n            }\r\n            attributes[name].push(geometry[name]);\r\n            attributesLen[name] += geometry[name].length;\r\n        }\r\n    }\r\n    // merge attributes\r\n    const mergedGeometry = {};\r\n    let indexOffset = 0;\r\n    const mergedIndex = new Uint32Array(attributesLen['indices']);\r\n    for (const name in attributes) {\r\n        if (name === 'indices') {\r\n            const indices = attributes[name];\r\n            let iIndex = 0;\r\n            for (let i = 0, len = indices.length; i < len; i++) {\r\n                const index = indices[i];\r\n                for (let j = 0, len1 = index.length; j < len1; j++) {\r\n                    mergedIndex[iIndex] = index[j] + indexOffset;\r\n                    iIndex++;\r\n                    // mergedIndex.push(index[j] + indexOffset);\r\n                }\r\n                indexOffset += attributes['position'][i].length / 3;\r\n            }\r\n        }\r\n        else {\r\n            const mergedAttribute = mergeBufferAttributes(attributes[name], attributesLen[name]);\r\n            if (!mergedAttribute)\r\n                return null;\r\n            mergedGeometry[name] = mergedAttribute;\r\n        }\r\n    }\r\n    mergedGeometry['indices'] = mergedIndex;\r\n    return mergedGeometry;\r\n}\r\nfunction mergeBufferAttributes(attributes, arrayLength) {\r\n    const array = new Float32Array(arrayLength);\r\n    let offset = 0;\r\n    for (let i = 0; i < attributes.length; ++i) {\r\n        array.set(attributes[i], offset);\r\n        offset += attributes[i].length;\r\n    }\r\n    return array;\r\n}\r\nexport function generateBufferGeometry(data) {\r\n    //arraybuffer data\r\n    const { position, normal, uv, indices } = data;\r\n    // const color = new Float32Array(position.length);\r\n    // color.fill(1, 0, position.length);\r\n    const bufferGeomertry = new THREE.BufferGeometry();\r\n    // addAttribute(bufferGeomertry, 'color', new THREE.BufferAttribute(color, 3));\r\n    addAttribute(bufferGeomertry, 'normal', new THREE.BufferAttribute(new Float32Array(normal), 3));\r\n    addAttribute(bufferGeomertry, 'position', new THREE.BufferAttribute(new Float32Array(position), 3));\r\n    addAttribute(bufferGeomertry, 'uv', new THREE.BufferAttribute(new Float32Array(uv), 2));\r\n    bufferGeomertry.setIndex(new THREE.BufferAttribute(new Uint32Array(indices), 1));\r\n    return bufferGeomertry;\r\n}\r\nexport function generatePickBufferGeometry(geometry) {\r\n    const bufferGeomertry = new THREE.BufferGeometry();\r\n    addAttribute(bufferGeomertry, 'normal', geometry.getAttribute('normal'));\r\n    addAttribute(bufferGeomertry, 'position', geometry.getAttribute('position').clone());\r\n    bufferGeomertry.setIndex(geometry.getIndex());\r\n    return bufferGeomertry;\r\n}\r\nlet defaultBufferGeometry;\r\nexport function getDefaultBufferGeometry() {\r\n    if (!defaultBufferGeometry) {\r\n        const SIZE = 0.000001;\r\n        defaultBufferGeometry = new THREE.BoxBufferGeometry(SIZE, SIZE, SIZE);\r\n    }\r\n    return defaultBufferGeometry;\r\n}\r\ngetDefaultBufferGeometry();\r\n//# sourceMappingURL=MergeGeometryUtil.js.map","import * as THREE from 'three';\r\nimport { mergeBufferGeometries } from './MergeGeometryUtil';\r\nimport { addAttribute } from './ThreeAdaptUtil';\r\nconst barGeometryCache = {};\r\nconst defaultBoxGeometry = new THREE.BoxBufferGeometry(1, 1, 1);\r\ndefaultBoxGeometry.translate(0, 0, 0.5);\r\nconst topColor = new THREE.Color('#fff'), bottomColor = new THREE.Color('#fff');\r\nfunction getDefaultCylinderBufferGeometry(radialSegments = 6) {\r\n    if (!barGeometryCache[radialSegments]) {\r\n        const geometry = new THREE.CylinderBufferGeometry(1, 1, 1, radialSegments, 1);\r\n        geometry.rotateX(Math.PI / 2);\r\n        geometry.translate(0, 0, 0.5);\r\n        geometry.rotateZ(Math.PI / 6);\r\n        barGeometryCache[radialSegments] = geometry;\r\n    }\r\n    return barGeometryCache[radialSegments];\r\n}\r\n/**\r\n * Reuse Geometry   , Meter as unit\r\n * @param {*} property\r\n */\r\n// eslint-disable-next-line no-unused-vars\r\nexport function getGeometry(property) {\r\n    const { height, radialSegments, radius } = property;\r\n    const geometry = getDefaultCylinderBufferGeometry(radialSegments).clone();\r\n    geometry.scale(radius, radius, height);\r\n    return geometry;\r\n}\r\n/**\r\n * init Colors\r\n * @param {*} geometry\r\n * @param {*} color\r\n * @param {*} _topColor\r\n */\r\nexport function initVertexColors(geometry, color, _topColor, key = 'y', v = 0) {\r\n    let offset = 0;\r\n    if (key === 'y') {\r\n        offset = 1;\r\n    }\r\n    else if (key === 'z') {\r\n        offset = 2;\r\n    }\r\n    const position = geometry.attributes.position.array;\r\n    const len = position.length;\r\n    bottomColor.setStyle(color);\r\n    topColor.setStyle(_topColor);\r\n    const colors = new Float32Array(len);\r\n    for (let i = 0; i < len; i += 3) {\r\n        const y = position[i + offset];\r\n        if (y > v) {\r\n            colors[i] = topColor.r;\r\n            colors[i + 1] = topColor.g;\r\n            colors[i + 2] = topColor.b;\r\n            // colors.push(topColor.r, topColor.g, topColor.b);\r\n        }\r\n        else {\r\n            colors[i] = bottomColor.r;\r\n            colors[i + 1] = bottomColor.g;\r\n            colors[i + 2] = bottomColor.b;\r\n            // colors.push(bottomColor.r, bottomColor.g, bottomColor.b);\r\n        }\r\n    }\r\n    addAttribute(geometry, 'color', new THREE.BufferAttribute(colors, 3, true));\r\n    return colors;\r\n}\r\nexport function mergeBarGeometry(geometries) {\r\n    const attributes = [];\r\n    const len = geometries.length;\r\n    let colorLen = 0;\r\n    for (let i = 0; i < len; i++) {\r\n        const { color } = geometries[i].attributes;\r\n        if (color) {\r\n            colorLen += color.array.length;\r\n        }\r\n    }\r\n    const colors = new Float32Array(colorLen);\r\n    let offset = 0;\r\n    for (let i = 0, len = geometries.length; i < len; i++) {\r\n        const { color, normal, position, uv } = geometries[i].attributes;\r\n        const index = geometries[i].index;\r\n        if (color) {\r\n            colors.set(color.array, offset);\r\n            offset += color.array.length;\r\n            // for (let j = 0, len1 = color.array.length; j < len1; j++) {\r\n            //     colors.push(color.array[j]);\r\n            // }\r\n        }\r\n        attributes.push({\r\n            // color: color.array,\r\n            normal: normal.array,\r\n            uv: uv.array,\r\n            position: position.array,\r\n            indices: index.array\r\n        });\r\n    }\r\n    const bufferGeometry = mergeBufferGeometries(attributes);\r\n    if (colors.length) {\r\n        addAttribute(bufferGeometry, 'color', new THREE.BufferAttribute(colors, 3, true));\r\n        // for (let i = 0, len = colors.length; i < len; i++) {\r\n        //     bufferGeometry.attributes.color.array[i] = colors[i];\r\n        // }\r\n    }\r\n    for (let i = 0, len = geometries.length; i < len; i++) {\r\n        geometries[i].dispose();\r\n    }\r\n    return bufferGeometry;\r\n}\r\nexport function getDefaultBoxGeometry() {\r\n    return defaultBoxGeometry;\r\n}\r\n//# sourceMappingURL=BarUtil.js.map","import * as maptalks from 'maptalks';\r\nimport BaseObject from './BaseObject';\r\nimport { getGeometry, initVertexColors } from './util/BarUtil';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nconst OPTIONS = {\r\n    radius: 10,\r\n    height: 100,\r\n    radialSegments: 6,\r\n    altitude: 0,\r\n    topColor: '',\r\n    bottomColor: '#2d2f61',\r\n    heightEnable: true\r\n};\r\n/**\r\n *\r\n */\r\nclass Bar extends BaseObject {\r\n    constructor(coordinate, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, coordinate });\r\n        super();\r\n        this._initOptions(options);\r\n        const { height, radius, topColor, bottomColor, altitude } = options;\r\n        options.height = layer.distanceToVector3(height, height).x;\r\n        options.radius = layer.distanceToVector3(radius, radius).x;\r\n        // Meter as unit\r\n        options['_radius'] = this.options['radius'];\r\n        options['_height'] = this.options['height'];\r\n        const geometry = getGeometry(options);\r\n        if (topColor) {\r\n            initVertexColors(geometry, bottomColor, topColor, 'z', options.height / 2);\r\n            material.vertexColors = getVertexColors();\r\n        }\r\n        this._createMesh(geometry, material);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const position = layer.coordinateToVector3(coordinate, z);\r\n        this.getObject3d().position.copy(position);\r\n        this.type = 'Bar';\r\n    }\r\n}\r\nexport default Bar;\r\n//# sourceMappingURL=Bar.js.map","/* eslint-disable indent */\r\nimport * as maptalks from 'maptalks';\r\nconst TYPES = ['Point', 'MultiPoint', 'LineString', 'MultiLineString', 'Polygon', 'MultiPolygon'];\r\nfunction getGeoJSONType(feature) {\r\n    return feature.geometry ? feature.geometry.type : null;\r\n}\r\nexport function isGeoJSON(feature) {\r\n    const type = getGeoJSONType(feature);\r\n    if (type) {\r\n        for (let i = 0, len = TYPES.length; i < len; i++) {\r\n            if (TYPES[i] === type) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function isGeoJSONPolygon(feature) {\r\n    const type = getGeoJSONType(feature);\r\n    if (type && (type === TYPES[4] || type === TYPES[5])) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function isGeoJSONLine(feature) {\r\n    const type = getGeoJSONType(feature);\r\n    if (type && (type === TYPES[2] || type === TYPES[3])) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function isGeoJSONPoint(feature) {\r\n    const type = getGeoJSONType(feature);\r\n    if (type && (type === TYPES[0] || type === TYPES[1])) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function isGeoJSONMulti(feature) {\r\n    const type = getGeoJSONType(feature);\r\n    if (type) {\r\n        if (type.indexOf('Multi') > -1) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function getGeoJSONCoordinates(feature) {\r\n    return feature.geometry ? feature.geometry.coordinates : [];\r\n}\r\nexport function getGeoJSONCenter(feature, out) {\r\n    const type = getGeoJSONType(feature);\r\n    if (!type || !feature.geometry) {\r\n        return null;\r\n    }\r\n    const geometry = feature.geometry;\r\n    const coordinates = geometry.coordinates;\r\n    if (!coordinates) {\r\n        return null;\r\n    }\r\n    // const coords: Array<Array<number>> = [];\r\n    let sumX = 0, sumY = 0, coordLen = 0;\r\n    switch (type) {\r\n        case 'Point': {\r\n            sumX = coordinates[0];\r\n            sumY = coordinates[1];\r\n            // coords.push(coordinates as Array<number>);\r\n            coordLen++;\r\n            break;\r\n        }\r\n        case 'MultiPoint':\r\n        case 'LineString': {\r\n            for (let i = 0, len = coordinates.length; i < len; i++) {\r\n                sumX += coordinates[i][0];\r\n                sumY += coordinates[i][1];\r\n                coordLen++;\r\n                // coords.push(coordinates[i] as Array<number>);\r\n            }\r\n            break;\r\n        }\r\n        case 'MultiLineString':\r\n        case 'Polygon': {\r\n            for (let i = 0, len = coordinates.length; i < len; i++) {\r\n                for (let j = 0, len1 = coordinates[i].length; j < len1; j++) {\r\n                    // coords.push((coordinates[i] as Array<Array<number>>)[j]);\r\n                    sumX += coordinates[i][j][0];\r\n                    sumY += coordinates[i][j][1];\r\n                    coordLen++;\r\n                }\r\n            }\r\n            break;\r\n        }\r\n        case 'MultiPolygon': {\r\n            for (let i = 0, len = coordinates.length; i < len; i++) {\r\n                for (let j = 0, len1 = coordinates[i].length; j < len1; j++) {\r\n                    for (let m = 0, len2 = coordinates[i][j].length; m < len2; m++) {\r\n                        // coords.push(((coordinates[i] as Array<Array<Array<number>>>)[j])[m]);\r\n                        sumX += coordinates[i][j][m][0];\r\n                        sumY += coordinates[i][j][m][1];\r\n                        coordLen++;\r\n                    }\r\n                }\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    const x = sumX / coordLen, y = sumY / coordLen;\r\n    if (out) {\r\n        out.x = x;\r\n        out.y = y;\r\n        return out;\r\n    }\r\n    return new maptalks.Coordinate(x, y);\r\n}\r\nexport function spliteGeoJSONMulti(feature) {\r\n    const type = getGeoJSONType(feature);\r\n    if (!type || !feature.geometry) {\r\n        return null;\r\n    }\r\n    const geometry = feature.geometry;\r\n    const properties = feature.properties || {};\r\n    const coordinates = geometry.coordinates;\r\n    if (!coordinates) {\r\n        return null;\r\n    }\r\n    const features = [];\r\n    let fType;\r\n    switch (type) {\r\n        case 'MultiPoint': {\r\n            fType = 'Point';\r\n            break;\r\n        }\r\n        case 'MultiLineString': {\r\n            fType = 'LineString';\r\n            break;\r\n        }\r\n        case 'MultiPolygon': {\r\n            fType = 'Polygon';\r\n            break;\r\n        }\r\n    }\r\n    if (fType) {\r\n        for (let i = 0, len = coordinates.length; i < len; i++) {\r\n            features.push({\r\n                type: 'Feature',\r\n                geometry: {\r\n                    type: fType,\r\n                    coordinates: coordinates[i]\r\n                },\r\n                properties\r\n            });\r\n        }\r\n    }\r\n    else {\r\n        features.push(feature);\r\n    }\r\n    return features;\r\n}\r\n//# sourceMappingURL=GeoJSONUtil.js.map","/*\r\n (c) 2017, Vladimir Agafonkin\r\n Simplify.js, a high-performance JS polyline simplification library\r\n mourner.github.io/simplify-js\r\n*/\r\n\r\n// to suit your point format, run search/replace for '.x' and '.y';\r\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\r\n\r\n// square distance between 2 points\r\nfunction getSqDist(p1, p2) {\r\n\r\n    var dx = p1[0] - p2[0],\r\n        dy = p1[1] - p2[1];\r\n\r\n    return dx * dx + dy * dy;\r\n}\r\n\r\n// square distance from a point to a segment\r\nfunction getSqSegDist(p, p1, p2) {\r\n\r\n    var x = p1[0],\r\n        y = p1[1],\r\n        dx = p2[0] - x,\r\n        dy = p2[1] - y;\r\n\r\n    if (dx !== 0 || dy !== 0) {\r\n\r\n        var t = ((p[0] - x) * dx + (p[1] - y) * dy) / (dx * dx + dy * dy);\r\n\r\n        if (t > 1) {\r\n            x = p2[0];\r\n            y = p2[1];\r\n\r\n        } else if (t > 0) {\r\n            x += dx * t;\r\n            y += dy * t;\r\n        }\r\n    }\r\n\r\n    dx = p[0] - x;\r\n    dy = p[1] - y;\r\n\r\n    return dx * dx + dy * dy;\r\n}\r\n// rest of the code doesn't care about point format\r\n\r\n// basic distance-based simplification\r\nfunction simplifyRadialDist(points, sqTolerance) {\r\n\r\n    var prevPoint = points[0],\r\n        newPoints = [prevPoint],\r\n        point;\r\n\r\n    for (var i = 1, len = points.length; i < len; i++) {\r\n        point = points[i];\r\n\r\n        if (getSqDist(point, prevPoint) > sqTolerance) {\r\n            newPoints.push(point);\r\n            prevPoint = point;\r\n        }\r\n    }\r\n\r\n    if (prevPoint !== point) newPoints.push(point);\r\n\r\n    return newPoints;\r\n}\r\n\r\nfunction simplifyDPStep(points, first, last, sqTolerance, simplified) {\r\n    var maxSqDist = sqTolerance,\r\n        index;\r\n\r\n    for (var i = first + 1; i < last; i++) {\r\n        var sqDist = getSqSegDist(points[i], points[first], points[last]);\r\n\r\n        if (sqDist > maxSqDist) {\r\n            index = i;\r\n            maxSqDist = sqDist;\r\n        }\r\n    }\r\n\r\n    if (maxSqDist > sqTolerance) {\r\n        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\r\n        simplified.push(points[index]);\r\n        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\r\n    }\r\n}\r\n\r\n// simplification using Ramer-Douglas-Peucker algorithm\r\nfunction simplifyDouglasPeucker(points, sqTolerance) {\r\n    var last = points.length - 1;\r\n\r\n    var simplified = [points[0]];\r\n    simplifyDPStep(points, 0, last, sqTolerance, simplified);\r\n    simplified.push(points[last]);\r\n\r\n    return simplified;\r\n}\r\n\r\n// both algorithms combined for awesome performance\r\nfunction simplify(points, tolerance, highestQuality) {\r\n\r\n    if (points.length <= 2) return points;\r\n\r\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\r\n\r\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\r\n    points = simplifyDouglasPeucker(points, sqTolerance);\r\n\r\n    return points;\r\n}\r\nexport default simplify;","export function dot(v1, v2) {\r\n    return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2];\r\n}\r\nexport function v2Dot(v1, v2) {\r\n    return v1[0] * v2[0] + v1[1] * v2[1];\r\n}\r\n\r\nexport function normalize(out, v) {\r\n    const x = v[0];\r\n    const y = v[1];\r\n    const z = v[2];\r\n    const d = Math.sqrt(x * x + y * y + z * z);\r\n    out[0] = x / d;\r\n    out[1] = y / d;\r\n    out[2] = z / d;\r\n    return out;\r\n}\r\n\r\nexport function v2Normalize(out, v) {\r\n    const x = v[0];\r\n    const y = v[1];\r\n    const d = Math.sqrt(x * x + y * y);\r\n    out[0] = x / d;\r\n    out[1] = y / d;\r\n    return out;\r\n}\r\n\r\nexport function scale(out, v, s) {\r\n    out[0] = v[0] * s;\r\n    out[1] = v[1] * s;\r\n    out[2] = v[2] * s;\r\n    return out;\r\n}\r\n\r\nexport function mul(out, v1, v2) {\r\n    out[0] = v1[0] * v2[0];\r\n    out[1] = v1[1] * v2[1];\r\n    out[2] = v1[2] * v2[2];\r\n    return out;\r\n}\r\n\r\nexport function scaleAndAdd(out, v1, v2, s) {\r\n    out[0] = v1[0] + v2[0] * s;\r\n    out[1] = v1[1] + v2[1] * s;\r\n    out[2] = v1[2] + v2[2] * s;\r\n    return out;\r\n}\r\n\r\nexport function add(out, v1, v2) {\r\n    out[0] = v1[0] + v2[0];\r\n    out[1] = v1[1] + v2[1];\r\n    out[2] = v1[2] + v2[2];\r\n    return out;\r\n}\r\n\r\nexport function v2Add(out, v1, v2) {\r\n    out[0] = v1[0] + v2[0];\r\n    out[1] = v1[1] + v2[1];\r\n    return out;\r\n}\r\n\r\nexport function sub(out, v1, v2) {\r\n    out[0] = v1[0] - v2[0];\r\n    out[1] = v1[1] - v2[1];\r\n    out[2] = v1[2] - v2[2];\r\n    return out;\r\n}\r\n\r\nexport function v2Sub(out, v1, v2) {\r\n    out[0] = v1[0] - v2[0];\r\n    out[1] = v1[1] - v2[1];\r\n    return out;\r\n}\r\n\r\nexport function v3Sub(out, v1, v2) {\r\n    out[0] = v1[0] - v2[0];\r\n    out[1] = v1[1] - v2[1];\r\n    out[2] = v1[2] - v2[2];\r\n    return out;\r\n}\r\n\r\nexport function v3Normalize(out, v) {\r\n    const x = v[0];\r\n    const y = v[1];\r\n    const z = v[2];\r\n    const d = Math.sqrt(x * x + y * y + z * z);\r\n    out[0] = x / d;\r\n    out[1] = y / d;\r\n    out[2] = z / d;\r\n    return out;\r\n}\r\n\r\nexport function v3Cross(out, v1, v2) {\r\n    var ax = v1[0], ay = v1[1], az = v1[2],\r\n        bx = v2[0], by = v2[1], bz = v2[2];\r\n\r\n    out[0] = ay * bz - az * by;\r\n    out[1] = az * bx - ax * bz;\r\n    out[2] = ax * by - ay * bx;\r\n    return out;\r\n}\r\n\r\nconst rel = [];\r\n// start and end must be normalized\r\nexport function slerp(out, start, end, t) {\r\n    // https://keithmaggio.wordpress.com/2011/02/15/math-magician-lerp-slerp-and-nlerp/\r\n    const cosT = dot(start, end);\r\n    const theta = Math.acos(cosT) * t;\r\n\r\n    scaleAndAdd(rel, end, start, -cosT);\r\n    normalize(rel, rel);// start and rel Orthonormal basis\r\n\r\n    scale(out, start, Math.cos(theta));\r\n    scaleAndAdd(out, out, rel, Math.sin(theta));\r\n\r\n    return out;\r\n}\r\n\r\nexport function lineIntersection(x1, y1, x2, y2, x3, y3, x4, y4, out, writeOffset) {\r\n    const dx1 = x2 - x1;\r\n    const dx2 = x4 - x3;\r\n    const dy1 = y2 - y1;\r\n    const dy2 = y4 - y3;\r\n\r\n    const cross = dy2 * dx1 - dx2 * dy1;\r\n    const tmp1 = y1 - y3;\r\n    const tmp2 = x1 - x3;\r\n    const t1 = (dx2 * tmp1 - dy2 * tmp2) / cross;\r\n    // const t2 = (dx1 * tmp1 - dy1 * tmp2) / cross;\r\n\r\n    if (out) {\r\n        writeOffset = writeOffset || 0;\r\n        out[writeOffset] = x1 + t1 * (x2 - x1);\r\n        out[writeOffset + 1] = y1 + t1 * (y2 - y1);\r\n    }\r\n\r\n    return t1;\r\n}\r\n\r\nexport function area(points, start, end) {\r\n    // Signed polygon area\r\n    const n = end - start;\r\n    if (n < 3) {\r\n        return 0;\r\n    }\r\n    let area = 0;\r\n    for (let i = (end - 1) * 2, j = start * 2; j < end * 2;) {\r\n        const x0 = points[i];\r\n        const y0 = points[i + 1];\r\n        const x1 = points[j];\r\n        const y1 = points[j + 1];\r\n        i = j;\r\n        j += 2;\r\n        area += x0 * y1 - x1 * y0;\r\n    }\r\n\r\n    return area;\r\n}\r\n\r\n\r\nexport function triangleArea(x0, y0, x1, y1, x2, y2) {\r\n    return (x1 - x0) * (y2 - y1) - (y1 - y0) * (x2 - x1);\r\n}","// TODO fitRect x, y are negative?\r\n// TODO Extrude dimensions\r\n// TODO bevel=\"top\"|\"bottom\"\r\n// TODO Not add top and bottom vertices if area is 0\r\n\r\nimport earcut from 'earcut';\r\nimport doSimplify from './simplify';\r\nimport {\r\n    slerp, v2Normalize, v2Dot, v2Add, area,\r\n    v3Normalize, v3Sub, v3Cross, lineIntersection\r\n} from './math';\r\n\r\nexport function triangulate(vertices, holes, dimensions = 2) {\r\n    return earcut(vertices, holes, dimensions);\r\n};\r\n\r\nexport function flatten(data) {\r\n    return earcut.flatten(data);\r\n}\r\n\r\nconst v1 = [];\r\nconst v2 = [];\r\nconst v = [];\r\n\r\nfunction innerOffsetPolygon(\r\n    vertices, out, start, end, outStart, offset, miterLimit, close,\r\n    removeIntersections,\r\n    // offsetLines\r\n) {\r\n    const checkMiterLimit = miterLimit != null;\r\n    let cursor = outStart;\r\n    let indicesMap = null;\r\n    if (checkMiterLimit) {\r\n        indicesMap = new Uint32Array(end - start);\r\n    }\r\n    let prevOffsetX;\r\n    let prevOffsetY;\r\n    let prevCursor;\r\n    let tmpIntersection = [];\r\n\r\n    for (let i = start; i < end; i++) {\r\n        const nextIdx = i === end - 1 ? start : i + 1;\r\n        const prevIdx = i === start ? end - 1 : i - 1;\r\n        const x1 = vertices[prevIdx * 2];\r\n        const y1 = vertices[prevIdx * 2 + 1];\r\n        const x2 = vertices[i * 2];\r\n        const y2 = vertices[i * 2 + 1];\r\n        const x3 = vertices[nextIdx * 2];\r\n        const y3 = vertices[nextIdx * 2 + 1];\r\n\r\n        v1[0] = x2 - x1;\r\n        v1[1] = y2 - y1;\r\n        v2[0] = x3 - x2;\r\n        v2[1] = y3 - y2;\r\n\r\n        v2Normalize(v1, v1);\r\n        v2Normalize(v2, v2);\r\n\r\n        checkMiterLimit && (indicesMap[i] = cursor);\r\n\r\n        let needCheckIntersection = false;\r\n        let offsetX;\r\n        let offsetY;\r\n        if (!close && i === start) {\r\n            v[0] = v2[1];\r\n            v[1] = -v2[0];\r\n            v2Normalize(v, v);\r\n            prevOffsetX = out[cursor * 2] = x2 + v[0] * offset;\r\n            prevOffsetY = out[cursor * 2 + 1] = y2 + v[1] * offset;\r\n            prevCursor = cursor;\r\n\r\n            // offsetLines && offsetLines.push([x2, y2, prevOffsetX, prevOffsetY, cursor])\r\n            cursor++;\r\n        }\r\n        else if (!close && i === end - 1) {\r\n            v[0] = v1[1];\r\n            v[1] = -v1[0];\r\n            v2Normalize(v, v);\r\n\r\n            offsetX = x2 + v[0] * offset;\r\n            offsetY = y2 + v[1] * offset;\r\n\r\n            needCheckIntersection = true;\r\n        }\r\n        else {\r\n            // PENDING Why using sub will lost the direction info.\r\n            v2Add(v, v2, v1);\r\n            const tmp = v[1];\r\n            v[1] = -v[0];\r\n            v[0] = tmp;\r\n\r\n            v2Normalize(v, v);\r\n\r\n            const cosA = v2Dot(v, v2);\r\n            const sinA = Math.sqrt(1 - cosA * cosA);\r\n            // PENDING\r\n            // Make sure it's offset lines instead of vertices.\r\n            const miter = offset * Math.min(10, 1 / sinA);\r\n\r\n            const isCovex = offset * cosA < 0;\r\n\r\n            if (checkMiterLimit && (1 / sinA) > miterLimit && isCovex) {\r\n                // No need to check line intersection on the outline.\r\n                const mx = x2 + v[0] * offset;\r\n                const my = y2 + v[1] * offset;\r\n                const halfA = Math.acos(sinA) / 2;\r\n                const dist = Math.tan(halfA) * Math.abs(offset);\r\n                out[cursor * 2] = mx + v[1] * dist;\r\n                out[cursor * 2 + 1] = my - v[0] * dist;\r\n                cursor++;\r\n                out[cursor * 2] = mx - v[1] * dist;\r\n                out[cursor * 2 + 1] = my + v[0] * dist;\r\n                cursor++;\r\n            }\r\n            else {\r\n                offsetX = x2 + v[0] * miter;\r\n                offsetY = y2 + v[1] * miter;\r\n                needCheckIntersection = true;\r\n            }\r\n\r\n            if (needCheckIntersection) {\r\n                // TODO Handle with whole.\r\n                if (removeIntersections && prevOffsetX != null) {\r\n                    // Greedy, only check with previous offset line\r\n                    // PENDING: Is it necessary to check with other lines?\r\n                    const t = lineIntersection(\r\n                        x1, y1, prevOffsetX, prevOffsetY,\r\n                        x2, y2, offsetX, offsetY, tmpIntersection, 0\r\n                    );\r\n                    // Use a eplison\r\n                    if (t >= -1e-2 && t <= 1 + 1e-2) {\r\n                        // Update previous offset points.\r\n                        out[prevCursor * 2] = offsetX = tmpIntersection[0];\r\n                        out[prevCursor * 2 + 1] = offsetY = tmpIntersection[1];\r\n                    }\r\n                }\r\n\r\n                prevOffsetX = out[cursor * 2] = offsetX;\r\n                prevOffsetY = out[cursor * 2 + 1] = offsetY;\r\n                prevCursor = cursor;\r\n\r\n                // offsetLines && offsetLines.push([x2, y2, offsetX, offsetY, cursor])\r\n\r\n                cursor++;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    return indicesMap;\r\n}\r\n\r\n\r\n\r\nfunction innerOffsetPolyline(\r\n    vertices, out, start, end, outStart, offset, miterLimit, close\r\n) {\r\n    const checkMiterLimit = miterLimit != null;\r\n    let outOff = outStart;\r\n    let indicesMap = null;\r\n    if (checkMiterLimit) {\r\n        indicesMap = new Uint32Array(end - start);\r\n    }\r\n    for (let i = start; i < end; i++) {\r\n        const nextIdx = i === end - 1 ? start : i + 1;\r\n        const prevIdx = i === start ? end - 1 : i - 1;\r\n        const x1 = vertices[prevIdx * 2];\r\n        const y1 = vertices[prevIdx * 2 + 1];\r\n        const x2 = vertices[i * 2];\r\n        const y2 = vertices[i * 2 + 1];\r\n        const x3 = vertices[nextIdx * 2];\r\n        const y3 = vertices[nextIdx * 2 + 1];\r\n\r\n        v1[0] = x2 - x1;\r\n        v1[1] = y2 - y1;\r\n        v2[0] = x3 - x2;\r\n        v2[1] = y3 - y2;\r\n\r\n        v2Normalize(v1, v1);\r\n        v2Normalize(v2, v2);\r\n\r\n        checkMiterLimit && (indicesMap[i] = outOff);\r\n        if (!close && i === start) {\r\n            v[0] = v2[1];\r\n            v[1] = -v2[0];\r\n            v2Normalize(v, v);\r\n            out[outOff * 2] = x2 + v[0] * offset;\r\n            out[outOff * 2 + 1] = y2 + v[1] * offset;\r\n            outOff++;\r\n        }\r\n        else if (!close && i === end - 1) {\r\n            v[0] = v1[1];\r\n            v[1] = -v1[0];\r\n            v2Normalize(v, v);\r\n            out[outOff * 2] = x2 + v[0] * offset;\r\n            out[outOff * 2 + 1] = y2 + v[1] * offset;\r\n            outOff++;\r\n        }\r\n        else {\r\n            // PENDING Why using sub will lost the direction info.\r\n            v2Add(v, v2, v1);\r\n            const tmp = v[1];\r\n            v[1] = -v[0];\r\n            v[0] = tmp;\r\n\r\n            v2Normalize(v, v);\r\n\r\n            const cosA = v2Dot(v, v2);\r\n            const sinA = Math.sqrt(1 - cosA * cosA);\r\n            // PENDING\r\n            const miter = offset * Math.min(10, 1 / sinA);\r\n\r\n            const isCovex = offset * cosA < 0;\r\n\r\n            if (checkMiterLimit && (1 / sinA) > miterLimit && isCovex) {\r\n                const mx = x2 + v[0] * offset;\r\n                const my = y2 + v[1] * offset;\r\n                const halfA = Math.acos(sinA) / 2;\r\n                const dist = Math.tan(halfA) * Math.abs(offset);\r\n                out[outOff * 2] = mx + v[1] * dist;\r\n                out[outOff * 2 + 1] = my - v[0] * dist;\r\n                outOff++;\r\n                out[outOff * 2] = mx - v[1] * dist;\r\n                out[outOff * 2 + 1] = my + v[0] * dist;\r\n                outOff++;\r\n            }\r\n            else {\r\n                out[outOff * 2] = x2 + v[0] * miter;\r\n                out[outOff * 2 + 1] = y2 + v[1] * miter;\r\n                outOff++;\r\n            }\r\n        }\r\n    }\r\n\r\n    return indicesMap;\r\n}\r\n\r\nexport function offsetPolygon(vertices, holes, offset, miterLimit, close) {\r\n    const offsetVertices = miterLimit != null ? [] : new Float32Array(vertices.length);\r\n    const exteriorSize = (holes && holes.length) ? holes[0] : vertices.length / 2;\r\n\r\n    const offsetLines = [];\r\n\r\n    innerOffsetPolygon(\r\n        vertices, offsetVertices, 0, exteriorSize, 0, offset, miterLimit, close, true\r\n    );\r\n\r\n    if (holes) {\r\n        for (let i = 0; i < holes.length; i++) {\r\n            const start = holes[i];\r\n            const end = holes[i + 1] || vertices.length / 2;\r\n            innerOffsetPolygon(\r\n                vertices, offsetVertices, start, end,\r\n                miterLimit != null ? offsetVertices.length / 2 : start,\r\n                offset, miterLimit, close, false\r\n            );\r\n        }\r\n    }\r\n\r\n    // TODO holes\r\n    // Remove intersections of offseted polygon\r\n    // let len = offsetLines.length;\r\n    // let tmpIntersection = [];\r\n    // for (let i = 0; i < len; i++) {\r\n    //     const line1 = offsetLines[i];\r\n    //     for (let k = i + 1; k < len; k++) {\r\n    //         const line2 = offsetLines[k];\r\n\r\n    //         const t = lineIntersection(\r\n    //             line1[0], line1[1], line1[2], line1[3],\r\n    //             line2[0], line2[1], line2[2], line2[3], tmpIntersection, 0\r\n    //         );\r\n    //         // Use a eplison\r\n    //         if (t >= -1e-2 && t <= 1 + 1e-2) {\r\n    //             const cursor1 = line1[4] * 2;\r\n    //             const cursor2 = line2[4] * 2;\r\n    //             // Update\r\n    //             offsetVertices[cursor1] = offsetVertices[cursor2] = line1[2] = line2[2] = tmpIntersection[0];\r\n    //             offsetVertices[cursor1 + 1] = offsetVertices[cursor2 + 1] = line1[3] = line2[3]= tmpIntersection[1];\r\n    //         }\r\n    //     }\r\n    // }\r\n    return offsetVertices;\r\n}\r\n\r\nfunction reversePoints(points, stride, start, end) {\r\n    for (let i = 0; i < Math.floor((end - start) / 2); i++) {\r\n        for (let j = 0; j < stride; j++) {\r\n            const a = (i + start) * stride + j;\r\n            const b = (end - i - 1) * stride + j;\r\n            const tmp = points[a];\r\n            points[a] = points[b];\r\n            points[b] = tmp;\r\n        }\r\n    }\r\n\r\n    return points;\r\n}\r\n\r\nfunction convertToClockwise(vertices, holes) {\r\n    let polygonVertexCount = vertices.length / 2;\r\n    let start = 0;\r\n    let end = holes && holes.length ? holes[0] : polygonVertexCount;\r\n    if (area(vertices, start, end) > 0) {\r\n        reversePoints(vertices, 2, start, end);\r\n    }\r\n    for (let h = 1; h < (holes ? holes.length : 0) + 1; h++) {\r\n        start = holes[h - 1];\r\n        end = holes[h] || polygonVertexCount;\r\n        if (area(vertices, start, end) < 0) {\r\n            reversePoints(vertices, 2, start, end);\r\n        }\r\n    }\r\n}\r\n\r\nfunction normalizeOpts(opts) {\r\n\r\n    opts.depth = opts.depth || 1;\r\n    opts.bevelSize = opts.bevelSize || 0;\r\n    opts.bevelSegments = opts.bevelSegments == null ? 2 : opts.bevelSegments;\r\n    opts.smoothBevel = opts.smoothBevel || false;\r\n    opts.simplify = opts.simplify || 0;\r\n\r\n    if (opts.smoothSide == null) {\r\n        opts.smoothSide = 'auto'\r\n    }\r\n    if (opts.smoothSideThreshold == null) {\r\n        opts.smoothSideThreshold = 0.9\r\n    }\r\n\r\n    // Normalize bevel options.\r\n    if (typeof opts.depth === 'number') {\r\n        opts.bevelSize = Math.min(!(opts.bevelSegments > 0) ? 0 : opts.bevelSize, opts.depth / 2);\r\n    }\r\n    if (!(opts.bevelSize > 0)) {\r\n        opts.bevelSegments = 0;\r\n    }\r\n    opts.bevelSegments = Math.round(opts.bevelSegments);\r\n\r\n    const boundingRect = opts.boundingRect;\r\n    opts.translate = opts.translate || [0, 0];\r\n    opts.scale = opts.scale || [1, 1];\r\n    if (opts.fitRect) {\r\n        let targetX = opts.fitRect.x == null\r\n            ? (boundingRect.x || 0)\r\n            : opts.fitRect.x;\r\n        let targetY = opts.fitRect.y == null\r\n            ? (boundingRect.y || 0)\r\n            : opts.fitRect.y;\r\n        let targetWidth = opts.fitRect.width;\r\n        let targetHeight = opts.fitRect.height;\r\n        if (targetWidth == null) {\r\n            if (targetHeight != null) {\r\n                targetWidth = targetHeight / boundingRect.height * boundingRect.width;\r\n            }\r\n            else {\r\n                targetWidth = boundingRect.width;\r\n                targetHeight = boundingRect.height;\r\n            }\r\n        }\r\n        else if (targetHeight == null) {\r\n            targetHeight = targetWidth / boundingRect.width * boundingRect.height;\r\n        }\r\n        opts.scale = [\r\n            targetWidth / boundingRect.width,\r\n            targetHeight / boundingRect.height\r\n        ];\r\n        opts.translate = [\r\n            (targetX - boundingRect.x) * opts.scale[0],\r\n            (targetY - boundingRect.y) * opts.scale[1]\r\n        ];\r\n    }\r\n}\r\n\r\nfunction generateNormal(indices, position) {\r\n\r\n    function v3Set(p, a, b, c) {\r\n        p[0] = a; p[1] = b; p[2] = c;\r\n    }\r\n\r\n    const p1 = [];\r\n    const p2 = [];\r\n    const p3 = [];\r\n\r\n    const v21 = [];\r\n    const v32 = [];\r\n\r\n    const n = [];\r\n\r\n    const len = indices.length;\r\n    const normals = new Float32Array(position.length);\r\n\r\n    for (let f = 0; f < len;) {\r\n        const i1 = indices[f++] * 3;\r\n        const i2 = indices[f++] * 3;\r\n        const i3 = indices[f++] * 3;\r\n\r\n        v3Set(p1, position[i1], position[i1 + 1], position[i1 + 2]);\r\n        v3Set(p2, position[i2], position[i2 + 1], position[i2 + 2]);\r\n        v3Set(p3, position[i3], position[i3 + 1], position[i3 + 2]);\r\n\r\n        v3Sub(v21, p1, p2);\r\n        v3Sub(v32, p2, p3);\r\n        v3Cross(n, v21, v32);\r\n        // Already be weighted by the triangle area\r\n        for (let i = 0; i < 3; i++) {\r\n            normals[i1 + i] = normals[i1 + i] + n[i];\r\n            normals[i2 + i] = normals[i2 + i] + n[i];\r\n            normals[i3 + i] = normals[i3 + i] + n[i];\r\n        }\r\n    }\r\n\r\n    for (var i = 0; i < normals.length;) {\r\n        v3Set(n, normals[i], normals[i + 1], normals[i + 2]);\r\n        v3Normalize(n, n);\r\n        normals[i++] = n[0];\r\n        normals[i++] = n[1];\r\n        normals[i++] = n[2];\r\n\r\n    }\r\n\r\n    return normals;\r\n}\r\n// 0,0----1,0\r\n// 0,1----1,1\r\nconst quadToTriangle = [\r\n    [0, 0], [1, 0], [1, 1],\r\n    [0, 0], [1, 1], [0, 1]\r\n];\r\n\r\nfunction ringDistance(vertices, start, end) {\r\n    let distance = 0;\r\n    let preX = vertices[start], preY = vertices[start + 1];\r\n    const firstX = preX, firstY = preY;\r\n    for (let i = start + 2; i < end; i += 2) {\r\n        const x = vertices[i], y = vertices[i + 1];\r\n        distance += Math.sqrt((x - preX) * (x - preX) + (y - preY) * (y - preY));\r\n        preX = x;\r\n        preY = y;\r\n    }\r\n    distance += Math.sqrt((preX - firstX) * (preX - firstX) + (preY - firstY) * (preY - firstY));\r\n    return distance;\r\n}\r\n\r\n// Add side vertices and indices. Include bevel.\r\nfunction addExtrudeSide(\r\n    out, { vertices, topVertices, splittedMap, depth, rect }, start, end,\r\n    cursors, opts\r\n) {\r\n    const ringVertexCount = end - start;\r\n\r\n    const splitBevel = opts.smoothBevel ? 1 : 2;\r\n    const bevelSize = Math.min(depth / 2, opts.bevelSize);\r\n    const bevelSegments = opts.bevelSegments;\r\n    const vertexOffset = cursors.vertex;\r\n    const ringPerimeter = cursors.ringPerimeter;\r\n    const size = Math.max(rect.width, rect.height, depth, ringPerimeter);\r\n\r\n    function isDuplicateVertex(idx) {\r\n        const nextIdx = (idx + 1) % ringVertexCount;\r\n        const x0 = vertices[idx * 2];\r\n        const y0 = vertices[idx * 2 + 1];\r\n        const x1 = vertices[nextIdx * 2];\r\n        const y1 = vertices[nextIdx * 2 + 1];\r\n        return x0 === x1 && y0 === y1;\r\n    }\r\n\r\n    // Side vertices\r\n    if (bevelSize > 0) {\r\n        const v0 = [0, 0, 1];\r\n        const v1 = [];\r\n        const v2 = [0, 0, -1];\r\n        const v = [];\r\n\r\n        let ringCount = 0;\r\n        let vLen = new Float32Array(ringVertexCount);\r\n        for (let k = 0; k < 2; k++) {\r\n            const z = (k === 0 ? (depth - bevelSize) : bevelSize);\r\n            for (let s = 0; s <= bevelSegments * splitBevel; s++) {\r\n                let uLen = 0;\r\n                let prevX;\r\n                let prevY;\r\n                for (let i = 0; i < ringVertexCount; i++) {\r\n                    const idx = (i % ringVertexCount + start) * 2;\r\n                    const rawIdx = splittedMap ? splittedMap[idx / 2] * 2 : idx;\r\n                    v1[0] = vertices[idx] - topVertices[rawIdx];\r\n                    v1[1] = vertices[idx + 1] - topVertices[rawIdx + 1];\r\n                    v1[2] = 0;\r\n                    const l = Math.sqrt(v1[0] * v1[0] + v1[1] * v1[1]);\r\n                    v1[0] /= l;\r\n                    v1[1] /= l;\r\n\r\n                    const t = (Math.floor(s / splitBevel) + (s % splitBevel)) / bevelSegments;\r\n                    k === 0 ? slerp(v, v0, v1, t)\r\n                        : slerp(v, v1, v2, t);\r\n\r\n                    const t2 = k === 0 ? t : 1 - t;\r\n                    const a = bevelSize * Math.sin(t2 * Math.PI / 2);\r\n                    const b = l * Math.cos(t2 * Math.PI / 2);\r\n\r\n                    // ellipse radius\r\n                    const r = bevelSize * l / Math.sqrt(a * a + b * b);\r\n\r\n                    const x = v[0] * r + topVertices[rawIdx];\r\n                    const y = v[1] * r + topVertices[rawIdx + 1];\r\n                    const zz = v[2] * r + z;\r\n                    out.position[cursors.vertex * 3] = x;\r\n                    out.position[cursors.vertex * 3 + 1] = y;\r\n                    out.position[cursors.vertex * 3 + 2] = zz;\r\n\r\n                    // TODO Cache and optimize\r\n                    if (i > 0) {\r\n                        uLen += Math.sqrt((prevX - x) * (prevX - x) + (prevY - y) * (prevY - y));\r\n                    }\r\n                    if (s > 0 || k > 0) {\r\n                        let tmp = (cursors.vertex - ringVertexCount) * 3;\r\n                        let prevX2 = out.position[tmp];\r\n                        let prevY2 = out.position[tmp + 1];\r\n                        let prevZ2 = out.position[tmp + 2];\r\n\r\n                        vLen[i] += Math.sqrt(\r\n                            (prevX2 - x) * (prevX2 - x)\r\n                            + (prevY2 - y) * (prevY2 - y)\r\n                            + (prevZ2 - zz) * (prevZ2 - zz)\r\n                        );\r\n                    }\r\n                    out.uv[cursors.vertex * 2] = uLen / size;\r\n                    out.uv[cursors.vertex * 2 + 1] = vLen[i] / size;\r\n\r\n                    prevX = x;\r\n                    prevY = y;\r\n                    cursors.vertex++;\r\n\r\n                    // Just ignore this face if vertex are duplicted in `splitVertices`\r\n                    if (isDuplicateVertex(i)) {\r\n                        continue;\r\n                    }\r\n                    if ((splitBevel > 1 && (s % splitBevel)) || (splitBevel === 1 && s >= 1)) {\r\n                        for (let f = 0; f < 6; f++) {\r\n                            const m = (quadToTriangle[f][0] + i) % ringVertexCount;\r\n                            const n = quadToTriangle[f][1] + ringCount;\r\n                            out.indices[cursors.index++] = (n - 1) * ringVertexCount + m + vertexOffset;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                ringCount++;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        for (let k = 0; k < 2; k++) {\r\n            const z = k === 0 ? depth - bevelSize : bevelSize;\r\n            let uLen = 0;\r\n            let prevX;\r\n            let prevY;\r\n            for (let i = 0; i < ringVertexCount; i++) {\r\n                const idx = (i % ringVertexCount + start) * 2;\r\n                const x = vertices[idx];\r\n                const y = vertices[idx + 1];\r\n                out.position[cursors.vertex * 3] = x;\r\n                out.position[cursors.vertex * 3 + 1] = y;\r\n                out.position[cursors.vertex * 3 + 2] = z;\r\n                if (i > 0) {\r\n                    uLen += Math.sqrt((prevX - x) * (prevX - x) + (prevY - y) * (prevY - y));\r\n                }\r\n                out.uv[cursors.vertex * 2] = uLen / size;\r\n                out.uv[cursors.vertex * 2 + 1] = z / size;\r\n                prevX = x;\r\n                prevY = y;\r\n\r\n                cursors.vertex++;\r\n            }\r\n        }\r\n    }\r\n    // Connect the side\r\n    const sideStartRingN = bevelSize > 0 ? (bevelSegments * splitBevel + 1) : 1;\r\n    for (let i = 0; i < ringVertexCount; i++) {\r\n        // Just ignore this face if vertex are duplicted in `splitVertices`\r\n        if (isDuplicateVertex(i)) {\r\n            continue;\r\n        }\r\n        for (let f = 0; f < 6; f++) {\r\n            const m = (quadToTriangle[f][0] + i) % ringVertexCount;\r\n            const n = quadToTriangle[f][1] + sideStartRingN;\r\n            out.indices[cursors.index++] = (n - 1) * ringVertexCount + m + vertexOffset;\r\n        }\r\n    }\r\n}\r\n\r\nfunction addTopAndBottom({ indices, topVertices, rect, depth }, out, cursors, opts) {\r\n    if (topVertices.length <= 4) {\r\n        return;\r\n    }\r\n\r\n    const vertexOffset = cursors.vertex;\r\n    // Top indices\r\n    const indicesLen = indices.length;\r\n    for (let i = 0; i < indicesLen; i++) {\r\n        out.indices[cursors.index++] = vertexOffset + indices[i];\r\n    }\r\n    const size = Math.max(rect.width, rect.height);\r\n    // Top and bottom vertices\r\n    for (let k = 0; k < (opts.excludeBottom ? 1 : 2); k++) {\r\n        for (let i = 0; i < topVertices.length; i += 2) {\r\n            const x = topVertices[i];\r\n            const y = topVertices[i + 1];\r\n            out.position[cursors.vertex * 3] = x;\r\n            out.position[cursors.vertex * 3 + 1] = y;\r\n            out.position[cursors.vertex * 3 + 2] = (1 - k) * depth;\r\n\r\n            out.uv[cursors.vertex * 2] = (x - rect.x) / size;\r\n            out.uv[cursors.vertex * 2 + 1] = (y - rect.y) / size;\r\n            cursors.vertex++;\r\n        }\r\n    }\r\n    // Bottom indices\r\n    if (!opts.excludeBottom) {\r\n        const vertexCount = topVertices.length / 2;\r\n        for (let i = 0; i < indicesLen; i += 3) {\r\n            for (let k = 0; k < 3; k++) {\r\n                out.indices[cursors.index++] = vertexOffset + vertexCount + indices[i + 2 - k];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Split vertices for sharp side.\r\n */\r\nfunction splitVertices(vertices, holes, smoothSide, smoothSideThreshold) {\r\n    const isAutoSmooth = smoothSide == null || smoothSide === 'auto';\r\n    if (smoothSide === true) {\r\n        return { vertices, holes };\r\n    }\r\n    const newVertices = [];\r\n    const newHoles = holes && [];\r\n    const count = vertices.length / 2;\r\n    const v1 = [];\r\n    const v2 = [];\r\n\r\n    // Map of splitted index to raw index\r\n    const splittedMap = [];\r\n\r\n    let start = 0;\r\n    let end = 0;\r\n\r\n    const polysCount = (holes ? holes.length : 0) + 1;\r\n    for (let h = 0; h < polysCount; h++) {\r\n        if (h === 0) {\r\n            end = holes && holes.length ? holes[0] : count;\r\n        }\r\n        else {\r\n            start = holes[h - 1];\r\n            end = holes[h] || count;\r\n        }\r\n\r\n        for (let i = start; i < end; i++) {\r\n            const x2 = vertices[i * 2];\r\n            const y2 = vertices[i * 2 + 1];\r\n            const nextIdx = i === end - 1 ? start : i + 1;\r\n            const x3 = vertices[nextIdx * 2];\r\n            const y3 = vertices[nextIdx * 2 + 1];\r\n\r\n            if (isAutoSmooth) {\r\n                const prevIdx = i === start ? end - 1 : i - 1;\r\n                const x1 = vertices[prevIdx * 2];\r\n                const y1 = vertices[prevIdx * 2 + 1];\r\n\r\n                v1[0] = x1 - x2;\r\n                v1[1] = y1 - y2;\r\n                v2[0] = x3 - x2;\r\n                v2[1] = y3 - y2;\r\n\r\n                v2Normalize(v1, v1);\r\n                v2Normalize(v2, v2);\r\n\r\n                const angleCos = v2Dot(v1, v2) * 0.5 + 0.5;\r\n\r\n                if ((1 - angleCos) > smoothSideThreshold) {\r\n                    newVertices.push(x2, y2);\r\n                    splittedMap.push(i);\r\n                }\r\n                else {\r\n                    newVertices.push(x2, y2, x2, y2);\r\n                    splittedMap.push(i, i);\r\n                }\r\n            }\r\n            else {\r\n                newVertices.push(x2, y2, x2, y2);\r\n                splittedMap.push(i, i);\r\n            }\r\n        }\r\n\r\n        if (h < polysCount - 1 && newHoles) {\r\n            newHoles.push(newVertices.length / 2);\r\n        }\r\n    }\r\n\r\n    return {\r\n        vertices: new Float32Array(newVertices),\r\n        splittedMap,\r\n        holes: newHoles\r\n    };\r\n}\r\n\r\nfunction innerExtrudeTriangulatedPolygon(preparedData, opts) {\r\n    let indexCount = 0;\r\n    let vertexCount = 0;\r\n\r\n    for (let p = 0; p < preparedData.length; p++) {\r\n        const { indices, vertices, splittedMap, topVertices, depth } = preparedData[p];\r\n        const bevelSize = Math.min(depth / 2, opts.bevelSize);\r\n        const bevelSegments = !(bevelSize > 0) ? 0 : opts.bevelSegments;\r\n\r\n        const holes = preparedData[p].holes || [];\r\n\r\n        indexCount += indices.length * (opts.excludeBottom ? 1 : 2);\r\n        vertexCount += topVertices.length / 2 * (opts.excludeBottom ? 1 : 2);\r\n        const ringCount = 2 + bevelSegments * 2;\r\n\r\n        let start = 0;\r\n        let end = 0;\r\n        for (let h = 0; h < holes.length + 1; h++) {\r\n            if (h === 0) {\r\n                end = holes.length ? holes[0] : vertices.length / 2;\r\n            }\r\n            else {\r\n                start = holes[h - 1];\r\n                end = holes[h] || vertices.length / 2;\r\n            }\r\n\r\n            const faceEnd = splittedMap ? splittedMap[end - 1] + 1 : end;\r\n            const faceStart = splittedMap ? splittedMap[start] : start;\r\n            indexCount += (faceEnd - faceStart) * 6 * (ringCount - 1);\r\n\r\n            const sideRingVertexCount = end - start;\r\n            vertexCount += sideRingVertexCount * ringCount\r\n                // Double the bevel vertex number if not smooth\r\n                + (!opts.smoothBevel ? bevelSegments * sideRingVertexCount * 2 : 0);\r\n        }\r\n    }\r\n\r\n    const data = {\r\n        position: new Float32Array(vertexCount * 3),\r\n        indices: new (vertexCount > 0xffff ? Uint32Array : Uint16Array)(indexCount),\r\n        uv: new Float32Array(vertexCount * 2)\r\n    };\r\n\r\n    const cursors = {\r\n        vertex: 0, index: 0, ringPerimeter: 0\r\n    };\r\n\r\n    for (let d = 0; d < preparedData.length; d++) {\r\n        addTopAndBottom(preparedData[d], data, cursors, opts);\r\n    }\r\n\r\n    for (let d = 0; d < preparedData.length; d++) {\r\n        const { holes, vertices } = preparedData[d];\r\n        const vertexCount = vertices.length / 2;\r\n\r\n        let start = 0;\r\n        let end = (holes && holes.length) ? holes[0] : vertexCount;\r\n        cursors.ringPerimeter = ringDistance(preparedData[d].topVertices, start, end);\r\n        // Add exterior\r\n        addExtrudeSide(data, preparedData[d], start, end, cursors, opts);\r\n        // Add holes\r\n        if (holes) {\r\n            for (let h = 0; h < holes.length; h++) {\r\n                start = holes[h];\r\n                end = holes[h + 1] || vertexCount;\r\n                cursors.ringPerimeter = ringDistance(preparedData[d].topVertices, start, end);\r\n                addExtrudeSide(data, preparedData[d], start, end, cursors, opts);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Wrap uv\r\n    for (let i = 0; i < data.uv.length; i++) {\r\n        const val = data.uv[i];\r\n        if (val > 0 && Math.round(val) === val) {\r\n            data.uv[i] = 1;\r\n        }\r\n        else {\r\n            data.uv[i] = val % 1;\r\n        }\r\n    }\r\n\r\n    data.normal = generateNormal(data.indices, data.position);\r\n    // PENDING\r\n    data.boundingRect = preparedData[0] && preparedData[0].rect;\r\n\r\n    return data;\r\n}\r\n\r\nfunction convertPolylineToTriangulatedPolygon(polyline, polylineIdx, opts) {\r\n    const lineWidth = opts.lineWidth;\r\n    const pointCount = polyline.length;\r\n    const points = new Float32Array(pointCount * 2);\r\n    const translate = opts.translate || [0, 0];\r\n    const scale = opts.scale || [1, 1];\r\n    for (let i = 0, k = 0; i < pointCount; i++) {\r\n        points[k++] = polyline[i][0] * scale[0] + translate[0];\r\n        points[k++] = polyline[i][1] * scale[1] + translate[1];\r\n    }\r\n\r\n    if (area(points, 0, pointCount) < 0) {\r\n        reversePoints(points, 2, 0, pointCount);\r\n    }\r\n\r\n    const insidePoints = [];\r\n    const outsidePoints = [];\r\n    const miterLimit = opts.miterLimit;\r\n    const outsideIndicesMap = innerOffsetPolyline(\r\n        points, outsidePoints, 0, pointCount, 0, -lineWidth / 2, miterLimit, false, true\r\n    );\r\n    reversePoints(points, 2, 0, pointCount);\r\n    const insideIndicesMap = innerOffsetPolyline(\r\n        points, insidePoints, 0, pointCount, 0, -lineWidth / 2, miterLimit, false, true\r\n    );\r\n\r\n    const polygonVertexCount = (insidePoints.length + outsidePoints.length) / 2;\r\n    const polygonVertices = new Float32Array(polygonVertexCount * 2);\r\n\r\n    let offset = 0;\r\n    const outsidePointCount = outsidePoints.length / 2;\r\n    for (let i = 0; i < outsidePoints.length; i++) {\r\n        polygonVertices[offset++] = outsidePoints[i];\r\n    }\r\n    for (let i = 0; i < insidePoints.length; i++) {\r\n        polygonVertices[offset++] = insidePoints[i];\r\n    }\r\n\r\n    // Built indices\r\n    const indices = new (polygonVertexCount > 0xffff ? Uint32Array : Uint16Array)(\r\n        ((pointCount - 1) * 2 + (polygonVertexCount - pointCount * 2)) * 3\r\n    );\r\n    let off = 0;\r\n    for (let i = 0; i < pointCount - 1; i++) {\r\n        const i2 = i + 1;\r\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i];\r\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i] - 1;\r\n        indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\r\n\r\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i];\r\n        indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\r\n        indices[off++] = insideIndicesMap[i] + outsidePointCount;\r\n\r\n        if (insideIndicesMap[i2] - insideIndicesMap[i] === 2) {\r\n            indices[off++] = insideIndicesMap[i] + 2 + outsidePointCount;\r\n            indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\r\n            indices[off++] = outsidePointCount - outsideIndicesMap[i2] - 1;\r\n        }\r\n        else if (outsideIndicesMap[i2] - outsideIndicesMap[i] === 2) {\r\n            indices[off++] = insideIndicesMap[i2] + outsidePointCount;\r\n            indices[off++] = outsidePointCount - 1 - (outsideIndicesMap[i] + 1);\r\n            indices[off++] = outsidePointCount - 1 - (outsideIndicesMap[i] + 2);\r\n        }\r\n    }\r\n\r\n    const topVertices = opts.bevelSize > 0\r\n        ? offsetPolygon(polygonVertices, [], opts.bevelSize, null, true) : polygonVertices;\r\n    const boundingRect = opts.boundingRect;\r\n\r\n    const res = splitVertices(polygonVertices, null, opts.smoothSide, opts.smoothSideThreshold);\r\n    return {\r\n        vertices: res.vertices,\r\n        rawVertices: topVertices,\r\n        splittedMap: res.splittedMap,\r\n        indices,\r\n        topVertices,\r\n        rect: {\r\n            x: boundingRect.x * scale[0] + translate[0],\r\n            y: boundingRect.y * scale[1] + translate[1],\r\n            width: boundingRect.width * scale[0],\r\n            height: boundingRect.height * scale[1],\r\n        },\r\n        depth: typeof opts.depth === 'function' ? opts.depth(polylineIdx) : opts.depth,\r\n        holes: []\r\n    };\r\n}\r\n\r\nfunction removeClosePointsOfPolygon(polygon, epsilon) {\r\n    const newPolygon = [];\r\n    for (let k = 0; k < polygon.length; k++) {\r\n        const points = polygon[k];\r\n        const newPoints = [];\r\n        const len = points.length;\r\n        let x1 = points[len - 1][0];\r\n        let y1 = points[len - 1][1];\r\n        let dist = 0;\r\n        for (let i = 0; i < len; i++) {\r\n            let x2 = points[i][0];\r\n            let y2 = points[i][1];\r\n            const dx = x2 - x1;\r\n            const dy = y2 - y1;\r\n            dist += Math.sqrt(dx * dx + dy * dy);\r\n            if (dist > epsilon) {\r\n                newPoints.push(points[i]);\r\n                dist = 0;\r\n            }\r\n            x1 = x2;\r\n            y1 = y2;\r\n        }\r\n        if (newPoints.length >= 3) {\r\n            newPolygon.push(newPoints);\r\n        }\r\n    }\r\n    return newPolygon.length > 0 ? newPolygon : null;\r\n}\r\n\r\nfunction simplifyPolygon(polygon, tolerance) {\r\n    const newPolygon = [];\r\n    for (let k = 0; k < polygon.length; k++) {\r\n        let points = polygon[k];\r\n        points = doSimplify(points, tolerance, true);\r\n        if (points.length >= 3) {\r\n            newPolygon.push(points);\r\n        }\r\n    }\r\n    return newPolygon.length > 0 ? newPolygon : null;\r\n}\r\n/**\r\n *\r\n * @param {Array} polygons Polygons array that match GeoJSON MultiPolygon geometry.\r\n * @param {Object} [opts]\r\n * @param {number|Function} [opts.depth]\r\n * @param {number} [opts.bevelSize = 0]\r\n * @param {number} [opts.bevelSegments = 2]\r\n * @param {number} [opts.simplify = 0]\r\n * @param {boolean} [opts.smoothSide = 'auto']\r\n * @param {boolean} [opts.smoothSideThreshold = 0.9]    // Will not smooth sharp side.\r\n * @param {boolean} [opts.smoothBevel = false]\r\n * @param {boolean} [opts.excludeBottom = false]\r\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\r\n * @param {Array} [opts.translate]\r\n * @param {Array} [opts.scale]\r\n *\r\n * @return {Object} {indices, position, uv, normal, boundingRect}\r\n */\r\nexport function extrudePolygon(polygons, opts) {\r\n\r\n    opts = Object.assign({}, opts);\r\n\r\n    const min = [Infinity, Infinity];\r\n    const max = [-Infinity, -Infinity];\r\n    for (let i = 0; i < polygons.length; i++) {\r\n        updateBoundingRect(polygons[i][0], min, max);\r\n    }\r\n    opts.boundingRect = opts.boundingRect || {\r\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\r\n    };\r\n\r\n    normalizeOpts(opts);\r\n\r\n    const preparedData = [];\r\n    const translate = opts.translate || [0, 0];\r\n    const scale = opts.scale || [1, 1];\r\n    const boundingRect = opts.boundingRect;\r\n    const transformdRect = {\r\n        x: boundingRect.x * scale[0] + translate[0],\r\n        y: boundingRect.y * scale[1] + translate[1],\r\n        width: boundingRect.width * scale[0],\r\n        height: boundingRect.height * scale[1],\r\n    };\r\n\r\n    const epsilon = Math.min(\r\n        boundingRect.width, boundingRect.height\r\n    ) / 1e5;\r\n    for (let i = 0; i < polygons.length; i++) {\r\n        let newPolygon = removeClosePointsOfPolygon(polygons[i], epsilon);\r\n        if (!newPolygon) {\r\n            continue;\r\n        }\r\n        const simplifyTolerance = opts.simplify / Math.max(scale[0], scale[1]);\r\n        if (simplifyTolerance > 0) {\r\n            newPolygon = simplifyPolygon(newPolygon, simplifyTolerance);\r\n        }\r\n        if (!newPolygon) {\r\n            continue;\r\n        }\r\n\r\n        const { vertices, holes, dimensions } = earcut.flatten(newPolygon);\r\n\r\n        for (let k = 0; k < vertices.length;) {\r\n            vertices[k] = vertices[k++] * scale[0] + translate[0];\r\n            vertices[k] = vertices[k++] * scale[1] + translate[1];\r\n        }\r\n\r\n        convertToClockwise(vertices, holes);\r\n\r\n        if (dimensions !== 2) {\r\n            throw new Error('Only 2D polygon points are supported');\r\n        }\r\n        const topVertices = opts.bevelSize > 0\r\n            ? offsetPolygon(vertices, holes, opts.bevelSize, null, true) : vertices;\r\n        const indices = triangulate(topVertices, holes, dimensions);\r\n        const res = splitVertices(vertices, holes, opts.smoothSide, opts.smoothSideThreshold)\r\n\r\n        preparedData.push({\r\n            indices,\r\n            vertices: res.vertices,\r\n            rawVertices: vertices,\r\n            topVertices,\r\n            holes: res.holes,\r\n            splittedMap: res.splittedMap,\r\n            rect: transformdRect,\r\n            depth: typeof opts.depth === 'function' ? opts.depth(i) : opts.depth\r\n        });\r\n    }\r\n    return innerExtrudeTriangulatedPolygon(preparedData, opts);\r\n};\r\n\r\n/**\r\n *\r\n * @param {Array} polylines Polylines array that match GeoJSON MultiLineString geometry.\r\n * @param {Object} [opts]\r\n * @param {number} [opts.depth]\r\n * @param {number} [opts.bevelSize = 0]\r\n * @param {number} [opts.bevelSegments = 2]\r\n * @param {number} [opts.simplify = 0]\r\n * @param {boolean} [opts.smoothSide = 'auto']\r\n * @param {boolean} [opts.smoothSideThreshold = 0.9]    // Will not smooth sharp side.\r\n * @param {boolean} [opts.smoothBevel = false]\r\n * @param {boolean} [opts.excludeBottom = false]\r\n * @param {boolean} [opts.lineWidth = 1]\r\n * @param {boolean} [opts.miterLimit = 2]\r\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\r\n * @param {Array} [opts.translate]\r\n * @param {Array} [opts.scale]\r\n * @param {Object} [opts.boundingRect]\r\n * @return {Object} {indices, position, uv, normal, boundingRect}\r\n */\r\nexport function extrudePolyline(polylines, opts) {\r\n\r\n    opts = Object.assign({}, opts);\r\n\r\n    const min = [Infinity, Infinity];\r\n    const max = [-Infinity, -Infinity];\r\n    for (let i = 0; i < polylines.length; i++) {\r\n        updateBoundingRect(polylines[i], min, max);\r\n    }\r\n    opts.boundingRect = opts.boundingRect || {\r\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\r\n    };\r\n\r\n    normalizeOpts(opts);\r\n    const scale = opts.scale || [1, 1];\r\n\r\n    if (opts.lineWidth == null) {\r\n        opts.lineWidth = 1;\r\n    }\r\n    if (opts.miterLimit == null) {\r\n        opts.miterLimit = 2;\r\n    }\r\n    const preparedData = [];\r\n    // Extrude polyline to polygon\r\n    for (let i = 0; i < polylines.length; i++) {\r\n        let newPolyline = polylines[i];\r\n        const simplifyTolerance = opts.simplify / Math.max(scale[0], scale[1]);\r\n        if (simplifyTolerance > 0) {\r\n            newPolyline = doSimplify(newPolyline, simplifyTolerance, true);\r\n        }\r\n        preparedData.push(convertPolylineToTriangulatedPolygon(newPolyline, i, opts));\r\n    }\r\n\r\n    return innerExtrudeTriangulatedPolygon(preparedData, opts);\r\n}\r\n\r\nfunction updateBoundingRect(points, min, max) {\r\n    for (let i = 0; i < points.length; i++) {\r\n        min[0] = Math.min(points[i][0], min[0]);\r\n        min[1] = Math.min(points[i][1], min[1]);\r\n        max[0] = Math.max(points[i][0], max[0]);\r\n        max[1] = Math.max(points[i][1], max[1]);\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param {Object} geojson\r\n * @param {Object} [opts]\r\n * @param {number} [opts.depth]\r\n * @param {number} [opts.bevelSize = 0]\r\n * @param {number} [opts.bevelSegments = 2]\r\n * @param {number} [opts.simplify = 0]\r\n * @param {boolean} [opts.smoothSide = 'auto']\r\n * @param {boolean} [opts.smoothSideThreshold = 0.9]    // Will not smooth sharp side.\r\n * @param {boolean} [opts.smoothBevel = false]\r\n * @param {boolean} [opts.excludeBottom = false]\r\n * @param {boolean} [opts.lineWidth = 1]\r\n * @param {boolean} [opts.miterLimit = 2]\r\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\r\n * @param {Array} [opts.translate]\r\n * @param {Array} [opts.scale]\r\n * @param {Object} [opts.boundingRect]\r\n * @return {Object} {polyline: {indices, position, uv, normal}, polygon: {indices, position, uv, normal}}\r\n */\r\n\r\n// TODO Not merge feature\r\nexport function extrudeGeoJSON(geojson, opts) {\r\n\r\n    opts = Object.assign({}, opts);\r\n\r\n    const polylines = [];\r\n    const polygons = [];\r\n\r\n    const polylineFeatureIndices = [];\r\n    const polygonFeatureIndices = [];\r\n\r\n    const min = [Infinity, Infinity];\r\n    const max = [-Infinity, -Infinity];\r\n\r\n    for (let i = 0; i < geojson.features.length; i++) {\r\n        const feature = geojson.features[i];\r\n        const geometry = feature.geometry;\r\n        if (geometry && geometry.coordinates) {\r\n            switch (geometry.type) {\r\n                case 'LineString':\r\n                    polylines.push(geometry.coordinates);\r\n                    polylineFeatureIndices.push(i);\r\n                    updateBoundingRect(geometry.coordinates, min, max);\r\n                    break;\r\n                case 'MultiLineString':\r\n                    for (let k = 0; k < geometry.coordinates.length; k++) {\r\n                        polylines.push(geometry.coordinates[k]);\r\n                        polylineFeatureIndices.push(i);\r\n                        updateBoundingRect(geometry.coordinates[k], min, max);\r\n                    }\r\n                    break;\r\n                case 'Polygon':\r\n                    polygons.push(geometry.coordinates);\r\n                    polygonFeatureIndices.push(i);\r\n                    updateBoundingRect(geometry.coordinates[0], min, max);\r\n                    break;\r\n                case 'MultiPolygon':\r\n                    for (let k = 0; k < geometry.coordinates.length; k++) {\r\n                        polygons.push(geometry.coordinates[k]);\r\n                        polygonFeatureIndices.push(i);\r\n                        updateBoundingRect(geometry.coordinates[k][0], min, max);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    opts.boundingRect = opts.boundingRect || {\r\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\r\n    };\r\n\r\n    const originalDepth = opts.depth;\r\n    return {\r\n        polyline: extrudePolyline(polylines, Object.assign(opts, {\r\n            depth: function (idx) {\r\n                if (typeof originalDepth === 'function') {\r\n                    return originalDepth(\r\n                        geojson.features[polylineFeatureIndices[idx]]\r\n                    );\r\n                }\r\n                return originalDepth;\r\n            }\r\n        })),\r\n        polygon: extrudePolygon(polygons, Object.assign(opts, {\r\n            depth: function (idx) {\r\n                if (typeof originalDepth === 'function') {\r\n                    return originalDepth(\r\n                        geojson.features[polygonFeatureIndices[idx]]\r\n                    );\r\n                }\r\n                return originalDepth;\r\n            }\r\n        }))\r\n    };\r\n}","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\n//Using cache to reduce computation\r\nexport function distanceToVector3(distance, layer, cache = {}) {\r\n    if (cache[distance] === undefined) {\r\n        cache[distance] = layer.distanceToVector3(distance, distance).x;\r\n    }\r\n    return cache[distance];\r\n}\r\n/**\r\n *Get the center point of the point set\r\n * @param {*} coordinates\r\n */\r\nexport function getCenterOfPoints(coordinates = []) {\r\n    let sumX = 0, sumY = 0;\r\n    const len = coordinates.length;\r\n    for (let i = 0; i < len; i++) {\r\n        const { coordinate, lnglat, lnglats, xy, xys } = coordinates[i];\r\n        const c = coordinate || lnglat || lnglats || xy || xys || coordinates[i];\r\n        let x, y;\r\n        if (Array.isArray(c)) {\r\n            x = c[0];\r\n            y = c[1];\r\n        }\r\n        else if (c instanceof maptalks.Coordinate) {\r\n            x = c.x;\r\n            y = c.y;\r\n        }\r\n        sumX += x;\r\n        sumY += y;\r\n    }\r\n    return new maptalks.Coordinate(sumX / len, sumY / len);\r\n}\r\nexport function setBottomHeight(geometry, bottomHeight, layer, cache) {\r\n    if (bottomHeight === undefined || typeof bottomHeight !== 'number' || bottomHeight === 0) {\r\n        return 0;\r\n    }\r\n    let position;\r\n    if (geometry instanceof THREE.BufferGeometry) {\r\n        position = geometry.attributes.position.array;\r\n    }\r\n    else if (Array.isArray(geometry) || geometry instanceof Float32Array) {\r\n        position = geometry;\r\n    }\r\n    else {\r\n        position = geometry.position;\r\n    }\r\n    let h = 0;\r\n    if (position) {\r\n        if (cache) {\r\n            if (cache[bottomHeight] === undefined) {\r\n                cache[bottomHeight] = layer.distanceToVector3(bottomHeight, bottomHeight).x;\r\n            }\r\n            h = cache[bottomHeight];\r\n        }\r\n        else {\r\n            h = layer.distanceToVector3(bottomHeight, bottomHeight).x;\r\n        }\r\n        const len = position.length;\r\n        if (position[0] instanceof THREE.Vector3) {\r\n            for (let i = 0; i < len; i++) {\r\n                position[i].z += h;\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < len; i += 3) {\r\n                position[i + 2] += h;\r\n            }\r\n        }\r\n    }\r\n    return h;\r\n}\r\nexport function getGeometriesColorArray(geometriesAttributes) {\r\n    const len = geometriesAttributes.length;\r\n    let colorsLen = 0;\r\n    for (let i = 0; i < len; i++) {\r\n        const { count } = geometriesAttributes[i].position;\r\n        colorsLen += count;\r\n    }\r\n    return new Float32Array(colorsLen * 3);\r\n}\r\nexport function coordiantesToArrayBuffer(coordiantes = []) {\r\n    const len = coordiantes.length;\r\n    const array = new Float64Array(len * 2);\r\n    for (let i = 0; i < len; i++) {\r\n        let x, y;\r\n        const c = coordiantes[i];\r\n        if (c.x) {\r\n            x = c.x;\r\n            y = c.y;\r\n        }\r\n        else {\r\n            x = c[0];\r\n            y = c[1];\r\n        }\r\n        array[i * 2] = x;\r\n        array[i * 2 + 1] = y;\r\n    }\r\n    return array.buffer;\r\n}\r\n//# sourceMappingURL=index.js.map","import * as THREE from 'three';\r\nimport * as maptalks from 'maptalks';\r\nimport { isGeoJSONPolygon, spliteGeoJSONMulti, getGeoJSONCenter, isGeoJSONMulti, getGeoJSONCoordinates } from './GeoJSONUtil';\r\nimport { extrudePolygon } from 'deyihu-geometry-extrude';\r\nimport { addAttribute } from './ThreeAdaptUtil';\r\nimport { coordiantesToArrayBuffer } from '.';\r\nconst topColor = new THREE.Color('#fff'), bottomColor = new THREE.Color('#fff');\r\n/**\r\n * this is for ExtrudeMesh util\r\n */\r\n/**\r\n * Fix the bug in the center of multipoygon\r\n * @param {maptalks.Polygon} polygon\r\n * @param {*} layer\r\n */\r\n// export function toShape(datas = []) {\r\n//     const shapes = [];\r\n//     for (let i = 0, len = datas.length; i < len; i++) {\r\n//         const { outer, holes } = datas[i];\r\n//         const shape = [outer];\r\n//         if (holes && holes.length) {\r\n//             for (let j = 0, len1 = holes.length; j < len1; j++) {\r\n//                 shape.push(holes[j]);\r\n//             }\r\n//         }\r\n//         shapes.push(shape);\r\n//     }\r\n//     return shapes;\r\n// }\r\n/**\r\n *  Support custom center point\r\n * @param {maptalks.Polygon|maptalks.MultiPolygon} polygon\r\n * @param {*} height\r\n * @param {*} layer\r\n */\r\nexport function getExtrudeGeometry(polygon, height, layer, center) {\r\n    const { position, normal, uv, indices } = getExtrudeGeometryParams(polygon, height, layer, center);\r\n    const color = new Float32Array(position.length);\r\n    color.fill(1, 0, position.length);\r\n    const bufferGeomertry = new THREE.BufferGeometry();\r\n    addAttribute(bufferGeomertry, 'color', new THREE.BufferAttribute(color, 3));\r\n    addAttribute(bufferGeomertry, 'normal', new THREE.BufferAttribute(normal, 3));\r\n    addAttribute(bufferGeomertry, 'position', new THREE.BufferAttribute(position, 3));\r\n    addAttribute(bufferGeomertry, 'uv', new THREE.BufferAttribute(uv, 2));\r\n    bufferGeomertry.setIndex(new THREE.Uint32BufferAttribute(indices, 1));\r\n    return bufferGeomertry;\r\n}\r\nexport function getExtrudeGeometryParams(polygon, height, layer, center, centerPt, altCache) {\r\n    const datas = getPolygonPositions(polygon, layer, center, centerPt, false);\r\n    const shapes = datas;\r\n    //Possible later use of geojson\r\n    if (!shapes)\r\n        return null;\r\n    //Reduce height and repeat calculation\r\n    if (altCache) {\r\n        if (altCache[height] == null) {\r\n            altCache[height] = layer.distanceToVector3(height, height).x;\r\n        }\r\n        height = altCache[height];\r\n    }\r\n    else {\r\n        height = layer.distanceToVector3(height, height).x;\r\n    }\r\n    const { position, normal, uv, indices } = extrudePolygon(shapes, {\r\n        depth: height\r\n    });\r\n    return {\r\n        position, normal, uv, indices\r\n    };\r\n}\r\n/**\r\n *\r\n * @param {*} geometry\r\n * @param {*} color\r\n * @param {*} _topColor\r\n */\r\nexport function initVertexColors(geometry, color, _topColor, minZ) {\r\n    if (minZ === undefined) {\r\n        minZ = 0;\r\n    }\r\n    const position = geometry.attributes.position.array;\r\n    const len = position.length;\r\n    bottomColor.setStyle(color);\r\n    topColor.setStyle(_topColor);\r\n    let colors;\r\n    if (Array.isArray(minZ)) {\r\n        let colorLen = 0;\r\n        for (let i = 0, len = minZ.length; i < len; i++) {\r\n            const { count } = minZ[i].position;\r\n            colorLen += count * 3;\r\n        }\r\n        colors = new Float32Array(colorLen);\r\n    }\r\n    else {\r\n        colors = new Float32Array(position.length);\r\n    }\r\n    if (Array.isArray(minZ)) {\r\n        for (let i = 0, len = minZ.length; i < len; i++) {\r\n            const { middleZ, start, end } = minZ[i].position;\r\n            for (let j = start; j < end; j += 3) {\r\n                const z = position[j + 2];\r\n                if (z > middleZ) {\r\n                    colors[j] = topColor.r;\r\n                    colors[j + 1] = topColor.g;\r\n                    colors[j + 2] = topColor.b;\r\n                }\r\n                else {\r\n                    colors[j] = bottomColor.r;\r\n                    colors[j + 1] = bottomColor.g;\r\n                    colors[j + 2] = bottomColor.b;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        for (let i = 0; i < len; i += 3) {\r\n            const z = position[i + 2];\r\n            if (z > minZ) {\r\n                colors[i] = topColor.r;\r\n                colors[i + 1] = topColor.g;\r\n                colors[i + 2] = topColor.b;\r\n            }\r\n            else {\r\n                colors[i] = bottomColor.r;\r\n                colors[i + 1] = bottomColor.g;\r\n                colors[i + 2] = bottomColor.b;\r\n            }\r\n        }\r\n    }\r\n    addAttribute(geometry, 'color', new THREE.BufferAttribute(colors, 3, true));\r\n    return colors;\r\n}\r\n/**\r\n *\r\n * @param {*} polygon\r\n * @param {*} layer\r\n * @param {*} center\r\n */\r\nexport function getPolygonPositions(polygon, layer, center, centerPt, isArrayBuff = false) {\r\n    if (!polygon) {\r\n        return null;\r\n    }\r\n    let datas = [];\r\n    if (polygon instanceof maptalks.MultiPolygon) {\r\n        datas = polygon.getGeometries().map(p => {\r\n            return getSinglePolygonPositions(p, layer, center || polygon.getCenter(), centerPt, isArrayBuff);\r\n        });\r\n    }\r\n    else if (polygon instanceof maptalks.Polygon) {\r\n        const data = getSinglePolygonPositions(polygon, layer, center || polygon.getCenter(), centerPt, isArrayBuff);\r\n        datas.push(data);\r\n    }\r\n    else if (isGeoJSONPolygon(polygon)) {\r\n        // const cent = getGeoJSONCenter(polygon);\r\n        if (!isGeoJSONMulti(polygon)) {\r\n            const data = getSinglePolygonPositions(polygon, layer, center || getGeoJSONCenter(polygon), centerPt, isArrayBuff);\r\n            datas.push(data);\r\n        }\r\n        else {\r\n            const fs = spliteGeoJSONMulti(polygon);\r\n            for (let i = 0, len = fs.length; i < len; i++) {\r\n                datas.push(getSinglePolygonPositions(fs[i], layer, center || getGeoJSONCenter(polygon), centerPt, isArrayBuff));\r\n            }\r\n        }\r\n    }\r\n    return datas;\r\n}\r\nexport function getSinglePolygonPositions(polygon, layer, center, centerPt, isArrayBuff = false) {\r\n    let shell, holes;\r\n    //it is pre for geojson,Possible later use of geojson\r\n    if (isGeoJSONPolygon(polygon)) {\r\n        const coordinates = getGeoJSONCoordinates(polygon);\r\n        shell = coordinates[0];\r\n        holes = coordinates.slice(1, coordinates.length);\r\n        center = center || getGeoJSONCenter(polygon);\r\n    }\r\n    else if (polygon instanceof maptalks.Polygon) {\r\n        shell = polygon.getShell();\r\n        holes = polygon.getHoles();\r\n        center = center || polygon.getCenter();\r\n    }\r\n    centerPt = centerPt || layer.coordinateToVector3(center);\r\n    let outer;\r\n    if (isArrayBuff) {\r\n        outer = layer.coordinatiesToGLFloatArray(shell, centerPt).positons2d;\r\n    }\r\n    else {\r\n        outer = layer.coordinatiesToGLArray(shell, centerPt);\r\n    }\r\n    const data = [(isArrayBuff ? outer.buffer : outer)];\r\n    if (holes && holes.length > 0) {\r\n        for (let i = 0, len = holes.length; i < len; i++) {\r\n            let pts;\r\n            if (isArrayBuff) {\r\n                pts = layer.coordinatiesToGLFloatArray(holes[i], centerPt).positons2d;\r\n            }\r\n            else {\r\n                pts = layer.coordinatiesToGLArray(holes[i], centerPt);\r\n            }\r\n            data.push((isArrayBuff ? pts.buffer : pts));\r\n        }\r\n    }\r\n    return data;\r\n}\r\nexport function getPolygonArrayBuffer(polygon) {\r\n    if (!polygon) {\r\n        return null;\r\n    }\r\n    let datas = [];\r\n    if (polygon instanceof maptalks.MultiPolygon) {\r\n        datas = polygon.getGeometries().map(p => {\r\n            return getSinglePolygonArrayBuffer(p, false);\r\n        });\r\n    }\r\n    else if (polygon instanceof maptalks.Polygon) {\r\n        const data = getSinglePolygonArrayBuffer(polygon, false);\r\n        datas.push(data);\r\n    }\r\n    else if (isGeoJSONPolygon(polygon)) {\r\n        // const cent = getGeoJSONCenter(polygon);\r\n        if (!isGeoJSONMulti(polygon)) {\r\n            const data = getSinglePolygonArrayBuffer(polygon, true);\r\n            datas.push(data);\r\n        }\r\n        else {\r\n            const fs = spliteGeoJSONMulti(polygon);\r\n            for (let i = 0, len = fs.length; i < len; i++) {\r\n                datas.push(getSinglePolygonArrayBuffer(fs[i], true));\r\n            }\r\n        }\r\n    }\r\n    return datas;\r\n}\r\nexport function getSinglePolygonArrayBuffer(polygon, isGeoJSON) {\r\n    let shell, holes;\r\n    //it is pre for geojson,Possible later use of geojson\r\n    if (isGeoJSON) {\r\n        const coordinates = getGeoJSONCoordinates(polygon);\r\n        shell = coordinates[0];\r\n        holes = coordinates.slice(1, coordinates.length);\r\n    }\r\n    else if (polygon instanceof maptalks.Polygon) {\r\n        shell = polygon.getShell();\r\n        holes = polygon.getHoles();\r\n    }\r\n    const outer = coordiantesToArrayBuffer(shell);\r\n    const data = [outer];\r\n    if (holes && holes.length > 0) {\r\n        for (let i = 0, len = holes.length; i < len; i++) {\r\n            const pts = coordiantesToArrayBuffer(holes[i]);\r\n            data.push(pts);\r\n        }\r\n    }\r\n    return data;\r\n}\r\n//# sourceMappingURL=ExtrudeUtil.js.map","import * as THREE from 'three';\r\nimport * as maptalks from 'maptalks';\r\nimport { extrudePolyline } from 'deyihu-geometry-extrude';\r\nimport { isGeoJSON, getGeoJSONCoordinates, getGeoJSONCenter, isGeoJSONMulti, spliteGeoJSONMulti, isGeoJSONLine } from './GeoJSONUtil';\r\nimport { addAttribute } from './ThreeAdaptUtil';\r\nimport { coordiantesToArrayBuffer } from '.';\r\nconst COMMA = ',';\r\n/**\r\n *\r\n * @param {maptalks.LineString} lineString\r\n * @param {ThreeLayer} layer\r\n */\r\nexport function getLinePosition(lineString, layer, center, hasVectorArray = true) {\r\n    const positionsV = [];\r\n    let positions, positions2d;\r\n    if (Array.isArray(lineString) && lineString[0] instanceof THREE.Vector3) {\r\n        for (let i = 0, len = lineString.length; i < len; i++) {\r\n            const v = lineString[i];\r\n            positionsV.push(v);\r\n        }\r\n    }\r\n    else {\r\n        if (Array.isArray(lineString)) {\r\n            lineString = new maptalks.LineString(lineString);\r\n        }\r\n        const z = 0;\r\n        //support geojson\r\n        let coordinates, cent;\r\n        if (isGeoJSON(lineString)) {\r\n            coordinates = getGeoJSONCoordinates(lineString);\r\n            if (!center) {\r\n                cent = getGeoJSONCenter(lineString);\r\n            }\r\n        }\r\n        else if (lineString instanceof maptalks.LineString) {\r\n            coordinates = lineString.getCoordinates();\r\n            if (!center) {\r\n                cent = lineString.getCenter();\r\n            }\r\n        }\r\n        const centerPt = layer.coordinateToVector3(center || cent);\r\n        if (hasVectorArray) {\r\n            for (let i = 0, len = coordinates.length; i < len; i++) {\r\n                const coordinate = coordinates[i];\r\n                const v = layer.coordinateToVector3(coordinate, z).sub(centerPt);\r\n                // positions.push(v.x, v.y, v.z);\r\n                positionsV.push(v);\r\n            }\r\n        }\r\n        else {\r\n            const result = layer.coordinatiesToGLFloatArray(coordinates, centerPt);\r\n            positions = result.positions;\r\n            positions2d = result.positons2d;\r\n        }\r\n    }\r\n    if (!hasVectorArray) {\r\n        return {\r\n            positions,\r\n            positionsV,\r\n            positions2d,\r\n            arrayBuffer: positions2d.buffer\r\n        };\r\n    }\r\n    positions2d = new Float32Array(positionsV.length * 2);\r\n    positions = new Float32Array(positionsV.length * 3);\r\n    for (let i = 0, len = positionsV.length; i < len; i++) {\r\n        const idx = i * 3;\r\n        const v = positionsV[i];\r\n        positions[idx] = v.x;\r\n        positions[idx + 1] = v.y;\r\n        positions[idx + 2] = v.z;\r\n        const idx1 = i * 2;\r\n        positions2d[idx1] = v.x;\r\n        positions2d[idx1 + 1] = v.y;\r\n    }\r\n    return {\r\n        positions,\r\n        positionsV,\r\n        positions2d,\r\n        arrayBuffer: positions2d.buffer\r\n    };\r\n}\r\n/**\r\n *\r\n * @param {maptalks.LineString} lineString\r\n * @param {Number} lineWidth\r\n * @param {Number} depth\r\n * @param {ThreeLayer} layer\r\n */\r\nexport function getExtrudeLineGeometry(lineString, lineWidth = 1, depth = 1, layer, center) {\r\n    const { indices, position, normal, uv } = getExtrudeLineParams(lineString, lineWidth, depth, layer, center);\r\n    const geometry = new THREE.BufferGeometry();\r\n    addAttribute(geometry, 'position', new THREE.BufferAttribute(position, 3));\r\n    addAttribute(geometry, 'normal', new THREE.BufferAttribute(normal, 3));\r\n    addAttribute(geometry, 'uv', new THREE.BufferAttribute(uv, 2));\r\n    geometry.setIndex(new THREE.BufferAttribute(indices, 1));\r\n    return geometry;\r\n}\r\n/**\r\n *\r\n * @param {Array[Array]} chunkLines\r\n * @param {*} layer\r\n */\r\nexport function getChunkLinesPosition(chunkLines, layer, positionMap, centerPt) {\r\n    const positions = [], positionsV = [], lnglats = [];\r\n    for (let i = 0, len = chunkLines.length; i < len; i++) {\r\n        const line = chunkLines[i];\r\n        for (let j = 0, len1 = line.length; j < len1; j++) {\r\n            const lnglat = line[j];\r\n            if (lnglats.length > 0) {\r\n                const key = lnglat.join(COMMA).toString();\r\n                const key1 = lnglats[lnglats.length - 1].join(COMMA).toString();\r\n                if (key !== key1) {\r\n                    lnglats.push(lnglat);\r\n                }\r\n            }\r\n            else {\r\n                lnglats.push(lnglat);\r\n            }\r\n        }\r\n    }\r\n    const z = 0;\r\n    for (let i = 0, len = lnglats.length; i < len; i++) {\r\n        const lnglat = lnglats[i];\r\n        let v;\r\n        const key = lnglat.join(COMMA).toString();\r\n        if (positionMap && positionMap[key]) {\r\n            v = positionMap[key];\r\n        }\r\n        else {\r\n            v = layer.coordinateToVector3(lnglat, z).sub(centerPt);\r\n        }\r\n        positionsV.push(v);\r\n        positions.push(v.x, v.y, v.z);\r\n    }\r\n    return {\r\n        positions: positions,\r\n        positionsV: positionsV,\r\n        lnglats: lnglats\r\n    };\r\n}\r\n/**\r\n *\r\n * @param {*} lineString\r\n * @param {*} lineWidth\r\n * @param {*} depth\r\n * @param {*} layer\r\n */\r\nexport function getExtrudeLineParams(lineString, lineWidth = 1, depth = 1, layer, center) {\r\n    const positions = getLinePosition(lineString, layer, center).positionsV;\r\n    const ps = [];\r\n    for (let i = 0, len = positions.length; i < len; i++) {\r\n        const p = positions[i];\r\n        ps.push([p.x, p.y]);\r\n    }\r\n    const { indices, position, normal, uv } = extrudePolyline([ps], {\r\n        lineWidth: lineWidth,\r\n        depth: depth\r\n    });\r\n    return {\r\n        position: position,\r\n        normal: normal,\r\n        indices: indices,\r\n        uv\r\n    };\r\n}\r\nexport function LineStringSplit(lineString) {\r\n    let lineStrings = [], center;\r\n    if (lineString instanceof maptalks.MultiLineString) {\r\n        lineStrings = lineString.getGeometries();\r\n        center = lineString.getCenter();\r\n    }\r\n    else if (lineString instanceof maptalks.LineString) {\r\n        lineStrings.push(lineString);\r\n        center = lineString.getCenter();\r\n    }\r\n    else if (isGeoJSON(lineString)) {\r\n        center = getGeoJSONCenter(lineString);\r\n        if (isGeoJSONMulti(lineString)) {\r\n            lineStrings = spliteGeoJSONMulti(lineString);\r\n        }\r\n        else {\r\n            lineStrings.push(lineString);\r\n        }\r\n    }\r\n    return {\r\n        lineStrings,\r\n        center\r\n    };\r\n}\r\nexport function setLineSegmentPosition(position, positionsV) {\r\n    for (let i = 0, len = positionsV.length; i < len; i++) {\r\n        const v = positionsV[i];\r\n        if (i > 0 && i < len - 1) {\r\n            position.push(v.x, v.y, v.z);\r\n        }\r\n        position.push(v.x, v.y, v.z);\r\n    }\r\n}\r\nexport function getLineSegmentPosition(ps) {\r\n    const position = new Float32Array(ps.length * 2 - 6);\r\n    let j = 0;\r\n    for (let i = 0, len = ps.length / 3; i < len; i++) {\r\n        const x = ps[i * 3], y = ps[i * 3 + 1], z = ps[i * 3 + 2];\r\n        if (i > 0 && i < len - 1) {\r\n            const idx = j * 3;\r\n            position[idx] = x;\r\n            position[idx + 1] = y;\r\n            position[idx + 2] = z;\r\n            j++;\r\n        }\r\n        const idx = j * 3;\r\n        position[idx] = x;\r\n        position[idx + 1] = y;\r\n        position[idx + 2] = z;\r\n        j++;\r\n    }\r\n    return position;\r\n}\r\nexport function mergeLinePositions(positionsList) {\r\n    let len = 0;\r\n    const l = positionsList.length;\r\n    if (l === 1) {\r\n        return positionsList[0];\r\n    }\r\n    for (let i = 0; i < l; i++) {\r\n        len += positionsList[i].length;\r\n    }\r\n    const position = new Float32Array(len);\r\n    let offset = 0;\r\n    for (let i = 0; i < l; i++) {\r\n        position.set(positionsList[i], offset);\r\n        offset += positionsList[i].length;\r\n    }\r\n    return position;\r\n}\r\nexport function getLineArrayBuffer(lineString) {\r\n    if (lineString instanceof maptalks.LineString) {\r\n        return coordiantesToArrayBuffer(lineString.getCoordinates());\r\n    }\r\n    else if (isGeoJSONLine(lineString)) {\r\n        return coordiantesToArrayBuffer(lineString.geometry.coordinates);\r\n    }\r\n}\r\nlet defaultGeometry;\r\nexport function getDefaultLineGeometry() {\r\n    if (!defaultGeometry) {\r\n        defaultGeometry = new THREE.BufferGeometry();\r\n        addAttribute(defaultGeometry, 'position', new THREE.BufferAttribute(new Float32Array(3), 3));\r\n    }\r\n    return defaultGeometry;\r\n}\r\n//# sourceMappingURL=LineUtil.js.map","// eslint-disable-next-line quotes\r\nconst workerCode = `{code}`;\r\nconst workerName = '__maptalks.three__';\r\nexport function getWorkerName() {\r\n    return workerName;\r\n}\r\nexport function getWorkerCode() {\r\n    return workerCode;\r\n}\r\n//# sourceMappingURL=worker.js.map","import * as maptalks from 'maptalks';\r\nimport { isGeoJSONLine, isGeoJSONPolygon } from '../util/GeoJSONUtil';\r\nimport { getPolygonArrayBuffer, getPolygonPositions } from '../util/ExtrudeUtil';\r\n// import pkg from './../../package.json';\r\nimport { getLineArrayBuffer, getLinePosition } from '../util/LineUtil';\r\nimport { getWorkerName } from './worker';\r\nlet MeshActor;\r\nif (maptalks.worker) {\r\n    MeshActor = class extends maptalks.worker.Actor {\r\n        test(info, cb) {\r\n            //send data to worker thread\r\n            this.send(info, null, cb);\r\n        }\r\n        pushQueue(q = {}) {\r\n            const { type, data, callback, layer, key, center, lineStrings, options, id } = q;\r\n            let params;\r\n            if (type.indexOf('ExtrudePolygon') > -1) {\r\n                params = gengerateExtrudePolygons(data, center, layer, options);\r\n            }\r\n            else if (type === 'ExtrudeLines') {\r\n                params = gengerateExtrudeLines(data, center, layer, lineStrings);\r\n            }\r\n            else if (type === 'Point') {\r\n                //todo points\r\n            }\r\n            else if (type === 'Line' || type === 'FatLine') {\r\n                params = gengerateLines(data, center, layer, lineStrings, options);\r\n            }\r\n            else if (type === 'Lines' || type === 'FatLines') {\r\n                params = gengerateLines(data, center, layer, lineStrings);\r\n            }\r\n            else if (type === 'ExtrudeLine') {\r\n                params = gengerateExtrudeLines(data, center, layer, lineStrings, options);\r\n            }\r\n            if (!params) {\r\n                console.error(`not support '${type}' worker`);\r\n                return;\r\n            }\r\n            this.send({ type, datas: params.datas, glRes: params.glRes, matrix: params.matrix, center: params.center }, params.transfer, function (err, message) {\r\n                if (err) {\r\n                    console.error(err);\r\n                }\r\n                message.key = key;\r\n                message.id = id;\r\n                callback(message);\r\n            });\r\n        }\r\n    };\r\n}\r\nvar actor;\r\nexport function getActor() {\r\n    if (!maptalks.worker) {\r\n        console.error('maptalks.worker is not defined,You can\\'t use ThreeVectorTileLayer');\r\n    }\r\n    if (!actor && MeshActor) {\r\n        actor = new MeshActor(getWorkerName());\r\n    }\r\n    return actor;\r\n}\r\n/**\r\n *\r\n * @param distance\r\n * @param layer\r\n * @param altCache\r\n * @returns\r\n */\r\nfunction getDistance(distance, layer, altCache = {}) {\r\n    if (distance !== undefined && typeof distance === 'number' && distance !== 0) {\r\n        if (altCache[distance] === undefined) {\r\n            altCache[distance] = layer.distanceToVector3(distance, distance).x;\r\n        }\r\n        return altCache[distance];\r\n    }\r\n    return 0;\r\n}\r\n/**\r\n * generate extrudepolygons data for worker\r\n * @param {*} polygons\r\n * @param {*} layer\r\n */\r\nfunction gengerateExtrudePolygons(polygons = [], center, layer, options = []) {\r\n    const isMercator = layer.isMercator();\r\n    let glRes, matrix;\r\n    if (isMercator) {\r\n        const map = layer.getMap();\r\n        glRes = map.getGLRes();\r\n        matrix = map.getSpatialReference().getTransformation().matrix;\r\n    }\r\n    let centerPt;\r\n    if (center) {\r\n        centerPt = layer.coordinateToVector3(center);\r\n    }\r\n    const len = polygons.length;\r\n    const datas = [], transfer = [], altCache = {};\r\n    for (let i = 0; i < len; i++) {\r\n        const polygon = polygons[i];\r\n        const p = polygon;\r\n        const properties = options[i] ? options[i] : (isGeoJSONPolygon(p) ? p['properties'] : p.getProperties() || {});\r\n        if (!center) {\r\n            centerPt = layer.coordinateToVector3(properties.center);\r\n        }\r\n        let data;\r\n        if (isMercator) {\r\n            data = getPolygonArrayBuffer(polygon);\r\n        }\r\n        else {\r\n            data = getPolygonPositions(polygon, layer, properties.center || center, centerPt, true);\r\n        }\r\n        for (let j = 0, len1 = data.length; j < len1; j++) {\r\n            const d = data[j];\r\n            for (let m = 0, len2 = d.length; m < len2; m++) {\r\n                //ring\r\n                transfer.push(d[m]);\r\n            }\r\n        }\r\n        let height = properties.height || 1;\r\n        let bottomHeight = properties.bottomHeight || 0;\r\n        height = getDistance(height, layer, altCache);\r\n        bottomHeight = getDistance(bottomHeight, layer, altCache);\r\n        const d = {\r\n            id: properties.id,\r\n            data,\r\n            height,\r\n            bottomHeight\r\n        };\r\n        if (isMercator) {\r\n            d.center = [centerPt.x, centerPt.y];\r\n        }\r\n        datas.push(d);\r\n        //delete Internal properties\r\n        if (p._properties) {\r\n            delete p._properties;\r\n        }\r\n    }\r\n    return {\r\n        datas,\r\n        transfer,\r\n        glRes,\r\n        matrix,\r\n        center: isMercator ? [centerPt.x, centerPt.y] : null\r\n    };\r\n}\r\n/**\r\n * generate ExtrudeLines data for worker\r\n * @param {*} lineStringList\r\n * @param {*} center\r\n * @param {*} layer\r\n */\r\nfunction gengerateExtrudeLines(lineStringList, center, layer, lineStrings, options = []) {\r\n    const isMercator = layer.isMercator();\r\n    let glRes, matrix;\r\n    if (isMercator) {\r\n        const map = layer.getMap();\r\n        glRes = map.getGLRes();\r\n        matrix = map.getSpatialReference().getTransformation().matrix;\r\n    }\r\n    let centerPt;\r\n    if (center) {\r\n        centerPt = layer.coordinateToVector3(center);\r\n    }\r\n    const datas = [], transfer = [], altCache = {};\r\n    const len = lineStringList.length;\r\n    for (let i = 0; i < len; i++) {\r\n        const multiLineString = lineStringList[i];\r\n        const properties = options[i] ? options[i] : (isGeoJSONLine(lineStrings[i]) ? lineStrings[i]['properties'] : lineStrings[i].getProperties() || {});\r\n        if (!center) {\r\n            centerPt = layer.coordinateToVector3(properties.center);\r\n        }\r\n        let width = properties.width || 1;\r\n        let height = properties.height || 1;\r\n        let bottomHeight = properties.bottomHeight || 0;\r\n        width = getDistance(width, layer, altCache);\r\n        height = getDistance(height, layer, altCache);\r\n        bottomHeight = getDistance(bottomHeight, layer, altCache);\r\n        const data = [];\r\n        for (let j = 0, len1 = multiLineString.length; j < len1; j++) {\r\n            const lineString = multiLineString[j];\r\n            let arrayBuffer;\r\n            if (isMercator) {\r\n                arrayBuffer = getLineArrayBuffer(lineString);\r\n            }\r\n            else {\r\n                arrayBuffer = getLinePosition(lineString, layer, center, false).arrayBuffer;\r\n            }\r\n            transfer.push(arrayBuffer);\r\n            data.push(arrayBuffer);\r\n        }\r\n        const d = {\r\n            id: properties.id,\r\n            data,\r\n            height,\r\n            width,\r\n            bottomHeight\r\n        };\r\n        if (isMercator) {\r\n            d.center = [centerPt.x, centerPt.y];\r\n        }\r\n        datas.push(d);\r\n    }\r\n    return {\r\n        datas,\r\n        transfer,\r\n        glRes,\r\n        matrix,\r\n        center: isMercator ? [centerPt.x, centerPt.y] : null\r\n    };\r\n}\r\n/**\r\n * generate Lines data for worker\r\n * @param lineStringList\r\n * @param center\r\n * @param layer\r\n * @param lineStrings\r\n * @param options\r\n * @returns\r\n */\r\nfunction gengerateLines(lineStringList, center, layer, lineStrings, options = []) {\r\n    const isMercator = layer.isMercator();\r\n    let glRes, matrix;\r\n    if (isMercator) {\r\n        const map = layer.getMap();\r\n        glRes = map.getGLRes();\r\n        matrix = map.getSpatialReference().getTransformation().matrix;\r\n    }\r\n    let centerPt;\r\n    if (center) {\r\n        centerPt = layer.coordinateToVector3(center);\r\n    }\r\n    const datas = [], transfer = [], altCache = {};\r\n    const len = lineStringList.length;\r\n    for (let i = 0; i < len; i++) {\r\n        const multiLineString = lineStringList[i];\r\n        const properties = options[i] ? options[i] : (isGeoJSONLine(lineStrings[i]) ? lineStrings[i]['properties'] : lineStrings[i].getProperties() || {});\r\n        if (!center) {\r\n            centerPt = layer.coordinateToVector3(properties.center);\r\n        }\r\n        let bottomHeight = properties.bottomHeight || 0;\r\n        bottomHeight = getDistance(bottomHeight, layer, altCache);\r\n        const data = [];\r\n        for (let j = 0, len1 = multiLineString.length; j < len1; j++) {\r\n            const lineString = multiLineString[j];\r\n            if (isMercator) {\r\n                const arrayBuffer = getLineArrayBuffer(lineString);\r\n                data.push(arrayBuffer);\r\n                data.push(arrayBuffer);\r\n            }\r\n            else {\r\n                const arrayBuffer = getLinePosition(lineString, layer, center, false).arrayBuffer;\r\n                transfer.push(arrayBuffer);\r\n                data.push(arrayBuffer);\r\n            }\r\n        }\r\n        const d = {\r\n            id: properties.id,\r\n            data,\r\n            bottomHeight\r\n        };\r\n        if (isMercator) {\r\n            d.center = [centerPt.x, centerPt.y];\r\n        }\r\n        datas.push(d);\r\n    }\r\n    return {\r\n        datas,\r\n        transfer,\r\n        glRes,\r\n        matrix,\r\n        center: isMercator ? [centerPt.x, centerPt.y] : null\r\n    };\r\n}\r\n//# sourceMappingURL=MeshActor.js.map","import * as maptalks from 'maptalks';\r\nimport { getActor } from './worker/MeshActor';\r\nfunction getDatas(queues) {\r\n    return queues.map(q => {\r\n        return q.data;\r\n    });\r\n}\r\nfunction getOptions(queues) {\r\n    return queues.map(q => {\r\n        return q.baseObject.getOptions();\r\n    });\r\n}\r\nclass BaseObjectTask {\r\n    constructor() {\r\n        this.queueMap = {};\r\n        this.tempQueue = [];\r\n        this.time = this.getCurrentTime();\r\n        this.deQueueCount = 5;\r\n        this.resultQueue = [];\r\n    }\r\n    getCurrentTime() {\r\n        return maptalks.Util.now();\r\n    }\r\n    loop() {\r\n        this.deQueue();\r\n    }\r\n    push(data) {\r\n        this.tempQueue.push(data);\r\n        if (data.id) {\r\n            this.queueMap[data.id] = data;\r\n        }\r\n        return this;\r\n    }\r\n    reset() {\r\n        this.time = this.getCurrentTime();\r\n        this.tempQueue = [];\r\n        return this;\r\n    }\r\n    pushResult(result) {\r\n        if (!result) {\r\n            return;\r\n        }\r\n        if (!Array.isArray(result)) {\r\n            result = [result];\r\n        }\r\n        result.forEach(d => {\r\n            this.resultQueue.push(d);\r\n        });\r\n        return this;\r\n    }\r\n    deQueue() {\r\n        if (!this.resultQueue.length) {\r\n            return this;\r\n        }\r\n        const count = this.deQueueCount;\r\n        const resultList = this.resultQueue.slice(0, count) || [];\r\n        resultList.forEach(result => {\r\n            const { id } = result;\r\n            if (this.queueMap[id]) {\r\n                const { baseObject } = this.queueMap[id];\r\n                if (baseObject && baseObject._workerLoad) {\r\n                    baseObject._workerLoad(result);\r\n                }\r\n                delete this.queueMap[id];\r\n            }\r\n        });\r\n        this.resultQueue.splice(0, count);\r\n        return this;\r\n    }\r\n}\r\nclass ExtrudePolygonTask extends BaseObjectTask {\r\n    constructor() {\r\n        super();\r\n        this.deQueueCount = 100;\r\n    }\r\n    loop() {\r\n        const t = this.getCurrentTime();\r\n        if ((t - this.time >= 32 || this.tempQueue.length >= 1000) && this.tempQueue.length) {\r\n            const actor = getActor();\r\n            actor.pushQueue({\r\n                type: 'ExtrudePolygon',\r\n                layer: this.tempQueue[0].layer,\r\n                data: getDatas(this.tempQueue),\r\n                options: getOptions(this.tempQueue),\r\n                callback: (result) => {\r\n                    this.pushResult(result);\r\n                }\r\n            });\r\n            this.reset();\r\n        }\r\n        super.loop();\r\n    }\r\n}\r\nclass ExtrudePolygonsTask extends BaseObjectTask {\r\n    loop() {\r\n        if (this.tempQueue.length) {\r\n            const actor = getActor();\r\n            this.tempQueue.forEach(queue => {\r\n                actor.pushQueue({\r\n                    id: queue.id,\r\n                    type: 'ExtrudePolygons',\r\n                    layer: queue.layer,\r\n                    data: queue.data,\r\n                    key: queue.key,\r\n                    center: queue.center,\r\n                    callback: (result) => {\r\n                        this.pushResult(result);\r\n                    }\r\n                });\r\n            });\r\n            this.reset();\r\n        }\r\n        super.loop();\r\n    }\r\n}\r\nclass ExtrudeLineTask extends BaseObjectTask {\r\n    constructor() {\r\n        super();\r\n        this.deQueueCount = 100;\r\n    }\r\n    loop() {\r\n        const t = this.getCurrentTime();\r\n        if ((t - this.time >= 32 || this.tempQueue.length >= 1000) && this.tempQueue.length) {\r\n            const actor = getActor();\r\n            actor.pushQueue({\r\n                type: 'ExtrudeLine',\r\n                layer: this.tempQueue[0].layer,\r\n                data: getDatas(this.tempQueue),\r\n                options: getOptions(this.tempQueue),\r\n                lineStrings: this.tempQueue.map(q => {\r\n                    return q.lineString;\r\n                }),\r\n                callback: (result) => {\r\n                    this.pushResult(result);\r\n                }\r\n            });\r\n            this.reset();\r\n        }\r\n        super.loop();\r\n    }\r\n}\r\nclass ExtrudeLinesTask extends BaseObjectTask {\r\n    loop() {\r\n        if (this.tempQueue.length) {\r\n            const actor = getActor();\r\n            this.tempQueue.forEach(queue => {\r\n                actor.pushQueue({\r\n                    id: queue.id,\r\n                    type: 'ExtrudeLines',\r\n                    layer: queue.layer,\r\n                    data: queue.data,\r\n                    key: queue.key,\r\n                    lineStrings: queue.lineStrings,\r\n                    center: queue.center,\r\n                    callback: (result) => {\r\n                        this.pushResult(result);\r\n                    }\r\n                });\r\n            });\r\n            this.reset();\r\n        }\r\n        super.loop();\r\n    }\r\n}\r\nclass LineTask extends BaseObjectTask {\r\n    constructor() {\r\n        super();\r\n        this.deQueueCount = 200;\r\n    }\r\n    loop() {\r\n        const t = this.getCurrentTime();\r\n        if ((t - this.time >= 32 || this.tempQueue.length >= 1000) && this.tempQueue.length) {\r\n            const actor = getActor();\r\n            actor.pushQueue({\r\n                type: 'Line',\r\n                layer: this.tempQueue[0].layer,\r\n                data: getDatas(this.tempQueue),\r\n                options: getOptions(this.tempQueue),\r\n                lineStrings: this.tempQueue.map(q => {\r\n                    return q.lineString;\r\n                }),\r\n                callback: (result) => {\r\n                    this.pushResult(result);\r\n                }\r\n            });\r\n            this.reset();\r\n        }\r\n        super.loop();\r\n    }\r\n}\r\nclass LinesTask extends BaseObjectTask {\r\n    loop() {\r\n        if (this.tempQueue.length) {\r\n            const actor = getActor();\r\n            this.tempQueue.forEach(queue => {\r\n                actor.pushQueue({\r\n                    id: queue.id,\r\n                    type: 'Lines',\r\n                    layer: queue.layer,\r\n                    data: queue.data,\r\n                    key: queue.key,\r\n                    lineStrings: queue.lineStrings,\r\n                    center: queue.center,\r\n                    callback: (result) => {\r\n                        this.pushResult(result);\r\n                    }\r\n                });\r\n            });\r\n            this.reset();\r\n        }\r\n        super.loop();\r\n    }\r\n}\r\nclass FatLineTask extends BaseObjectTask {\r\n    constructor() {\r\n        super();\r\n        this.deQueueCount = 100;\r\n    }\r\n    loop() {\r\n        const t = this.getCurrentTime();\r\n        if ((t - this.time >= 32 || this.tempQueue.length >= 1000) && this.tempQueue.length) {\r\n            const actor = getActor();\r\n            actor.pushQueue({\r\n                type: 'FatLine',\r\n                layer: this.tempQueue[0].layer,\r\n                data: getDatas(this.tempQueue),\r\n                options: getOptions(this.tempQueue),\r\n                lineStrings: this.tempQueue.map(q => {\r\n                    return q.lineString;\r\n                }),\r\n                callback: (result) => {\r\n                    this.pushResult(result);\r\n                }\r\n            });\r\n            this.reset();\r\n        }\r\n        super.loop();\r\n    }\r\n}\r\nclass FatLinesTask extends BaseObjectTask {\r\n    loop() {\r\n        if (this.tempQueue.length) {\r\n            const actor = getActor();\r\n            this.tempQueue.forEach(queue => {\r\n                actor.pushQueue({\r\n                    id: queue.id,\r\n                    type: 'FatLines',\r\n                    layer: queue.layer,\r\n                    data: queue.data,\r\n                    key: queue.key,\r\n                    lineStrings: queue.lineStrings,\r\n                    center: queue.center,\r\n                    callback: (result) => {\r\n                        this.pushResult(result);\r\n                    }\r\n                });\r\n            });\r\n            this.reset();\r\n        }\r\n        super.loop();\r\n    }\r\n}\r\nexport const ExtrudePolygonTaskIns = new ExtrudePolygonTask();\r\nexport const ExtrudePolygonsTaskIns = new ExtrudePolygonsTask();\r\nexport const ExtrudeLineTaskIns = new ExtrudeLineTask();\r\nexport const ExtrudeLinesTaskIns = new ExtrudeLinesTask();\r\nexport const LineTaskIns = new LineTask();\r\nexport const LinesTaskIns = new LinesTask();\r\nexport const FatLineTaskIns = new FatLineTask();\r\nexport const FatLinesTaskIns = new FatLinesTask();\r\nexport const BaseObjectTaskManager = {\r\n    isRunning: false,\r\n    loop() {\r\n        ExtrudePolygonTaskIns.loop();\r\n        ExtrudePolygonsTaskIns.loop();\r\n        ExtrudeLineTaskIns.loop();\r\n        ExtrudeLinesTaskIns.loop();\r\n        LineTaskIns.loop();\r\n        LinesTaskIns.loop();\r\n        FatLineTaskIns.loop();\r\n        FatLinesTaskIns.loop();\r\n        maptalks.Util.requestAnimFrame(BaseObjectTaskManager.loop);\r\n    },\r\n    star() {\r\n        if (!BaseObjectTaskManager.isRunning) {\r\n            BaseObjectTaskManager.isRunning = true;\r\n            BaseObjectTaskManager.loop();\r\n        }\r\n    }\r\n};\r\n//# sourceMappingURL=BaseObjectTaskManager.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport { LineTaskIns } from './BaseObjectTaskManager';\r\nimport { setBottomHeight } from './util';\r\nimport { getDefaultLineGeometry, getLinePosition, getLineSegmentPosition, LineStringSplit, mergeLinePositions } from './util/LineUtil';\r\nimport { addAttribute, getVertexColors } from './util/ThreeAdaptUtil';\r\nfunction initColors(cs) {\r\n    const colors = [];\r\n    if (cs && cs.length) {\r\n        cs.forEach(color => {\r\n            color = (color instanceof THREE.Color ? color : new THREE.Color(color));\r\n            colors.push(color.r, color.g, color.b);\r\n        });\r\n    }\r\n    return colors;\r\n}\r\nconst OPTIONS = {\r\n    altitude: 0,\r\n    bottomHeight: 0,\r\n    colors: null\r\n};\r\n/**\r\n *\r\n */\r\nclass Line extends BaseObject {\r\n    constructor(lineString, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, lineString });\r\n        super();\r\n        this._initOptions(options);\r\n        const { lineStrings, center } = LineStringSplit(lineString);\r\n        const { asynchronous } = options;\r\n        let geometry;\r\n        if (asynchronous) {\r\n            geometry = getDefaultLineGeometry();\r\n            const id = maptalks.Util.GUID();\r\n            this.getOptions().id = id;\r\n            this.getOptions().center = center;\r\n            LineTaskIns.push({\r\n                id,\r\n                data: lineStrings,\r\n                layer,\r\n                key: options.key,\r\n                lineString,\r\n                baseObject: this\r\n            });\r\n        }\r\n        else {\r\n            const positionList = [];\r\n            for (let i = 0, len = lineStrings.length; i < len; i++) {\r\n                const lineString = lineStrings[i];\r\n                const { positions } = getLinePosition(lineString, layer, center, false);\r\n                positionList.push(getLineSegmentPosition(positions));\r\n            }\r\n            const position = mergeLinePositions(positionList);\r\n            geometry = new THREE.BufferGeometry();\r\n            addAttribute(geometry, 'position', new THREE.BufferAttribute(position, 3));\r\n            setBottomHeight(geometry, options.bottomHeight, layer);\r\n            const colors = initColors(options.colors);\r\n            if (colors && colors.length) {\r\n                addAttribute(geometry, 'color', new THREE.Float32BufferAttribute(colors, 3));\r\n                material.vertexColors = getVertexColors();\r\n            }\r\n        }\r\n        this._createLineSegments(geometry, material);\r\n        const { altitude } = options;\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        this.type = 'Line';\r\n    }\r\n    _workerLoad(result) {\r\n        const geometry = new THREE.BufferGeometry();\r\n        addAttribute(geometry, 'position', new THREE.BufferAttribute(new Float32Array(result.position), 3));\r\n        const colors = initColors(this.getOptions().colors);\r\n        const object3d = this.getObject3d();\r\n        const material = object3d.material;\r\n        if (colors && colors.length) {\r\n            addAttribute(geometry, 'color', new THREE.Float32BufferAttribute(colors, 3));\r\n            material.vertexColors = getVertexColors();\r\n        }\r\n        this._computeLineDistances(geometry);\r\n        object3d.geometry = geometry;\r\n        object3d.material.needsUpdate = true;\r\n        this._fire('workerload', { target: this });\r\n    }\r\n}\r\nexport default Line;\r\n//# sourceMappingURL=Line.js.map","import * as maptalks from 'maptalks';\r\nimport BaseObject from './BaseObject';\r\nimport { ExtrudeLineTaskIns } from './BaseObjectTaskManager';\r\nimport { setBottomHeight } from './util';\r\nimport { initVertexColors } from './util/ExtrudeUtil';\r\nimport { LineStringSplit, getExtrudeLineParams } from './util/LineUtil';\r\nimport { generateBufferGeometry, getDefaultBufferGeometry, mergeBufferGeometries } from './util/MergeGeometryUtil';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nconst OPTIONS = {\r\n    bottomHeight: 0,\r\n    width: 3,\r\n    height: 1,\r\n    altitude: 0,\r\n    topColor: null,\r\n    bottomColor: '#2d2f61',\r\n    heightEnable: true\r\n};\r\n/**\r\n *\r\n */\r\nclass ExtrudeLine extends BaseObject {\r\n    constructor(lineString, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, lineString });\r\n        super();\r\n        this._initOptions(options);\r\n        const { height, width, bottomColor, topColor, bottomHeight, altitude, asynchronous } = options;\r\n        const h = layer.distanceToVector3(height, height).x;\r\n        const w = layer.distanceToVector3(width, width).x;\r\n        const { lineStrings, center } = LineStringSplit(lineString);\r\n        let geometry;\r\n        if (asynchronous) {\r\n            geometry = getDefaultBufferGeometry();\r\n            const id = maptalks.Util.GUID();\r\n            this.getOptions().id = id;\r\n            this.getOptions().center = center;\r\n            ExtrudeLineTaskIns.push({\r\n                id,\r\n                data: lineStrings,\r\n                layer,\r\n                center,\r\n                lineString,\r\n                baseObject: this\r\n            });\r\n        }\r\n        else {\r\n            const extrudeParams = [];\r\n            let minZ = 0;\r\n            const cache = {};\r\n            for (let i = 0, len = lineStrings.length; i < len; i++) {\r\n                const attribute = getExtrudeLineParams(lineStrings[i], w, h, layer, center);\r\n                minZ = setBottomHeight(attribute, bottomHeight, layer, cache);\r\n                extrudeParams.push(attribute);\r\n            }\r\n            geometry = mergeBufferGeometries(extrudeParams);\r\n            if (topColor) {\r\n                initVertexColors(geometry, bottomColor, topColor, minZ + h / 2);\r\n                material.vertexColors = getVertexColors();\r\n            }\r\n        }\r\n        this._createMesh(geometry, material);\r\n        // const center = (isGeoJSON(lineString) ? getGeoJSONCenter(lineString) : lineString.getCenter());\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        this.type = 'ExtrudeLine';\r\n    }\r\n    _workerLoad(result) {\r\n        const bufferGeometry = generateBufferGeometry(result);\r\n        const { topColor, bottomColor, bottomHeight, height } = this.getOptions();\r\n        const object3d = this.getObject3d();\r\n        const material = object3d.material;\r\n        if (topColor) {\r\n            const layer = this.getLayer();\r\n            const h = layer.distanceToVector3(bottomHeight, bottomHeight).x;\r\n            const extrudeH = layer.distanceToVector3(height, height).x;\r\n            initVertexColors(bufferGeometry, bottomColor, topColor, h + extrudeH / 2);\r\n            material.vertexColors = getVertexColors();\r\n        }\r\n        object3d.geometry = bufferGeometry;\r\n        object3d.material.needsUpdate = true;\r\n        this._fire('workerload', { target: this });\r\n    }\r\n}\r\nexport default ExtrudeLine;\r\n//# sourceMappingURL=ExtrudeLine.js.map","import * as maptalks from 'maptalks';\r\nimport BaseObject from './BaseObject';\r\nimport { ExtrudePolygonTaskIns } from './BaseObjectTaskManager';\r\nimport { setBottomHeight } from './util';\r\nimport { getExtrudeGeometry, initVertexColors } from './util/ExtrudeUtil';\r\nimport { getGeoJSONCenter, isGeoJSONPolygon } from './util/GeoJSONUtil';\r\nimport { generateBufferGeometry, getDefaultBufferGeometry } from './util/MergeGeometryUtil';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nconst OPTIONS = {\r\n    altitude: 0,\r\n    height: 1,\r\n    bottomHeight: 0,\r\n    topColor: null,\r\n    bottomColor: '#2d2f61',\r\n    heightEnable: true\r\n};\r\n/**\r\n *\r\n */\r\nclass ExtrudePolygon extends BaseObject {\r\n    constructor(polygon, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, polygon });\r\n        super();\r\n        this._initOptions(options);\r\n        const { height, topColor, bottomColor, altitude, bottomHeight, asynchronous } = options;\r\n        let geometry;\r\n        const center = (isGeoJSONPolygon(polygon) ? getGeoJSONCenter(polygon) : polygon.getCenter());\r\n        if (asynchronous) {\r\n            geometry = getDefaultBufferGeometry();\r\n            const id = maptalks.Util.GUID();\r\n            this.getOptions().id = id;\r\n            this.getOptions().center = center;\r\n            ExtrudePolygonTaskIns.push({\r\n                data: polygon,\r\n                layer,\r\n                id,\r\n                baseObject: this\r\n            });\r\n        }\r\n        else {\r\n            geometry = getExtrudeGeometry(polygon, height, layer);\r\n            const h = setBottomHeight(geometry, bottomHeight, layer);\r\n            if (topColor) {\r\n                const extrudeH = layer.distanceToVector3(height, height).x;\r\n                initVertexColors(geometry, bottomColor, topColor, h + extrudeH / 2);\r\n                material.vertexColors = getVertexColors();\r\n            }\r\n        }\r\n        this._createMesh(geometry, material);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        this.type = 'ExtrudePolygon';\r\n    }\r\n    _workerLoad(data) {\r\n        const bufferGeometry = generateBufferGeometry(data);\r\n        const { topColor, bottomColor, bottomHeight, height } = this.getOptions();\r\n        const object3d = this.getObject3d();\r\n        const material = object3d.material;\r\n        if (topColor) {\r\n            const layer = this.getLayer();\r\n            const h = layer.distanceToVector3(bottomHeight, bottomHeight).x;\r\n            const extrudeH = layer.distanceToVector3(height, height).x;\r\n            initVertexColors(bufferGeometry, bottomColor, topColor, h + extrudeH / 2);\r\n            material.vertexColors = getVertexColors();\r\n        }\r\n        object3d.geometry = bufferGeometry;\r\n        object3d.material.needsUpdate = true;\r\n        this._fire('workerload', { target: this });\r\n    }\r\n}\r\nexport default ExtrudePolygon;\r\n//# sourceMappingURL=ExtrudePolygon.js.map","import * as maptalks from 'maptalks';\r\nimport BaseObject from './BaseObject';\r\nconst OPTIONS = {\r\n    altitude: 0,\r\n    coordinate: null\r\n};\r\n/**\r\n * Model container\r\n */\r\nclass Model extends BaseObject {\r\n    constructor(model, options = {}, layer) {\r\n        if (!options.coordinate) {\r\n            console.warn('coordinate is null,it is important to locate the model');\r\n            options.coordinate = layer.getMap().getCenter();\r\n        }\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, model });\r\n        super();\r\n        this._initOptions(options);\r\n        this._createGroup();\r\n        this.getObject3d().add(model);\r\n        const { altitude, coordinate } = options;\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const position = layer.coordinateToVector3(coordinate, z);\r\n        this.getObject3d().position.copy(position);\r\n        this.type = 'Model';\r\n    }\r\n}\r\nexport default Model;\r\n//# sourceMappingURL=Model.js.map","const PI = Math.PI / 180;\r\nconst R = 6378137;\r\nconst MINLENGTH = 1;\r\nfunction formatLineArray(polyline) {\r\n    const lnglats = polyline.getCoordinates();\r\n    return lnglats.map(lnglat => {\r\n        return lnglat.toArray();\r\n    });\r\n}\r\nfunction degreesToRadians(d) {\r\n    return d * PI;\r\n}\r\nexport function distance(c1, c2) {\r\n    if (!c1 || !c2) {\r\n        return 0;\r\n    }\r\n    if (!Array.isArray(c1)) {\r\n        c1 = c1.toArray();\r\n    }\r\n    if (!Array.isArray(c2)) {\r\n        c2 = c2.toArray();\r\n    }\r\n    let b = degreesToRadians(c1[1]);\r\n    const d = degreesToRadians(c2[1]), e = b - d, f = degreesToRadians(c1[0]) - degreesToRadians(c2[0]);\r\n    b = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(e / 2), 2) + Math.cos(b) * Math.cos(d) * Math.pow(Math.sin(f / 2), 2)));\r\n    b *= R;\r\n    return Math.round(b * 1E5) / 1E5;\r\n}\r\nexport function lineLength(polyline) {\r\n    let lnglatArray = polyline;\r\n    if (!Array.isArray(polyline)) {\r\n        lnglatArray = formatLineArray(polyline);\r\n    }\r\n    let l = 0;\r\n    for (let i = 0, len = lnglatArray.length; i < len - 1; i++) {\r\n        l += distance(lnglatArray[i], lnglatArray[i + 1]);\r\n    }\r\n    return l;\r\n}\r\nfunction getPercentLngLat(l, length) {\r\n    const { len, c1, c2 } = l;\r\n    const dx = c2[0] - c1[0], dy = c2[1] - c1[1];\r\n    const percent = length / len;\r\n    const lng = c1[0] + percent * dx;\r\n    const lat = c1[1] + percent * dy;\r\n    return [lng, lat];\r\n}\r\n/**\r\n * This is not an accurate line segment cutting method, but rough, in order to speed up the calculation,\r\n * the correct cutting algorithm can be referred to. http://turfjs.org/docs/#lineChunk\r\n * @param {*} cs\r\n * @param {*} lineChunkLength\r\n */\r\nexport function lineSlice(cs, lineChunkLength = 10) {\r\n    lineChunkLength = Math.max(lineChunkLength, MINLENGTH);\r\n    if (!Array.isArray(cs)) {\r\n        cs = formatLineArray(cs);\r\n    }\r\n    const LEN = cs.length;\r\n    let list = [];\r\n    let totalLen = 0;\r\n    for (let i = 0; i < LEN - 1; i++) {\r\n        const len = distance(cs[i], cs[i + 1]);\r\n        const floorlen = Math.floor(len);\r\n        list.push({\r\n            c1: cs[i],\r\n            len: floorlen,\r\n            c2: cs[i + 1]\r\n        });\r\n        totalLen += floorlen;\r\n    }\r\n    if (totalLen <= lineChunkLength) {\r\n        const lnglats = list.map(d => {\r\n            return [d.c1, d.c2];\r\n        });\r\n        return lnglats;\r\n    }\r\n    if (list.length === 1) {\r\n        if (list[0].len <= lineChunkLength) {\r\n            return [\r\n                [list[0].c1, list[0].c2]\r\n            ];\r\n        }\r\n    }\r\n    const LNGLATSLEN = list.length;\r\n    const first = list[0];\r\n    let idx = 0;\r\n    let currentLngLat;\r\n    let currentLen = 0;\r\n    const lines = [];\r\n    let lls = [first.c1];\r\n    while (idx < LNGLATSLEN) {\r\n        const { len, c2 } = list[idx];\r\n        currentLen += len;\r\n        if (currentLen < lineChunkLength) {\r\n            lls.push(c2);\r\n            if (idx === LNGLATSLEN - 1) {\r\n                lines.push(lls);\r\n            }\r\n            idx++;\r\n        }\r\n        if (currentLen === lineChunkLength) {\r\n            lls.push(c2);\r\n            currentLen = 0;\r\n            lines.push(lls);\r\n            //next\r\n            lls = [c2];\r\n            idx++;\r\n        }\r\n        if (currentLen > lineChunkLength) {\r\n            const offsetLen = (len - currentLen + lineChunkLength);\r\n            currentLngLat = getPercentLngLat(list[idx], offsetLen);\r\n            lls.push(currentLngLat);\r\n            lines.push(lls);\r\n            currentLen = 0;\r\n            list[idx].c1 = currentLngLat;\r\n            list[idx].len = len - offsetLen;\r\n            //next\r\n            lls = [];\r\n            lls.push(currentLngLat);\r\n        }\r\n    }\r\n    return lines;\r\n}\r\n//# sourceMappingURL=GeoUtil.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport { lineSlice } from './util/GeoUtil';\r\nimport { getExtrudeLineParams, getChunkLinesPosition } from './util/LineUtil';\r\nimport { isGeoJSON, getGeoJSONCenter, getGeoJSONCoordinates } from './util/GeoJSONUtil';\r\nimport { addAttribute } from './util/ThreeAdaptUtil';\r\nconst MAX_POINTS = 1000;\r\n/**\r\n *\r\n * @param {THREE.BufferGeometry} geometry\r\n * @param {*} ps\r\n * @param {*} norls\r\n * @param {*} indices\r\n */\r\nfunction setExtrudeLineGeometryAttribute(geometry, ps, norls, indices) {\r\n    const len = ps.length;\r\n    geometry.attributes.normal.count = len;\r\n    geometry.attributes.position.count = len;\r\n    const positions = geometry.attributes.position.array;\r\n    const normals = geometry.attributes.normal.array;\r\n    for (let i = 0; i < len; i++) {\r\n        positions[i] = ps[i];\r\n        normals[i] = norls[i];\r\n    }\r\n    // geometry.index.array = new Uint16Array(indices.length);\r\n    geometry.index.count = indices.length;\r\n    // geometry.index.needsUpdate = true;\r\n    for (let i = 0, len1 = indices.length; i < len1; i++) {\r\n        geometry.index.array[i] = indices[i];\r\n    }\r\n    // geometry.setIndex(new THREE.Uint32BufferAttribute(indices, 1));\r\n    // geometry.setDrawRange(0, len / 3);\r\n}\r\nconst OPTIONS = {\r\n    trail: 5,\r\n    chunkLength: 50,\r\n    width: 2,\r\n    height: 1,\r\n    speed: 1,\r\n    altitude: 0,\r\n    interactive: false,\r\n    heightEnable: true\r\n};\r\n/**\r\n *\r\n */\r\nclass ExtrudeLineTrail extends BaseObject {\r\n    constructor(lineString, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, lineString });\r\n        super();\r\n        this._initOptions(options);\r\n        const { width, height, altitude, speed, chunkLength, trail } = options;\r\n        let center, coordinates;\r\n        if (isGeoJSON(lineString)) {\r\n            center = getGeoJSONCenter(lineString);\r\n            coordinates = getGeoJSONCoordinates(lineString);\r\n        }\r\n        else {\r\n            center = lineString.getCenter();\r\n            coordinates = lineString;\r\n        }\r\n        const chunkLines = lineSlice(coordinates, chunkLength);\r\n        const centerPt = layer.coordinateToVector3(center);\r\n        //cache position for  faster computing,reduce double counting\r\n        const positionMap = {};\r\n        for (let i = 0, len = chunkLines.length; i < len; i++) {\r\n            const chunkLine = chunkLines[i];\r\n            for (let j = 0, len1 = chunkLine.length; j < len1; j++) {\r\n                const lnglat = chunkLine[j];\r\n                const key = lnglat.join(',').toString();\r\n                if (!positionMap[key]) {\r\n                    positionMap[key] = layer.coordinateToVector3(lnglat).sub(centerPt);\r\n                }\r\n            }\r\n        }\r\n        const positions = getChunkLinesPosition(chunkLines.slice(0, 1), layer, positionMap, centerPt).positionsV;\r\n        //generate geometry\r\n        const geometry = new THREE.BufferGeometry();\r\n        const ps = new Float32Array(MAX_POINTS * 3); // 3 vertices per point\r\n        const norls = new Float32Array(MAX_POINTS * 3); // 3 vertices per point\r\n        const inds = new Uint16Array(MAX_POINTS);\r\n        addAttribute(geometry, 'position', (new THREE.BufferAttribute(ps, 3)));\r\n        addAttribute(geometry, 'normal', (new THREE.BufferAttribute(norls, 3)));\r\n        geometry.setIndex(new THREE.BufferAttribute(inds, 1));\r\n        const lineWidth = layer.distanceToVector3(width, width).x;\r\n        const depth = layer.distanceToVector3(height, height).x;\r\n        const params = getExtrudeLineParams(positions, lineWidth, depth, layer);\r\n        setExtrudeLineGeometryAttribute(geometry, params.position, params.normal, params.indices);\r\n        this._createMesh(geometry, material);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        this._params = {\r\n            index: 0,\r\n            chunkLines,\r\n            geometries: [],\r\n            layer,\r\n            trail: Math.max(1, trail),\r\n            lineWidth,\r\n            depth,\r\n            speed: Math.min(1, speed),\r\n            idx: 0,\r\n            loaded: false,\r\n            positionMap,\r\n            centerPt\r\n        };\r\n        this._init(this._params);\r\n        this.type = 'ExtrudeLineTrail';\r\n    }\r\n    /**\r\n     * Follow-up support for adding webworker\r\n     * @param {*} params\r\n     */\r\n    _init(params) {\r\n        const { layer, trail, lineWidth, depth, chunkLines, positionMap, centerPt } = params;\r\n        const len = chunkLines.length, geometries = [];\r\n        for (let i = 0; i < len; i++) {\r\n            const lines = chunkLines.slice(i, i + trail);\r\n            const ps = getChunkLinesPosition(lines, layer, positionMap, centerPt).positionsV;\r\n            geometries.push(getExtrudeLineParams(ps, lineWidth, depth, layer));\r\n        }\r\n        this._params.geometries = geometries;\r\n        this._params.loaded = true;\r\n    }\r\n    _animation() {\r\n        const { index, geometries, speed, idx, chunkLines, trail, lineWidth, depth, loaded, layer, positionMap, centerPt } = this._params;\r\n        if (!loaded)\r\n            return;\r\n        const i = Math.round(index);\r\n        if (i > idx) {\r\n            this._params.idx++;\r\n            let p = geometries[i];\r\n            //if not init, this is will running\r\n            if (!p) {\r\n                const lines = chunkLines.slice(i, i + trail);\r\n                const ps = getChunkLinesPosition(lines, layer, positionMap, centerPt).positionsV;\r\n                p = getExtrudeLineParams(ps, lineWidth, depth, layer);\r\n                geometries[i] = p;\r\n            }\r\n            const object3d = this.getObject3d();\r\n            setExtrudeLineGeometryAttribute(object3d.geometry, p.position, p.normal, p.indices);\r\n            object3d.geometry.attributes.position.needsUpdate = true;\r\n            object3d.geometry.attributes.normal.needsUpdate = true;\r\n            object3d.geometry.index.needsUpdate = true;\r\n        }\r\n        if (index >= chunkLines.length - 1) {\r\n            this._params.index = -1;\r\n            this._params.idx = -1;\r\n        }\r\n        this._params.index += speed;\r\n    }\r\n}\r\nexport default ExtrudeLineTrail;\r\n//# sourceMappingURL=ExtrudeLineTrail.js.map","import * as THREE from 'three';\r\nimport { getGeometriesColorArray } from './util';\r\nimport { addAttribute, getVertexColors } from './util/ThreeAdaptUtil';\r\nconst EVENTS = ['click', 'mousemove', 'mousedown', 'mouseup', 'dblclick', 'contextmenu'].join(' ').toString();\r\nconst defaultMaterial = new THREE.MeshBasicMaterial();\r\ndefaultMaterial.vertexColors = getVertexColors();\r\n/**\r\n * This is for the merger, MergedExtrudeMesh,Points ...\r\n * @param {*} Base\r\n */\r\nconst MergedMixin = (Base) => {\r\n    return class extends Base {\r\n        // this._faceMap=[];\r\n        // this._baseObjects = [];\r\n        // this._datas = [];\r\n        // this.faceIndex = null;\r\n        // this.index=null;\r\n        // this._geometriesAttributes = [];\r\n        // this._geometryCache = geometry.clone();\r\n        // this.isHide = false;\r\n        /**\r\n         *\r\n         * @param {*} baseObjects\r\n         */\r\n        _initBaseObjectsEvent(baseObjects) {\r\n            if (baseObjects && Array.isArray(baseObjects) && baseObjects.length) {\r\n                for (let i = 0, len = baseObjects.length; i < len; i++) {\r\n                    const baseObject = baseObjects[i];\r\n                    this._proxyEvent(baseObject);\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n        /**\r\n         *Events representing the merge\r\n         * @param {*} baseObject\r\n         */\r\n        _proxyEvent(baseObject) {\r\n            baseObject.on('add', (e) => {\r\n                this._showGeometry(e.target, true);\r\n            });\r\n            baseObject.on('remove', (e) => {\r\n                this._showGeometry(e.target, false);\r\n            });\r\n            baseObject.on('mouseout', (e) => {\r\n                this._mouseover = false;\r\n                this.fire('mouseout', Object.assign({}, e, { target: this, selectMesh: (this.getSelectMesh ? this.getSelectMesh() : null) }));\r\n                // this._showGeometry(e.target, false);\r\n            });\r\n            baseObject.on(EVENTS, (e) => {\r\n                this.fire(e.type, Object.assign({}, e, { target: this, selectMesh: (this.getSelectMesh ? this.getSelectMesh() : null) }));\r\n            });\r\n        }\r\n        /**\r\n         * Get the index of the monomer to be hidden\r\n         * @param {*} attribute\r\n         */\r\n        _getHideGeometryIndex(attribute) {\r\n            const indexs = [];\r\n            let count = 0;\r\n            for (let i = 0, len = this._geometriesAttributes.length; i < len; i++) {\r\n                if (this._geometriesAttributes[i].hide === true) {\r\n                    indexs.push(i);\r\n                    count += this._geometriesAttributes[i][attribute].count;\r\n                }\r\n            }\r\n            return {\r\n                indexs,\r\n                count\r\n            };\r\n        }\r\n        /**\r\n         * update geometry attributes\r\n         * @param {*} bufferAttribute\r\n         * @param {*} attribute\r\n         */\r\n        _updateAttribute(bufferAttribute, attribute) {\r\n            const { indexs } = this._getHideGeometryIndex(attribute);\r\n            const array = this._geometryCache.attributes[attribute].array;\r\n            const len = array.length;\r\n            for (let i = 0; i < len; i++) {\r\n                bufferAttribute.array[i] = array[i];\r\n            }\r\n            let value = NaN;\r\n            if (this.getObject3d() instanceof THREE.LineSegments) {\r\n                value = 0;\r\n            }\r\n            for (let j = 0; j < indexs.length; j++) {\r\n                const index = indexs[j];\r\n                const { start, end } = this._geometriesAttributes[index][attribute];\r\n                for (let i = start; i < end; i++) {\r\n                    bufferAttribute.array[i] = value;\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n        /**\r\n         * show or hide monomer\r\n         * @param {*} baseObject\r\n         * @param {*} isHide\r\n         */\r\n        _showGeometry(baseObject, isHide) {\r\n            let index;\r\n            if (baseObject) {\r\n                index = baseObject.getOptions().index;\r\n            }\r\n            if (index != null) {\r\n                const geometryAttributes = this._geometriesAttributes[index];\r\n                const { hide } = geometryAttributes;\r\n                if (hide === isHide) {\r\n                    return this;\r\n                }\r\n                geometryAttributes.hide = isHide;\r\n                const buffGeom = this.getObject3d().geometry;\r\n                this._updateAttribute(buffGeom.attributes.position, 'position');\r\n                // this._updateAttribute(buffGeom.attributes.normal, 'normal', 3);\r\n                // this._updateAttribute(buffGeom.attributes.color, 'color', 3);\r\n                // this._updateAttribute(buffGeom.attributes.uv, 'uv', 2);\r\n                buffGeom.attributes.position.needsUpdate = true;\r\n                // buffGeom.attributes.color.needsUpdate = true;\r\n                // buffGeom.attributes.normal.needsUpdate = true;\r\n                // buffGeom.attributes.uv.needsUpdate = true;\r\n                this.isHide = isHide;\r\n            }\r\n            return this;\r\n        }\r\n        /**\r\n         * Get selected monomer\r\n         */\r\n        // eslint-disable-next-line consistent-return\r\n        getSelectMesh() {\r\n            const index = this._getIndex();\r\n            if (index != null) {\r\n                return {\r\n                    data: this._datas[index],\r\n                    baseObject: this._baseObjects[index]\r\n                };\r\n            }\r\n        }\r\n        _getIndex(faceIndex) {\r\n            if (faceIndex == null) {\r\n                faceIndex = this.faceIndex || this.index;\r\n            }\r\n            return faceIndex;\r\n        }\r\n        _init() {\r\n            const pick = this.getLayer().getPick();\r\n            this.on('add', () => {\r\n                pick.add(this.pickObject3d);\r\n            });\r\n            this.on('remove', () => {\r\n                pick.remove(this.pickObject3d);\r\n            });\r\n        }\r\n        //Different objects need to implement their own methods\r\n        _setPickObject3d() {\r\n            if (!this._colorMap) {\r\n                return;\r\n            }\r\n            // multiplexing geometry\r\n            const geometry = this._geometryCache || this.getObject3d().geometry.clone();\r\n            const pick = this.getLayer().getPick();\r\n            const { _geometriesAttributes } = this;\r\n            const len = _geometriesAttributes.length;\r\n            const colors = getGeometriesColorArray(_geometriesAttributes);\r\n            let cIndex = 0;\r\n            for (let i = 0; i < len; i++) {\r\n                const color = pick.getColor();\r\n                const colorIndex = color.getHex();\r\n                this._colorMap[colorIndex] = i;\r\n                const { count } = _geometriesAttributes[i].position;\r\n                this._datas[i].colorIndex = colorIndex;\r\n                for (let j = 0; j < count; j++) {\r\n                    colors[cIndex] = color.r;\r\n                    colors[cIndex + 1] = color.g;\r\n                    colors[cIndex + 2] = color.b;\r\n                    cIndex += 3;\r\n                }\r\n            }\r\n            addAttribute(geometry, 'color', new THREE.BufferAttribute(colors, 3, true));\r\n            // const material = new THREE.MeshBasicMaterial();\r\n            // material.vertexColors = THREE.VertexColors;\r\n            const color = pick.getColor();\r\n            const colorIndex = color.getHex();\r\n            const mesh = new THREE.Mesh(geometry, defaultMaterial);\r\n            mesh.position.copy(this.getObject3d().position);\r\n            mesh['_colorIndex'] = colorIndex;\r\n            this.setPickObject3d(mesh);\r\n        }\r\n    };\r\n};\r\nexport default MergedMixin;\r\n//# sourceMappingURL=MergedMixin.js.map","import * as maptalks from 'maptalks';\r\nimport BaseObject from './BaseObject';\r\nimport { initVertexColors, getExtrudeGeometryParams } from './util/ExtrudeUtil';\r\nimport ExtrudePolygon from './ExtrudePolygon';\r\nimport MergedMixin from './MergedMixin';\r\nimport { getGeoJSONCenter, isGeoJSONPolygon } from './util/GeoJSONUtil';\r\nimport { generateBufferGeometry, generatePickBufferGeometry, getDefaultBufferGeometry, mergeBufferGeometries } from './util/MergeGeometryUtil';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nimport { setBottomHeight } from './util';\r\nimport { ExtrudePolygonsTaskIns } from './BaseObjectTaskManager';\r\nconst OPTIONS = {\r\n    altitude: 0,\r\n    height: 1,\r\n    bottomHeight: 0,\r\n    topColor: null,\r\n    bottomColor: '#2d2f61',\r\n};\r\nconst TEMP_COORD = new maptalks.Coordinate(0, 0);\r\nclass ExtrudePolygons extends MergedMixin(BaseObject) {\r\n    constructor(polygons, options, material, layer) {\r\n        if (!Array.isArray(polygons)) {\r\n            polygons = [polygons];\r\n        }\r\n        const len = polygons.length;\r\n        if (len === 0) {\r\n            console.error('polygons is empty');\r\n        }\r\n        // const centers = [];\r\n        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\r\n        for (let i = 0; i < len; i++) {\r\n            const polygon = polygons[i];\r\n            const center = (polygon.getCenter ? polygon.getCenter() : getGeoJSONCenter(polygon, TEMP_COORD));\r\n            let x, y;\r\n            if (Array.isArray(center)) {\r\n                x = center[0];\r\n                y = center[1];\r\n            }\r\n            else if (center instanceof maptalks.Coordinate) {\r\n                x = center.x;\r\n                y = center.y;\r\n            }\r\n            minX = Math.min(minX, x);\r\n            minY = Math.min(minY, y);\r\n            maxX = Math.max(maxX, x);\r\n            maxY = Math.max(maxY, y);\r\n        }\r\n        // Get the center point of the point set\r\n        const center = new maptalks.Coordinate((minX + maxX) / 2, (minY + maxY) / 2);\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, polygons, coordinate: center });\r\n        const { topColor, bottomColor, altitude, asynchronous } = options;\r\n        let bufferGeometry;\r\n        const extrudePolygons = [], faceMap = [], geometriesAttributes = [];\r\n        super();\r\n        if (asynchronous) {\r\n            bufferGeometry = getDefaultBufferGeometry();\r\n            ExtrudePolygonsTaskIns.push({\r\n                id: maptalks.Util.GUID(),\r\n                layer,\r\n                key: options.key,\r\n                center,\r\n                data: polygons,\r\n                baseObject: this\r\n            });\r\n        }\r\n        else {\r\n            const centerPt = layer.coordinateToVector3(center);\r\n            const geometries = [];\r\n            let faceIndex = 0, psIndex = 0, normalIndex = 0, uvIndex = 0;\r\n            const altCache = {};\r\n            for (let i = 0; i < len; i++) {\r\n                const polygon = polygons[i];\r\n                const properties = (isGeoJSONPolygon(polygon) ? polygon['properties'] : polygon.getProperties() || {});\r\n                const height = properties.height || 1;\r\n                const bottomHeight = properties.bottomHeight || 0;\r\n                const buffGeom = getExtrudeGeometryParams(polygon, height, layer, center, centerPt, altCache);\r\n                geometries.push(buffGeom);\r\n                const minZ = setBottomHeight(buffGeom, bottomHeight, layer, altCache);\r\n                // const extrudePolygon = new ExtrudePolygon(polygon, Object.assign({}, options, { height, index: i }), material, layer);\r\n                // extrudePolygons.push(extrudePolygon);\r\n                const { position, normal, uv, indices } = buffGeom;\r\n                const faceLen = indices.length / 3;\r\n                // faceMap[i] = [faceIndex + 1, faceIndex + faceLen];\r\n                faceIndex += faceLen;\r\n                const psCount = position.length / 3, \r\n                //  colorCount = buffGeom.attributes.color.count,\r\n                normalCount = normal.length / 3, uvCount = uv.length / 2;\r\n                geometriesAttributes[i] = {\r\n                    position: {\r\n                        middleZ: minZ + altCache[height] / 2,\r\n                        count: psCount,\r\n                        start: psIndex,\r\n                        end: psIndex + psCount * 3,\r\n                    },\r\n                    // normal: {\r\n                    //     count: normalCount,\r\n                    //     start: normalIndex,\r\n                    //     end: normalIndex + normalCount * 3,\r\n                    // },\r\n                    // // color: {\r\n                    // //     count: colorCount,\r\n                    // //     start: colorIndex,\r\n                    // //     end: colorIndex + colorCount * 3,\r\n                    // // },\r\n                    // uv: {\r\n                    //     count: uvCount,\r\n                    //     start: uvIndex,\r\n                    //     end: uvIndex + uvCount * 2,\r\n                    // },\r\n                    hide: false\r\n                };\r\n                psIndex += psCount * 3;\r\n                normalIndex += normalCount * 3;\r\n                // colorIndex += colorCount * 3;\r\n                uvIndex += uvCount * 2;\r\n            }\r\n            bufferGeometry = mergeBufferGeometries(geometries);\r\n            if (topColor) {\r\n                initVertexColors(bufferGeometry, bottomColor, topColor, geometriesAttributes);\r\n                material.vertexColors = getVertexColors();\r\n            }\r\n        }\r\n        this._initOptions(options);\r\n        this._createMesh(bufferGeometry, material);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        //Face corresponding to monomer\r\n        // this._faceMap = faceMap;\r\n        this._baseObjects = extrudePolygons;\r\n        this._datas = polygons;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        this.faceIndex = null;\r\n        this._geometryCache = generatePickBufferGeometry(bufferGeometry);\r\n        this.isHide = false;\r\n        this._colorMap = {};\r\n        this._initBaseObjectsEvent(extrudePolygons);\r\n        if (!asynchronous) {\r\n            this._setPickObject3d();\r\n            this._init();\r\n        }\r\n        this.type = 'ExtrudePolygons';\r\n    }\r\n    // eslint-disable-next-line consistent-return\r\n    getSelectMesh() {\r\n        const index = this._getIndex();\r\n        if (index != null) {\r\n            if (!this._baseObjects[index]) {\r\n                const polygon = this._datas[index];\r\n                const opts = Object.assign({}, this.options, isGeoJSONPolygon(polygon) ? polygon.properties : polygon.getProperties(), { index });\r\n                this._baseObjects[index] = new ExtrudePolygon(polygon, opts, this.getObject3d().material, this.getLayer());\r\n                this._proxyEvent(this._baseObjects[index]);\r\n            }\r\n            return {\r\n                data: this._datas[index],\r\n                baseObject: this._baseObjects[index]\r\n            };\r\n        }\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    identify(coordinate) {\r\n        return this.picked;\r\n    }\r\n    _workerLoad(result) {\r\n        const { geometriesAttributes } = result;\r\n        // this._faceMap = faceMap;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        const bufferGeometry = generateBufferGeometry(result);\r\n        this._geometryCache = generatePickBufferGeometry(bufferGeometry);\r\n        const { topColor, bottomColor } = this.getOptions();\r\n        const object3d = this.getObject3d();\r\n        const material = object3d.material;\r\n        if (topColor) {\r\n            initVertexColors(bufferGeometry, bottomColor, topColor, geometriesAttributes);\r\n            material.vertexColors = getVertexColors();\r\n        }\r\n        object3d.geometry = bufferGeometry;\r\n        object3d.material.needsUpdate = true;\r\n        this._setPickObject3d();\r\n        this._init();\r\n        if (this.isAdd) {\r\n            const pick = this.getLayer().getPick();\r\n            pick.add(this.pickObject3d);\r\n        }\r\n        this._fire('workerload', { target: this });\r\n    }\r\n}\r\nexport default ExtrudePolygons;\r\n//# sourceMappingURL=ExtrudePolygons.js.map","import * as THREE from 'three';\r\nimport { distanceToVector3 } from './index';\r\nfunction positionsConvert(worldPoints, altitude = 0, layer) {\r\n    const vectors = [], cache = {};\r\n    for (let i = 0, len = worldPoints.length; i < len; i += 3) {\r\n        let x = worldPoints[i], y = worldPoints[i + 1], z = worldPoints[i + 2];\r\n        if (altitude > 0) {\r\n            z += distanceToVector3(altitude, layer, cache);\r\n        }\r\n        vectors.push(new THREE.Vector3(x, y, z));\r\n    }\r\n    return vectors;\r\n}\r\nexport function vectors2Pixel(worldPoints, size, camera, altitude = 0, layer) {\r\n    if (!(worldPoints[0] instanceof THREE.Vector3)) {\r\n        worldPoints = positionsConvert(worldPoints, altitude, layer);\r\n    }\r\n    const pixels = worldPoints.map(worldPoint => {\r\n        return vector2Pixel(worldPoint, size, camera);\r\n    });\r\n    return pixels;\r\n}\r\n// eslint-disable-next-line camelcase\r\nexport function vector2Pixel(world_vector, size, camera) {\r\n    // eslint-disable-next-line camelcase\r\n    const vector = world_vector.project(camera);\r\n    const halfWidth = size.width / 2;\r\n    const halfHeight = size.height / 2;\r\n    const result = {\r\n        x: Math.round(vector.x * halfWidth + halfWidth),\r\n        y: Math.round(-vector.y * halfHeight + halfHeight)\r\n    };\r\n    return result;\r\n}\r\n//# sourceMappingURL=IdentifyUtil.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport { vector2Pixel } from './util/IdentifyUtil';\r\nimport { addAttribute } from './util/ThreeAdaptUtil';\r\nconst OPTIONS = {\r\n    altitude: 0,\r\n    height: 0,\r\n    color: null\r\n};\r\nconst vector = new THREE.Vector3();\r\nclass Point extends BaseObject {\r\n    constructor(coordinate, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, coordinate });\r\n        super();\r\n        let { height, altitude, color, size } = options;\r\n        const vs = [], colors = [];\r\n        if (color) {\r\n            color = (color instanceof THREE.Color ? color : new THREE.Color(color));\r\n            colors.push(color.r, color.g, color.b);\r\n        }\r\n        const z = layer.distanceToVector3(height, height).x;\r\n        const v = layer.coordinateToVector3(coordinate, z);\r\n        vs.push(0, 0, v.z);\r\n        const geometry = new THREE.BufferGeometry();\r\n        addAttribute(geometry, 'position', new THREE.Float32BufferAttribute(vs, 3, true));\r\n        if (colors.length) {\r\n            addAttribute(geometry, 'color', new THREE.Float32BufferAttribute(colors, 3, true));\r\n        }\r\n        if (size !== undefined) {\r\n            addAttribute(geometry, 'size', new THREE.Float32BufferAttribute([size], 1, true));\r\n        }\r\n        options.positions = v;\r\n        this._initOptions(options);\r\n        this._createPoints(geometry, material);\r\n        const z1 = layer.distanceToVector3(altitude, altitude).x;\r\n        const v1 = new THREE.Vector3(v.x, v.y, z1);\r\n        this.getObject3d().position.copy(v1);\r\n        this.type = 'Point';\r\n    }\r\n    /**\r\n     *\r\n     * @param {maptalks.Coordinate} coordinate\r\n     */\r\n    identify(coordinate) {\r\n        const layer = this.getLayer(), size = this.getMap().getSize(), camera = this.getLayer().getCamera(), positions = this.getOptions().positions, altitude = this.getOptions().altitude;\r\n        //Size of points\r\n        let pointSize = this.getObject3d().material.size;\r\n        if (pointSize === undefined) {\r\n            pointSize = this.options.size || 1;\r\n        }\r\n        const pixel = this.getMap().coordToContainerPoint(coordinate);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        vector.x = positions.x;\r\n        vector.y = positions.y;\r\n        vector.z = positions.z + z;\r\n        //3D vector to screen coordinates\r\n        const p = vector2Pixel(vector, size, camera);\r\n        //Distance between two points\r\n        const distance = Math.sqrt(Math.pow(pixel.x - p.x, 2) + Math.pow(pixel.y - p.y, 2));\r\n        return (distance <= pointSize / 2);\r\n    }\r\n}\r\nexport default Point;\r\n//# sourceMappingURL=Point.js.map","import * as maptalks from 'maptalks';\r\nconst ROW = 30, COL = 30;\r\nfunction contains(b, p) {\r\n    const { minx, miny, maxx, maxy } = b;\r\n    const [x, y] = p;\r\n    if (minx <= x && x <= maxx && miny <= y && y <= maxy) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nclass BBox {\r\n    constructor(minlng, minlat, maxlng, maxlat) {\r\n        this.minlng = minlng;\r\n        this.minlat = minlat;\r\n        this.maxlng = maxlng;\r\n        this.maxlat = maxlat;\r\n        this.minx = Infinity;\r\n        this.miny = Infinity;\r\n        this.maxx = -Infinity;\r\n        this.maxy = -Infinity;\r\n        this.coordinates = [];\r\n        this.positions = [];\r\n        this.indexs = [];\r\n        this.key = null;\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} map\r\n     */\r\n    updateBBoxPixel(map) {\r\n        let minx = Infinity, miny = Infinity, maxx = -Infinity, maxy = -Infinity;\r\n        const { minlng, minlat, maxlng, maxlat } = this;\r\n        [\r\n            [minlng, minlat],\r\n            [minlng, maxlat],\r\n            [maxlng, minlat],\r\n            [maxlng, maxlat]\r\n        ].map(lnglat => {\r\n            return new maptalks.Coordinate(lnglat);\r\n        }).map(coordinate => {\r\n            return map.coordToContainerPoint(coordinate);\r\n        }).forEach(pixel => {\r\n            minx = Math.min(minx, pixel.x);\r\n            miny = Math.min(miny, pixel.y);\r\n            maxx = Math.max(maxx, pixel.x);\r\n            maxy = Math.max(maxy, pixel.y);\r\n        });\r\n        this.minx = minx;\r\n        this.miny = miny;\r\n        this.maxx = maxx;\r\n        this.maxy = maxy;\r\n        return this;\r\n    }\r\n    /**\r\n     *Determine whether a point is included\r\n     * @param {*} c\r\n     */\r\n    containsCoordinate(c) {\r\n        let lng, lat;\r\n        if (Array.isArray(c)) {\r\n            lng = c[0];\r\n            lat = c[1];\r\n        }\r\n        else if (c instanceof maptalks.Coordinate) {\r\n            lng = c.x;\r\n            lat = c.y;\r\n        }\r\n        const { minlng, minlat, maxlng, maxlat } = this;\r\n        return (minlng <= lng && lng <= maxlng && minlat <= lat && lat <= maxlat);\r\n    }\r\n    /**\r\n     *Judge rectangle intersection\r\n     * @param {*} pixel\r\n     * @param {*} size\r\n     */\r\n    isRecCross(pixel, size) {\r\n        const { x, y } = pixel;\r\n        const rec = {\r\n            minx: x - size / 2,\r\n            miny: y - size / 2,\r\n            maxx: x + size / 2,\r\n            maxy: y + size / 2\r\n        };\r\n        const { minx, miny, maxx, maxy } = rec;\r\n        if (contains(this, [minx, miny]) ||\r\n            contains(this, [minx, maxy]) ||\r\n            contains(this, [maxx, miny]) ||\r\n            contains(this, [maxx, maxy]) ||\r\n            contains(rec, [this.minx, this.miny]) ||\r\n            contains(rec, [this.minx, this.maxy]) ||\r\n            contains(rec, [this.maxx, this.miny]) ||\r\n            contains(rec, [this.maxx, this.maxy])) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     *generate grids\r\n     * @param {*} minlng\r\n     * @param {*} minlat\r\n     * @param {*} maxlng\r\n     * @param {*} maxlat\r\n     */\r\n    static initGrids(minlng, minlat, maxlng, maxlat) {\r\n        const grids = [], offsetX = maxlng - minlng, offsetY = maxlat - minlat;\r\n        const averageX = offsetX / COL, averageY = offsetY / ROW;\r\n        let x = minlng, y = minlat;\r\n        for (let i = 0; i < COL; i++) {\r\n            x = minlng + i * averageX;\r\n            for (let j = 0; j < ROW; j++) {\r\n                y = minlat + j * averageY;\r\n                const bounds = new BBox(x, y, x + averageX, y + averageY);\r\n                bounds.key = j + '-' + i;\r\n                grids.push(bounds);\r\n            }\r\n        }\r\n        return { grids, averageX, averageY, ROWS: ROW, COLS: COL };\r\n    }\r\n}\r\nexport default BBox;\r\n//# sourceMappingURL=BBox.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport Point from './Point';\r\nimport { vector2Pixel } from './util/IdentifyUtil';\r\nimport MergedMixin from './MergedMixin';\r\nimport BBox from './util/BBox';\r\nimport { addAttribute } from './util/ThreeAdaptUtil';\r\nimport { distanceToVector3 } from './util';\r\nconst OPTIONS = {\r\n    altitude: 0\r\n};\r\nconst vector = new THREE.Vector3();\r\nfunction roundFun(value, n) {\r\n    const tempValue = Math.pow(10, n);\r\n    return Math.round(value * tempValue) / tempValue;\r\n}\r\n/**\r\n *points\r\n */\r\nclass Points extends MergedMixin(BaseObject) {\r\n    constructor(points, options, material, layer) {\r\n        if (!Array.isArray(points)) {\r\n            points = [points];\r\n        }\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, points });\r\n        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\r\n        for (let i = 0, len = points.length; i < len; i++) {\r\n            const { coordinate } = points[i];\r\n            let x, y;\r\n            if (Array.isArray(coordinate)) {\r\n                x = coordinate[0];\r\n                y = coordinate[1];\r\n            }\r\n            else if (coordinate instanceof maptalks.Coordinate) {\r\n                x = coordinate.x;\r\n                y = coordinate.y;\r\n            }\r\n            points[i].coords = [x, y];\r\n            minX = Math.min(minX, x);\r\n            minY = Math.min(minY, y);\r\n            maxX = Math.max(maxX, x);\r\n            maxY = Math.max(maxY, y);\r\n        }\r\n        const centerPt = layer.coordinateToVector3([(minX + maxX) / 2, (minY + maxY) / 2]);\r\n        const { grids, averageX, averageY, ROWS, COLS } = BBox.initGrids(minX, minY, maxX, maxY);\r\n        const gridslen = grids.length;\r\n        const vs = new Float32Array(points.length * 3), vectors = [], colors = new Float32Array(points.length * 3), sizes = new Float32Array(points.length), pointMeshes = [], geometriesAttributes = [];\r\n        const cache = {};\r\n        let maxSize = 0;\r\n        let hasColor = false, hasSize = false;\r\n        const TEMP_VECTOR = new THREE.Vector3(0, 0, 0);\r\n        for (let i = 0, len = points.length; i < len; i++) {\r\n            let { coordinate, height, color, size, coords } = points[i];\r\n            const idx = i * 3;\r\n            if (color) {\r\n                hasColor = true;\r\n                color = (color instanceof THREE.Color ? color : new THREE.Color(color));\r\n                colors[idx] = color.r;\r\n                colors[idx + 1] = color.g;\r\n                colors[idx + 2] = color.b;\r\n            }\r\n            if (size) {\r\n                hasSize = true;\r\n                sizes[i] = size;\r\n                maxSize = Math.max(maxSize, size);\r\n            }\r\n            const z = distanceToVector3(height, layer, cache);\r\n            const v = layer.coordinateToVector3(coordinate, z);\r\n            TEMP_VECTOR.x = v.x;\r\n            TEMP_VECTOR.y = v.y;\r\n            TEMP_VECTOR.z = v.z;\r\n            TEMP_VECTOR.sub(centerPt);\r\n            // const v1 = v.clone().sub(centerPt);\r\n            vs[idx] = TEMP_VECTOR.x;\r\n            vs[idx + 1] = TEMP_VECTOR.y;\r\n            vs[idx + 2] = TEMP_VECTOR.z;\r\n            vectors.push(v);\r\n            geometriesAttributes[i] = {\r\n                position: {\r\n                    count: 1,\r\n                    start: i * 3,\r\n                    end: i * 3 + 3\r\n                },\r\n                hide: false\r\n            };\r\n            let row = roundFun(((coords[1] - minY) / averageY), 4);\r\n            let col = roundFun(((coords[0] - minX) / averageX), 4);\r\n            row -= 1;\r\n            col -= 1;\r\n            row = Math.max(0, row);\r\n            col = Math.max(0, col);\r\n            row = Math.ceil(row);\r\n            col = Math.ceil(col);\r\n            const gridIndex = col * ROWS + row;\r\n            if (grids[gridIndex]) {\r\n                grids[gridIndex].positions.push(v);\r\n                grids[gridIndex].indexs.push(i);\r\n            }\r\n            // for (let j = 0; j < gridslen; j++) {\r\n            //     if (grids[j].containsCoordinate(coordinate)) {\r\n            //         // grids[j].coordinates.push(coordinate);\r\n            //         grids[j].positions.push(v);\r\n            //         grids[j].indexs.push(i);\r\n            //         console.log(j, gridIndex);\r\n            //         break;\r\n            //     }\r\n            // }\r\n        }\r\n        const geometry = new THREE.BufferGeometry();\r\n        addAttribute(geometry, 'position', new THREE.BufferAttribute(vs, 3, true));\r\n        if (hasColor) {\r\n            addAttribute(geometry, 'color', new THREE.BufferAttribute(colors, 3, true));\r\n        }\r\n        if (hasSize) {\r\n            addAttribute(geometry, 'size', new THREE.BufferAttribute(sizes, 1, true));\r\n        }\r\n        //for identify\r\n        options.positions = vectors;\r\n        super();\r\n        this._initOptions(options);\r\n        this._createPoints(geometry, material);\r\n        const altitude = options.altitude;\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = centerPt.clone();\r\n        v.z = z;\r\n        this.getObject3d().position.copy(v);\r\n        this._baseObjects = pointMeshes;\r\n        this._datas = points;\r\n        this.faceIndex = null;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        this._geometryCache = geometry.clone();\r\n        this.isHide = false;\r\n        this._initBaseObjectsEvent(pointMeshes);\r\n        this._grids = grids;\r\n        this._bindMapEvents();\r\n        this.type = 'Points';\r\n        this.maxSize = maxSize;\r\n    }\r\n    _bindMapEvents() {\r\n        const map = this.getMap();\r\n        const events = 'zoomstart zooming zoomend movestart moving moveend pitch rotate';\r\n        this.on('add', () => {\r\n            this._updateGrids();\r\n            map.on(events, this._updateGrids, this);\r\n        });\r\n        this.on('remove', () => {\r\n            map.off(events, this._updateGrids, this);\r\n        });\r\n    }\r\n    _updateGrids() {\r\n        const map = this.getMap();\r\n        this._grids.forEach(b => {\r\n            if (b.indexs.length) {\r\n                b.updateBBoxPixel(map);\r\n            }\r\n        });\r\n    }\r\n    // eslint-disable-next-line consistent-return\r\n    getSelectMesh() {\r\n        const index = this.faceIndex;\r\n        if (index != null) {\r\n            if (!this._baseObjects[index]) {\r\n                const data = this._datas[index];\r\n                const { coordinate, height, color, size } = data;\r\n                this._baseObjects[index] = new Point(coordinate, { height, index, color, size }, this.getObject3d().material, this.getLayer());\r\n                this._proxyEvent(this._baseObjects[index]);\r\n            }\r\n            return {\r\n                data: this._datas[index],\r\n                baseObject: this._baseObjects[index]\r\n            };\r\n        }\r\n    }\r\n    /**\r\n   *\r\n   * @param {maptalks.Coordinate} coordinate\r\n   */\r\n    identify(coordinate) {\r\n        const layer = this.getLayer(), size = this.getMap().getSize(), camera = this.getLayer().getCamera(), altitude = this.getOptions().altitude, map = this.getMap();\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        let pointSize = this.getObject3d().material.size;\r\n        const isDynamicSize = pointSize === undefined;\r\n        const pixel = map.coordToContainerPoint(coordinate);\r\n        const bs = [];\r\n        this._grids.forEach(b => {\r\n            if (b.indexs.length) {\r\n                if (b.isRecCross(pixel, isDynamicSize ? this.maxSize : pointSize)) {\r\n                    bs.push(b);\r\n                }\r\n            }\r\n        });\r\n        if (bs.length < 1) {\r\n            return false;\r\n        }\r\n        for (let i = 0, len = bs.length; i < len; i++) {\r\n            for (let len1 = bs[i].positions.length, j = len1 - 1; j >= 0; j--) {\r\n                if (isDynamicSize) {\r\n                    pointSize = this._datas[bs[i].indexs[j]].size || 1;\r\n                }\r\n                const v = bs[i].positions[j];\r\n                vector.x = v.x;\r\n                vector.y = v.y;\r\n                vector.z = v.z + z;\r\n                const p = vector2Pixel(vector, size, camera);\r\n                const distance = Math.sqrt(Math.pow(pixel.x - p.x, 2) + Math.pow(pixel.y - p.y, 2));\r\n                if (distance <= pointSize / 2) {\r\n                    this.faceIndex = bs[i].indexs[j];\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport default Points;\r\n//# sourceMappingURL=Points.js.map","import * as maptalks from 'maptalks';\r\nimport BaseObject from './BaseObject';\r\nimport { getGeometry, initVertexColors, mergeBarGeometry } from './util/BarUtil';\r\nimport Bar from './Bar';\r\nimport MergedMixin from './MergedMixin';\r\nimport { distanceToVector3, getCenterOfPoints } from './util/index';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nimport { generatePickBufferGeometry } from './util/MergeGeometryUtil';\r\nconst OPTIONS = {\r\n    coordinate: '',\r\n    radius: 10,\r\n    height: 100,\r\n    radialSegments: 6,\r\n    altitude: 0,\r\n    topColor: '',\r\n    bottomColor: '#2d2f61',\r\n};\r\n/**\r\n * merged bars\r\n */\r\nclass Bars extends MergedMixin(BaseObject) {\r\n    constructor(points, options, material, layer) {\r\n        if (!Array.isArray(points)) {\r\n            points = [points];\r\n        }\r\n        const len = points.length;\r\n        const center = getCenterOfPoints(points);\r\n        const centerPt = layer.coordinateToVector3(center);\r\n        const geometries = [], bars = [], geometriesAttributes = [], faceMap = [];\r\n        let faceIndex = 0, psIndex = 0, normalIndex = 0, uvIndex = 0;\r\n        const cache = {};\r\n        for (let i = 0; i < len; i++) {\r\n            const opts = maptalks.Util.extend({ index: i }, OPTIONS, points[i]);\r\n            const { radius, radialSegments, altitude, topColor, bottomColor, height, coordinate } = opts;\r\n            const r = distanceToVector3(radius, layer, cache);\r\n            const h = distanceToVector3(height, layer, cache);\r\n            const alt = distanceToVector3(altitude, layer, cache);\r\n            const buffGeom = getGeometry({ radius: r, height: h, radialSegments });\r\n            if (topColor) {\r\n                initVertexColors(buffGeom, bottomColor, topColor, 'z', h / 2);\r\n                material.vertexColors = getVertexColors();\r\n            }\r\n            // buffGeom.rotateX(Math.PI / 2);\r\n            const v = layer.coordinateToVector3(coordinate).sub(centerPt);\r\n            const parray = buffGeom.attributes.position.array;\r\n            for (let j = 0, len1 = parray.length; j < len1; j += 3) {\r\n                parray[j + 2] += alt;\r\n                parray[j] += v.x;\r\n                parray[j + 1] += v.y;\r\n                parray[j + 2] += v.z;\r\n            }\r\n            geometries.push(buffGeom);\r\n            const bar = new Bar(coordinate, opts, material, layer);\r\n            bars.push(bar);\r\n            const faceLen = buffGeom.index.count / 3;\r\n            // faceMap[i] = [faceIndex + 1, faceIndex + faceLen];\r\n            faceIndex += faceLen;\r\n            const psCount = buffGeom.attributes.position.count, \r\n            //  colorCount = buffGeom.attributes.color.count,\r\n            normalCount = buffGeom.attributes.normal.count, uvCount = buffGeom.attributes.uv.count;\r\n            geometriesAttributes[i] = {\r\n                position: {\r\n                    count: psCount,\r\n                    start: psIndex,\r\n                    end: psIndex + psCount * 3,\r\n                },\r\n                // normal: {\r\n                //     count: normalCount,\r\n                //     start: normalIndex,\r\n                //     end: normalIndex + normalCount * 3,\r\n                // },\r\n                // // color: {\r\n                // //     count: colorCount,\r\n                // //     start: colorIndex,\r\n                // //     end: colorIndex + colorCount * 3,\r\n                // // },\r\n                // uv: {\r\n                //     count: uvCount,\r\n                //     start: uvIndex,\r\n                //     end: uvIndex + uvCount * 2,\r\n                // },\r\n                hide: false\r\n            };\r\n            psIndex += psCount * 3;\r\n            normalIndex += normalCount * 3;\r\n            // colorIndex += colorCount * 3;\r\n            uvIndex += uvCount * 2;\r\n        }\r\n        super();\r\n        options = maptalks.Util.extend({}, { altitude: 0, layer, points }, options);\r\n        this._initOptions(options);\r\n        const geometry = mergeBarGeometry(geometries);\r\n        this._createMesh(geometry, material);\r\n        const altitude = options.altitude;\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = centerPt.clone();\r\n        v.z = z;\r\n        this.getObject3d().position.copy(v);\r\n        // this._faceMap = faceMap;\r\n        this._baseObjects = bars;\r\n        this._datas = points;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        this.faceIndex = null;\r\n        this._geometryCache = generatePickBufferGeometry(geometry);\r\n        this.isHide = false;\r\n        this._colorMap = {};\r\n        this._initBaseObjectsEvent(bars);\r\n        this._setPickObject3d();\r\n        this._init();\r\n        this.type = 'Bars';\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    identify() {\r\n        return this.picked;\r\n    }\r\n}\r\nexport default Bars;\r\n//# sourceMappingURL=Bars.js.map","import * as maptalks from 'maptalks';\r\nimport MergedMixin from './MergedMixin';\r\nimport BaseObject from './BaseObject';\r\nimport { initVertexColors } from './util/ExtrudeUtil';\r\nimport { getExtrudeLineParams, LineStringSplit } from './util/LineUtil';\r\nimport ExtrudeLine from './ExtrudeLine';\r\nimport { isGeoJSON, isGeoJSONLine } from './util/GeoJSONUtil';\r\nimport { generateBufferGeometry, generatePickBufferGeometry, getDefaultBufferGeometry, mergeBufferGeometries, mergeBufferGeometriesAttribute } from './util/MergeGeometryUtil';\r\nimport { distanceToVector3, getCenterOfPoints, setBottomHeight } from './util/index';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nimport { ExtrudeLinesTaskIns } from './BaseObjectTaskManager';\r\nconst OPTIONS = {\r\n    width: 3,\r\n    height: 1,\r\n    altitude: 0,\r\n    topColor: null,\r\n    bottomColor: '#2d2f61'\r\n};\r\nclass ExtrudeLines extends MergedMixin(BaseObject) {\r\n    constructor(lineStrings, options, material, layer) {\r\n        if (!Array.isArray(lineStrings)) {\r\n            lineStrings = [lineStrings];\r\n        }\r\n        const centers = [], lineStringList = [];\r\n        const len = lineStrings.length;\r\n        for (let i = 0; i < len; i++) {\r\n            const lineString = lineStrings[i];\r\n            const result = LineStringSplit(lineString);\r\n            centers.push(result.center);\r\n            lineStringList.push(result.lineStrings);\r\n        }\r\n        // Get the center point of the point set\r\n        const center = getCenterOfPoints(centers);\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, lineStrings, coordinate: center });\r\n        const { altitude, topColor, bottomColor, asynchronous } = options;\r\n        let bufferGeometry;\r\n        const faceMap = [], extrudeLines = [], geometriesAttributes = [];\r\n        super();\r\n        if (asynchronous) {\r\n            bufferGeometry = getDefaultBufferGeometry();\r\n            ExtrudeLinesTaskIns.push({\r\n                id: maptalks.Util.GUID(),\r\n                layer,\r\n                key: options.key,\r\n                center,\r\n                data: lineStringList,\r\n                lineStrings,\r\n                baseObject: this\r\n            });\r\n        }\r\n        else {\r\n            const geometries = [];\r\n            let faceIndex = 0, faceMap = [], psIndex = 0, normalIndex = 0;\r\n            const cache = {};\r\n            for (let i = 0; i < len; i++) {\r\n                const lineString = lineStrings[i];\r\n                const opts = maptalks.Util.extend({}, OPTIONS, isGeoJSON(lineString) ? lineString['properties'] : lineString.getProperties(), { index: i });\r\n                const { height, width, bottomHeight } = opts;\r\n                const w = distanceToVector3(width, layer, cache);\r\n                const h = distanceToVector3(height, layer, cache);\r\n                const lls = lineStringList[i];\r\n                const extrudeParams = [];\r\n                let minZ = 0;\r\n                for (let m = 0, le = lls.length; m < le; m++) {\r\n                    const attribute = getExtrudeLineParams(lls[m], w, h, layer, center);\r\n                    minZ = setBottomHeight(attribute, bottomHeight, layer, cache);\r\n                    extrudeParams.push(attribute);\r\n                }\r\n                const buffGeom = mergeBufferGeometriesAttribute(extrudeParams);\r\n                geometries.push(buffGeom);\r\n                // const extrudeLine = new ExtrudeLine(lineString, opts, material, layer);\r\n                // extrudeLines.push(extrudeLine);\r\n                const { position, normal, indices } = buffGeom;\r\n                const faceLen = indices.length / 3;\r\n                // faceMap[i] = [faceIndex + 1, faceIndex + faceLen];\r\n                faceIndex += faceLen;\r\n                const psCount = position.length / 3, \r\n                //  colorCount = buffGeom.attributes.color.count,\r\n                normalCount = normal.length / 3;\r\n                geometriesAttributes[i] = {\r\n                    position: {\r\n                        middleZ: minZ + h / 2,\r\n                        count: psCount,\r\n                        start: psIndex,\r\n                        end: psIndex + psCount * 3,\r\n                    },\r\n                    // normal: {\r\n                    //     count: normalCount,\r\n                    //     start: normalIndex,\r\n                    //     end: normalIndex + normalCount * 3,\r\n                    // },\r\n                    // color: {\r\n                    //     count: colorCount,\r\n                    //     start: colorIndex,\r\n                    //     end: colorIndex + colorCount * 3,\r\n                    // },\r\n                    // uv: {\r\n                    //     count: uvCount,\r\n                    //     start: uvIndex,\r\n                    //     end: uvIndex + uvCount * 2,\r\n                    // },\r\n                    hide: false\r\n                };\r\n                psIndex += psCount * 3;\r\n                normalIndex += normalCount * 3;\r\n                // colorIndex += colorCount * 3;\r\n                // uvIndex += uvCount * 2;\r\n            }\r\n            bufferGeometry = mergeBufferGeometries(geometries);\r\n            if (topColor) {\r\n                initVertexColors(bufferGeometry, bottomColor, topColor, geometriesAttributes);\r\n                material.vertexColors = getVertexColors();\r\n            }\r\n        }\r\n        this._initOptions(options);\r\n        this._createMesh(bufferGeometry, material);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        //Face corresponding to monomer\r\n        // this._faceMap = faceMap;\r\n        this._baseObjects = extrudeLines;\r\n        this._datas = lineStrings;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        this.faceIndex = null;\r\n        this._geometryCache = generatePickBufferGeometry(bufferGeometry);\r\n        this.isHide = false;\r\n        this._colorMap = {};\r\n        this._initBaseObjectsEvent(extrudeLines);\r\n        if (!asynchronous) {\r\n            this._setPickObject3d();\r\n            this._init();\r\n        }\r\n        this.type = 'ExtrudeLines';\r\n    }\r\n    // eslint-disable-next-line consistent-return\r\n    getSelectMesh() {\r\n        const index = this._getIndex();\r\n        if (index != null) {\r\n            if (!this._baseObjects[index]) {\r\n                const lineString = this._datas[index];\r\n                const opts = Object.assign({}, this.options, isGeoJSONLine(lineString) ? lineString.properties : lineString.getProperties(), { index });\r\n                this._baseObjects[index] = new ExtrudeLine(lineString, opts, this.getObject3d().material, this.getLayer());\r\n                this._proxyEvent(this._baseObjects[index]);\r\n            }\r\n            return {\r\n                data: this._datas[index],\r\n                baseObject: this._baseObjects[index]\r\n            };\r\n        }\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    identify(coordinate) {\r\n        return this.picked;\r\n    }\r\n    _workerLoad(result) {\r\n        const { geometriesAttributes } = result;\r\n        // this._faceMap = faceMap;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        const bufferGeometry = generateBufferGeometry(result);\r\n        this._geometryCache = generatePickBufferGeometry(bufferGeometry);\r\n        const { topColor, bottomColor, bottomHeight, height } = this.getOptions();\r\n        const object3d = this.getObject3d();\r\n        const material = object3d.material;\r\n        if (topColor) {\r\n            initVertexColors(bufferGeometry, bottomColor, topColor, geometriesAttributes);\r\n            material.vertexColors = getVertexColors();\r\n        }\r\n        this.getObject3d().geometry = bufferGeometry;\r\n        this.getObject3d().material.needsUpdate = true;\r\n        this._setPickObject3d();\r\n        this._init();\r\n        if (this.isAdd) {\r\n            const pick = this.getLayer().getPick();\r\n            pick.add(this.pickObject3d);\r\n        }\r\n        this._fire('workerload', { target: this });\r\n    }\r\n}\r\nexport default ExtrudeLines;\r\n//# sourceMappingURL=ExtrudeLines.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport { getDefaultLineGeometry, getLinePosition, getLineSegmentPosition, LineStringSplit, mergeLinePositions } from './util/LineUtil';\r\nimport MergedMixin from './MergedMixin';\r\nimport Line from './Line';\r\nimport { isGeoJSONLine } from './util/GeoJSONUtil';\r\nimport { addAttribute, getVertexColors } from './util/ThreeAdaptUtil';\r\nimport { getCenterOfPoints, getGeometriesColorArray, setBottomHeight } from './util/index';\r\nimport { LinesTaskIns } from './BaseObjectTaskManager';\r\nconst OPTIONS = {\r\n    altitude: 0,\r\n    colors: null\r\n};\r\n/**\r\n *\r\n */\r\nclass Lines extends MergedMixin(BaseObject) {\r\n    constructor(lineStrings, options, material, layer) {\r\n        if (!Array.isArray(lineStrings)) {\r\n            lineStrings = [lineStrings];\r\n        }\r\n        const centers = [], lineStringList = [];\r\n        const len = lineStrings.length;\r\n        for (let i = 0; i < len; i++) {\r\n            const lineString = lineStrings[i];\r\n            const result = LineStringSplit(lineString);\r\n            centers.push(result.center);\r\n            lineStringList.push(result.lineStrings);\r\n        }\r\n        // Get the center point of the point set\r\n        const center = getCenterOfPoints(centers);\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, lineStrings, coordinate: center });\r\n        super();\r\n        this._initOptions(options);\r\n        const { asynchronous } = options;\r\n        let geometry;\r\n        const lines = [], cache = {};\r\n        let faceIndex = 0, faceMap = [], geometriesAttributes = [], psIndex = 0, positionList = [];\r\n        if (asynchronous) {\r\n            geometry = getDefaultLineGeometry();\r\n            LinesTaskIns.push({\r\n                id: maptalks.Util.GUID(),\r\n                layer,\r\n                key: options.key,\r\n                center,\r\n                data: lineStringList,\r\n                lineStrings,\r\n                baseObject: this\r\n            });\r\n        }\r\n        else {\r\n            for (let i = 0; i < len; i++) {\r\n                const lls = lineStringList[i];\r\n                let psCount = 0;\r\n                for (let m = 0, le = lls.length; m < le; m++) {\r\n                    const properties = (isGeoJSONLine(lls[m]) ? lls[m]['properties'] : lls[m].getProperties() || {});\r\n                    const { positions } = getLinePosition(lls[m], layer, center, false);\r\n                    setBottomHeight(positions, properties.bottomHeight, layer, cache);\r\n                    psCount += (positions.length / 3 * 2 - 2);\r\n                    positionList.push(getLineSegmentPosition(positions));\r\n                }\r\n                // const line = new Line(lineString, opts, material, layer);\r\n                // lines.push(line);\r\n                // const psCount = positionsV.length + positionsV.length - 2;\r\n                const faceLen = psCount;\r\n                // faceMap[i] = [faceIndex, faceIndex + faceLen];\r\n                faceIndex += faceLen;\r\n                geometriesAttributes[i] = {\r\n                    position: {\r\n                        count: psCount,\r\n                        start: psIndex,\r\n                        end: psIndex + psCount * 3,\r\n                    },\r\n                    hide: false\r\n                };\r\n                psIndex += psCount * 3;\r\n            }\r\n            const position = mergeLinePositions(positionList);\r\n            geometry = new THREE.BufferGeometry();\r\n            addAttribute(geometry, 'position', new THREE.BufferAttribute(position, 3));\r\n        }\r\n        this._createLineSegments(geometry, material);\r\n        const { altitude } = options;\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        // this._faceMap = faceMap;\r\n        this._baseObjects = lines;\r\n        this._datas = lineStrings;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        this.faceIndex = null;\r\n        this.index = null;\r\n        this._geometryCache = geometry.clone();\r\n        this.isHide = false;\r\n        this._colorMap = {};\r\n        this._initBaseObjectsEvent(lines);\r\n        if (!asynchronous) {\r\n            this._setPickObject3d();\r\n            this._init();\r\n        }\r\n        this.type = 'Lines';\r\n    }\r\n    // eslint-disable-next-line consistent-return\r\n    getSelectMesh() {\r\n        const index = this._getIndex();\r\n        if (index != null) {\r\n            if (!this._baseObjects[index]) {\r\n                const lineString = this._datas[index];\r\n                const opts = maptalks.Util.extend({}, this.getOptions(), { index }, isGeoJSONLine(lineString) ? lineString.properties : lineString.getProperties());\r\n                this._baseObjects[index] = new Line(lineString, opts, this.getObject3d().material, this.getLayer());\r\n                this._proxyEvent(this._baseObjects[index]);\r\n            }\r\n            return {\r\n                data: this._datas[index],\r\n                baseObject: this._baseObjects[index]\r\n            };\r\n        }\r\n    }\r\n    _setPickObject3d() {\r\n        if (!this._colorMap) {\r\n            return;\r\n        }\r\n        const geometry = this._geometryCache || this.getObject3d().geometry.clone();\r\n        const pick = this.getLayer().getPick();\r\n        const { _geometriesAttributes } = this;\r\n        const len = _geometriesAttributes.length;\r\n        const colors = getGeometriesColorArray(_geometriesAttributes);\r\n        let cIndex = 0;\r\n        for (let i = 0; i < len; i++) {\r\n            const color = pick.getColor();\r\n            const colorIndex = color.getHex();\r\n            this._colorMap[colorIndex] = i;\r\n            const { count } = _geometriesAttributes[i].position;\r\n            this._datas[i].colorIndex = colorIndex;\r\n            for (let j = 0; j < count; j++) {\r\n                colors[cIndex] = color.r;\r\n                colors[cIndex + 1] = color.g;\r\n                colors[cIndex + 2] = color.b;\r\n                cIndex += 3;\r\n            }\r\n        }\r\n        addAttribute(geometry, 'color', new THREE.BufferAttribute(colors, 3, true));\r\n        const material = this.getObject3d().material.clone();\r\n        material.color.set('#fff');\r\n        material.vertexColors = getVertexColors();\r\n        const color = pick.getColor();\r\n        const colorIndex = color.getHex();\r\n        const mesh = new THREE.LineSegments(geometry, material);\r\n        mesh.position.copy(this.getObject3d().position);\r\n        mesh['_colorIndex'] = colorIndex;\r\n        this.setPickObject3d(mesh);\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    identify(coordinate) {\r\n        return this.picked;\r\n    }\r\n    _workerLoad(result) {\r\n        const { position, geometriesAttributes } = result;\r\n        // this._faceMap = faceMap;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        const geometry = new THREE.BufferGeometry();\r\n        addAttribute(geometry, 'position', new THREE.BufferAttribute(new Float32Array(position), 3));\r\n        this._computeLineDistances(geometry);\r\n        this._geometryCache = geometry.clone();\r\n        this.getObject3d().geometry = geometry;\r\n        this.getObject3d().material.needsUpdate = true;\r\n        this._setPickObject3d();\r\n        this._init();\r\n        if (this.isAdd) {\r\n            const pick = this.getLayer().getPick();\r\n            pick.add(this.pickObject3d);\r\n        }\r\n        this._fire('workerload', { target: this });\r\n    }\r\n}\r\nexport default Lines;\r\n//# sourceMappingURL=Lines.js.map","/*\r\n\r\nGlobal sharing\r\n\r\n*/\r\n//Maximum concurrent\r\nconst MAX = 10;\r\nconst waitingQueue = [];\r\nconst currentQueue = [];\r\nexport function getQueues() {\r\n    return {\r\n        waitingQueue,\r\n        currentQueue\r\n    };\r\n}\r\n/**\r\n *\r\n * @param {*} key\r\n * @param {*} url\r\n * @param {*} callback\r\n * @param {*} img\r\n * @param {*} vt\r\n */\r\nexport function pushQueue(key, url, callback, img, vt) {\r\n    // url += `?key=${key}`;\r\n    const q = {\r\n        key,\r\n        url,\r\n        callback,\r\n        img,\r\n        vt\r\n    };\r\n    if (currentQueue.length < MAX) {\r\n        currentQueue.push(q);\r\n        vt.loopMessage(q);\r\n    }\r\n    else {\r\n        waitingQueue.push(q);\r\n    }\r\n}\r\n/**\r\n *\r\n * @param {*} index\r\n */\r\nexport function outQueue(index) {\r\n    const callback = deleteQueueItem(waitingQueue, index);\r\n    if (callback) {\r\n        callback(index);\r\n    }\r\n}\r\n/**\r\n *\r\n * @param {*} queArray\r\n * @param {*} index\r\n */\r\nexport function deleteQueueItem(queArray, index) {\r\n    for (let i = 0, len = queArray.length; i < len; i++) {\r\n        const q = queArray[i];\r\n        if (q) {\r\n            const { key, callback } = q;\r\n            if (index === key) {\r\n                queArray.splice(i, 1);\r\n                return callback;\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n *\r\n * @param {*} key\r\n * @param {*} vt\r\n */\r\nexport function nextLoop(key, vt) {\r\n    deleteQueueItem(currentQueue, key);\r\n    if (waitingQueue.length) {\r\n        currentQueue.push(waitingQueue[0]);\r\n        waitingQueue.splice(0, 1);\r\n        const last = currentQueue[currentQueue.length - 1];\r\n        vt.loopMessage(last);\r\n    }\r\n}\r\n//# sourceMappingURL=TileDataQueue.js.map","const canvas = document.createElement('canvas');\r\nconst SIZE = 256;\r\ncanvas.width = canvas.height = SIZE;\r\nlet DEFAULT_IMAGE;\r\nexport function generateImage(key, debug = false) {\r\n    if (DEFAULT_IMAGE) {\r\n        return DEFAULT_IMAGE;\r\n    }\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.clearRect(0, 0, SIZE, SIZE);\r\n    ctx.save();\r\n    DEFAULT_IMAGE = canvas.toDataURL();\r\n    return DEFAULT_IMAGE;\r\n}\r\nexport function createCanvas(width = 1, height = 1) {\r\n    let canvas;\r\n    if (typeof document === 'undefined') {\r\n        // var Canvas = require('canvas');\r\n        // canvas = new Canvas(width, height);\r\n    }\r\n    else {\r\n        canvas = document.createElement('canvas');\r\n        if (width) {\r\n            canvas.width = width;\r\n        }\r\n        if (height) {\r\n            canvas.height = height;\r\n        }\r\n    }\r\n    return canvas;\r\n}\r\n//# sourceMappingURL=CanvasUtil.js.map","import * as maptalks from 'maptalks';\r\nimport { generateImage } from './util/CanvasUtil';\r\n/**\r\n *\r\n */\r\nclass BaseVectorTileLayer extends maptalks.TileLayer {\r\n    constructor(url, options = {}) {\r\n        super(maptalks.Util.GUID(), maptalks.Util.extend({ urlTemplate: url }, options));\r\n        this._opts = null;\r\n        this._layer = null;\r\n        this.material = null;\r\n        this.getMaterial = null;\r\n        this._baseObjectKeys = {};\r\n        this._loadTiles = {};\r\n        this._add = null;\r\n        this._layerLaodTime = new Date().getTime();\r\n    }\r\n    isAsynchronous() {\r\n        return this._opts.worker;\r\n    }\r\n    /**\r\n     *get current all baseobject\r\n     */\r\n    getBaseObjects() {\r\n        const loadTiles = this._loadTiles;\r\n        const baseos = [];\r\n        for (let key in loadTiles) {\r\n            const baseobjects = this._baseObjectKeys[key];\r\n            if (baseobjects && Array.isArray(baseobjects) && baseobjects.length) {\r\n                for (let i = 0, len = baseobjects.length; i < len; i++) {\r\n                    baseos.push(baseobjects[i]);\r\n                }\r\n            }\r\n        }\r\n        return baseos;\r\n    }\r\n    /**\r\n   * This method should be overridden for event handling\r\n   * @param {*} type\r\n   * @param {*} e\r\n   */\r\n    // eslint-disable-next-line no-unused-vars\r\n    onSelectMesh(type, e) {\r\n    }\r\n    /**\r\n   * this is can override\r\n   * @param {*} index\r\n   * @param {*} json\r\n   */\r\n    // eslint-disable-next-line no-unused-vars\r\n    formatBaseObjects(index, json) {\r\n        return [];\r\n    }\r\n    //queue loop\r\n    // eslint-disable-next-line no-unused-vars\r\n    loopMessage(q) {\r\n    }\r\n    /**\r\n    *\r\n    * @param {*} q\r\n    */\r\n    getTileData(q) {\r\n        const { key, url, callback, img } = q;\r\n        maptalks.Ajax.getJSON(url, {}, function (error, res) {\r\n            if (error) {\r\n                console.error(error);\r\n                callback(key, null, img);\r\n            }\r\n            else {\r\n                callback(key, res, img);\r\n            }\r\n        });\r\n    }\r\n    _getCurentTileKeys() {\r\n        const tileGrids = this.getTiles().tileGrids || [];\r\n        const keys = [], keysMap = {};\r\n        for (let i = 0, len = tileGrids.length; i < len; i++) {\r\n            const d = tileGrids[i];\r\n            const tiles = d.tiles || [];\r\n            for (let j = 0, len1 = tiles.length; j < len1; j++) {\r\n                const { id } = tiles[j];\r\n                keys.push(id);\r\n                keysMap[id] = true;\r\n            }\r\n        }\r\n        return { keys, keysMap };\r\n    }\r\n    _isLoad() {\r\n        const { keys } = this._getCurentTileKeys();\r\n        const keys1 = Object.keys(this._renderer.tilesInView);\r\n        if (keys.length === keys1.length) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _layerOnLoad() {\r\n        // This event will be triggered multiple times per unit time\r\n        const time = new Date().getTime();\r\n        const offsetTime = time - this._layerLaodTime;\r\n        if (offsetTime < 20) {\r\n            return;\r\n        }\r\n        this._layerLaodTime = time;\r\n        const tilesInView = this._renderer.tilesInView, loadTiles = this._loadTiles, threeLayer = this._layer, keys = this._baseObjectKeys;\r\n        const tilesInViewLen = Object.keys(tilesInView).length, loadTilesLen = Object.keys(loadTiles).length;\r\n        const needsRemoveBaseObjects = [];\r\n        if (tilesInViewLen && loadTilesLen) {\r\n            for (let index in loadTiles) {\r\n                if (!tilesInView[index]) {\r\n                    if (keys[index]) {\r\n                        (keys[index] || []).forEach(baseobject => {\r\n                            needsRemoveBaseObjects.push(baseobject);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (needsRemoveBaseObjects.length) {\r\n            threeLayer.removeMesh(needsRemoveBaseObjects, false);\r\n        }\r\n        if (tilesInViewLen && loadTilesLen) {\r\n            for (let index in tilesInView) {\r\n                if (!loadTiles[index]) {\r\n                    if (keys[index]) {\r\n                        const baseobject = keys[index];\r\n                        threeLayer.addMesh(baseobject);\r\n                    }\r\n                    else {\r\n                        const { x, y, z } = this._getXYZOfIndex(index);\r\n                        this.getTileUrl(x, y, z);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._loadTiles = Object.assign({}, tilesInView);\r\n        this._diffCache();\r\n    }\r\n    _init() {\r\n    }\r\n    _workerLoad(e) {\r\n        const baseobject = e.target;\r\n        const img = baseobject._img;\r\n        img.currentCount++;\r\n        if (img.currentCount === img.needCount) {\r\n            img.src = generateImage(img._key, this._opts.debug);\r\n        }\r\n    }\r\n    _generateBaseObjects(index, res, img) {\r\n        if (res && img) {\r\n            const { keysMap } = this._getCurentTileKeys();\r\n            //not in current ,ignore\r\n            if (!keysMap[index]) {\r\n                img.src = generateImage(index, this._opts.debug);\r\n                return;\r\n            }\r\n            const baseobjects = this.formatBaseObjects(index, res);\r\n            if (baseobjects.length) {\r\n                img.needCount = baseobjects.length;\r\n                img.currentCount = 0;\r\n                for (let i = 0, len = baseobjects.length; i < len; i++) {\r\n                    const baseobject = baseobjects[i];\r\n                    baseobject._img = img;\r\n                    baseobject._vt = this;\r\n                    if (!this.isVisible()) {\r\n                        baseobject.hide();\r\n                    }\r\n                    this._cachetile(index, baseobject);\r\n                    if (!baseobject.isAsynchronous()) {\r\n                        img.currentCount++;\r\n                    }\r\n                }\r\n                this._layer.addMesh(baseobjects, false);\r\n                if (img.needCount === img.currentCount) {\r\n                    img.src = generateImage(index, this._opts.debug);\r\n                }\r\n                if (this.isAsynchronous()) {\r\n                    baseobjects.filter(baseobject => {\r\n                        return baseobject.isAsynchronous();\r\n                    }).forEach(baseobject => {\r\n                        baseobject.on('workerload', this._workerLoad, this);\r\n                    });\r\n                }\r\n                else {\r\n                    img.src = generateImage(index, this._opts.debug);\r\n                }\r\n            }\r\n            else {\r\n                img.src = generateImage(index, this._opts.debug);\r\n            }\r\n            this._loadTiles[index] = true;\r\n        }\r\n        else if (img) {\r\n            img.src = generateImage(index, this._opts.debug);\r\n        }\r\n    }\r\n    _diffCache() {\r\n        // if (this._layer.getMap().isInteracting()) {\r\n        //     return;\r\n        // }\r\n        if (Object.keys(this._baseObjectKeys).length > this._renderer.tileCache.max) {\r\n            const tileCache = this._renderer.tileCache.data;\r\n            const tilesInView = this._renderer.tilesInView;\r\n            const needsRemoveBaseObjects = [];\r\n            for (let index in this._baseObjectKeys) {\r\n                if (!tileCache[index] && !tilesInView[index]) {\r\n                    (this._baseObjectKeys[index] || []).forEach(baseobject => {\r\n                        if (baseobject.isAdd) {\r\n                            needsRemoveBaseObjects.push(baseobject);\r\n                        }\r\n                    });\r\n                    this._diposeBaseObject(index);\r\n                    delete this._baseObjectKeys[index];\r\n                }\r\n            }\r\n            // Batch deletion can have better performance\r\n            if (needsRemoveBaseObjects.length) {\r\n                this._layer.removeMesh(needsRemoveBaseObjects, false);\r\n            }\r\n        }\r\n    }\r\n    _diposeBaseObject(index) {\r\n        const baseobjects = this._baseObjectKeys[index];\r\n        if (baseobjects && baseobjects.length) {\r\n            baseobjects.forEach(baseobject => {\r\n                baseobject.getObject3d().geometry.dispose();\r\n                if (baseobject._geometryCache) {\r\n                    baseobject._geometryCache.dispose();\r\n                }\r\n                const bos = baseobject._baseObjects;\r\n                if (bos && bos.length) {\r\n                    bos.forEach(bo => {\r\n                        bo.getObject3d().geometry.dispose();\r\n                        bo = null;\r\n                    });\r\n                }\r\n                baseobject._datas = null;\r\n                baseobject._geometriesAttributes = null;\r\n                baseobject._faceMap = null;\r\n                baseobject._colorMap = null;\r\n                if (baseobject.pickObject3d) {\r\n                    baseobject.pickObject3d.geometry.dispose();\r\n                    // baseobject.pickObject3d.material.dispose();\r\n                }\r\n                baseobject = null;\r\n            });\r\n        }\r\n    }\r\n    _cachetile(index, baseobject) {\r\n        if (!this._baseObjectKeys[index]) {\r\n            this._baseObjectKeys[index] = [];\r\n        }\r\n        this._baseObjectKeys[index].push(baseobject);\r\n    }\r\n    _getXYZOfIndex(index) {\r\n        const splitstr = index.indexOf('_') > -1 ? '_' : '-';\r\n        let [y, x, z] = index.split(splitstr).slice(1, 4);\r\n        const x1 = parseInt(x);\r\n        const y1 = parseInt(y);\r\n        const z1 = parseInt(z);\r\n        return { x: x1, y: y1, z: z1 };\r\n    }\r\n    _getTileExtent(x, y, z) {\r\n        const map = this.getMap(), res = map._getResolution(z), tileConfig = this._getTileConfig(), tileExtent = tileConfig.getTilePrjExtent(x, y, res);\r\n        return tileExtent;\r\n    }\r\n    /**\r\n     *\r\n     * @param {} x\r\n     * @param {*} y\r\n     * @param {*} z\r\n     */\r\n    _getTileLngLatExtent(x, y, z) {\r\n        const tileExtent = this._getTileExtent(x, y, z);\r\n        let max = tileExtent.getMax(), min = tileExtent.getMin();\r\n        const map = this.getMap();\r\n        const projection = map.getProjection();\r\n        min = projection.unproject(min);\r\n        max = projection.unproject(max);\r\n        return new maptalks.Extent(min, max);\r\n    }\r\n}\r\nexport default BaseVectorTileLayer;\r\n//# sourceMappingURL=BaseVectorTileLayer.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport { pushQueue, outQueue, getQueues, nextLoop } from './queue/TileDataQueue';\r\nimport { isGeoJSONPolygon, isGeoJSONLine, spliteGeoJSONMulti, isGeoJSONPoint, getGeoJSONCoordinates } from './util/GeoJSONUtil';\r\nimport BaseVectorTileLayer from './BaseVectorTileLayer';\r\nconst OPTIONS = {\r\n    worker: false\r\n};\r\n/**\r\n *Provide a simple data loading layer with large amount of data\r\n */\r\nclass ThreeVectorTileLayer extends BaseVectorTileLayer {\r\n    constructor(url, options = {}, getMaterial, layer) {\r\n        super(maptalks.Util.GUID(), maptalks.Util.extend({ urlTemplate: url }, OPTIONS, options));\r\n        this._opts = options;\r\n        this._layer = layer;\r\n        this.getMaterial = getMaterial;\r\n        this._baseObjectKeys = {};\r\n        this._loadTiles = {};\r\n        this._add = null;\r\n        this._layerLaodTime = new Date().getTime();\r\n        this._init();\r\n    }\r\n    /**\r\n     * this is can override\r\n     * @param {*} index\r\n     * @param {*} json\r\n     */\r\n    formatBaseObjects(index, json) {\r\n        const opts = this._opts, baseobjects = [];\r\n        const asynchronous = this.isAsynchronous();\r\n        for (let layerName in json) {\r\n            const geojson = json[layerName] || {};\r\n            let features;\r\n            if (Array.isArray(geojson)) {\r\n                features = geojson;\r\n            }\r\n            else if (geojson.type === 'FeatureCollection') {\r\n                features = geojson.features;\r\n            }\r\n            if (features && features.length) {\r\n                const polygons = [], lineStrings = [], points = [];\r\n                for (let i = 0, len = features.length; i < len; i++) {\r\n                    const feature = features[i];\r\n                    if (isGeoJSONPolygon(feature)) {\r\n                        polygons.push(feature);\r\n                    }\r\n                    else if (isGeoJSONLine(feature)) {\r\n                        const fs = spliteGeoJSONMulti(feature);\r\n                        for (let j = 0, len1 = fs.length; j < len1; j++) {\r\n                            lineStrings.push(fs[j]);\r\n                        }\r\n                    }\r\n                    else if (isGeoJSONPoint(feature)) {\r\n                        const fs = spliteGeoJSONMulti(feature);\r\n                        for (let j = 0, len1 = fs.length; j < len1; j++) {\r\n                            points.push(maptalks.Util.extend({}, fs[j].properties, fs[j], { coordinate: getGeoJSONCoordinates(fs[j]) }));\r\n                        }\r\n                    }\r\n                }\r\n                if (polygons.length) {\r\n                    const material = this._getMaterial(layerName, polygons, index, geojson);\r\n                    if (material) {\r\n                        const extrudepolygons = this._layer.toExtrudePolygons(polygons, maptalks.Util.extend({}, { topColor: '#fff', layerName, asynchronous, key: index }, opts), material);\r\n                        baseobjects.push(extrudepolygons);\r\n                    }\r\n                }\r\n                if (lineStrings.length) {\r\n                    const material = this._getMaterial(layerName, lineStrings, index, geojson);\r\n                    if (material && (material instanceof THREE.LineBasicMaterial || material instanceof THREE.LineDashedMaterial)) {\r\n                        const lines = this._layer.toLines(lineStrings, maptalks.Util.extend({}, { layerName, asynchronous }, opts), material);\r\n                        baseobjects.push(lines);\r\n                    }\r\n                }\r\n                if (points.length) {\r\n                    const material = this._getMaterial(layerName, points, index, geojson);\r\n                    if (material && material instanceof THREE.PointsMaterial) {\r\n                        const ps = this._layer.toPoints(points, maptalks.Util.extend({}, { layerName, asynchronous }, opts), material);\r\n                        baseobjects.push(ps);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return baseobjects;\r\n    }\r\n    //queue loop\r\n    loopMessage(q) {\r\n        const { currentQueue } = getQueues();\r\n        if (currentQueue.length > 0) {\r\n            this.getTileData(q);\r\n        }\r\n    }\r\n    _init() {\r\n        this.on('layerload', this._layerOnLoad);\r\n        this.on('add', () => {\r\n            if (this._add === false) {\r\n                const baseobjects = this.getBaseObjects();\r\n                this._layer.addMesh(baseobjects);\r\n            }\r\n            this._add = true;\r\n            /**\r\n             * layerload have a bug ,Sometimes it doesn't trigger,I don't know why\r\n             * Add heartbeat detection mechanism\r\n             */\r\n            this.intervalId = setInterval(() => {\r\n                if (this._isLoad() && (!this._layer.getMap().isInteracting())) {\r\n                    this.fire('layerload');\r\n                }\r\n            }, 1000);\r\n        });\r\n        this.on('remove', () => {\r\n            this._add = false;\r\n            const baseobjects = this.getBaseObjects();\r\n            this._layer.removeMesh(baseobjects);\r\n            clearInterval(this.intervalId);\r\n        });\r\n        this.on('show', () => {\r\n            const baseobjects = this.getBaseObjects();\r\n            baseobjects.forEach(baseobject => {\r\n                baseobject.show();\r\n            });\r\n            for (let key in this._baseObjectKeys) {\r\n                const baseobjects = this._baseObjectKeys[key] || [];\r\n                baseobjects.forEach(baseobject => {\r\n                    baseobject.show();\r\n                });\r\n            }\r\n        });\r\n        this.on('hide', () => {\r\n            const baseobjects = this.getBaseObjects();\r\n            baseobjects.forEach(baseobject => {\r\n                baseobject.hide();\r\n            });\r\n            for (let key in this._baseObjectKeys) {\r\n                const baseobjects = this._baseObjectKeys[key] || [];\r\n                baseobjects.forEach(baseobject => {\r\n                    baseobject.hide();\r\n                });\r\n            }\r\n        });\r\n        this.on('renderercreate', (e) => {\r\n            e.renderer.loadTile = function loadTile(tile) {\r\n                var tileSize = this.layer.getTileSize();\r\n                var tileImage = new Image();\r\n                tileImage.width = tileSize['width'];\r\n                tileImage.height = tileSize['height'];\r\n                tileImage.onload = this.onTileLoad.bind(this, tileImage, tile);\r\n                tileImage.onerror = this.onTileError.bind(this, tileImage, tile);\r\n                this.loadTileImage(tileImage, tile['url'], tile.id);\r\n                return tileImage;\r\n            };\r\n            e.renderer.deleteTile = function (tile) {\r\n                if (!tile || !tile.image) {\r\n                    return;\r\n                }\r\n                tile.image.onload = null;\r\n                tile.image.onerror = null;\r\n                const tileinfo = tile.info || {};\r\n                outQueue(tileinfo.id);\r\n            };\r\n            e.renderer.loadTileImage = (img, url, key) => {\r\n                img._key = key;\r\n                pushQueue(key, url, (index, json, image) => {\r\n                    // img.src = generateImage(key, this._opts.debug);\r\n                    this._generateBaseObjects(index, json, image);\r\n                    nextLoop(index, this);\r\n                }, img, this);\r\n            };\r\n        });\r\n    }\r\n    _getMaterial(layerName, data, index, geojson) {\r\n        if (this.getMaterial && maptalks.Util.isFunction(this.getMaterial)) {\r\n            return this.getMaterial(layerName, data, index, geojson);\r\n        }\r\n        return null;\r\n    }\r\n}\r\nexport default ThreeVectorTileLayer;\r\n//# sourceMappingURL=ThreeVectorTileLayer.js.map","import * as THREE from 'three';\r\nimport { addAttribute } from './ThreeAdaptUtil';\r\nexport function getPlaneGeometryAttribute(width, height, devideW, devideH) {\r\n    const dx = width / devideW, dy = height / devideH;\r\n    const minX = -width / 2, maxY = height / 2, minY = -height / 2;\r\n    const len = (devideW + 1) * (devideH + 1);\r\n    const position = new Float32Array(len * 3), uv = new Float32Array(len * 2), normal = new Float32Array(len * 3), tempIndex = new Uint32Array(len * 10);\r\n    let index = 0, uIndex = 0, iIndex = 0;\r\n    for (let j = 0; j <= devideH; j++) {\r\n        for (let i = 0; i <= devideW; i++) {\r\n            const x = minX + dx * i;\r\n            const y = maxY - dy * j;\r\n            position[index] = x;\r\n            position[index + 1] = y;\r\n            position[index + 2] = 0;\r\n            normal[index] = 0;\r\n            normal[index + 1] = 0;\r\n            normal[index + 2] = 1;\r\n            const uvx = (x - minX) / width, uvy = (y - minY) / height;\r\n            uv[uIndex] = uvx;\r\n            uv[uIndex + 1] = uvy;\r\n            index += 3;\r\n            uIndex += 2;\r\n            if (i < devideW && j < devideH) {\r\n                const a = j * (devideW + 1) + i, b = a + 1, c = (devideW + 1) * (j + 1) + i, d = c + 1;\r\n                tempIndex[iIndex] = a;\r\n                tempIndex[iIndex + 1] = c;\r\n                tempIndex[iIndex + 2] = b;\r\n                tempIndex[iIndex + 3] = c;\r\n                tempIndex[iIndex + 4] = d;\r\n                tempIndex[iIndex + 5] = b;\r\n                iIndex += 6;\r\n            }\r\n        }\r\n    }\r\n    const indexArray = new Uint32Array(iIndex);\r\n    for (let i = 0, len = indexArray.length; i < len; i++) {\r\n        indexArray[i] = tempIndex[i];\r\n    }\r\n    return {\r\n        position,\r\n        uv,\r\n        normal,\r\n        indexs: indexArray\r\n    };\r\n}\r\nexport function getPlaneGeometry(width, height, devideW, devideH) {\r\n    const { position, uv, normal, indexs } = getPlaneGeometryAttribute(width, height, devideW, devideH);\r\n    const geometry = new THREE.BufferGeometry();\r\n    addAttribute(geometry, 'position', new THREE.BufferAttribute(position, 3));\r\n    addAttribute(geometry, 'normal', new THREE.BufferAttribute(normal, 3));\r\n    addAttribute(geometry, 'uv', new THREE.BufferAttribute(uv, 2));\r\n    geometry.setIndex(new THREE.BufferAttribute(indexs, 1));\r\n    return geometry;\r\n}\r\n//# sourceMappingURL=GeometryUtil.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport { distanceToVector3 } from './util';\r\nimport { getPlaneGeometry } from './util/GeometryUtil';\r\n// import { addAttribute } from './util/ThreeAdaptUtil';\r\nconst textureLoader = new THREE.TextureLoader();\r\nconst canvas = document.createElement('canvas'), tileSize = 256;\r\nfunction getRGBData(image, width = tileSize, height = tileSize) {\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.drawImage(image, 0, 0, width, height);\r\n    return ctx.getImageData(0, 0, width, height).data;\r\n}\r\nfunction generateImage(image) {\r\n    if (!image) {\r\n        return null;\r\n    }\r\n    let img;\r\n    if (typeof image === 'string') {\r\n        img = new Image();\r\n        img.src = image;\r\n    }\r\n    else if (image instanceof HTMLCanvasElement) {\r\n        img = new Image();\r\n        img.src = image.toDataURL();\r\n    }\r\n    else if (image instanceof Image) {\r\n        img = new Image();\r\n        img.src = image.src;\r\n        img.crossOrigin = image.crossOrigin;\r\n    }\r\n    if (img && !img.crossOrigin) {\r\n        img.crossOrigin = 'Anonymous';\r\n    }\r\n    return img;\r\n}\r\nconst OPTIONS = {\r\n    interactive: false,\r\n    altitude: 0,\r\n    image: null,\r\n    imageWidth: 256,\r\n    imageHeight: 256,\r\n    texture: null\r\n};\r\n/**\r\n *\r\n */\r\nclass Terrain extends BaseObject {\r\n    constructor(extent, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, extent });\r\n        const { texture, image, altitude, imageHeight, imageWidth } = options;\r\n        if (!image) {\r\n            console.error('not find image');\r\n        }\r\n        if (!(extent instanceof maptalks.Extent)) {\r\n            extent = new maptalks.Extent(extent);\r\n        }\r\n        const { xmin, ymin, xmax, ymax } = extent;\r\n        const coords = [\r\n            [xmin, ymin],\r\n            [xmin, ymax],\r\n            [xmax, ymax],\r\n            [xmax, ymin]\r\n        ];\r\n        let vxmin = Infinity, vymin = Infinity, vxmax = -Infinity, vymax = -Infinity;\r\n        coords.forEach(coord => {\r\n            const v = layer.coordinateToVector3(coord);\r\n            const { x, y } = v;\r\n            vxmin = Math.min(x, vxmin);\r\n            vymin = Math.min(y, vymin);\r\n            vxmax = Math.max(x, vxmax);\r\n            vymax = Math.max(y, vymax);\r\n        });\r\n        const w = Math.abs(vxmax - vxmin), h = Math.abs(vymax - vymin);\r\n        const rgbImg = generateImage(image), img = generateImage(texture);\r\n        // const geometry = new THREE.PlaneBufferGeometry(w, h, imageWidth - 1, imageHeight - 1);\r\n        const geometry = getPlaneGeometry(w, h, imageWidth - 1, imageHeight - 1);\r\n        super();\r\n        this._initOptions(options);\r\n        this._createMesh(geometry, material);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(extent.getCenter(), z);\r\n        this.getObject3d().position.copy(v);\r\n        material.transparent = true;\r\n        if (rgbImg) {\r\n            material.opacity = 0;\r\n            rgbImg.onload = () => {\r\n                const width = imageWidth, height = imageHeight;\r\n                const imgdata = getRGBData(rgbImg, width, height);\r\n                let idx = 0;\r\n                const cache = {};\r\n                //rgb to height  https://docs.mapbox.com/help/troubleshooting/access-elevation-data/\r\n                for (let i = 0, len = imgdata.length; i < len; i += 4) {\r\n                    const R = imgdata[i], G = imgdata[i + 1], B = imgdata[i + 2];\r\n                    const height = -10000 + ((R * 256 * 256 + G * 256 + B) * 0.1);\r\n                    const z = distanceToVector3(height, layer, cache);\r\n                    geometry.attributes.position.array[idx * 3 + 2] = z;\r\n                    idx++;\r\n                }\r\n                geometry.attributes.position.needsUpdate = true;\r\n                if (img) {\r\n                    textureLoader.load(img.src, (texture) => {\r\n                        material.map = texture;\r\n                        material.opacity = 1;\r\n                        material.needsUpdate = true;\r\n                    });\r\n                }\r\n                else {\r\n                    material.opacity = 1;\r\n                }\r\n            };\r\n            rgbImg.onerror = function () {\r\n                console.error(`not load ${rgbImg.src}`);\r\n            };\r\n        }\r\n        this.type = 'Terrain';\r\n    }\r\n}\r\nexport default Terrain;\r\n//# sourceMappingURL=Terrain.js.map","import * as maptalks from 'maptalks';\r\nimport Terrain from './Terrain';\r\nimport BaseVectorTileLayer from './BaseVectorTileLayer';\r\nconst OPTIONS = {\r\n    // worker: false\r\n    scale: 1,\r\n    tileDivisor: 4\r\n};\r\n/**\r\n *\r\n */\r\nclass TerrainVectorTileLayer extends BaseVectorTileLayer {\r\n    constructor(url, options = {}, material, layer) {\r\n        super(maptalks.Util.GUID(), maptalks.Util.extend({ urlTemplate: url }, OPTIONS, options));\r\n        this._opts = options;\r\n        this._layer = layer;\r\n        this.material = material;\r\n        this._baseObjectKeys = {};\r\n        this._loadTiles = {};\r\n        this._add = null;\r\n        this._imgQueue = {};\r\n        this._layerLaodTime = new Date().getTime();\r\n        this._init();\r\n    }\r\n    isAsynchronous() {\r\n        return false;\r\n    }\r\n    /**\r\n     * this is can override\r\n     * @param {*} index\r\n     * @param {*} json\r\n     */\r\n    formatBaseObjects(index, image) {\r\n        const opts = this.options, baseobjects = [];\r\n        const { scale, tileDivisor } = opts;\r\n        const { x, y, z } = this._getXYZOfIndex(index);\r\n        const zoom = this.getMap().getZoom();\r\n        const texture = this.getTileUrl(x, y, z);\r\n        const [imageWidth, imageHeight] = this.options.tileSize;\r\n        const extent = this._getTileLngLatExtent(x, y, z);\r\n        const material = this.material.clone();\r\n        if ((z + 1) >= Math.round(zoom)) {\r\n            const terrain = new Terrain(extent, {\r\n                image,\r\n                imageWidth: imageWidth / tileDivisor,\r\n                imageHeight: imageHeight / tileDivisor,\r\n                texture\r\n            }, material, this._layer);\r\n            terrain.getObject3d().scale.set(scale, scale, 1);\r\n            baseobjects.push(terrain);\r\n        }\r\n        return baseobjects;\r\n    }\r\n    //queue loop\r\n    loopMessage(q) {\r\n        this.getTileData(q);\r\n    }\r\n    _init() {\r\n        this.on('layerload', this._layerOnLoad);\r\n        this.on('add', () => {\r\n            if (this._add === false) {\r\n                const baseobjects = this.getBaseObjects();\r\n                this._layer.addMesh(baseobjects);\r\n            }\r\n            this._add = true;\r\n            /**\r\n             * layerload have a bug ,Sometimes it doesn't trigger,I don't know why\r\n             * Add heartbeat detection mechanism\r\n             */\r\n            this.intervalId = setInterval(() => {\r\n                if (this._isLoad() && (!this._layer.getMap().isInteracting())) {\r\n                    this.fire('layerload');\r\n                }\r\n            }, 1000);\r\n        });\r\n        this.on('remove', () => {\r\n            this._add = false;\r\n            const baseobjects = this.getBaseObjects();\r\n            this._layer.removeMesh(baseobjects);\r\n            clearInterval(this.intervalId);\r\n        });\r\n        this.on('show', () => {\r\n            const baseobjects = this.getBaseObjects();\r\n            baseobjects.forEach(baseobject => {\r\n                baseobject.show();\r\n            });\r\n            for (let key in this._baseObjectKeys) {\r\n                const baseobjects = this._baseObjectKeys[key] || [];\r\n                baseobjects.forEach(baseobject => {\r\n                    baseobject.show();\r\n                });\r\n            }\r\n        });\r\n        this.on('hide', () => {\r\n            const baseobjects = this.getBaseObjects();\r\n            baseobjects.forEach(baseobject => {\r\n                baseobject.hide();\r\n            });\r\n            for (let key in this._baseObjectKeys) {\r\n                const baseobjects = this._baseObjectKeys[key] || [];\r\n                baseobjects.forEach(baseobject => {\r\n                    baseobject.hide();\r\n                });\r\n            }\r\n        });\r\n        this.on('renderercreate', (e) => {\r\n            e.renderer.loadTile = function loadTile(tile) {\r\n                var tileSize = this.layer.getTileSize();\r\n                var tileImage = new Image();\r\n                tileImage.width = tileSize['width'];\r\n                tileImage.height = tileSize['height'];\r\n                tileImage.onload = this.onTileLoad.bind(this, tileImage, tile);\r\n                tileImage.onerror = this.onTileError.bind(this, tileImage, tile);\r\n                this.loadTileImage(tileImage, tile['url'], tile.id);\r\n                return tileImage;\r\n            };\r\n            e.renderer.deleteTile = (tile) => {\r\n                if (!tile || !tile.image) {\r\n                    return;\r\n                }\r\n                tile.image.onload = null;\r\n                tile.image.onerror = null;\r\n                const tileinfo = tile.info || {};\r\n                const rgbImage = this._imgQueue[tileinfo.id];\r\n                if (rgbImage) {\r\n                    rgbImage.src = '';\r\n                    rgbImage.onload = null;\r\n                    rgbImage.onerror = null;\r\n                    delete this._imgQueue[tileinfo.id];\r\n                }\r\n            };\r\n            e.renderer.loadTileImage = (img, url, key) => {\r\n                img._key = key;\r\n                const rgbImage = new Image();\r\n                this._imgQueue[key] = rgbImage;\r\n                const q = {\r\n                    key,\r\n                    url,\r\n                    rgbImage,\r\n                    callback: (index, rgbImage, image) => {\r\n                        this._generateBaseObjects(index, rgbImage, image);\r\n                    },\r\n                    img,\r\n                    vt: this\r\n                };\r\n                this.loopMessage(q);\r\n            };\r\n        });\r\n    }\r\n}\r\nexport default TerrainVectorTileLayer;\r\n//# sourceMappingURL=TerrainVectorTileLayer.js.map","/*!\r\n * Code from baidu mapv\r\n * License: BSD-3\r\n * https://github.com/huiyan-fe/mapv\r\n *\r\n */\r\n/* eslint-disable no-trailing-spaces */\r\n/**\r\n * https://github.com/huiyan-fe/mapv/blob/master/src/utils/data-range/Intensity.js\r\n * @author kyle / http://nikai.us/\r\n */\r\nimport { createCanvas } from './../CanvasUtil';\r\n/**\r\n * Category\r\n * @param {Object} [options]   Available options:\r\n *                             {Object} gradient: { 0.25: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,0)\", 0.85: \"yellow\", 1.0: \"rgb(255,0,0)\"}\r\n */\r\nfunction Intensity(options) {\r\n    options = options || {};\r\n    this.gradient = options.gradient || {\r\n        0.25: 'rgba(0, 0, 255, 1)',\r\n        0.55: 'rgba(0, 255, 0, 1)',\r\n        0.85: 'rgba(255, 255, 0, 1)',\r\n        1.0: 'rgba(255, 0, 0, 1)'\r\n    };\r\n    this.maxSize = options.maxSize || 35;\r\n    this.minSize = options.minSize || 0;\r\n    this.max = options.max || 100;\r\n    this.min = options.min || 0;\r\n    this.initPalette();\r\n}\r\nIntensity.prototype.setMax = function (value) {\r\n    this.max = value || 100;\r\n};\r\nIntensity.prototype.setMin = function (value) {\r\n    this.min = value || 0;\r\n};\r\nIntensity.prototype.setMaxSize = function (maxSize) {\r\n    this.maxSize = maxSize || 35;\r\n};\r\nIntensity.prototype.setMinSize = function (minSize) {\r\n    this.minSize = minSize || 0;\r\n};\r\nIntensity.prototype.initPalette = function () {\r\n    var gradient = this.gradient;\r\n    var canvas = createCanvas(256, 1);\r\n    var paletteCtx = this.paletteCtx = canvas.getContext('2d');\r\n    var lineGradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\r\n    for (var key in gradient) {\r\n        lineGradient.addColorStop(parseFloat(key), gradient[key]);\r\n    }\r\n    paletteCtx.fillStyle = lineGradient;\r\n    paletteCtx.fillRect(0, 0, 256, 1);\r\n};\r\nIntensity.prototype.getColor = function (value) {\r\n    var imageData = this.getImageData(value);\r\n    return 'rgba(' + imageData[0] + ', ' + imageData[1] + ', ' + imageData[2] + ', ' + imageData[3] / 256 + ')';\r\n};\r\nIntensity.prototype.getImageData = function (value) {\r\n    var imageData = this.paletteCtx.getImageData(0, 0, 256, 1).data;\r\n    if (value === undefined) {\r\n        return imageData;\r\n    }\r\n    var max = this.max;\r\n    var min = this.min;\r\n    if (value > max) {\r\n        value = max;\r\n    }\r\n    if (value < min) {\r\n        value = min;\r\n    }\r\n    var index = Math.floor((value - min) / (max - min) * (256 - 1)) * 4;\r\n    return [imageData[index], imageData[index + 1], imageData[index + 2], imageData[index + 3]];\r\n};\r\n/**\r\n * @param Number value\r\n * @param Number max of value\r\n * @param Number max of size\r\n * @param Object other options\r\n */\r\nIntensity.prototype.getSize = function (value) {\r\n    var size = 0;\r\n    var max = this.max;\r\n    var min = this.min;\r\n    var maxSize = this.maxSize;\r\n    var minSize = this.minSize;\r\n    if (value > max) {\r\n        value = max;\r\n    }\r\n    if (value < min) {\r\n        value = min;\r\n    }\r\n    if (max > min) {\r\n        size = minSize + (value - min) / (max - min) * (maxSize - minSize);\r\n    }\r\n    else {\r\n        return maxSize;\r\n    }\r\n    return size;\r\n};\r\nIntensity.prototype.getLegend = function (options) {\r\n    var gradient = this.gradient;\r\n    var width = options.width || 20;\r\n    var height = options.height || 180;\r\n    var canvas = createCanvas(width, height);\r\n    var paletteCtx = canvas.getContext('2d');\r\n    var lineGradient = paletteCtx.createLinearGradient(0, height, 0, 0);\r\n    for (var key in gradient) {\r\n        lineGradient.addColorStop(parseFloat(key), gradient[key]);\r\n    }\r\n    paletteCtx.fillStyle = lineGradient;\r\n    paletteCtx.fillRect(0, 0, width, height);\r\n    return canvas;\r\n};\r\nexport default Intensity;\r\n//# sourceMappingURL=Intensity.js.map","/*!\r\n * Code from baidu mapv\r\n * License: BSD-3\r\n * https://github.com/huiyan-fe/mapv\r\n *\r\n */\r\n/**\r\n * https://github.com/huiyan-fe/mapv/blob/master/src/canvas/draw/heatmap.js\r\n */\r\nimport { createCanvas } from './../CanvasUtil';\r\nimport Intensity from './Intensity';\r\nfunction createCircle(size) {\r\n    var shadowBlur = size / 2;\r\n    var r2 = size + shadowBlur;\r\n    var offsetDistance = 10000;\r\n    var circle = createCanvas(r2 * 2, r2 * 2);\r\n    var context = circle.getContext('2d');\r\n    context.shadowBlur = shadowBlur;\r\n    context.shadowColor = 'black';\r\n    context.shadowOffsetX = context.shadowOffsetY = offsetDistance;\r\n    context.beginPath();\r\n    context.arc(r2 - offsetDistance, r2 - offsetDistance, size, 0, Math.PI * 2, true);\r\n    context.closePath();\r\n    context.fill();\r\n    return circle;\r\n}\r\nfunction colorize(pixels, gradient, options) {\r\n    var max = getMax(options);\r\n    var min = getMin(options);\r\n    var diff = max - min;\r\n    var range = options.range || null;\r\n    var jMin = 0;\r\n    var jMax = 1024;\r\n    if (range && range.length === 2) {\r\n        jMin = (range[0] - min) / diff * 1024;\r\n    }\r\n    if (range && range.length === 2) {\r\n        jMax = (range[1] - min) / diff * 1024;\r\n    }\r\n    var maxOpacity = options.maxOpacity || 0.8;\r\n    var minOpacity = options.minOpacity || 0;\r\n    // var range = options.range;\r\n    for (var i = 3, len = pixels.length, j; i < len; i += 4) {\r\n        j = pixels[i] * 4; // get gradient color from opacity value\r\n        if (pixels[i] / 256 > maxOpacity) {\r\n            pixels[i] = 256 * maxOpacity;\r\n        }\r\n        if (pixels[i] / 256 < minOpacity) {\r\n            pixels[i] = 256 * minOpacity;\r\n        }\r\n        if (j && j >= jMin && j <= jMax) {\r\n            pixels[i - 3] = gradient[j];\r\n            pixels[i - 2] = gradient[j + 1];\r\n            pixels[i - 1] = gradient[j + 2];\r\n        }\r\n        else {\r\n            pixels[i] = 0;\r\n        }\r\n    }\r\n}\r\nfunction getMax(options) {\r\n    var max = options.max || 100;\r\n    return max;\r\n}\r\nfunction getMin(options) {\r\n    var min = options.min || 0;\r\n    return min;\r\n}\r\nfunction drawGray(context, dataSet, options) {\r\n    var max = getMax(options);\r\n    // var min = getMin(options);\r\n    // console.log(max)\r\n    var size = options._size || options.size || 13;\r\n    var circle = createCircle(size);\r\n    var circleHalfWidth = circle.width / 2;\r\n    var circleHalfHeight = circle.height / 2;\r\n    var data = dataSet;\r\n    var dataOrderByAlpha = {};\r\n    data.forEach(function (item) {\r\n        var count = item.count === undefined ? 1 : item.count;\r\n        var alpha = Math.min(1, count / max).toFixed(2);\r\n        dataOrderByAlpha[alpha] = dataOrderByAlpha[alpha] || [];\r\n        dataOrderByAlpha[alpha].push(item);\r\n    });\r\n    for (var i in dataOrderByAlpha) {\r\n        if (isNaN(i))\r\n            continue;\r\n        var _data = dataOrderByAlpha[i];\r\n        context.beginPath();\r\n        if (!options.withoutAlpha) {\r\n            context.globalAlpha = i;\r\n        }\r\n        // context.strokeStyle = intensity.getColor(i * max);\r\n        _data.forEach(function (item) {\r\n            var coordinates = item.coordinate;\r\n            var count = item.count === undefined ? 1 : item.count;\r\n            context.globalAlpha = count / max;\r\n            context.drawImage(circle, coordinates[0] - circleHalfWidth, coordinates[1] - circleHalfHeight);\r\n        });\r\n    }\r\n}\r\nfunction draw(context, data, options) {\r\n    if (context.canvas.width <= 0 || context.canvas.height <= 0) {\r\n        return;\r\n    }\r\n    var strength = options.strength || 0.3;\r\n    context.strokeStyle = 'rgba(0,0,0,' + strength + ')';\r\n    // var shadowCanvas = new Canvas(context.canvas.width, context.canvas.height);\r\n    var shadowCanvas = createCanvas(context.canvas.width, context.canvas.height);\r\n    var shadowContext = shadowCanvas.getContext('2d');\r\n    shadowContext.scale(devicePixelRatio, devicePixelRatio);\r\n    options = options || {};\r\n    // var data = dataSet instanceof DataSet ? dataSet.get() : dataSet;\r\n    context.save();\r\n    var intensity = new Intensity({\r\n        gradient: options.gradient\r\n    });\r\n    drawGray(shadowContext, data, options);\r\n    // return false;\r\n    if (!options.absolute) {\r\n        var colored = shadowContext.getImageData(0, 0, context.canvas.width, context.canvas.height);\r\n        colorize(colored.data, intensity.getImageData(), options);\r\n        context.putImageData(colored, 0, 0);\r\n        context.restore();\r\n    }\r\n    intensity = null;\r\n    shadowCanvas = null;\r\n}\r\nexport default {\r\n    draw,\r\n    drawGray,\r\n    colorize\r\n};\r\n//# sourceMappingURL=HeatMapUtil.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport HeatMapUitl from './util/heatmap/HeatMapUtil';\r\nimport { createCanvas } from './util/CanvasUtil';\r\nimport Intensity from './util/heatmap/Intensity';\r\nimport { addAttribute, getVertexColors } from './util/ThreeAdaptUtil';\r\nimport { getPlaneGeometry } from './util/GeometryUtil';\r\nconst OPTIONS = {\r\n    altitude: 0,\r\n    interactive: false,\r\n    min: 0,\r\n    max: 100,\r\n    size: 13,\r\n    gradient: { 0.25: 'rgb(0,0,255)', 0.55: 'rgb(0,255,0)', 0.85: 'yellow', 1.0: 'rgb(255,0,0)' },\r\n    gridScale: 0.5\r\n};\r\nconst CANVAS_MAX_SIZE = 2048;\r\n/**\r\n *\r\n */\r\nclass HeatMap extends BaseObject {\r\n    constructor(data, options, material, layer) {\r\n        if (!Array.isArray(data)) {\r\n            data = [data];\r\n        }\r\n        let minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity;\r\n        const vs = [];\r\n        //Calculate bbox\r\n        for (let i = 0, len = data.length; i < len; i++) {\r\n            const { coordinate, lnglat, xy } = data[i];\r\n            const coord = coordinate || lnglat || xy;\r\n            if (!coord) {\r\n                console.warn('not find coordinate');\r\n                continue;\r\n            }\r\n            const v = layer.coordinateToVector3(coord);\r\n            vs.push(v);\r\n            const { x, y } = v;\r\n            minX = Math.min(minX, x);\r\n            minY = Math.min(minY, y);\r\n            maxX = Math.max(maxX, x);\r\n            maxY = Math.max(maxY, y);\r\n        }\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, points: data });\r\n        // Calculate canvas width and height\r\n        let { gridScale, altitude } = options;\r\n        const offsetX = Math.abs(maxX - minX), offsetY = Math.abs(maxY - minY);\r\n        const maxOffset = Math.max((offsetX * gridScale), (offsetY * gridScale));\r\n        if (maxOffset > CANVAS_MAX_SIZE) {\r\n            console.warn(`gridScale: ${gridScale} it's too big. I hope it's a smaller value,canvas max size is ${CANVAS_MAX_SIZE}* ${CANVAS_MAX_SIZE}`);\r\n            const offset = maxOffset / gridScale;\r\n            gridScale = CANVAS_MAX_SIZE / offset;\r\n        }\r\n        const canvasWidth = Math.ceil(offsetX * gridScale), canvasHeight = Math.ceil(offsetY * gridScale);\r\n        const scaleX = canvasWidth / offsetX, scaleY = canvasHeight / offsetY;\r\n        const pixels = [];\r\n        for (let i = 0, len = vs.length; i < len; i++) {\r\n            const v = vs[i];\r\n            v.x -= minX;\r\n            v.y -= minY;\r\n            v.x *= scaleX;\r\n            v.y *= scaleY;\r\n            v.y = canvasHeight - v.y;\r\n            //for heat draw data\r\n            pixels.push({\r\n                coordinate: [v.x, v.y],\r\n                count: data[i].count\r\n            });\r\n        }\r\n        let shadowCanvas = createCanvas(canvasWidth, canvasHeight);\r\n        let shadowContext = shadowCanvas.getContext('2d');\r\n        // shadowContext.scale(devicePixelRatio, devicePixelRatio);\r\n        HeatMapUitl.drawGray(shadowContext, pixels, options);\r\n        const colored = shadowContext.getImageData(0, 0, shadowContext.canvas.width, shadowContext.canvas.height);\r\n        let maxAlpha = -Infinity;\r\n        const blackps = new Float32Array(colored.data.length / 4), alphas = new Float32Array(colored.data.length / 4);\r\n        for (let i = 3, len = colored.data.length, j = 0; i < len; i += 4) {\r\n            const alpha = colored.data[i];\r\n            maxAlpha = Math.max(maxAlpha, alpha);\r\n            alphas[j] = alpha;\r\n            //Points that do not need to be drawn\r\n            if (alpha <= 0) {\r\n                blackps[j] = 1;\r\n            }\r\n            j++;\r\n        }\r\n        const intensity = new Intensity({\r\n            gradient: options.gradient\r\n        });\r\n        HeatMapUitl.colorize(colored.data, intensity.getImageData(), options);\r\n        shadowCanvas = null;\r\n        shadowContext = null;\r\n        // const geometry = new THREE.PlaneBufferGeometry(offsetX, offsetY, canvasWidth - 1, canvasHeight - 1);\r\n        const geometry = getPlaneGeometry(offsetX, offsetY, canvasWidth - 1, canvasHeight - 1);\r\n        const index = geometry.getIndex().array;\r\n        const position = geometry.attributes.position.array;\r\n        // Index of the points that really need to be drawn\r\n        const colors = new Float32Array(position.length);\r\n        const tempIndex = new Uint32Array(position.length * 6);\r\n        const color = new THREE.Color();\r\n        let iIndex = 0;\r\n        for (let i = 0, len = position.length, j = 0, len1 = index.length, m = 0, len2 = colored.data.length, n = 0; i < Math.max(len, len1, len2); i += 3) {\r\n            if (i < len) {\r\n                const alpha = alphas[n];\r\n                if (alpha > 0) {\r\n                    position[i + 2] = alpha / maxAlpha;\r\n                }\r\n            }\r\n            if (j < len1) {\r\n                const a = index[j], b = index[j + 1], c = index[j + 2];\r\n                if ((!blackps[a]) || (!blackps[b]) || (!blackps[c])) {\r\n                    tempIndex[iIndex] = a;\r\n                    tempIndex[iIndex + 1] = b;\r\n                    tempIndex[iIndex + 2] = c;\r\n                    iIndex += 3;\r\n                }\r\n            }\r\n            if (m < len2) {\r\n                const r = colored.data[m], g = colored.data[m + 1], b = colored.data[m + 2]; // a = colored.data[i + 3];\r\n                const rgb = `rgb(${r},${g},${b})`;\r\n                color.setStyle(rgb);\r\n                colors[j] = color.r;\r\n                colors[j + 1] = color.g;\r\n                colors[j + 2] = color.b;\r\n            }\r\n            j += 3;\r\n            m += 4;\r\n            n++;\r\n        }\r\n        const filterIndex = new Uint32Array(iIndex);\r\n        for (let i = 0; i < iIndex; i++) {\r\n            filterIndex[i] = tempIndex[i];\r\n        }\r\n        geometry.setIndex(new THREE.BufferAttribute(filterIndex, 1));\r\n        addAttribute(geometry, 'color', new THREE.BufferAttribute(colors, 3, true));\r\n        material.vertexColors = getVertexColors();\r\n        super();\r\n        this._initOptions(options);\r\n        this._createMesh(geometry, material);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        this.getObject3d().position.copy(new THREE.Vector3((minX + maxX) / 2, (minY + maxY) / 2, z));\r\n        this.type = 'HeatMap';\r\n    }\r\n}\r\nexport default HeatMap;\r\n//# sourceMappingURL=HeatMap.js.map","import * as THREE from 'three';\r\nconst color = new THREE.Color();\r\nlet colorIndex = 1;\r\n/**\r\n *https://github.com/mrdoob/three.js/blob/master/examples/webgl_interactive_cubes_gpu.html\r\n */\r\nclass GPUPick {\r\n    constructor(layer) {\r\n        this.object3ds = [];\r\n        this.layer = layer;\r\n        this.camera = layer.getCamera();\r\n        this.renderer = layer.getThreeRenderer();\r\n        this.pickingTexture = new THREE.WebGLRenderTarget(1, 1);\r\n        this.pickingScene = new THREE.Scene();\r\n    }\r\n    getColor() {\r\n        color.setHex(colorIndex);\r\n        colorIndex++;\r\n        return color;\r\n    }\r\n    add(object3d) {\r\n        if (object3d) {\r\n            const colorIndex = object3d['_colorIndex'];\r\n            if (colorIndex) {\r\n                this.object3ds[colorIndex] = object3d;\r\n                this.pickingScene.add(object3d);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    remove(object3d) {\r\n        if (object3d) {\r\n            const colorIndex = object3d['_colorIndex'];\r\n            if (colorIndex) {\r\n                this.object3ds[colorIndex] = null;\r\n                this.pickingScene.remove(object3d);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    isEmpty() {\r\n        if (this.pickingScene.children.length === 0) {\r\n            return true;\r\n        }\r\n        for (let i = 0, len = this.pickingScene.children.length; i < len; i++) {\r\n            const mesh = this.pickingScene.children[i];\r\n            if (mesh) {\r\n                const object3d = mesh['__parent'];\r\n                if (object3d && object3d.getOptions().interactive === true) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    pick(pixel) {\r\n        if (!pixel) {\r\n            return;\r\n        }\r\n        if (this.isEmpty()) {\r\n            return;\r\n        }\r\n        const { camera, renderer, pickingTexture, pickingScene, object3ds, layer } = this;\r\n        const len = this.pickingScene.children.length;\r\n        // reset all object3d picked\r\n        for (let i = 0; i < len; i++) {\r\n            const object3d = this.pickingScene.children[i];\r\n            if (object3d && object3d['__parent']) {\r\n                object3d['__parent'].picked = false;\r\n            }\r\n        }\r\n        //resize size\r\n        const { width, height } = layer._getRenderer().canvas;\r\n        const pw = pickingTexture.width, ph = pickingTexture.height;\r\n        if (width !== pw || height !== ph) {\r\n            pickingTexture.setSize(width, height);\r\n        }\r\n        //render the picking scene off-screen\r\n        // set the view offset to represent just a single pixel under the mouse\r\n        // camera.setViewOffset(width, height, mouse.x, mouse.y, 1, 1);\r\n        // render the scene\r\n        renderer.setRenderTarget(pickingTexture);\r\n        renderer.clear();\r\n        renderer.render(pickingScene, camera);\r\n        // clear the view offset so rendering returns to normal\r\n        // camera.clearViewOffset();\r\n        //create buffer for reading single pixel\r\n        const pixelBuffer = new Uint8Array(4);\r\n        //read the pixel\r\n        const { x, y } = pixel;\r\n        const devicePixelRatio = window.devicePixelRatio;\r\n        const offsetX = (x * devicePixelRatio), offsetY = (pickingTexture.height - y * devicePixelRatio);\r\n        renderer.readRenderTargetPixels(pickingTexture, Math.round(offsetX), Math.round(offsetY), 1, 1, pixelBuffer);\r\n        //interpret the pixel as an ID\r\n        const id = (pixelBuffer[0] << 16) | (pixelBuffer[1] << 8) | (pixelBuffer[2]);\r\n        const object3d = object3ds[id];\r\n        if (object3d) {\r\n            if (object3d['__parent']) {\r\n                object3ds[id]['__parent'].picked = true;\r\n            }\r\n        }\r\n        else {\r\n            //for merged mesh\r\n            for (let i = 0; i < len; i++) {\r\n                const object3d = this.pickingScene.children[i];\r\n                if (object3d && object3d['__parent']) {\r\n                    const parent = object3d['__parent'];\r\n                    if (parent._colorMap && parent._colorMap[id] != null) {\r\n                        parent.picked = true;\r\n                        parent.index = parent._colorMap[id];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        renderer.setRenderTarget(null);\r\n    }\r\n}\r\nexport default GPUPick;\r\n//# sourceMappingURL=GPUPick.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport { getLinePosition, getLineSegmentPosition, LineStringSplit, mergeLinePositions } from './util/LineUtil';\r\nimport LineGeometry from './util/fatline/LineGeometry';\r\nimport Line2 from './util/fatline/Line2';\r\nimport LineMaterial from './util/fatline/LineMaterial';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nimport { setBottomHeight } from './util';\r\nimport { FatLineTaskIns } from './BaseObjectTaskManager';\r\nconst OPTIONS = {\r\n    bottomHeight: 0,\r\n    altitude: 0\r\n};\r\nclass FatLine extends BaseObject {\r\n    constructor(lineString, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, lineString });\r\n        super();\r\n        this._initOptions(options);\r\n        const { asynchronous } = options;\r\n        const { lineStrings, center } = LineStringSplit(lineString);\r\n        const geometry = new LineGeometry();\r\n        let position;\r\n        if (asynchronous) {\r\n            const id = maptalks.Util.GUID();\r\n            this.getOptions().id = id;\r\n            this.getOptions().center = center;\r\n            FatLineTaskIns.push({\r\n                id,\r\n                data: lineStrings,\r\n                lineString,\r\n                center,\r\n                layer,\r\n                baseObject: this\r\n            });\r\n        }\r\n        else {\r\n            const positionList = [], cache = {};\r\n            for (let m = 0, le = lineStrings.length; m < le; m++) {\r\n                const positions = getLinePosition(lineStrings[m], layer, center, false).positions;\r\n                setBottomHeight(positions, options.bottomHeight, layer, cache);\r\n                positionList.push(getLineSegmentPosition(positions));\r\n            }\r\n            position = mergeLinePositions(positionList);\r\n            geometry.setPositions(position);\r\n        }\r\n        this._setMaterialRes(layer, material);\r\n        this._createLine2(geometry, material);\r\n        const { altitude } = options;\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        if (!asynchronous) {\r\n            this._setPickObject3d(position, material.linewidth);\r\n            this._init();\r\n        }\r\n        this.type = 'FatLine';\r\n    }\r\n    _init() {\r\n        const pick = this.getLayer().getPick();\r\n        this.on('add', () => {\r\n            pick.add(this.pickObject3d);\r\n        });\r\n        this.on('remove', () => {\r\n            pick.remove(this.pickObject3d);\r\n        });\r\n    }\r\n    _setMaterialRes(layer, material) {\r\n        const map = layer.getMap();\r\n        const size = map.getSize();\r\n        const width = size.width, height = size.height;\r\n        material.resolution.set(width, height);\r\n    }\r\n    _setPickObject3d(ps, linewidth) {\r\n        // if (!this._colorMap) {\r\n        //     return;\r\n        // }\r\n        const geometry = new LineGeometry();\r\n        geometry.setPositions(ps);\r\n        const pick = this.getLayer().getPick();\r\n        const color = pick.getColor();\r\n        const colors = [];\r\n        for (let i = 0, len = ps.length / 3; i < len; i++) {\r\n            colors.push(color.r, color.g, color.b);\r\n        }\r\n        geometry.setColors(colors);\r\n        const material = new LineMaterial({\r\n            color: '#fff',\r\n            // side: THREE.BackSide,\r\n            linewidth,\r\n            vertexColors: getVertexColors()\r\n        });\r\n        this._setMaterialRes(this.getLayer(), material);\r\n        const colorIndex = color.getHex();\r\n        const mesh = new Line2(geometry, material);\r\n        mesh.position.copy(this.getObject3d().position);\r\n        mesh._colorIndex = colorIndex;\r\n        this.setPickObject3d(mesh);\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    identify(coordinate) {\r\n        return this.picked;\r\n    }\r\n    setSymbol(material) {\r\n        if (material && material instanceof THREE.Material) {\r\n            material.needsUpdate = true;\r\n            const size = this.getMap().getSize();\r\n            const width = size.width, height = size.height;\r\n            material.resolution.set(width, height);\r\n            this.getObject3d().material = material;\r\n        }\r\n        return this;\r\n    }\r\n    _workerLoad(result) {\r\n        const position = new Float32Array(result.position);\r\n        const object3d = this.getObject3d();\r\n        object3d.geometry.setPositions(position);\r\n        object3d.computeLineDistances();\r\n        this._setPickObject3d(position, object3d.material.linewidth);\r\n        this._init();\r\n        if (this.isAdd) {\r\n            const pick = this.getLayer().getPick();\r\n            pick.add(this.pickObject3d);\r\n        }\r\n        this._fire('workerload', { target: this });\r\n    }\r\n}\r\nexport default FatLine;\r\n//# sourceMappingURL=FatLine.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport { getLinePosition, getLineSegmentPosition, LineStringSplit, mergeLinePositions } from './util/LineUtil';\r\nimport MergedMixin from './MergedMixin';\r\nimport FatLine from './FatLine';\r\nimport { isGeoJSONLine } from './util/GeoJSONUtil';\r\nimport LineGeometry from './util/fatline/LineGeometry';\r\nimport Line2 from './util/fatline/Line2';\r\nimport LineMaterial from './util/fatline/LineMaterial';\r\nimport { getCenterOfPoints, getGeometriesColorArray, setBottomHeight } from './util';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nimport { FatLinesTaskIns } from './BaseObjectTaskManager';\r\nconst OPTIONS = {\r\n    altitude: 0,\r\n    colors: null\r\n};\r\n/**\r\n *\r\n */\r\nclass FatLines extends MergedMixin(BaseObject) {\r\n    constructor(lineStrings, options, material, layer) {\r\n        if (!Array.isArray(lineStrings)) {\r\n            lineStrings = [lineStrings];\r\n        }\r\n        const centers = [], lineStringList = [];\r\n        const len = lineStrings.length;\r\n        for (let i = 0; i < len; i++) {\r\n            const lineString = lineStrings[i];\r\n            const result = LineStringSplit(lineString);\r\n            centers.push(result.center);\r\n            lineStringList.push(result.lineStrings);\r\n        }\r\n        // Get the center point of the point set\r\n        const center = getCenterOfPoints(centers);\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, lineStrings, coordinate: center });\r\n        super();\r\n        this._initOptions(options);\r\n        const { asynchronous } = options;\r\n        const geometry = new LineGeometry();\r\n        const lines = [], cache = {};\r\n        let faceIndex = 0, faceMap = [], geometriesAttributes = [], psIndex = 0, positionList = [];\r\n        let position;\r\n        let newPosition;\r\n        if (asynchronous) {\r\n            FatLinesTaskIns.push({\r\n                id: maptalks.Util.GUID(),\r\n                data: lineStringList,\r\n                key: options.key,\r\n                center,\r\n                layer,\r\n                baseObject: this,\r\n                lineStrings\r\n            });\r\n        }\r\n        else {\r\n            //LineSegmentsGeometry\r\n            for (let i = 0; i < len; i++) {\r\n                const lls = lineStringList[i];\r\n                let psCount = 0;\r\n                for (let m = 0, le = lls.length; m < le; m++) {\r\n                    const properties = (isGeoJSONLine(lls[m]) ? lls[m]['properties'] : lls[m].getProperties() || {});\r\n                    const { positions } = getLinePosition(lls[m], layer, center, false);\r\n                    setBottomHeight(positions, properties.bottomHeight, layer, cache);\r\n                    psCount += (positions.length / 3 * 2 - 2);\r\n                    positionList.push(getLineSegmentPosition(positions));\r\n                }\r\n                // const psCount = positionsV.length + positionsV.length - 2;\r\n                const faceLen = psCount;\r\n                // faceMap[i] = [faceIndex, faceIndex + faceLen];\r\n                faceIndex += faceLen;\r\n                geometriesAttributes[i] = {\r\n                    position: {\r\n                        count: psCount,\r\n                        start: psIndex,\r\n                        end: psIndex + psCount * 3,\r\n                    },\r\n                    instanceStart: {\r\n                        count: psCount,\r\n                        start: psIndex,\r\n                        end: psIndex + psCount * 3,\r\n                    },\r\n                    instanceEnd: {\r\n                        count: psCount,\r\n                        start: psIndex,\r\n                        end: psIndex + psCount * 3,\r\n                    },\r\n                    hide: false\r\n                };\r\n                psIndex += psCount * 3;\r\n            }\r\n            position = mergeLinePositions(positionList);\r\n            geometry.setPositions(position);\r\n        }\r\n        this._setMaterialRes(layer, material);\r\n        this._createLine2(geometry, material);\r\n        const { altitude } = options;\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = layer.coordinateToVector3(center, z);\r\n        this.getObject3d().position.copy(v);\r\n        // this._faceMap = faceMap;\r\n        this._baseObjects = lines;\r\n        this._datas = lineStrings;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        this.faceIndex = null;\r\n        this.index = null;\r\n        this._geometryCache = new LineGeometry();\r\n        if (!asynchronous) {\r\n            newPosition = new Float32Array(position);\r\n            this._geometryCache.setPositions(newPosition);\r\n        }\r\n        this._colorMap = {};\r\n        this.isHide = false;\r\n        this._initBaseObjectsEvent(lines);\r\n        if (!asynchronous) {\r\n            this._setPickObject3d(newPosition, material.linewidth);\r\n            this._init();\r\n        }\r\n        this.type = 'FatLines';\r\n    }\r\n    _setMaterialRes(layer, material) {\r\n        const map = layer.getMap();\r\n        const size = map.getSize();\r\n        const width = size.width, height = size.height;\r\n        material.resolution.set(width, height);\r\n    }\r\n    _setPickObject3d(ps, linewidth) {\r\n        if (!this._colorMap) {\r\n            return;\r\n        }\r\n        const geometry = this._geometryCache || new LineGeometry();\r\n        geometry.setPositions(ps);\r\n        const pick = this.getLayer().getPick();\r\n        const { _geometriesAttributes } = this;\r\n        const colors = getGeometriesColorArray(_geometriesAttributes);\r\n        let cIndex = 0;\r\n        for (let i = 0, len = _geometriesAttributes.length; i < len; i++) {\r\n            const color = pick.getColor();\r\n            const colorIndex = color.getHex();\r\n            this._colorMap[colorIndex] = i;\r\n            const { count } = _geometriesAttributes[i].position;\r\n            this._datas[i].colorIndex = colorIndex;\r\n            for (let j = 0; j < count; j++) {\r\n                colors[cIndex] = color.r;\r\n                colors[cIndex + 1] = color.g;\r\n                colors[cIndex + 2] = color.b;\r\n                cIndex += 3;\r\n            }\r\n        }\r\n        geometry.setColors(colors);\r\n        const material = new LineMaterial({\r\n            // color: color.getStyle(),\r\n            // side: THREE.BackSide,\r\n            color: '#fff',\r\n            linewidth,\r\n            vertexColors: getVertexColors()\r\n            // dashed: false\r\n        });\r\n        this._setMaterialRes(this.getLayer(), material);\r\n        const color = pick.getColor();\r\n        const colorIndex = color.getHex();\r\n        const mesh = new Line2(geometry, material);\r\n        mesh.position.copy(this.getObject3d().position);\r\n        mesh._colorIndex = colorIndex;\r\n        this.setPickObject3d(mesh);\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    identify(coordinate) {\r\n        return this.picked;\r\n    }\r\n    setSymbol(material) {\r\n        if (material && material instanceof THREE.Material) {\r\n            material.needsUpdate = true;\r\n            const size = this.getMap().getSize();\r\n            const width = size.width, height = size.height;\r\n            material.resolution.set(width, height);\r\n            this.getObject3d().material = material;\r\n        }\r\n        return this;\r\n    }\r\n    // eslint-disable-next-line consistent-return\r\n    getSelectMesh() {\r\n        const index = this._getIndex();\r\n        if (index != null) {\r\n            if (!this._baseObjects[index]) {\r\n                const lineString = this._datas[index];\r\n                const opts = maptalks.Util.extend({}, this.getOptions(), { index }, isGeoJSONLine(lineString) ? lineString.properties : lineString.getProperties());\r\n                this._baseObjects[index] = new FatLine(lineString, opts, this.getObject3d().material, this.getLayer());\r\n                this._proxyEvent(this._baseObjects[index]);\r\n            }\r\n            return {\r\n                data: this._datas[index],\r\n                baseObject: this._baseObjects[index]\r\n            };\r\n        }\r\n    }\r\n    /**\r\n       * update geometry attributes\r\n       * @param {*} bufferAttribute\r\n       * @param {*} attribute\r\n       */\r\n    _updateAttribute(bufferAttribute, attribute) {\r\n        const { indexs } = this._getHideGeometryIndex(attribute);\r\n        const array = this._geometryCache.attributes[attribute].array;\r\n        const len = array.length;\r\n        for (let i = 0; i < len; i++) {\r\n            bufferAttribute.array[i] = array[i];\r\n        }\r\n        let value = -100000;\r\n        for (let j = 0; j < indexs.length; j++) {\r\n            const index = indexs[j];\r\n            const { start, end } = this._geometriesAttributes[index][attribute];\r\n            for (let i = start; i < end; i++) {\r\n                bufferAttribute.array[i] = value;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    _showGeometry(baseObject, isHide) {\r\n        let index;\r\n        if (baseObject) {\r\n            index = baseObject.getOptions().index;\r\n        }\r\n        if (index != null) {\r\n            const geometryAttributes = this._geometriesAttributes[index];\r\n            const { hide } = geometryAttributes;\r\n            if (hide === isHide) {\r\n                return this;\r\n            }\r\n            geometryAttributes.hide = isHide;\r\n            const buffGeom = this.getObject3d().geometry;\r\n            this._updateAttribute(buffGeom.attributes.instanceStart, 'instanceStart');\r\n            this._updateAttribute(buffGeom.attributes.instanceEnd, 'instanceEnd');\r\n            // this._updateAttribute(buffGeom.attributes.instanceDistanceStart, 'instanceDistanceStart');\r\n            // this._updateAttribute(buffGeom.attributes.instanceDistanceEnd, 'instanceDistanceEnd');\r\n            buffGeom.attributes.instanceStart.data.needsUpdate = true;\r\n            buffGeom.attributes.instanceEnd.data.needsUpdate = true;\r\n            // buffGeom.attributes.instanceDistanceStart.data.needsUpdate = true;\r\n            // buffGeom.attributes.instanceDistanceEnd.data.needsUpdate = true;\r\n            this.isHide = isHide;\r\n        }\r\n        return this;\r\n    }\r\n    _workerLoad(result) {\r\n        const { geometriesAttributes } = result;\r\n        // this._faceMap = faceMap;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        const object3d = this.getObject3d();\r\n        const position = new Float32Array(result.position);\r\n        const newPosition = new Float32Array(position);\r\n        object3d.geometry.setPositions(new Float32Array(position));\r\n        this._geometryCache.setPositions(newPosition);\r\n        this._setPickObject3d(newPosition, object3d.material.linewidth);\r\n        this._init();\r\n        if (this.isAdd) {\r\n            const pick = this.getLayer().getPick();\r\n            pick.add(this.pickObject3d);\r\n        }\r\n        this._fire('workerload', { target: this });\r\n    }\r\n}\r\nexport default FatLines;\r\n//# sourceMappingURL=FatLines.js.map","import * as maptalks from 'maptalks';\r\nimport BaseObject from './BaseObject';\r\nimport { getDefaultBoxGeometry, initVertexColors } from './util/BarUtil';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nconst OPTIONS = {\r\n    radius: 10,\r\n    height: 100,\r\n    altitude: 0,\r\n    topColor: '',\r\n    bottomColor: '#2d2f61',\r\n    heightEnable: true\r\n};\r\nclass Box extends BaseObject {\r\n    constructor(coordinate, options, material, layer) {\r\n        options = maptalks.Util.extend({}, OPTIONS, options, { layer, coordinate });\r\n        super();\r\n        this._initOptions(options);\r\n        const { height, radius, topColor, bottomColor, altitude } = options;\r\n        const h = layer.distanceToVector3(height, height).x;\r\n        const r = layer.distanceToVector3(radius, radius).x;\r\n        const geometry = getDefaultBoxGeometry().clone();\r\n        geometry.scale(r * 2, r * 2, h);\r\n        if (topColor) {\r\n            initVertexColors(geometry, bottomColor, topColor, 'z', h / 2);\r\n            material.vertexColors = getVertexColors();\r\n        }\r\n        this._createMesh(geometry, material);\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const position = layer.coordinateToVector3(coordinate, z);\r\n        this.getObject3d().position.copy(position);\r\n        this.type = 'Box';\r\n    }\r\n}\r\nexport default Box;\r\n//# sourceMappingURL=Box.js.map","import * as maptalks from 'maptalks';\r\nimport BaseObject from './BaseObject';\r\nimport Box from './Box';\r\nimport MergedMixin from './MergedMixin';\r\nimport { distanceToVector3, getCenterOfPoints } from './util/index';\r\nimport { getDefaultBoxGeometry, initVertexColors, mergeBarGeometry } from './util/BarUtil';\r\nimport { getVertexColors } from './util/ThreeAdaptUtil';\r\nimport { generatePickBufferGeometry } from './util/MergeGeometryUtil';\r\nconst OPTIONS = {\r\n    radius: 10,\r\n    height: 100,\r\n    altitude: 0,\r\n    topColor: null,\r\n    bottomColor: '#2d2f61',\r\n};\r\nclass Boxs extends MergedMixin(BaseObject) {\r\n    constructor(points, options, material, layer) {\r\n        if (!Array.isArray(points)) {\r\n            points = [points];\r\n        }\r\n        const len = points.length;\r\n        const center = getCenterOfPoints(points);\r\n        const centerPt = layer.coordinateToVector3(center);\r\n        const geometries = [], bars = [], geometriesAttributes = [], faceMap = [];\r\n        let faceIndex = 0, psIndex = 0, normalIndex = 0, uvIndex = 0;\r\n        const cache = {};\r\n        for (let i = 0; i < len; i++) {\r\n            const opts = maptalks.Util.extend({ index: i }, OPTIONS, points[i]);\r\n            const { radius, altitude, topColor, bottomColor, height, coordinate } = opts;\r\n            const r = distanceToVector3(radius, layer, cache);\r\n            const h = distanceToVector3(height, layer, cache);\r\n            const alt = distanceToVector3(altitude, layer, cache);\r\n            const buffGeom = getDefaultBoxGeometry().clone();\r\n            buffGeom.scale(r * 2, r * 2, h);\r\n            if (topColor) {\r\n                initVertexColors(buffGeom, bottomColor, topColor, 'z', h / 2);\r\n                material.vertexColors = getVertexColors();\r\n            }\r\n            const v = layer.coordinateToVector3(coordinate).sub(centerPt);\r\n            const parray = buffGeom.attributes.position.array;\r\n            for (let j = 0, len1 = parray.length; j < len1; j += 3) {\r\n                parray[j + 2] += alt;\r\n                parray[j] += v.x;\r\n                parray[j + 1] += v.y;\r\n                parray[j + 2] += v.z;\r\n            }\r\n            geometries.push(buffGeom);\r\n            const bar = new Box(coordinate, opts, material, layer);\r\n            bars.push(bar);\r\n            const faceLen = buffGeom.index.count / 3;\r\n            // faceMap[i] = [faceIndex + 1, faceIndex + faceLen];\r\n            faceIndex += faceLen;\r\n            const psCount = buffGeom.attributes.position.count, \r\n            //  colorCount = buffGeom.attributes.color.count,\r\n            normalCount = buffGeom.attributes.normal.count, uvCount = buffGeom.attributes.uv.count;\r\n            geometriesAttributes[i] = {\r\n                position: {\r\n                    count: psCount,\r\n                    start: psIndex,\r\n                    end: psIndex + psCount * 3,\r\n                },\r\n                // normal: {\r\n                //     count: normalCount,\r\n                //     start: normalIndex,\r\n                //     end: normalIndex + normalCount * 3,\r\n                // },\r\n                // // color: {\r\n                // //     count: colorCount,\r\n                // //     start: colorIndex,\r\n                // //     end: colorIndex + colorCount * 3,\r\n                // // },\r\n                // uv: {\r\n                //     count: uvCount,\r\n                //     start: uvIndex,\r\n                //     end: uvIndex + uvCount * 2,\r\n                // },\r\n                hide: false\r\n            };\r\n            psIndex += psCount * 3;\r\n            normalIndex += normalCount * 3;\r\n            // colorIndex += colorCount * 3;\r\n            uvIndex += uvCount * 2;\r\n        }\r\n        super();\r\n        options = maptalks.Util.extend({}, { altitude: 0, layer, points }, options);\r\n        this._initOptions(options);\r\n        const geometry = mergeBarGeometry(geometries);\r\n        this._createMesh(geometry, material);\r\n        const altitude = options.altitude;\r\n        const z = layer.distanceToVector3(altitude, altitude).x;\r\n        const v = centerPt.clone();\r\n        v.z = z;\r\n        this.getObject3d().position.copy(v);\r\n        // this._faceMap = faceMap;\r\n        this._baseObjects = bars;\r\n        this._datas = points;\r\n        this._geometriesAttributes = geometriesAttributes;\r\n        this.faceIndex = null;\r\n        this._geometryCache = generatePickBufferGeometry(geometry);\r\n        this.isHide = false;\r\n        this._colorMap = {};\r\n        this._initBaseObjectsEvent(bars);\r\n        this._setPickObject3d();\r\n        this._init();\r\n        this.type = 'Boxs';\r\n    }\r\n    // eslint-disable-next-line no-unused-vars\r\n    identify(coordinate) {\r\n        return this.picked;\r\n    }\r\n}\r\nexport default Boxs;\r\n//# sourceMappingURL=Boxs.js.map","// eslint-disable-next-line quotes\r\nconst workerCode = `(function(e){\"use strict\";var t={exports:{}};function r(e,t,r){r=r||2;var o,v,h,u,s,x,p,d=t&&t.length,g=d?t[0]*r:e.length,y=n(e,0,g,r,!0),m=[];if(!y||y.next===y.prev)return m;if(d&&(y=function(e,t,r,a){var o,v,h,u=[];for(o=0,v=t.length;o<v;o++)(h=n(e,t[o]*a,o<v-1?t[o+1]*a:e.length,a,!1))===h.next&&(h.steiner=!0),u.push(c(h));for(u.sort(l),o=0;o<u.length;o++)f(u[o],r),r=i(r,r.next);return r}(e,t,y,r)),e.length>80*r){o=h=e[0],v=u=e[1];for(var M=r;M<g;M+=r)(s=e[M])<o&&(o=s),(x=e[M+1])<v&&(v=x),s>h&&(h=s),x>u&&(u=x);p=0!==(p=Math.max(h-o,u-v))?1/p:0}return a(y,m,r,o,v,p),m}function n(e,t,r,n,i){var a,o;if(i===F(e,t,r,n)>0)for(a=t;a<r;a+=n)o=Z(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=Z(a,e[a],e[a+1],o);return o&&y(o,o.next)&&(A(o),o=o.next),o}function i(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!y(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(A(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function a(e,t,r,n,l,f,s){if(e){!s&&f&&function(e,t,r,n){var i=e;do{null===i.z&&(i.z=x(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,o,v,h,u=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,v=0,t=0;t<u&&(v++,n=n.nextZ);t++);for(h=u;v>0||h>0&&n;)0!==v&&(0===h||!n||r.z<=n.z)?(i=r,r=r.nextZ,v--):(i=n,n=n.nextZ,h--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(o>1)}(i)}(e,n,l,f);for(var c,p,d=e;e.prev!==e.next;)if(c=e.prev,p=e.next,f?v(e,n,l,f):o(e))t.push(c.i/r),t.push(e.i/r),t.push(p.i/r),A(e),e=p.next,d=p.next;else if((e=p)===d){s?1===s?a(e=h(i(e),t,r),t,r,n,l,f,2):2===s&&u(e,t,r,n,l,f):a(i(e),t,r,n,l,f,1);break}}}function o(e){var t=e.prev,r=e,n=e.next;if(g(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(p(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&g(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function v(e,t,r,n){var i=e.prev,a=e,o=e.next;if(g(i,a,o)>=0)return!1;for(var v=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,h=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,l=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=x(v,h,t,r,n),s=x(u,l,t,r,n),c=e.prevZ,d=e.nextZ;c&&c.z>=f&&d&&d.z<=s;){if(c!==e.prev&&c!==e.next&&p(i.x,i.y,a.x,a.y,o.x,o.y,c.x,c.y)&&g(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,d!==e.prev&&d!==e.next&&p(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;c&&c.z>=f;){if(c!==e.prev&&c!==e.next&&p(i.x,i.y,a.x,a.y,o.x,o.y,c.x,c.y)&&g(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;d&&d.z<=s;){if(d!==e.prev&&d!==e.next&&p(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function h(e,t,r){var n=e;do{var a=n.prev,o=n.next.next;!y(a,o)&&m(a,n,n.next,o)&&w(a,o)&&w(o,a)&&(t.push(a.i/r),t.push(n.i/r),t.push(o.i/r),A(n),A(n.next),n=e=o),n=n.next}while(n!==e);return i(n)}function u(e,t,r,n,o,v){var h=e;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&d(h,u)){var l=S(h,u);return h=i(h,h.next),l=i(l,l.next),a(h,t,r,n,o,v),void a(l,t,r,n,o,v)}u=u.next}h=h.next}while(h!==e)}function l(e,t){return e.x-t.x}function f(e,t){if(t=function(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var v=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(v<=i&&v>o){if(o=v,v===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r;var h,u=r,l=r.x,f=r.y,x=1/0;n=r;do{i>=n.x&&n.x>=l&&i!==n.x&&p(a<f?i:o,a,l,f,a<f?o:i,a,n.x,n.y)&&(h=Math.abs(a-n.y)/(i-n.x),w(n,e)&&(h<x||h===x&&(n.x>r.x||n.x===r.x&&s(r,n)))&&(r=n,x=h)),n=n.next}while(n!==u);return r}(e,t)){var r=S(t,e);i(t,t.next),i(r,r.next)}}function s(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function x(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function c(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function p(e,t,r,n,i,a,o,v){return(i-o)*(t-v)-(e-o)*(a-v)>=0&&(e-o)*(n-v)-(r-o)*(t-v)>=0&&(r-o)*(a-v)-(i-o)*(n-v)>=0}function d(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&m(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(w(e,t)&&w(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||y(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function y(e,t){return e.x===t.x&&e.y===t.y}function m(e,t,r,n){var i=b(g(e,t,r)),a=b(g(e,t,n)),o=b(g(r,n,e)),v=b(g(r,n,t));return i!==a&&o!==v||(!(0!==i||!M(e,r,t))||(!(0!==a||!M(e,n,t))||(!(0!==o||!M(r,e,n))||!(0!==v||!M(r,t,n)))))}function M(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function b(e){return e>0?1:e<0?-1:0}function w(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function S(e,t){var r=new z(e.i,e.x,e.y),n=new z(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function Z(e,t,r,n){var i=new z(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function z(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}t.exports=r,t.exports.default=r,r.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,o=Math.abs(F(e,0,a,r));if(i)for(var v=0,h=t.length;v<h;v++){var u=t[v]*r,l=v<h-1?t[v+1]*r:e.length;o-=Math.abs(F(e,u,l,r))}var f=0;for(v=0;v<n.length;v+=3){var s=n[v]*r,x=n[v+1]*r,c=n[v+2]*r;f+=Math.abs((e[s]-e[c])*(e[x+1]-e[s+1])-(e[s]-e[x])*(e[c+1]-e[s+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},r.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var R=t.exports;function q(e,t,r){var n=t[0],i=t[1],a=r[0]-n,o=r[1]-i;if(0!==a||0!==o){var v=((e[0]-n)*a+(e[1]-i)*o)/(a*a+o*o);v>1?(n=r[0],i=r[1]):v>0&&(n+=a*v,i+=o*v)}return(a=e[0]-n)*a+(o=e[1]-i)*o}function P(e,t,r,n,i){for(var a,o=n,v=t+1;v<r;v++){var h=q(e[v],e[t],e[r]);h>o&&(a=v,o=h)}o>n&&(a-t>1&&P(e,t,a,n,i),i.push(e[a]),r-a>1&&P(e,a,r,n,i))}function L(e,t){var r=e.length-1,n=[e[0]];return P(e,0,r,t,n),n.push(e[r]),n}function V(e,t,r){if(e.length<=2)return e;var n=void 0!==t?t*t:1;return e=L(e=r?e:function(e,t){for(var r,n,i,a,o,v=e[0],h=[v],u=1,l=e.length;u<l;u++)r=e[u],i=v,a=void 0,o=void 0,a=(n=r)[0]-i[0],o=n[1]-i[1],a*a+o*o>t&&(h.push(r),v=r);return v!==r&&h.push(r),h}(e,n),n)}function B(e,t){return e[0]*t[0]+e[1]*t[1]}function E(e,t){var r=t[0],n=t[1],i=Math.sqrt(r*r+n*n);return e[0]=r/i,e[1]=n/i,e}function U(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function H(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function I(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function O(e,t){var r=t[0],n=t[1],i=t[2],a=Math.sqrt(r*r+n*n+i*i);return e[0]=r/a,e[1]=n/a,e[2]=i/a,e}function T(e,t,r){var n=t[0],i=t[1],a=t[2],o=r[0],v=r[1],h=r[2];return e[0]=i*h-a*v,e[1]=a*o-n*h,e[2]=n*v-i*o,e}var W=[];function j(e,t,r,n){var i=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}(t,r),a=Math.acos(i)*n;return U(W,r,t,-i),function(e,t){var r=t[0],n=t[1],i=t[2],a=Math.sqrt(r*r+n*n+i*i);e[0]=r/a,e[1]=n/a,e[2]=i/a}(W,W),function(e,t,r){e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r}(e,t,Math.cos(a)),U(e,e,W,Math.sin(a)),e}function k(e,t,r,n,i,a,o,v,h,u){var l=o-i,f=v-a,s=(l*(t-a)-f*(e-i))/(f*(r-e)-l*(n-t));return h&&(h[u=u||0]=e+s*(r-e),h[u+1]=t+s*(n-t)),s}function _(e,t,r){if(r-t<3)return 0;for(var n=0,i=2*(r-1),a=2*t;a<2*r;){var o=e[i],v=e[i+1],h=e[a],u=e[a+1];i=a,a+=2,n+=o*u-h*v}return n}function D(e,t,r){return void 0===r&&(r=2),R(e,t,r)}var C=[],G=[],J=[];function K(e,t,r,n,i,a,o,v,h){var u,l,f,s=null!=o,x=i,c=null;s&&(c=new Uint32Array(n-r));for(var p=[],d=r;d<n;d++){var g=d===n-1?r:d+1,y=d===r?n-1:d-1,m=e[2*y],M=e[2*y+1],b=e[2*d],w=e[2*d+1],S=e[2*g],Z=e[2*g+1];C[0]=b-m,C[1]=w-M,G[0]=S-b,G[1]=Z-w,E(C,C),E(G,G),s&&(c[d]=x);var A=!1,z=void 0,F=void 0;if(v||d!==r)if(v||d!==n-1){H(J,G,C);var R=J[1];J[1]=-J[0],J[0]=R,E(J,J);var q=B(J,G),P=Math.sqrt(1-q*q),L=a*Math.min(10,1/P);if(s&&1/P>o&&a*q<0){var V=b+J[0]*a,U=w+J[1]*a,I=Math.acos(P)/2,O=Math.tan(I)*Math.abs(a);t[2*x]=V+J[1]*O,t[2*x+1]=U-J[0]*O,t[2*++x]=V-J[1]*O,t[2*x+1]=U+J[0]*O,x++}else z=b+J[0]*L,F=w+J[1]*L,A=!0;if(A){if(h&&null!=u){var T=k(m,M,u,l,b,w,z,F,p,0);T>=-.01&&T<=1.01&&(t[2*f]=z=p[0],t[2*f+1]=F=p[1])}u=t[2*x]=z,l=t[2*x+1]=F,f=x,x++}}else J[0]=C[1],J[1]=-C[0],E(J,J),z=b+J[0]*a,F=w+J[1]*a,A=!0;else J[0]=G[1],J[1]=-G[0],E(J,J),u=t[2*x]=b+J[0]*a,l=t[2*x+1]=w+J[1]*a,f=x,x++}return c}function N(e,t,r,n,i,a,o,v){var h=null!=o,u=i,l=null;h&&(l=new Uint32Array(n-r));for(var f=r;f<n;f++){var s=f===n-1?r:f+1,x=f===r?n-1:f-1,c=e[2*x],p=e[2*x+1],d=e[2*f],g=e[2*f+1],y=e[2*s],m=e[2*s+1];if(C[0]=d-c,C[1]=g-p,G[0]=y-d,G[1]=m-g,E(C,C),E(G,G),h&&(l[f]=u),v||f!==r)if(v||f!==n-1){H(J,G,C);var M=J[1];J[1]=-J[0],J[0]=M,E(J,J);var b=B(J,G),w=Math.sqrt(1-b*b),S=a*Math.min(10,1/w);if(h&&1/w>o&&a*b<0){var Z=d+J[0]*a,A=g+J[1]*a,z=Math.acos(w)/2,F=Math.tan(z)*Math.abs(a);t[2*u]=Z+J[1]*F,t[2*u+1]=A-J[0]*F,t[2*++u]=Z-J[1]*F,t[2*u+1]=A+J[0]*F,u++}else t[2*u]=d+J[0]*S,t[2*u+1]=g+J[1]*S,u++}else J[0]=C[1],J[1]=-C[0],E(J,J),t[2*u]=d+J[0]*a,t[2*u+1]=g+J[1]*a,u++;else J[0]=G[1],J[1]=-G[0],E(J,J),t[2*u]=d+J[0]*a,t[2*u+1]=g+J[1]*a,u++}return l}function Q(e,t,r,n,i){var a=null!=n?[]:new Float32Array(e.length);if(K(e,a,0,t&&t.length?t[0]:e.length/2,0,r,n,i,!0),t)for(var o=0;o<t.length;o++){var v=t[o];K(e,a,v,t[o+1]||e.length/2,null!=n?a.length/2:v,r,n,i,!1)}return a}function X(e,t,r,n){for(var i=0;i<Math.floor((n-r)/2);i++)for(var a=0;a<t;a++){var o=(i+r)*t+a,v=(n-i-1)*t+a,h=e[o];e[o]=e[v],e[v]=h}return e}function Y(e,t){var r=e.length/2,n=0,i=t&&t.length?t[0]:r;_(e,n,i)>0&&X(e,2,n,i);for(var a=1;a<(t?t.length:0)+1;a++)_(e,n=t[a-1],i=t[a]||r)<0&&X(e,2,n,i)}function $(e){e.depth=e.depth||1,e.bevelSize=e.bevelSize||0,e.bevelSegments=null==e.bevelSegments?2:e.bevelSegments,e.smoothBevel=e.smoothBevel||!1,e.simplify=e.simplify||0,null==e.smoothSide&&(e.smoothSide=\"auto\"),null==e.smoothSideThreshold&&(e.smoothSideThreshold=.9),\"number\"==typeof e.depth&&(e.bevelSize=Math.min(e.bevelSegments>0?e.bevelSize:0,e.depth/2)),e.bevelSize>0||(e.bevelSegments=0),e.bevelSegments=Math.round(e.bevelSegments);var t=e.boundingRect;if(e.translate=e.translate||[0,0],e.scale=e.scale||[1,1],e.fitRect){var r=null==e.fitRect.x?t.x||0:e.fitRect.x,n=null==e.fitRect.y?t.y||0:e.fitRect.y,i=e.fitRect.width,a=e.fitRect.height;null==i?null!=a?i=a/t.height*t.width:(i=t.width,a=t.height):null==a&&(a=i/t.width*t.height),e.scale=[i/t.width,a/t.height],e.translate=[(r-t.x)*e.scale[0],(n-t.y)*e.scale[1]]}}var ee=[[0,0],[1,0],[1,1],[0,0],[1,1],[0,1]];function te(e,t,r){for(var n=0,i=e[t],a=e[t+1],o=i,v=a,h=t+2;h<r;h+=2){var u=e[h],l=e[h+1];n+=Math.sqrt((u-i)*(u-i)+(l-a)*(l-a)),i=u,a=l}return n+=Math.sqrt((i-o)*(i-o)+(a-v)*(a-v))}function re(e,t,r,n,i,a){var o=t.vertices,v=t.topVertices,h=t.splittedMap,u=t.depth,l=t.rect,f=n-r,s=a.smoothBevel?1:2,x=Math.min(u/2,a.bevelSize),c=a.bevelSegments,p=i.vertex,d=i.ringPerimeter,g=Math.max(l.width,l.height,u,d);function y(e){var t=(e+1)%f,r=o[2*e],n=o[2*e+1],i=o[2*t],a=o[2*t+1];return r===i&&n===a}if(x>0)for(var m=[0,0,1],M=[],b=[0,0,-1],w=[],S=0,Z=new Float32Array(f),A=0;A<2;A++)for(var z=0===A?u-x:x,F=0;F<=c*s;F++){for(var R=0,q=void 0,P=void 0,L=0;L<f;L++){var V=2*(L%f+r),B=h?2*h[V/2]:V;M[0]=o[V]-v[B],M[1]=o[V+1]-v[B+1],M[2]=0;var E=Math.sqrt(M[0]*M[0]+M[1]*M[1]);M[0]/=E,M[1]/=E;var U=(Math.floor(F/s)+F%s)/c;0===A?j(w,m,M,U):j(w,M,b,U);var H=0===A?U:1-U,I=x*Math.sin(H*Math.PI/2),O=E*Math.cos(H*Math.PI/2),T=x*E/Math.sqrt(I*I+O*O),W=w[0]*T+v[B],k=w[1]*T+v[B+1],_=w[2]*T+z;if(e.position[3*i.vertex]=W,e.position[3*i.vertex+1]=k,e.position[3*i.vertex+2]=_,L>0&&(R+=Math.sqrt((q-W)*(q-W)+(P-k)*(P-k))),F>0||A>0){var D=3*(i.vertex-f),C=e.position[D],G=e.position[D+1],J=e.position[D+2];Z[L]+=Math.sqrt((C-W)*(C-W)+(G-k)*(G-k)+(J-_)*(J-_))}if(e.uv[2*i.vertex]=R/g,e.uv[2*i.vertex+1]=Z[L]/g,q=W,P=k,i.vertex++,!y(L)&&(s>1&&F%s||1===s&&F>=1))for(var K=0;K<6;K++){var N=(ee[K][0]+L)%f,Q=ee[K][1]+S;e.indices[i.index++]=(Q-1)*f+N+p}}S++}else for(var X=0;X<2;X++)for(var Y=0===X?u-x:x,$=0,te=void 0,re=void 0,ne=0;ne<f;ne++){var ie=2*(ne%f+r),ae=o[ie],oe=o[ie+1];e.position[3*i.vertex]=ae,e.position[3*i.vertex+1]=oe,e.position[3*i.vertex+2]=Y,ne>0&&($+=Math.sqrt((te-ae)*(te-ae)+(re-oe)*(re-oe))),e.uv[2*i.vertex]=$/g,e.uv[2*i.vertex+1]=Y/g,te=ae,re=oe,i.vertex++}for(var ve=x>0?c*s+1:1,he=0;he<f;he++)if(!y(he))for(var ue=0;ue<6;ue++){var le=(ee[ue][0]+he)%f,fe=ee[ue][1]+ve;e.indices[i.index++]=(fe-1)*f+le+p}}function ne(e,t,r,n){var i=e.indices,a=e.topVertices,o=e.rect,v=e.depth;if(!(a.length<=4)){for(var h=r.vertex,u=i.length,l=0;l<u;l++)t.indices[r.index++]=h+i[l];for(var f=Math.max(o.width,o.height),s=0;s<(n.excludeBottom?1:2);s++)for(var x=0;x<a.length;x+=2){var c=a[x],p=a[x+1];t.position[3*r.vertex]=c,t.position[3*r.vertex+1]=p,t.position[3*r.vertex+2]=(1-s)*v,t.uv[2*r.vertex]=(c-o.x)/f,t.uv[2*r.vertex+1]=(p-o.y)/f,r.vertex++}if(!n.excludeBottom)for(var d=a.length/2,g=0;g<u;g+=3)for(var y=0;y<3;y++)t.indices[r.index++]=h+d+i[g+2-y]}}function ie(e,t,r,n){var i=null==r||\"auto\"===r;if(!0===r)return{vertices:e,holes:t};for(var a=[],o=t&&[],v=e.length/2,h=[],u=[],l=[],f=0,s=0,x=(t?t.length:0)+1,c=0;c<x;c++){0===c?s=t&&t.length?t[0]:v:(f=t[c-1],s=t[c]||v);for(var p=f;p<s;p++){var d=e[2*p],g=e[2*p+1],y=p===s-1?f:p+1,m=e[2*y],M=e[2*y+1];if(i){var b=p===f?s-1:p-1,w=e[2*b],S=e[2*b+1];h[0]=w-d,h[1]=S-g,u[0]=m-d,u[1]=M-g,E(h,h),E(u,u),1-(.5*B(h,u)+.5)>n?(a.push(d,g),l.push(p)):(a.push(d,g,d,g),l.push(p,p))}else a.push(d,g,d,g),l.push(p,p)}c<x-1&&o&&o.push(a.length/2)}return{vertices:new Float32Array(a),splittedMap:l,holes:o}}function ae(e,t){for(var r=0,n=0,i=0;i<e.length;i++){var a=e[i],o=a.indices,v=a.vertices,h=a.splittedMap,u=a.topVertices,l=a.depth,f=Math.min(l/2,t.bevelSize)>0?t.bevelSegments:0,s=e[i].holes||[];r+=o.length*(t.excludeBottom?1:2),n+=u.length/2*(t.excludeBottom?1:2);for(var x=2+2*f,c=0,p=0,d=0;d<s.length+1;d++){0===d?p=s.length?s[0]:v.length/2:(c=s[d-1],p=s[d]||v.length/2),r+=6*((h?h[p-1]+1:p)-(h?h[c]:c))*(x-1);var g=p-c;n+=g*x+(t.smoothBevel?0:f*g*2)}}for(var y={position:new Float32Array(3*n),indices:new(n>65535?Uint32Array:Uint16Array)(r),uv:new Float32Array(2*n)},m={vertex:0,index:0,ringPerimeter:0},M=0;M<e.length;M++)ne(e[M],y,m,t);for(var b=0;b<e.length;b++){var w=e[b],S=w.holes,Z=w.vertices.length/2,A=0,z=S&&S.length?S[0]:Z;if(m.ringPerimeter=te(e[b].topVertices,A,z),re(y,e[b],A,z,m,t),S)for(var F=0;F<S.length;F++)A=S[F],z=S[F+1]||Z,m.ringPerimeter=te(e[b].topVertices,A,z),re(y,e[b],A,z,m,t)}for(var R=0;R<y.uv.length;R++){var q=y.uv[R];q>0&&Math.round(q)===q?y.uv[R]=1:y.uv[R]=q%1}return y.normal=function(e,t){function r(e,t,r,n){e[0]=t,e[1]=r,e[2]=n}for(var n=[],i=[],a=[],o=[],v=[],h=[],u=e.length,l=new Float32Array(t.length),f=0;f<u;){var s=3*e[f++],x=3*e[f++],c=3*e[f++];r(n,t[s],t[s+1],t[s+2]),r(i,t[x],t[x+1],t[x+2]),r(a,t[c],t[c+1],t[c+2]),I(o,n,i),I(v,i,a),T(h,o,v);for(var p=0;p<3;p++)l[s+p]=l[s+p]+h[p],l[x+p]=l[x+p]+h[p],l[c+p]=l[c+p]+h[p]}for(var d=0;d<l.length;)r(h,l[d],l[d+1],l[d+2]),O(h,h),l[d++]=h[0],l[d++]=h[1],l[d++]=h[2];return l}(y.indices,y.position),y.boundingRect=e[0]&&e[0].rect,y}function oe(e,t,r){for(var n=r.lineWidth,i=e.length,a=new Float32Array(2*i),o=r.translate||[0,0],v=r.scale||[1,1],h=0,u=0;h<i;h++)a[u++]=e[h][0]*v[0]+o[0],a[u++]=e[h][1]*v[1]+o[1];_(a,0,i)<0&&X(a,2,0,i);var l=[],f=[],s=r.miterLimit,x=N(a,f,0,i,0,-n/2,s,!1);X(a,2,0,i);for(var c=N(a,l,0,i,0,-n/2,s,!1),p=(l.length+f.length)/2,d=new Float32Array(2*p),g=0,y=f.length/2,m=0;m<f.length;m++)d[g++]=f[m];for(var M=0;M<l.length;M++)d[g++]=l[M];for(var b=new(p>65535?Uint32Array:Uint16Array)(3*(2*(i-1)+(p-2*i))),w=0,S=0;S<i-1;S++){var Z=S+1;b[w++]=y-1-x[S],b[w++]=y-1-x[S]-1,b[w++]=c[S]+1+y,b[w++]=y-1-x[S],b[w++]=c[S]+1+y,b[w++]=c[S]+y,c[Z]-c[S]==2?(b[w++]=c[S]+2+y,b[w++]=c[S]+1+y,b[w++]=y-x[Z]-1):x[Z]-x[S]==2&&(b[w++]=c[Z]+y,b[w++]=y-1-(x[S]+1),b[w++]=y-1-(x[S]+2))}var A=r.bevelSize>0?Q(d,[],r.bevelSize,null,!0):d,z=r.boundingRect,F=ie(d,null,r.smoothSide,r.smoothSideThreshold);return{vertices:F.vertices,rawVertices:A,splittedMap:F.splittedMap,indices:b,topVertices:A,rect:{x:z.x*v[0]+o[0],y:z.y*v[1]+o[1],width:z.width*v[0],height:z.height*v[1]},depth:\"function\"==typeof r.depth?r.depth(t):r.depth,holes:[]}}function ve(e,t){for(var r=[],n=0;n<e.length;n++){for(var i=e[n],a=[],o=i.length,v=i[o-1][0],h=i[o-1][1],u=0,l=0;l<o;l++){var f=i[l][0],s=i[l][1],x=f-v,c=s-h;(u+=Math.sqrt(x*x+c*c))>t&&(a.push(i[l]),u=0),v=f,h=s}a.length>=3&&r.push(a)}return r.length>0?r:null}function he(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n];(i=V(i,t,!0)).length>=3&&r.push(i)}return r.length>0?r:null}function ue(e,t,r){for(var n=0;n<e.length;n++)t[0]=Math.min(e[n][0],t[0]),t[1]=Math.min(e[n][1],t[1]),r[0]=Math.max(e[n][0],r[0]),r[1]=Math.max(e[n][1],r[1])}var le={x:0,y:0},fe={x:0,y:0};function se(e,t,r,n){for(var i=e.length,a=0;a<i;a++){var o=e[a].data;t=e[a].center||t;for(var v=0,h=o.length;v<h;v++)for(var u=o[v],l=0,f=u.length;l<f;l++)e[a].data[v][l]=xe(u[l],t,r,n)}}function xe(e,t,r,n){for(var i,a=[],o=0,v=(i=r?new Float64Array(e):new Float32Array(e)).length;o<v;o+=2){var h=i[o],u=i[o+1];if(t&&r&&n){le.x=h,le.y=u;var l=be(le,fe);le.x=l.x,le.y=l.y,h=(l=we(n,le,r,fe)).x,u=l.y,h-=t[0],u-=t[1]}a.push([h,u])}return a}function ce(e,t){void 0===t&&(t=!1);for(var r=e.length,n=[],i=[],a=0,o=0;o<r;o++){var v=t?de(e[o]):pe(e[o]),h=e[o].bottomHeight||0,u=v.position;i.push(v);var l=u.length/3;n[o]={position:{middleZ:h+(e[o].height||0)/2,count:l,start:a,end:a+3*l},hide:!1},a+=3*l}var f=function(e){for(var t={},r={},n=0;n<e.length;++n){var i=e[n];for(var a in i)void 0===t[a]&&(t[a]=[],r[a]=0),t[a].push(i[a]),r[a]+=i[a].length}var o={},v=0,h=[];for(var u in t)if(\"indices\"===u)for(var l=t[u],f=0,s=l.length;f<s;f++){for(var x=l[f],c=0,p=x.length;c<p;c++)h.push(x[c]+v);v+=t.position[f].length/3}else{var d=ge(t[u],r[u]);if(!d)return null;o[u]=d}return o.indices=new Uint32Array(h),o}(i),s=f.position,x=f.normal,c=f.uv,p=f.indices;return{position:s.buffer,normal:x.buffer,uv:c.buffer,indices:p.buffer,geometriesAttributes:n}}function pe(e){var t=e.data,r=e.height,n=e.bottomHeight,i=function(e,t){t=Object.assign({},t);for(var r=[1/0,1/0],n=[-1/0,-1/0],i=0;i<e.length;i++)ue(e[i][0],r,n);t.boundingRect=t.boundingRect||{x:r[0],y:r[1],width:n[0]-r[0],height:n[1]-r[1]},$(t);for(var a=[],o=t.translate||[0,0],v=t.scale||[1,1],h=t.boundingRect,u={x:h.x*v[0]+o[0],y:h.y*v[1]+o[1],width:h.width*v[0],height:h.height*v[1]},l=Math.min(h.width,h.height)/1e5,f=0;f<e.length;f++){var s=ve(e[f],l);if(s){var x=t.simplify/Math.max(v[0],v[1]);if(x>0&&(s=he(s,x)),s){for(var c=R.flatten(s),p=c.vertices,d=c.holes,g=c.dimensions,y=0;y<p.length;)p[y]=p[y++]*v[0]+o[0],p[y]=p[y++]*v[1]+o[1];if(Y(p,d),2!==g)throw new Error(\"Only 2D polygon points are supported\");var m=t.bevelSize>0?Q(p,d,t.bevelSize,null,!0):p,M=D(m,d,g),b=ie(p,d,t.smoothSide,t.smoothSideThreshold);a.push({indices:M,vertices:b.vertices,rawVertices:p,topVertices:m,holes:b.holes,splittedMap:b.splittedMap,rect:u,depth:\"function\"==typeof t.depth?t.depth(f):t.depth})}}}return ae(a,t)}(t,{depth:r}),a=i.position,o=i.normal,v=i.uv,h=i.indices;return ye(a,n),{position:a,normal:o,uv:v,indices:h}}function de(e){var t=e.data,r=e.height,n=e.width,i=e.bottomHeight,a=function(e,t){t=Object.assign({},t);for(var r=[1/0,1/0],n=[-1/0,-1/0],i=0;i<e.length;i++)ue(e[i],r,n);t.boundingRect=t.boundingRect||{x:r[0],y:r[1],width:n[0]-r[0],height:n[1]-r[1]},$(t);var a=t.scale||[1,1];null==t.lineWidth&&(t.lineWidth=1),null==t.miterLimit&&(t.miterLimit=2);for(var o=[],v=0;v<e.length;v++){var h=e[v],u=t.simplify/Math.max(a[0],a[1]);u>0&&(h=V(h,u,!0)),o.push(oe(h,v,t))}return ae(o,t)}(t,{lineWidth:n,depth:r}),o=a.position,v=a.normal,h=a.uv,u=a.indices;return ye(o,i),{position:o,normal:v,uv:h,indices:u}}function ge(e,t){for(var r=new Float32Array(t),n=0,i=0;i<e.length;++i)r.set(e[i],n),n+=e[i].length;return r}function ye(e,t){if(void 0!==t&&\"number\"==typeof t&&0!==t)for(var r=0,n=e.length;r<n;r+=3)e[r+2]+=t}var me=Math.PI/180,Me=6378137*Math.PI/180;function be(e,t){var r,n=85.0511287798,i=e.x,a=Math.max(Math.min(n,e.y),-n);r=0===a?0:Math.log(Math.tan((90+a)*me/2))/me;var o=i*Me,v=r*Me;return t?(t.x=o,t.y=v,t):{x:o,y:v}}function we(e,t,r,n){var i=e[0]*(t.x-e[2])/r,a=-e[1]*(t.y-e[3])/r;return n?(n.x=i,n.y=a,n):{x:i,y:a}}function Se(e){void 0===e&&(e=[]);for(var t=e.length,r=new Float32Array(3*t),n=0;n<t;n++){var i=e[n],a=3*n;r[a]=i[0],r[a+1]=i[1]}return r}function Ze(e){for(var t=new Float32Array(2*e.length-6),r=0,n=0,i=e.length/3;n<i;n++){var a=e[3*n],o=e[3*n+1],v=e[3*n+2];if(n>0&&n<i-1){var h=3*r;t[h]=a,t[h+1]=o,t[h+2]=v,r++}var u=3*r;t[u]=a,t[u+1]=o,t[u+2]=v,r++}return t}function Ae(e){var t=0,r=e.length;if(1===r)return e[0];for(var n=0;n<r;n++)t+=e[n].length;for(var i=new Float32Array(t),a=0,o=0;o<r;o++)i.set(e[o],a),a+=e[o].length;return i}e.initialize=function(){},e.onmessage=function(e,t){var r=e.data,n=r.type,i=r.datas,a=r.glRes,o=r.matrix,v=r.center;if(\"ExtrudePolygons\"===n){se(i,v,a,o);var h=ce(i);t(null,h,[h.position,h.normal,h.uv,h.indices])}else if(\"ExtrudeLines\"===n){for(var u=0,l=i.length;u<l;u++)for(var f=0,s=i[u].data.length;f<s;f++)i[u].data[f]=xe(i[u].data[f],i[u].center||v,a,o);var x=ce(i,!0);t(null,x,[x.position,x.normal,x.uv,x.indices])}else if(\"ExtrudePolygon\"===n){var c=[],p=[];i.forEach((function(e){var t=[e];se(t,v,a,o);var r=ce(t),n=r.position,i=r.normal,h=r.uv,u=r.indices;c.push({id:e.id,position:n,normal:i,uv:h,indices:u}),p.push(n,i,h,u)})),t(null,c,p)}else if(\"Line\"===n||\"FatLine\"===n){for(var d=[],g=[],y=0,m=i.length;y<m;y++){for(var M=[],b=0,w=i[y].data.length;b<w;b++){i[y].data[b]=xe(i[y].data[b],i[y].center||v,a,o);var S=Se(i[y].data[b]);M.push(Ze(S))}var Z=Ae(M);ye(Z,i[y].bottomHeight),d.push({id:i[y].id,position:Z.buffer}),g.push(Z.buffer)}t(null,d,g)}else if(\"Lines\"===n||\"FatLines\"===n){for(var A=0,z=[],F=[],R=0,q=[],P=0,L=i.length;P<L;P++){for(var V=0,B=0,E=i[P].data.length;B<E;B++){i[P].data[B]=xe(i[P].data[B],i[P].center||v,a,o);var U=Se(i[P].data[B]);ye(U,i[P].bottomHeight),V+=U.length/3*2-2,q.push(Ze(U))}var H=V;z[P]=[A,A+H],A+=H,F[P]={position:{count:V,start:R,end:R+3*V},hide:!1},\"FatLines\"===n&&(F[P].instanceStart={count:V,start:R,end:R+3*V},F[P].instanceEnd={count:V,start:R,end:R+3*V}),R+=3*V}var I=Ae(q);t(null,{id:i.id,position:I.buffer,geometriesAttributes:F,faceMap:z},[I.buffer])}else if(\"ExtrudeLine\"===n){for(var O=0,T=i.length;O<T;O++)for(var W=0,j=i[O].data.length;W<j;W++)i[O].data[W]=xe(i[O].data[W],i[O].center||v,a,o);var k=[],_=[];i.forEach((function(e){var t=ce([e],!0),r=t.position,n=t.normal,i=t.uv,a=t.indices;k.push({id:e.id,position:r,normal:n,uv:i,indices:a}),_.push(r,n,i,a)})),t(null,k,_)}},Object.defineProperty(e,\"__esModule\",{value:!0})})`;\r\nconst workerName = '__maptalks.three__';\r\nexport function getWorkerName() {\r\n    return workerName;\r\n}\r\nexport function getWorkerCode() {\r\n    return workerCode;\r\n}\r\n//# sourceMappingURL=getworker.js.map","import * as maptalks from 'maptalks';\r\nexport const fetchDataWorkerKey = '__maptalks.three.fetchdata__';\r\nexport function fetchDataWorkerCode(exports) {\r\n    const tasks = [], taskings = [], concurrentCount = 5;\r\n    exports.initialize = function () {\r\n    };\r\n    exports.onmessage = function (message, postResponse) {\r\n        const data = message.data;\r\n        const task = {\r\n            url: data,\r\n            postResponse,\r\n            abort: false\r\n        };\r\n        loopTask(task);\r\n    };\r\n    function loopTask(task) {\r\n        if (task.abort) {\r\n            taskings.splice(taskings.indexOf(task), 1);\r\n            if (tasks.length) {\r\n                taskings.push(tasks[0]);\r\n                tasks.splice(0, 1);\r\n                fetchData(taskings[taskings.length - 1]);\r\n            }\r\n        }\r\n        else if (taskings.length < concurrentCount) {\r\n            taskings.push(task);\r\n            fetchData(task);\r\n        }\r\n        else {\r\n            tasks.push(task);\r\n        }\r\n    }\r\n    function fetchData(task) {\r\n        fetch(task.url).then(res => res.text()).then((json) => {\r\n            const blob = new Blob([json], { type: 'application/json' });\r\n            blob.arrayBuffer().then(arrayBuffer => {\r\n                task.postResponse(null, arrayBuffer, [arrayBuffer]);\r\n            });\r\n        }).catch(error => {\r\n            console.error(error);\r\n        }).finally(() => {\r\n            task.abort = true;\r\n            loopTask(task);\r\n        });\r\n    }\r\n}\r\nvar actor;\r\nexport function getFetchDataActor() {\r\n    if (!maptalks.worker) {\r\n        console.error('maptalks.worker is not defined,You can\\'t use');\r\n    }\r\n    if (!actor) {\r\n        actor = new maptalks.worker.Actor(fetchDataWorkerKey);\r\n    }\r\n    return actor;\r\n}\r\n//# sourceMappingURL=fetchdataworker.js.map","import * as maptalks from 'maptalks';\r\nimport * as THREE from 'three';\r\nimport BaseObject from './BaseObject';\r\nimport Bar from './Bar';\r\nimport Line from './Line';\r\nimport ExtrudeLine from './ExtrudeLine';\r\nimport ExtrudePolygon from './ExtrudePolygon';\r\nimport Model from './Model';\r\nimport ExtrudeLineTrail from './ExtrudeLineTrail';\r\nimport ExtrudePolygons from './ExtrudePolygons';\r\nimport Point from './Point';\r\nimport Points from './Points';\r\nimport Bars from './Bars';\r\nimport ExtrudeLines from './ExtrudeLines';\r\nimport Lines from './Lines';\r\nimport ThreeVectorTileLayer from './ThreeVectorTileLayer';\r\nimport Terrain from './Terrain';\r\nimport TerrainVectorTileLayer from './TerrainVectorTileLayer';\r\nimport HeatMap from './HeatMap';\r\nimport { setRaycasterLinePrecision } from './util/ThreeAdaptUtil';\r\nimport GPUPick from './GPUPick';\r\nimport FatLine from './FatLine';\r\nimport FatLines from './FatLines';\r\nimport Box from './Box';\r\nimport Boxs from './Boxs';\r\nimport MergedMixin from './MergedMixin';\r\nimport * as GeoJSONUtil from './util/GeoJSONUtil';\r\nimport * as GeoUtil from './util/GeoUtil';\r\nimport * as MergeGeometryUtil from './util/MergeGeometryUtil';\r\nimport * as ExtrudeUtil from './util/ExtrudeUtil';\r\nimport * as LineUtil from './util/LineUtil';\r\nimport * as IdentifyUtil from './util/IdentifyUtil';\r\nimport * as geometryExtrude from 'deyihu-geometry-extrude';\r\nimport LineMaterial from './util/fatline/LineMaterial';\r\nimport { getWorkerCode, getWorkerName } from './worker/getworker';\r\nimport { BaseObjectTaskManager } from './BaseObjectTaskManager';\r\nimport { fetchDataWorkerKey, fetchDataWorkerCode, getFetchDataActor } from './worker/fetchdataworker';\r\nconst options = {\r\n    'renderer': 'gl',\r\n    'doubleBuffer': false,\r\n    'glOptions': null,\r\n    'geometryEvents': true,\r\n    'identifyCountOnEvent': 0,\r\n    'forceRenderOnZooming': true,\r\n    'loopRenderCount': 50\r\n};\r\nconst RADIAN = Math.PI / 180;\r\nconst LINEPRECISIONS = [\r\n    [4000, 220],\r\n    [2000, 100],\r\n    [1000, 30],\r\n    [500, 15],\r\n    [100, 5],\r\n    [50, 2],\r\n    [10, 1],\r\n    [5, 0.7],\r\n    [2, 0.1],\r\n    [1, 0.05],\r\n    [0.5, 0.02],\r\n    [0.4, 0.01],\r\n    [0.1, 0.005],\r\n    [0.05, 0.002],\r\n    [0.01, 0.001]\r\n];\r\nconst EVENTS = [\r\n    'mousemove',\r\n    'click',\r\n    'mousedown',\r\n    'mouseup',\r\n    'dblclick',\r\n    'contextmenu',\r\n    'touchstart',\r\n    'touchmove',\r\n    'touchend'\r\n];\r\nconst TEMP_COORD = new maptalks.Coordinate(0, 0);\r\nconst TEMP_POINT = new maptalks.Point(0, 0);\r\nconst KEY_FBO = '__webglFramebuffer';\r\n// const MATRIX4 = new THREE.Matrix4();\r\n/**\r\n * A Layer to render with THREE.JS (http://threejs.org), the most popular library for WebGL. <br>\r\n *\r\n * @classdesc\r\n * A layer to render with THREE.JS\r\n * @example\r\n *  var layer = new maptalks.ThreeLayer('three');\r\n *\r\n *  layer.prepareToDraw = function (gl, scene, camera) {\r\n *      var size = map.getSize();\r\n *      return [size.width, size.height]\r\n *  };\r\n *\r\n *  layer.draw = function (gl, view, scene, camera, width,height) {\r\n *      //...\r\n *  };\r\n *  layer.addTo(map);\r\n * @class\r\n * @category layer\r\n * @extends {maptalks.CanvasLayer}\r\n * @param {String|Number} id - layer's id\r\n * @param {Object} options - options defined in [options]{@link maptalks.ThreeLayer#options}\r\n */\r\nclass ThreeLayer extends maptalks.CanvasLayer {\r\n    constructor(id, options) {\r\n        super(id, options);\r\n        this._animationBaseObjectMap = {};\r\n        this._needsUpdate = true;\r\n        this._mousemoveTimeOut = 0;\r\n        this._baseObjects = [];\r\n        this._delayMeshes = [];\r\n        this.type = 'ThreeLayer';\r\n    }\r\n    isMercator() {\r\n        const map = this.getMap();\r\n        if (!map) {\r\n            return false;\r\n        }\r\n        const sp = map.getSpatialReference();\r\n        const prj = sp._projection, res = sp._resolutions;\r\n        if (prj && prj.code === 'EPSG:3857' && res && res.length && Math.floor(res[0]) === 156543 && map.getGLRes) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    isRendering() {\r\n        const map = this.getMap();\r\n        if (!map) {\r\n            return false;\r\n        }\r\n        return map.isInteracting() || map.isAnimating();\r\n    }\r\n    prepareToDraw(...args) {\r\n    }\r\n    /**\r\n     * Draw method of ThreeLayer\r\n     * In default, it calls renderScene, refresh the camera and the scene\r\n     */\r\n    draw(gl, view, scene, camera, timeStamp, context) {\r\n        this.renderScene(context, this);\r\n    }\r\n    /**\r\n     * Draw method of ThreeLayer when map is interacting\r\n     * In default, it calls renderScene, refresh the camera and the scene\r\n     */\r\n    drawOnInteracting(gl, view, scene, camera, event, timeStamp, context) {\r\n        this.renderScene(context, this);\r\n    }\r\n    /**\r\n     * Convert a geographic coordinate to THREE Vector3\r\n     * @param  {maptalks.Coordinate} coordinate - coordinate\r\n     * @param {Number} [z=0] z value\r\n     * @return {THREE.Vector3}\r\n     */\r\n    coordinateToVector3(coordinate, z = 0) {\r\n        const map = this.getMap();\r\n        if (!map) {\r\n            return null;\r\n        }\r\n        const isArray = Array.isArray(coordinate);\r\n        if (isArray) {\r\n            TEMP_COORD.x = coordinate[0];\r\n            TEMP_COORD.y = coordinate[1];\r\n        }\r\n        else if (!(coordinate instanceof maptalks.Coordinate)) {\r\n            coordinate = new maptalks.Coordinate(coordinate);\r\n        }\r\n        const res = getGLRes(map);\r\n        const p = coordinateToPoint(map, isArray ? TEMP_COORD : coordinate, res, TEMP_POINT);\r\n        return new THREE.Vector3(p.x, p.y, z);\r\n    }\r\n    coordinatiesToGLFloatArray(coordinaties, centerPt) {\r\n        const map = this.getMap();\r\n        if (!map) {\r\n            return null;\r\n        }\r\n        const res = getGLRes(map);\r\n        const len = coordinaties.length;\r\n        const array = new Float32Array(len * 2);\r\n        const array3d = new Float32Array(len * 3);\r\n        for (let i = 0; i < len; i++) {\r\n            let coordinate = coordinaties[i];\r\n            const isArray = Array.isArray(coordinate);\r\n            if (isArray) {\r\n                TEMP_COORD.x = coordinate[0];\r\n                TEMP_COORD.y = coordinate[1];\r\n            }\r\n            else if (!(coordinate instanceof maptalks.Coordinate)) {\r\n                coordinate = new maptalks.Coordinate(coordinate);\r\n            }\r\n            const p = coordinateToPoint(map, isArray ? TEMP_COORD : coordinate, res, TEMP_POINT);\r\n            p.x -= centerPt.x;\r\n            p.y -= centerPt.y;\r\n            const idx = i * 2;\r\n            array[idx] = p.x;\r\n            array[idx + 1] = p.y;\r\n            const idx1 = i * 3;\r\n            array3d[idx1] = p.x;\r\n            array3d[idx1 + 1] = p.y;\r\n            array3d[idx1 + 2] = 0;\r\n        }\r\n        return {\r\n            positions: array3d,\r\n            positons2d: array\r\n        };\r\n    }\r\n    coordinatiesToGLArray(coordinaties, centerPt) {\r\n        const map = this.getMap();\r\n        if (!map) {\r\n            return null;\r\n        }\r\n        const res = getGLRes(map);\r\n        const len = coordinaties.length;\r\n        const array = new Array(len);\r\n        for (let i = 0; i < len; i++) {\r\n            let coordinate = coordinaties[i];\r\n            const isArray = Array.isArray(coordinate);\r\n            if (isArray) {\r\n                TEMP_COORD.x = coordinate[0];\r\n                TEMP_COORD.y = coordinate[1];\r\n            }\r\n            else if (!(coordinate instanceof maptalks.Coordinate)) {\r\n                coordinate = new maptalks.Coordinate(coordinate);\r\n            }\r\n            const p = coordinateToPoint(map, isArray ? TEMP_COORD : coordinate, res, TEMP_POINT);\r\n            p.x -= centerPt.x;\r\n            p.y -= centerPt.y;\r\n            array[i] = [p.x, p.y];\r\n        }\r\n        return array;\r\n    }\r\n    /**\r\n     * Convert geographic distance to THREE Vector3\r\n     * @param  {Number} w - width\r\n     * @param  {Number} h - height\r\n     * @return {THREE.Vector3}\r\n     */\r\n    distanceToVector3(w, h, coord) {\r\n        if ((w === 0 && h === 0) || (!maptalks.Util.isNumber(w) || !maptalks.Util.isNumber(h))) {\r\n            return new THREE.Vector3(0, 0, 0);\r\n        }\r\n        const map = this.getMap();\r\n        const res = getGLRes(map);\r\n        let center = coord || map.getCenter();\r\n        if (!(center instanceof maptalks.Coordinate)) {\r\n            center = new maptalks.Coordinate(center);\r\n        }\r\n        const target = map.locate(center, w, h);\r\n        const p0 = coordinateToPoint(map, center, res), p1 = coordinateToPoint(map, target, res);\r\n        const x = Math.abs(p1.x - p0.x) * maptalks.Util.sign(w);\r\n        const y = Math.abs(p1.y - p0.y) * maptalks.Util.sign(h);\r\n        return new THREE.Vector3(x, y, 0);\r\n    }\r\n    /**\r\n     * Convert a Polygon or a MultiPolygon to THREE shape\r\n     * @param  {maptalks.Polygon|maptalks.MultiPolygon} polygon - polygon or multipolygon\r\n     * @return {THREE.Shape}\r\n     */\r\n    toShape(polygon) {\r\n        if (!polygon) {\r\n            return null;\r\n        }\r\n        if (polygon instanceof maptalks.MultiPolygon) {\r\n            return polygon.getGeometries().map(c => this.toShape(c));\r\n        }\r\n        const center = polygon.getCenter();\r\n        const centerPt = this.coordinateToVector3(center);\r\n        const shell = polygon.getShell();\r\n        const outer = shell.map(c => {\r\n            const vector = this.coordinateToVector3(c).sub(centerPt);\r\n            return new THREE.Vector2(vector.x, vector.y);\r\n        });\r\n        const shape = new THREE.Shape(outer);\r\n        const holes = polygon.getHoles();\r\n        if (holes && holes.length > 0) {\r\n            shape.holes = holes.map(item => {\r\n                const pts = item.map(c => {\r\n                    const vector = this.coordinateToVector3(c).sub(centerPt);\r\n                    return new THREE.Vector2(vector.x, vector.y);\r\n                });\r\n                return new THREE.Shape(pts);\r\n            });\r\n        }\r\n        return shape;\r\n    }\r\n    /**\r\n     * todo   This should also be extracted as a component\r\n     * @param {*} polygon\r\n     * @param {*} altitude\r\n     * @param {*} material\r\n     * @param {*} height\r\n     */\r\n    toExtrudeMesh(polygon, altitude, material, height) {\r\n        if (!polygon) {\r\n            return null;\r\n        }\r\n        if (polygon instanceof maptalks.MultiPolygon) {\r\n            return polygon.getGeometries().map(c => this.toExtrudeMesh(c, altitude, material, height));\r\n        }\r\n        const rings = polygon.getCoordinates();\r\n        rings.forEach(ring => {\r\n            const length = ring.length;\r\n            for (let i = length - 1; i >= 1; i--) {\r\n                if (ring[i].equals(ring[i - 1])) {\r\n                    ring.splice(i, 1);\r\n                }\r\n            }\r\n        });\r\n        polygon.setCoordinates(rings);\r\n        const shape = this.toShape(polygon);\r\n        const center = this.coordinateToVector3(polygon.getCenter());\r\n        height = maptalks.Util.isNumber(height) ? height : altitude;\r\n        height = this.distanceToVector3(height, height).x;\r\n        const amount = this.distanceToVector3(altitude, altitude).x;\r\n        //{ amount: extrudeH, bevelEnabled: true, bevelSegments: 2, steps: 2, bevelSize: 1, bevelThickness: 1 };\r\n        const config = { 'bevelEnabled': false, 'bevelSize': 1 };\r\n        const name = parseInt(THREE.REVISION) >= 93 ? 'depth' : 'amount';\r\n        config[name] = height;\r\n        const geom = new THREE.ExtrudeGeometry(shape, config);\r\n        let buffGeom = geom;\r\n        if (THREE.BufferGeometry.prototype.fromGeometry) {\r\n            buffGeom = new THREE.BufferGeometry();\r\n            buffGeom.fromGeometry(geom);\r\n        }\r\n        const mesh = new THREE.Mesh(buffGeom, material);\r\n        mesh.position.set(center.x, center.y, amount - height);\r\n        return mesh;\r\n    }\r\n    /**\r\n     *\r\n     * @param {maptalks.Polygon|maptalks.MultiPolygon} polygon\r\n     * @param {Object} options\r\n     * @param {THREE.Material} material\r\n     */\r\n    toExtrudePolygon(polygon, options, material) {\r\n        return new ExtrudePolygon(polygon, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {maptalks.Coordinate} coordinate\r\n     * @param {Object} options\r\n     * @param {THREE.Material} material\r\n     */\r\n    toBar(coordinate, options, material) {\r\n        return new Bar(coordinate, options, material, this);\r\n    }\r\n    /**\r\n    *\r\n    * @param {maptalks.LineString} lineString\r\n    * @param {Object} options\r\n    * @param {THREE.LineMaterial} material\r\n    */\r\n    toLine(lineString, options, material) {\r\n        return new Line(lineString, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {maptalks.LineString} lineString\r\n     * @param {Object} options\r\n     * @param {THREE.Material} material\r\n     */\r\n    toExtrudeLine(lineString, options, material) {\r\n        return new ExtrudeLine(lineString, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {THREE.Mesh|THREE.Group} model\r\n     * @param {Object} options\r\n     */\r\n    toModel(model, options) {\r\n        return new Model(model, options, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {maptalks.LineString} lineString\r\n     * @param {*} options\r\n     * @param {THREE.Material} material\r\n     */\r\n    toExtrudeLineTrail(lineString, options, material) {\r\n        return new ExtrudeLineTrail(lineString, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} polygons\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toExtrudePolygons(polygons, options, material) {\r\n        return new ExtrudePolygons(polygons, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {maptalks.Coordinate} coordinate\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toPoint(coordinate, options, material) {\r\n        return new Point(coordinate, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {Array} points\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toPoints(points, options, material) {\r\n        return new Points(points, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {Array} points\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toBars(points, options, material) {\r\n        return new Bars(points, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {Array[maptalks.LineString]} lineStrings\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toExtrudeLines(lineStrings, options, material) {\r\n        return new ExtrudeLines(lineStrings, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {Array[maptalks.LineString]} lineStrings\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toLines(lineStrings, options, material) {\r\n        return new Lines(lineStrings, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} url\r\n     * @param {*} options\r\n     * @param {*} getMaterial\r\n     * @param {*} worker\r\n     */\r\n    toThreeVectorTileLayer(url, options, getMaterial) {\r\n        return new ThreeVectorTileLayer(url, options, getMaterial, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} extent\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toTerrain(extent, options, material) {\r\n        return new Terrain(extent, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} url\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toTerrainVectorTileLayer(url, options, material) {\r\n        return new TerrainVectorTileLayer(url, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} data\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toHeatMap(data, options, material) {\r\n        return new HeatMap(data, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} lineString\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toFatLine(lineString, options, material) {\r\n        return new FatLine(lineString, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} lineStrings\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toFatLines(lineStrings, options, material) {\r\n        return new FatLines(lineStrings, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} coorindate\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toBox(coorindate, options, material) {\r\n        return new Box(coorindate, options, material, this);\r\n    }\r\n    /**\r\n     *\r\n     * @param {*} points\r\n     * @param {*} options\r\n     * @param {*} material\r\n     */\r\n    toBoxs(points, options, material) {\r\n        return new Boxs(points, options, material, this);\r\n    }\r\n    getBaseObjects() {\r\n        return this.getMeshes().filter((mesh => {\r\n            return mesh instanceof BaseObject;\r\n        }));\r\n    }\r\n    getMeshes() {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return [];\r\n        }\r\n        const meshes = [];\r\n        for (let i = 0, len = scene.children.length; i < len; i++) {\r\n            const child = scene.children[i];\r\n            if (child instanceof THREE.Object3D && !(child instanceof THREE.Camera)) {\r\n                meshes.push(child['__parent'] || child);\r\n            }\r\n        }\r\n        return meshes;\r\n    }\r\n    clear() {\r\n        return this.clearMesh();\r\n    }\r\n    clearMesh() {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return this;\r\n        }\r\n        for (let i = scene.children.length - 1; i >= 0; i--) {\r\n            const child = scene.children[i];\r\n            if (child instanceof THREE.Object3D && !(child instanceof THREE.Camera)) {\r\n                scene.remove(child);\r\n                const parent = child['__parent'];\r\n                if (parent && parent instanceof BaseObject) {\r\n                    parent.isAdd = false;\r\n                    parent._fire('remove', { target: parent });\r\n                    delete this._animationBaseObjectMap[child.uuid];\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    lookAt(vector) {\r\n        const renderer = this._getRenderer();\r\n        if (renderer) {\r\n            renderer.context.lookAt(vector);\r\n        }\r\n        return this;\r\n    }\r\n    getCamera() {\r\n        const renderer = this._getRenderer();\r\n        if (renderer) {\r\n            return renderer.camera;\r\n        }\r\n        return null;\r\n    }\r\n    getScene() {\r\n        const renderer = this._getRenderer();\r\n        if (renderer) {\r\n            return renderer.scene;\r\n        }\r\n        return null;\r\n    }\r\n    renderScene(context, layer) {\r\n        const renderer = this._getRenderer();\r\n        if (renderer) {\r\n            renderer.clearCanvas();\r\n            renderer.renderScene(context);\r\n            //外部调用时，直接redraw\r\n            if (!layer) {\r\n                renderer.setToRedraw();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    loop(render = false) {\r\n        const delayMeshes = this._delayMeshes;\r\n        if (!delayMeshes.length) {\r\n            return;\r\n        }\r\n        const map = this.getMap();\r\n        if (!map || map.isAnimating() || map.isInteracting()) {\r\n            return;\r\n        }\r\n        const loopRenderCount = this.options.loopRenderCount || 50;\r\n        const meshes = delayMeshes.slice(0, loopRenderCount);\r\n        if (meshes) {\r\n            this.addMesh(meshes, render);\r\n        }\r\n        delayMeshes.splice(0, loopRenderCount);\r\n    }\r\n    renderPickScene() {\r\n        const renderer = this._getRenderer();\r\n        if (renderer) {\r\n            const pick = renderer.pick;\r\n            if (pick) {\r\n                pick.pick(this._containerPoint);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    getThreeRenderer() {\r\n        const renderer = this._getRenderer();\r\n        if (renderer) {\r\n            return renderer.context;\r\n        }\r\n        return null;\r\n    }\r\n    getPick() {\r\n        const renderer = this._getRenderer();\r\n        if (renderer) {\r\n            return renderer.pick;\r\n        }\r\n        return null;\r\n    }\r\n    delayAddMesh(meshes) {\r\n        if (!meshes)\r\n            return this;\r\n        if (!Array.isArray(meshes)) {\r\n            meshes = [meshes];\r\n        }\r\n        for (let i = 0, len = meshes.length; i < len; i++) {\r\n            this._delayMeshes.push(meshes[i]);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * add object3ds\r\n     * @param {BaseObject} meshes\r\n     */\r\n    addMesh(meshes, render = true) {\r\n        if (!meshes)\r\n            return this;\r\n        if (!Array.isArray(meshes)) {\r\n            meshes = [meshes];\r\n        }\r\n        const scene = this.getScene();\r\n        meshes.forEach(mesh => {\r\n            if (mesh instanceof BaseObject) {\r\n                scene.add(mesh.getObject3d());\r\n                if (!mesh.isAdd) {\r\n                    mesh.isAdd = true;\r\n                    mesh._fire('add', { target: mesh });\r\n                }\r\n                if (mesh._animation && maptalks.Util.isFunction(mesh._animation)) {\r\n                    this._animationBaseObjectMap[mesh.getObject3d().uuid] = mesh;\r\n                }\r\n            }\r\n            else if (mesh instanceof THREE.Object3D) {\r\n                scene.add(mesh);\r\n            }\r\n        });\r\n        this._zoomend();\r\n        if (render) {\r\n            const renderer = this._getRenderer();\r\n            if (renderer) {\r\n                renderer.setToRedraw();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * remove object3ds\r\n     * @param {BaseObject} meshes\r\n     */\r\n    removeMesh(meshes, render = true) {\r\n        if (!meshes)\r\n            return this;\r\n        if (!Array.isArray(meshes)) {\r\n            meshes = [meshes];\r\n        }\r\n        const scene = this.getScene();\r\n        meshes.forEach(mesh => {\r\n            if (mesh instanceof BaseObject) {\r\n                scene.remove(mesh.getObject3d());\r\n                if (mesh.isAdd) {\r\n                    mesh.isAdd = false;\r\n                    mesh._fire('remove', { target: mesh });\r\n                }\r\n                if (mesh._animation && maptalks.Util.isFunction(mesh._animation)) {\r\n                    delete this._animationBaseObjectMap[mesh.getObject3d().uuid];\r\n                }\r\n                const delayMeshes = this._delayMeshes;\r\n                if (delayMeshes.length) {\r\n                    for (let i = 0, len = delayMeshes.length; i < len; i++) {\r\n                        if (delayMeshes[i] === mesh) {\r\n                            delayMeshes.splice(i, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (mesh instanceof THREE.Object3D) {\r\n                scene.remove(mesh);\r\n            }\r\n        });\r\n        if (render) {\r\n            const renderer = this._getRenderer();\r\n            if (renderer) {\r\n                renderer.setToRedraw();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    _initRaycaster() {\r\n        if (!this._raycaster) {\r\n            this._raycaster = new THREE.Raycaster();\r\n            this._mouse = new THREE.Vector2();\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     *\r\n     * @param {Coordinate} coordinate\r\n     * @param {Object} options\r\n     * @return {Array}\r\n     */\r\n    identify(coordinate, options) {\r\n        if (!coordinate) {\r\n            console.error('coordinate is null,it should be Coordinate');\r\n            return [];\r\n        }\r\n        if (Array.isArray(coordinate)) {\r\n            coordinate = new maptalks.Coordinate(coordinate);\r\n        }\r\n        if (!(coordinate instanceof maptalks.Coordinate)) {\r\n            console.error('coordinate type is error,it should be Coordinate');\r\n            return [];\r\n        }\r\n        const p = this.getMap().coordToContainerPoint(coordinate);\r\n        this._containerPoint = p;\r\n        const { x, y } = p;\r\n        this._initRaycaster();\r\n        const raycaster = this._raycaster, mouse = this._mouse, camera = this.getCamera(), scene = this.getScene(), size = this.getMap().getSize();\r\n        //fix Errors will be reported when the layer is not initialized\r\n        if (!scene) {\r\n            return [];\r\n        }\r\n        const width = size.width, height = size.height;\r\n        mouse.x = (x / width) * 2 - 1;\r\n        mouse.y = -(y / height) * 2 + 1;\r\n        raycaster.setFromCamera(mouse, camera);\r\n        //set linePrecision for THREE.Line\r\n        setRaycasterLinePrecision(raycaster, this._getLinePrecision(this.getMap().getResolution()));\r\n        const children = [], hasidentifyChildren = [];\r\n        scene.children.forEach(mesh => {\r\n            const parent = mesh['__parent'];\r\n            if (parent && parent.getOptions) {\r\n                const baseObject = parent;\r\n                const interactive = baseObject.getOptions().interactive;\r\n                if (interactive && baseObject.isVisible()) {\r\n                    //If baseobject has its own hit detection\r\n                    if (baseObject.identify && maptalks.Util.isFunction(baseObject.identify)) {\r\n                        hasidentifyChildren.push(baseObject);\r\n                    }\r\n                    else {\r\n                        children.push(mesh);\r\n                    }\r\n                }\r\n            }\r\n            else if (mesh instanceof THREE.Mesh || mesh instanceof THREE.Group) {\r\n                children.push(mesh);\r\n            }\r\n        });\r\n        let baseObjects = [];\r\n        const intersects = raycaster.intersectObjects(children, true);\r\n        if (intersects && Array.isArray(intersects) && intersects.length) {\r\n            baseObjects = intersects.map(intersect => {\r\n                let object = intersect.object;\r\n                object = this._recursionMesh(object) || {};\r\n                const baseObject = object['__parent'] || object;\r\n                baseObject.faceIndex = intersect.faceIndex;\r\n                baseObject.index = intersect.index;\r\n                return baseObject;\r\n            });\r\n        }\r\n        this.renderPickScene();\r\n        if (hasidentifyChildren.length) {\r\n            hasidentifyChildren.forEach(baseObject => {\r\n                // baseObject identify\r\n                if (baseObject.identify(coordinate)) {\r\n                    baseObjects.push(baseObject);\r\n                }\r\n            });\r\n        }\r\n        const len = baseObjects.length;\r\n        for (let i = 0; i < len; i++) {\r\n            if (baseObjects[i]) {\r\n                for (let j = i + 1; j < len; j++) {\r\n                    if (baseObjects[i] === baseObjects[j]) {\r\n                        baseObjects.splice(j, 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        options = maptalks.Util.extend({}, options);\r\n        const count = options['count'];\r\n        return (maptalks.Util.isNumber(count) && count > 0 ? baseObjects.slice(0, count) : baseObjects);\r\n    }\r\n    /**\r\n    * Recursively finding the root node of mesh,Until it is scene node\r\n    * @param {*} mesh\r\n    */\r\n    _recursionMesh(mesh) {\r\n        while (mesh && ((mesh.parent !== this.getScene()))) {\r\n            mesh = mesh.parent;\r\n        }\r\n        return mesh;\r\n    }\r\n    //get Line Precision by Resolution\r\n    _getLinePrecision(res = 10) {\r\n        for (let i = 0, len = LINEPRECISIONS.length; i < len; i++) {\r\n            const [resLevel, precision] = LINEPRECISIONS[i];\r\n            if (res > resLevel) {\r\n                return precision;\r\n            }\r\n        }\r\n        return 0.01;\r\n    }\r\n    /**\r\n     * fire baseObject events\r\n     * @param {*} e\r\n     */\r\n    _identifyBaseObjectEvents(e) {\r\n        if (!this.options.geometryEvents) {\r\n            return this;\r\n        }\r\n        const map = this.map || this.getMap();\r\n        //When map interaction, do not carry out mouse movement detection, which can have better performance\r\n        if (map.isInteracting() || !map.options.geometryEvents) {\r\n            return this;\r\n        }\r\n        const { type, coordinate } = e;\r\n        const now = maptalks.Util.now();\r\n        if (this._mousemoveTimeOut && type === 'mousemove') {\r\n            if (now - this._mousemoveTimeOut < 64) {\r\n                return this;\r\n            }\r\n        }\r\n        this._mousemoveTimeOut = now;\r\n        // map.resetCursor('default');\r\n        const identifyCountOnEvent = this.options['identifyCountOnEvent'];\r\n        let count = Math.max(0, maptalks.Util.isNumber(identifyCountOnEvent) ? identifyCountOnEvent : 0);\r\n        if (count === 0) {\r\n            count = Infinity;\r\n        }\r\n        const baseObjects = this.identify(coordinate, { count });\r\n        const scene = this.getScene();\r\n        if (baseObjects.length === 0 && scene) {\r\n            for (let i = 0, len = scene.children.length; i < len; i++) {\r\n                const child = scene.children[i] || {};\r\n                const parent = child['__parent'];\r\n                if (parent) {\r\n                    parent.fire('empty', Object.assign({}, e, { target: parent }));\r\n                }\r\n            }\r\n        }\r\n        if (type === 'mousemove') {\r\n            // if (baseObjects.length) {\r\n            //     map.setCursor('pointer');\r\n            // }\r\n            // mouseout objects\r\n            const outBaseObjects = [];\r\n            if (this._baseObjects) {\r\n                this._baseObjects.forEach(baseObject => {\r\n                    let isOut = true;\r\n                    baseObjects.forEach(baseO => {\r\n                        if (baseObject === baseO) {\r\n                            isOut = false;\r\n                        }\r\n                    });\r\n                    if (isOut) {\r\n                        outBaseObjects.push(baseObject);\r\n                    }\r\n                });\r\n            }\r\n            outBaseObjects.forEach(baseObject => {\r\n                if (baseObject && baseObject instanceof BaseObject) {\r\n                    // reset _mouseover status\r\n                    // Deal with the mergedmesh\r\n                    if (baseObject.getSelectMesh) {\r\n                        if (!baseObject.isHide) {\r\n                            baseObject._mouseover = false;\r\n                            baseObject.fire('mouseout', Object.assign({}, e, { target: baseObject, type: 'mouseout', selectMesh: null }));\r\n                            baseObject.closeToolTip();\r\n                        }\r\n                    }\r\n                    else {\r\n                        baseObject._mouseover = false;\r\n                        baseObject.fire('mouseout', Object.assign({}, e, { target: baseObject, type: 'mouseout' }));\r\n                        baseObject.closeToolTip();\r\n                    }\r\n                }\r\n            });\r\n            baseObjects.forEach(baseObject => {\r\n                if (baseObject instanceof BaseObject) {\r\n                    if (!baseObject._mouseover) {\r\n                        baseObject.fire('mouseover', Object.assign({}, e, { target: baseObject, type: 'mouseover', selectMesh: (baseObject.getSelectMesh ? baseObject.getSelectMesh() : null) }));\r\n                        baseObject._mouseover = true;\r\n                    }\r\n                    baseObject.fire(type, Object.assign({}, e, { target: baseObject, selectMesh: (baseObject.getSelectMesh ? baseObject.getSelectMesh() : null) }));\r\n                    // tooltip\r\n                    const tooltip = baseObject.getToolTip();\r\n                    if (tooltip && (!tooltip._owner)) {\r\n                        tooltip.addTo(baseObject);\r\n                    }\r\n                    baseObject.openToolTip(coordinate);\r\n                }\r\n            });\r\n            this._baseObjects = baseObjects;\r\n        }\r\n        else {\r\n            baseObjects.forEach(baseObject => {\r\n                if (baseObject instanceof BaseObject) {\r\n                    baseObject.fire(type, Object.assign({}, e, { target: baseObject, selectMesh: (baseObject.getSelectMesh ? baseObject.getSelectMesh() : null) }));\r\n                    if (type === 'click') {\r\n                        const infoWindow = baseObject.getInfoWindow();\r\n                        if (infoWindow && (!infoWindow._owner)) {\r\n                            infoWindow.addTo(baseObject);\r\n                        }\r\n                        baseObject.openInfoWindow(coordinate);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     *map zoom event\r\n     */\r\n    _zoomend() {\r\n        const scene = this.getScene();\r\n        if (!scene) {\r\n            return;\r\n        }\r\n        const zoom = this.getMap().getZoom();\r\n        scene.children.forEach(mesh => {\r\n            const parent = mesh['__parent'];\r\n            if (parent && parent.getOptions) {\r\n                const baseObject = parent;\r\n                if (baseObject.zoomChange && maptalks.Util.isFunction(baseObject.zoomChange)) {\r\n                    baseObject.zoomChange(zoom);\r\n                }\r\n                const minZoom = baseObject.getMinZoom(), maxZoom = baseObject.getMaxZoom();\r\n                if (zoom < minZoom || zoom > maxZoom) {\r\n                    if (baseObject.isVisible()) {\r\n                        baseObject.getObject3d().visible = false;\r\n                    }\r\n                    baseObject._zoomVisible = false;\r\n                }\r\n                else if (minZoom <= zoom && zoom <= maxZoom) {\r\n                    if (baseObject._visible) {\r\n                        baseObject.getObject3d().visible = true;\r\n                    }\r\n                    baseObject._zoomVisible = true;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    onAdd() {\r\n        super.onAdd();\r\n        const map = this.map || this.getMap();\r\n        if (!map)\r\n            return this;\r\n        EVENTS.forEach(event => {\r\n            map.on(event, this._identifyBaseObjectEvents, this);\r\n        });\r\n        this._needsUpdate = true;\r\n        if (!this._animationBaseObjectMap) {\r\n            this._animationBaseObjectMap = {};\r\n        }\r\n        map.on('zooming zoomend', this._zoomend, this);\r\n        return this;\r\n    }\r\n    onRemove() {\r\n        super.onRemove();\r\n        const map = this.map || this.getMap();\r\n        if (!map)\r\n            return this;\r\n        EVENTS.forEach(event => {\r\n            map.off(event, this._identifyBaseObjectEvents, this);\r\n        });\r\n        map.off('zooming zoomend', this._zoomend, this);\r\n        return this;\r\n    }\r\n    _callbackBaseObjectAnimation() {\r\n        const layer = this;\r\n        if (layer._animationBaseObjectMap) {\r\n            for (const uuid in layer._animationBaseObjectMap) {\r\n                const baseObject = layer._animationBaseObjectMap[uuid];\r\n                baseObject._animation();\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * To make map's 2d point's 1 pixel euqal with 1 pixel on XY plane in THREE's scene:\r\n     * 1. fov is 90 and camera's z is height / 2 * scale,\r\n     * 2. if fov is not 90, a ratio is caculated to transfer z to the equivalent when fov is 90\r\n     * @return {Number} fov ratio on z axis\r\n     */\r\n    _getFovRatio() {\r\n        const map = this.getMap();\r\n        const fov = map.getFov();\r\n        return Math.tan(fov / 2 * RADIAN);\r\n    }\r\n}\r\nThreeLayer.mergeOptions(options);\r\nclass ThreeRenderer extends maptalks.renderer.CanvasLayerRenderer {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._renderTime = 0;\r\n        this._renderTarget = null;\r\n    }\r\n    getPrepareParams() {\r\n        return [this.scene, this.camera];\r\n    }\r\n    getDrawParams() {\r\n        return [this.scene, this.camera];\r\n    }\r\n    _drawLayer() {\r\n        super._drawLayer.apply(this, arguments);\r\n        // this.renderScene();\r\n    }\r\n    hitDetect() {\r\n        return false;\r\n    }\r\n    createCanvas() {\r\n        super.createCanvas();\r\n        this.createContext();\r\n    }\r\n    createContext() {\r\n        if (this.canvas.gl && this.canvas.gl.wrap) {\r\n            this.gl = this.canvas.gl.wrap();\r\n        }\r\n        else {\r\n            const layer = this.layer;\r\n            const attributes = layer.options.glOptions || {\r\n                alpha: true,\r\n                depth: true,\r\n                antialias: true,\r\n                stencil: true,\r\n                preserveDrawingBuffer: false\r\n            };\r\n            attributes.preserveDrawingBuffer = true;\r\n            this.gl = this.gl || this._createGLContext(this.canvas, attributes);\r\n        }\r\n        this._initThreeRenderer();\r\n        this.layer.onCanvasCreate(this.context, this.scene, this.camera);\r\n    }\r\n    _initThreeRenderer() {\r\n        this.matrix4 = new THREE.Matrix4();\r\n        const renderer = new THREE.WebGLRenderer({ 'context': this.gl, alpha: true });\r\n        renderer.autoClear = false;\r\n        renderer.setClearColor(new THREE.Color(1, 1, 1), 0);\r\n        renderer.setSize(this.canvas.width, this.canvas.height);\r\n        renderer.clear();\r\n        // renderer.canvas = this.canvas;\r\n        this.context = renderer;\r\n        const scene = this.scene = new THREE.Scene();\r\n        const map = this.layer.getMap();\r\n        const fov = map.getFov() * Math.PI / 180;\r\n        const camera = this.camera = new THREE.PerspectiveCamera(fov, map.width / map.height, map.cameraNear, map.cameraFar);\r\n        camera.matrixAutoUpdate = false;\r\n        this._syncCamera();\r\n        scene.add(camera);\r\n        this.pick = new GPUPick(this.layer);\r\n        BaseObjectTaskManager.star();\r\n    }\r\n    onCanvasCreate() {\r\n        super.onCanvasCreate();\r\n    }\r\n    resizeCanvas(canvasSize) {\r\n        if (!this.canvas) {\r\n            return;\r\n        }\r\n        let size, map = this.getMap();\r\n        if (!canvasSize) {\r\n            size = map.getSize();\r\n        }\r\n        else {\r\n            size = canvasSize;\r\n        }\r\n        // const r = maptalks.Browser.retina ? 2 : 1;\r\n        const r = map.getDevicePixelRatio ? map.getDevicePixelRatio() : (maptalks.Browser.retina ? 2 : 1);\r\n        const canvas = this.canvas;\r\n        //retina support\r\n        canvas.height = r * size['height'];\r\n        canvas.width = r * size['width'];\r\n        if (this.layer._canvas && canvas.style) {\r\n            canvas.style.width = size.width + 'px';\r\n            canvas.style.height = size.height + 'px';\r\n        }\r\n        this.context.setSize(canvas.width, canvas.height);\r\n    }\r\n    clearCanvas() {\r\n        if (!this.canvas) {\r\n            return;\r\n        }\r\n        this.context.clear();\r\n    }\r\n    prepareCanvas() {\r\n        if (!this.canvas) {\r\n            this.createCanvas();\r\n        }\r\n        else {\r\n            this.clearCanvas();\r\n        }\r\n        this.layer.fire('renderstart', { 'context': this.context });\r\n        return null;\r\n    }\r\n    renderScene(context) {\r\n        const time = maptalks.Util.now();\r\n        // Make sure to execute only once in a frame\r\n        if (time - this._renderTime >= 16) {\r\n            this.layer._callbackBaseObjectAnimation();\r\n            this._renderTime = time;\r\n        }\r\n        this._syncCamera();\r\n        // 把 WebglRenderTarget 中的 framebuffer 替换为 GroupGLLayer 中的 fbo\r\n        // 参考: https://stackoverflow.com/questions/55082573/use-webgl-texture-as-a-three-js-texture-map\r\n        // 实现有点 hacky，需要留意 three 版本变动 对它的影响\r\n        if (context && context.renderTarget) {\r\n            const { width, height } = context.renderTarget.fbo;\r\n            if (!this._renderTarget) {\r\n                this._renderTarget = new THREE.WebGLRenderTarget(width, height, {\r\n                    // depthTexture: new THREE.DepthTexture(width, height, THREE.UnsignedInt248Type)\r\n                    depthBuffer: false\r\n                });\r\n                // 绘制一次以后，才会生成 framebuffer 对象\r\n                this.context.setRenderTarget(this._renderTarget);\r\n                this.context.render(this.scene, this.camera);\r\n            }\r\n            else {\r\n                // 这里不能setSize，因为setSize中会把原有的fbo dipose掉\r\n                // this._renderTarget.setSize(width, height);\r\n                this._renderTarget.viewport.set(0, 0, width, height);\r\n                this._renderTarget.scissor.set(0, 0, width, height);\r\n            }\r\n            const renderTargetProps = this.context.properties.get(this._renderTarget);\r\n            const threeCreatedFBO = renderTargetProps[KEY_FBO];\r\n            // 用GroupGLLayer的webgl fbo对象替换WebglRenderTarget的fbo对象\r\n            renderTargetProps[KEY_FBO] = context.renderTarget.getFramebuffer(context.renderTarget.fbo);\r\n            this.context.setRenderTarget(this._renderTarget);\r\n            this.context.render(this.scene, this.camera);\r\n            renderTargetProps[KEY_FBO] = threeCreatedFBO;\r\n        }\r\n        else {\r\n            this.context.render(this.scene, this.camera);\r\n        }\r\n        this.context.setRenderTarget(null);\r\n        this.completeRender();\r\n    }\r\n    remove() {\r\n        delete this._drawContext;\r\n        if (this._renderTarget) {\r\n            this._renderTarget.dispose();\r\n            delete this._renderTarget;\r\n        }\r\n        super.remove();\r\n    }\r\n    _syncCamera() {\r\n        const map = this.getMap();\r\n        const camera = this.camera;\r\n        camera.matrix.elements = map.cameraWorldMatrix;\r\n        camera.projectionMatrix.elements = map.projMatrix;\r\n        //https://github.com/mrdoob/three.js/commit/d52afdd2ceafd690ac9e20917d0c968ff2fa7661\r\n        if (this.matrix4.invert) {\r\n            camera.projectionMatrixInverse.elements = this.matrix4.copy(camera.projectionMatrix).invert().elements;\r\n        }\r\n        else {\r\n            camera.projectionMatrixInverse.elements = this.matrix4.getInverse(camera.projectionMatrix).elements;\r\n        }\r\n    }\r\n    _createGLContext(canvas, options) {\r\n        const names = ['webgl2', 'webgl', 'experimental-webgl'];\r\n        let context = null;\r\n        /* eslint-disable no-empty */\r\n        for (let i = 0; i < names.length; ++i) {\r\n            try {\r\n                context = canvas.getContext(names[i], options);\r\n            }\r\n            catch (e) { }\r\n            if (context) {\r\n                break;\r\n            }\r\n        }\r\n        return context;\r\n        /* eslint-enable no-empty */\r\n    }\r\n}\r\nThreeLayer.registerRenderer('gl', ThreeRenderer);\r\nfunction getGLRes(map) {\r\n    return map.getGLRes ? map.getGLRes() : map.getGLZoom();\r\n}\r\nfunction coordinateToPoint(map, coordinate, res, out) {\r\n    if (map.coordToPointAtRes) {\r\n        return map.coordToPointAtRes(coordinate, res, out);\r\n    }\r\n    return map.coordinateToPoint(coordinate, res, out);\r\n}\r\nexport { ThreeLayer, ThreeRenderer, BaseObject, MergedMixin, GeoJSONUtil, MergeGeometryUtil, GeoUtil, ExtrudeUtil, LineUtil, IdentifyUtil, geometryExtrude, LineMaterial, getFetchDataActor };\r\nif (maptalks.registerWorkerAdapter) {\r\n    maptalks.registerWorkerAdapter(getWorkerName(), getWorkerCode());\r\n    maptalks.registerWorkerAdapter(fetchDataWorkerKey, fetchDataWorkerCode);\r\n}\r\n//# sourceMappingURL=index.js.map","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n","import {\r\n    AdditiveBlending,\r\n    Color,\r\n    LinearFilter,\r\n    MeshBasicMaterial,\r\n    RGBAFormat,\r\n    ShaderMaterial,\r\n    UniformsUtils,\r\n    Vector2,\r\n    Vector3,\r\n    WebGLRenderTarget\r\n} from \"three\";\r\nimport { Pass, FullScreenQuad} from \"three/examples/jsm/postprocessing/Pass.js\";\r\nimport { CopyShader } from \"three/examples/jsm/shaders/CopyShader.js\";\r\nimport { LuminosityHighPassShader } from \"three/examples/jsm/shaders/LuminosityHighPassShader.js\";\r\n\r\nclass UnrealBloomPass extends Pass {\r\n\r\n\tconstructor( resolution, strength, radius, threshold ) {\r\n\r\n\t\tsuper();\r\n\r\n\t\tthis.strength = ( strength !== undefined ) ? strength : 1;\r\n\t\tthis.radius = radius;\r\n\t\tthis.threshold = threshold;\r\n\t\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\r\n\r\n\t\t// create color only once here, reuse it later inside the render function\r\n\t\tthis.clearColor = new Color( 0, 0, 0 );\r\n\r\n\t\t// render targets\r\n\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\r\n\t\tthis.renderTargetsHorizontal = [];\r\n\t\tthis.renderTargetsVertical = [];\r\n\t\tthis.nMips = 5;\r\n\t\tlet resx = Math.round( this.resolution.x / 2 );\r\n\t\tlet resy = Math.round( this.resolution.y / 2 );\r\n\r\n\t\tthis.renderTargetBright = new WebGLRenderTarget( resx, resy, pars );\r\n\t\tthis.renderTargetBright.texture.name = 'UnrealBloomPass.bright';\r\n\t\tthis.renderTargetBright.texture.generateMipmaps = false;\r\n\r\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\r\n\r\n\t\t\tconst renderTargetHorizonal = new WebGLRenderTarget( resx, resy, pars );\r\n\r\n\t\t\trenderTargetHorizonal.texture.name = 'UnrealBloomPass.h' + i;\r\n\t\t\trenderTargetHorizonal.texture.generateMipmaps = false;\r\n\r\n\t\t\tthis.renderTargetsHorizontal.push( renderTargetHorizonal );\r\n\r\n\t\t\tconst renderTargetVertical = new WebGLRenderTarget( resx, resy, pars );\r\n\r\n\t\t\trenderTargetVertical.texture.name = 'UnrealBloomPass.v' + i;\r\n\t\t\trenderTargetVertical.texture.generateMipmaps = false;\r\n\r\n\t\t\tthis.renderTargetsVertical.push( renderTargetVertical );\r\n\r\n\t\t\tresx = Math.round( resx / 2 );\r\n\r\n\t\t\tresy = Math.round( resy / 2 );\r\n\r\n\t\t}\r\n\r\n\t\t// luminosity high pass material\r\n\r\n\t\tif ( LuminosityHighPassShader === undefined )\r\n\t\t\tconsole.error( 'THREE.UnrealBloomPass relies on LuminosityHighPassShader' );\r\n\r\n\t\tconst highPassShader = LuminosityHighPassShader;\r\n\t\tthis.highPassUniforms = UniformsUtils.clone( highPassShader.uniforms );\r\n\r\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = threshold;\r\n\t\tthis.highPassUniforms[ 'smoothWidth' ].value = 0.01;\r\n\r\n\t\tthis.materialHighPassFilter = new ShaderMaterial( {\r\n\t\t\tuniforms: this.highPassUniforms,\r\n\t\t\tvertexShader: highPassShader.vertexShader,\r\n\t\t\tfragmentShader: highPassShader.fragmentShader,\r\n\t\t\tdefines: {}\r\n\t\t} );\r\n\r\n\t\t// Gaussian Blur Materials\r\n\t\tthis.separableBlurMaterials = [];\r\n\t\tconst kernelSizeArray = [ 3, 5, 7, 9, 11 ];\r\n\t\tresx = Math.round( this.resolution.x / 2 );\r\n\t\tresy = Math.round( this.resolution.y / 2 );\r\n\r\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\r\n\r\n\t\t\tthis.separableBlurMaterials.push( this.getSeperableBlurMaterial( kernelSizeArray[ i ] ) );\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'texSize' ].value = new Vector2( resx, resy );\r\n\r\n\t\t\tresx = Math.round( resx / 2 );\r\n\r\n\t\t\tresy = Math.round( resy / 2 );\r\n\r\n\t\t}\r\n\r\n\t\t// Composite material\r\n\t\tthis.compositeMaterial = this.getCompositeMaterial( this.nMips );\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture1' ].value = this.renderTargetsVertical[ 0 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture2' ].value = this.renderTargetsVertical[ 1 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture3' ].value = this.renderTargetsVertical[ 2 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture4' ].value = this.renderTargetsVertical[ 3 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'blurTexture5' ].value = this.renderTargetsVertical[ 4 ].texture;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = strength;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = 0.1;\r\n\t\tthis.compositeMaterial.needsUpdate = true;\r\n\r\n\t\tconst bloomFactors = [ 1.0, 0.8, 0.6, 0.4, 0.2 ];\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomFactors' ].value = bloomFactors;\r\n\t\tthis.bloomTintColors = [ new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ) ];\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\r\n\r\n\t\t// copy material\r\n\t\tif ( CopyShader === undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.UnrealBloomPass relies on CopyShader' );\r\n\r\n\t\t}\r\n\r\n\t\tconst copyShader = CopyShader;\r\n\r\n\t\tthis.copyUniforms = UniformsUtils.clone( copyShader.uniforms );\r\n\t\tthis.copyUniforms[ 'opacity' ].value = 1.0;\r\n\r\n\t\tthis.materialCopy = new ShaderMaterial( {\r\n\t\t\tuniforms: this.copyUniforms,\r\n\t\t\tvertexShader: copyShader.vertexShader,\r\n\t\t\tfragmentShader: copyShader.fragmentShader,\r\n\t\t\tblending: AdditiveBlending,\r\n\t\t\tdepthTest: false,\r\n\t\t\tdepthWrite: false,\r\n\t\t\ttransparent: true\r\n\t\t} );\r\n\r\n\t\tthis.enabled = true;\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\tthis._oldClearColor = new Color();\r\n\t\tthis.oldClearAlpha = 1;\r\n\r\n\t\tthis.basic = new MeshBasicMaterial();\r\n\r\n\t\tthis.fsQuad = new FullScreenQuad( null );\r\n\r\n\t}\r\n\r\n\tdispose() {\r\n\r\n\t\tfor ( let i = 0; i < this.renderTargetsHorizontal.length; i ++ ) {\r\n\r\n\t\t\tthis.renderTargetsHorizontal[ i ].dispose();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < this.renderTargetsVertical.length; i ++ ) {\r\n\r\n\t\t\tthis.renderTargetsVertical[ i ].dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.renderTargetBright.dispose();\r\n\r\n\t}\r\n\r\n\tsetSize( width, height ) {\r\n\r\n\t\tlet resx = Math.round( width / 2 );\r\n\t\tlet resy = Math.round( height / 2 );\r\n\r\n\t\tthis.renderTargetBright.setSize( resx, resy );\r\n\r\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\r\n\r\n\t\t\tthis.renderTargetsHorizontal[ i ].setSize( resx, resy );\r\n\t\t\tthis.renderTargetsVertical[ i ].setSize( resx, resy );\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'texSize' ].value = new Vector2( resx, resy );\r\n\r\n\t\t\tresx = Math.round( resx / 2 );\r\n\t\t\tresy = Math.round( resy / 2 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\trender( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\r\n\r\n\t\trenderer.getClearColor( this._oldClearColor );\r\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\r\n\t\tconst oldAutoClear = renderer.autoClear;\r\n\t\trenderer.autoClear = false;\r\n\r\n\t\trenderer.setClearColor( this.clearColor, 0 );\r\n\r\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\r\n\r\n\t\t// Render input to screen\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\tthis.fsQuad.material = this.basic;\r\n\t\t\tthis.basic.map = readBuffer.texture;\r\n\r\n\t\t\trenderer.setRenderTarget( null );\r\n\t\t\trenderer.clear();\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t}\r\n\r\n\t\t// 1. Extract Bright Areas\r\n\r\n\t\tthis.highPassUniforms[ 'tDiffuse' ].value = readBuffer.texture;\r\n\t\tthis.highPassUniforms[ 'luminosityThreshold' ].value = this.threshold;\r\n\t\tthis.fsQuad.material = this.materialHighPassFilter;\r\n\r\n\t\trenderer.setRenderTarget( this.renderTargetBright );\r\n\t\trenderer.clear();\r\n\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t// 2. Blur All the mips progressively\r\n\r\n\t\tlet inputRenderTarget = this.renderTargetBright;\r\n\r\n\t\tfor ( let i = 0; i < this.nMips; i ++ ) {\r\n\r\n\t\t\tthis.fsQuad.material = this.separableBlurMaterials[ i ];\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = inputRenderTarget.texture;\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionX;\r\n\t\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ i ] );\r\n\t\t\trenderer.clear();\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'colorTexture' ].value = this.renderTargetsHorizontal[ i ].texture;\r\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ 'direction' ].value = UnrealBloomPass.BlurDirectionY;\r\n\t\t\trenderer.setRenderTarget( this.renderTargetsVertical[ i ] );\r\n\t\t\trenderer.clear();\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t\tinputRenderTarget = this.renderTargetsVertical[ i ];\r\n\r\n\t\t}\r\n\r\n\t\t// Composite All the mips\r\n\r\n\t\tthis.fsQuad.material = this.compositeMaterial;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomStrength' ].value = this.strength;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomRadius' ].value = this.radius;\r\n\t\tthis.compositeMaterial.uniforms[ 'bloomTintColors' ].value = this.bloomTintColors;\r\n\r\n\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ 0 ] );\r\n\t\trenderer.clear();\r\n\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t// Blend it additively over the input texture\r\n\r\n\t\tthis.fsQuad.material = this.materialCopy;\r\n\t\tthis.copyUniforms[ 'tDiffuse' ].value = this.renderTargetsHorizontal[ 0 ].texture;\r\n\r\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\r\n\r\n\t\tif ( this.renderToScreen ) {\r\n\r\n\t\t\trenderer.setRenderTarget( null );\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.setRenderTarget( readBuffer );\r\n\t\t\tthis.fsQuad.render( renderer );\r\n\r\n\t\t}\r\n\r\n\t\t// Restore renderer settings\r\n\r\n\t\trenderer.setClearColor( this._oldClearColor, this.oldClearAlpha );\r\n\t\trenderer.autoClear = oldAutoClear;\r\n\r\n\t}\r\n\r\n\tgetSeperableBlurMaterial( kernelRadius ) {\r\n\r\n\t\treturn new ShaderMaterial( {\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\t'KERNEL_RADIUS': kernelRadius,\r\n\t\t\t\t'SIGMA': kernelRadius\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\t'colorTexture': { value: null },\r\n\t\t\t\t'texSize': { value: new Vector2( 0.5, 0.5 ) },\r\n\t\t\t\t'direction': { value: new Vector2( 0.5, 0.5 ) }\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader:\r\n\t\t\t\t`varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader:\r\n\t\t\t\t`#include <common>\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tuniform sampler2D colorTexture;\r\n\t\t\t\tuniform vec2 texSize;\r\n\t\t\t\tuniform vec2 direction;\r\n\r\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\r\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\r\n\t\t\t\t}\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\r\n\t\t\t\t\tfloat fSigma = float(SIGMA);\r\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\r\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\r\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\r\n\t\t\t\t\t\tfloat x = float(i);\r\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\r\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\r\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\r\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\r\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\r\n\t\t\t\t\t\tweightSum += 2.0 * w;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 0.25);\r\n\t\t\t\t}`\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tgetCompositeMaterial( nMips ) {\r\n\r\n\t\treturn new ShaderMaterial( {\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\t'NUM_MIPS': nMips\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\t'blurTexture1': { value: null },\r\n\t\t\t\t'blurTexture2': { value: null },\r\n\t\t\t\t'blurTexture3': { value: null },\r\n\t\t\t\t'blurTexture4': { value: null },\r\n\t\t\t\t'blurTexture5': { value: null },\r\n\t\t\t\t'dirtTexture': { value: null },\r\n\t\t\t\t'bloomStrength': { value: 1.0 },\r\n\t\t\t\t'bloomFactors': { value: null },\r\n\t\t\t\t'bloomTintColors': { value: null },\r\n\t\t\t\t'bloomRadius': { value: 0.0 }\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader:\r\n\t\t\t\t`varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n\r\n\t\t\tfragmentShader:\r\n\t\t\t\t`varying vec2 vUv;\r\n\t\t\t\tuniform sampler2D blurTexture1;\r\n\t\t\t\tuniform sampler2D blurTexture2;\r\n\t\t\t\tuniform sampler2D blurTexture3;\r\n\t\t\t\tuniform sampler2D blurTexture4;\r\n\t\t\t\tuniform sampler2D blurTexture5;\r\n\t\t\t\tuniform sampler2D dirtTexture;\r\n\t\t\t\tuniform float bloomStrength;\r\n\t\t\t\tuniform float bloomRadius;\r\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\r\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\r\n\r\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\r\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\r\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 0.25) * texture2D(blurTexture1, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 0.25) * texture2D(blurTexture2, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 0.25) * texture2D(blurTexture3, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 0.25) * texture2D(blurTexture4, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 0.25) * texture2D(blurTexture5, vUv) );\r\n\t\t\t\t}`\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\nUnrealBloomPass.BlurDirectionX = new Vector2( 1.0, 0.0 );\r\nUnrealBloomPass.BlurDirectionY = new Vector2( 0.0, 1.0 );\r\n\r\nexport { UnrealBloomPass };\r\n","var path = require('../internals/path');\nvar hasOwn = require('../internals/has-own-property');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!hasOwn(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar fails = require('../internals/fails');\nvar hasOwn = require('../internals/has-own-property');\nvar isArray = require('../internals/is-array');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isSymbol = require('../internals/is-symbol');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar $toString = require('../internals/to-string');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar arraySlice = require('../internals/array-slice');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\n\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar SymbolPrototype = $Symbol && $Symbol[PROTOTYPE];\nvar TypeError = global.TypeError;\nvar QObject = global.QObject;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar push = uncurryThis([].push);\n\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\n\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate(SymbolPrototype);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPropertyKey(P);\n  anObject(Attributes);\n  if (hasOwn(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!hasOwn(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (hasOwn(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || call($propertyIsEnumerable, properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPropertyKey(V);\n  var enumerable = call(nativePropertyIsEnumerable, this, P);\n  if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P]\n    ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPropertyKey(P);\n  if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key)) push(result, key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {\n      push(result, AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.es/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (isPrototypeOf(SymbolPrototype, this)) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) call(setter, ObjectPrototypeSymbols, value);\n      if (hasOwn(this, HIDDEN) && hasOwn(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  SymbolPrototype = $Symbol[PROTOTYPE];\n\n  redefine(SymbolPrototype, 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  definePropertiesModule.f = $defineProperties;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty(SymbolPrototype, 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.es/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = $toString(key);\n    if (hasOwn(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.es/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (hasOwn(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.es/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = arraySlice(arguments);\n      var $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (isCallable($replacer)) value = call($replacer, this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return apply($stringify, null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!SymbolPrototype[TO_PRIMITIVE]) {\n  var valueOf = SymbolPrototype.valueOf;\n  // eslint-disable-next-line no-unused-vars -- required for .length\n  redefine(SymbolPrototype, TO_PRIMITIVE, function (hint) {\n    // TODO: improve hint logic\n    return call(valueOf, this);\n  });\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","import {\n\tColor\n} from 'three';\n\n/**\n * Luminosity\n * http://en.wikipedia.org/wiki/Luminosity\n */\n\nconst LuminosityHighPassShader = {\n\n\tshaderID: 'luminosityHighPass',\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'luminosityThreshold': { value: 1.0 },\n\t\t'smoothWidth': { value: 1.0 },\n\t\t'defaultColor': { value: new Color( 0x000000 ) },\n\t\t'defaultOpacity': { value: 0.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}`\n\n};\n\nexport { LuminosityHighPassShader };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('div',{ref:\"views\",attrs:{\"id\":\"home-view\"}}),_c('div',{staticClass:\"back\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"返 回\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"home\">\r\n    <div id=\"home-view\" ref=\"views\"></div>\r\n    <div class=\"back\">\r\n        <el-button @click=\"$router.go(-1)\" type=\"primary\" size=\"small\">返 回</el-button>\r\n    </div>\r\n    <!-- <ul class=\"road-line\">\r\n      <li v-for=\"(val, i) in roadLine\" :key=\"i\" @click=\"bySubway(val)\">{{val.name}}</li>\r\n    </ul> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from 'three'\r\nimport * as maptalks from 'maptalks'\r\nimport 'maptalks/dist/maptalks.css'\r\nimport { ThreeLayer } from 'maptalks.three'\r\nimport { CSS3DRenderer, CSS3DObject } from 'three/examples/jsm/renderers/CSS3DRenderer.js'\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer' \r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass' \r\nimport { SMAAPass } from 'three/examples/jsm/postprocessing/SMAAPass' \r\nimport { SMAAEdgesShader, SMAAWeightsShader, SMAABlendShader } from 'three/examples/jsm/shaders/SMAAShader' \r\nimport { UnrealBloomPass } from '@/utils/UnrealBloomPass' \r\nimport TWEEN from 'tween'\r\nimport Effect from '@/utils/effect.js'\r\nconst vertexShader = `\r\n    varying vec3 vPosition;\r\n    varying vec2 vUv;\r\n    void main() { \r\n        vUv = uv; \r\n        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\r\n        gl_Position = projectionMatrix * mvPosition;\r\n        vPosition = position;\r\n    }\r\n`;\r\nlet map, threeLayer;\r\nlet render1, clock = new THREE.Clock();\r\nvar effectList = [];\r\nexport default {\r\n  data() {\r\n    return {\r\n      ruleForm: {},\r\n      views: null,\r\n      animateId: null,\r\n      roadLine: [],\r\n      lineList: [\r\n        {start: {x: 112.97743006478095, y: 28.18176594058977}, end: {x: 112.95704952246206, y: 28.199260443145675}},\r\n        {start: {x: 112.95704952246206, y: 28.199260443145675}, end: {x: 112.95704952246206, y: 28.199260443145675}},\r\n        {start: {x: 112.98676346381774, y: 28.198138248548986}, end: {x: 112.95704952246206, y: 28.199260443145675}},\r\n        {start: {x: 112.97080458036419, y: 28.193877847579728}, end: {x: 112.95704952246206, y: 28.199260443145675}},\r\n        {start: {x: 112.92659619609526, y: 28.189800731714655}, end: {x: 112.95704952246206, y: 28.199260443145675}},\r\n        {start: {x: 112.89778440871657, y: 28.165823912185743}, end: {x: 112.95704952246206, y: 28.199260443145675}},\r\n        {start: {x: 112.97528077816185, y: 28.23863326663448}, end: {x: 112.95704952246206, y: 28.199260443145675}},\r\n        {start: {x: 112.9631741820981, y: 28.168197563829466}, end: {x: 112.95704952246206, y: 28.199260443145675}}\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    createGeometry({geometry, position,rotation, effect, color, color1, wireframe}) {\r\n        position = threeLayer.coordinateToVector3(position) || new THREE.Vector3(0,0,0)\r\n        rotation = rotation || new THREE.Vector3(-Math.PI/2,0,0)\r\n        let material = null\r\n        if(!!effect) {\r\n          material = new THREE.ShaderMaterial({\r\n                uniforms: {\r\n                    iTime: {\r\n                        value: 0\r\n                    },\r\n                    time: {\r\n                      value: 0\r\n                    },\r\n                    color: { value: color || new THREE.Color(0xff0000) },\r\n                    color1: { value: color1 || new THREE.Color(0x00ffff) },\r\n                    iResolution: {\r\n                        value: new THREE.Vector2(800, 800)\r\n                    },\r\n                    map: {\r\n                      value: new THREE.ImageUtils.loadTexture('./images/smokeparticle.png')\r\n                    }\r\n                },\r\n                side: 2,\r\n                depthWrite: true,\r\n                transparent: true,\r\n                depthTest: false,\r\n                wireframe: wireframe || false,\r\n                blending: THREE.AdditiveBlending,\r\n                vertexShader: vertexShader,\r\n                fragmentShader: effect()\r\n          })\r\n        }else{\r\n           position.z = 5\r\n           material = new THREE.MeshBasicMaterial({\r\n                color: color || new THREE.Color(0x00ffff),\r\n                side: 2,\r\n                transparent: true,\r\n                depthTest: false,\r\n                wireframe: wireframe || false,\r\n                blending: THREE.AdditiveBlending,\r\n          })\r\n        }\r\n        let mesh = new THREE.Mesh(geometry, material);\r\n        mesh.position.copy(position);\r\n        mesh.rotation.set(rotation.x, rotation.y, rotation.z)\r\n        threeLayer.addMesh(mesh)\r\n        return mesh\r\n    },\r\n    createEffect() {\r\n      const circle1 = this.createGeometry({\r\n        geometry: new THREE.CircleGeometry(10, 32, 32),\r\n        effect: Effect.effect44,\r\n        color: new THREE.Color(0xff0000),\r\n        position: {x: 112.97743006478095, y: 28.18176594058977},\r\n        rotation: {x: 0, y: 0, z: 0 }\r\n      })\r\n\r\n      const circle2 = this.createGeometry({\r\n        geometry: new THREE.CircleGeometry(10, 32, 32),\r\n        effect: Effect.effect35,\r\n        color: new THREE.Color(0xff00ff),\r\n        position: {x: 112.95704952246206, y: 28.199260443145675},\r\n        rotation: {x: 0, y: 0, z: 0 },\r\n        wireframe: false\r\n      })\r\n\r\n      const circle3 = this.createGeometry({\r\n        geometry: new THREE.CircleGeometry(10, 32, 32),\r\n        effect: Effect.effect1,\r\n        color: new THREE.Color(0xff00ff),\r\n        position: { x: 112.97080458036419, y: 28.193877847579728 },\r\n        rotation: {x: 0, y: 0, z: 0 },\r\n        wireframe: false\r\n      })\r\n\r\n      const sphere = this.createGeometry({\r\n        geometry: new THREE.SphereGeometry(10, 32, 32, 0, Math.PI*2, 0, Math.PI/2),\r\n        effect: Effect.effect39,\r\n        color: new THREE.Color(0x00ffff),\r\n        position: {x: 112.98676346381774, y: 28.198138248548986},\r\n        rotation: {x: Math.PI/2, y: 0, z: 0 }\r\n      })\r\n      \r\n      const Cylinder = this.createGeometry({\r\n        geometry: new THREE.CylinderBufferGeometry( 10, 10, 5, 32 , 32, true),\r\n        effect: Effect.effect42,\r\n        color: new THREE.Color(0xffff00),\r\n        position: {x: 112.92659619609526, y: 28.189800731714655},\r\n        rotation: {x: Math.PI/2, y: 0, z: 0 }\r\n      })\r\n      effectList = [circle1,circle2,circle3,sphere,Cylinder]\r\n      let tweenA = new TWEEN.Tween(Cylinder.scale).to({x: 2, y: 1, z: 2}, 2000)\r\n      tweenA.start()\r\n      tweenA.onComplete(() => {\r\n        Cylinder.scale.set(0.1, 0.1, 0.1)\r\n        tweenA.start()\r\n      })\r\n    },\r\n    createPointGeo() {\r\n        const geometryList = [\r\n          { \r\n            geometry: new THREE.ConeGeometry( 2, 4, 4, 1, true),\r\n            color: new THREE.Color(0xffff00),\r\n            coordinate: {x: 112.97743006478095, y: 28.18176594058977},\r\n            time: 1000,\r\n            text: '侯家塘'\r\n          },\r\n          { \r\n            geometry: new THREE.ConeGeometry( 2, 4, 4, 1, true),\r\n            color: new THREE.Color(0xff0000),\r\n            coordinate: {x: 112.95704952246206, y: 28.199260443145675},\r\n            time: 1500,\r\n            text: '橘子洲'\r\n          },\r\n          { \r\n            geometry: new THREE.ConeGeometry( 2, 4, 4, 1, true),\r\n            color: new THREE.Color(0xff00ff),\r\n            coordinate: {x: 112.98676346381774, y: 28.198138248548986},\r\n            time: 1200,\r\n            text: '五一广场'\r\n          },\r\n          { \r\n            geometry: new THREE.ConeGeometry( 2, 4, 4, 1, true),\r\n            color: new THREE.Color(0xddff00),\r\n            coordinate: {x: 112.97080458036419, y: 28.193877847579728},\r\n            time: 1000,\r\n            text: '黄兴广场'\r\n          },\r\n          { \r\n            geometry: new THREE.ConeGeometry( 2, 4, 4, 1, true),\r\n            color: new THREE.Color(0x00ff00),\r\n            coordinate: {x: 112.92659619609526, y: 28.189800731714655},\r\n            time: 800,\r\n            text: '岳麓山'\r\n          }\r\n        ]\r\n        geometryList.forEach(item => {\r\n          const { geometry, color, coordinate, time, wireframe, rotation, text} = item\r\n          // 八面体\r\n          const eightGeo = this.createGeometry({\r\n            geometry,\r\n            color,\r\n            position: coordinate,\r\n            wireframe,\r\n            rotation\r\n          })\r\n          this.createText(text, coordinate)\r\n          let T1 = new TWEEN.Tween(eightGeo.position).to({ z: 6 }, time)\r\n          let T2 = new TWEEN.Tween(eightGeo.position).to({ z: 5 }, time)\r\n          T1.start()\r\n          T1.chain(T2)\r\n          T2.chain(T1)\r\n          \r\n          let T3 = new TWEEN.Tween(eightGeo.rotation).to({ y: Math.PI*2 }, time*5)\r\n          let T4 = new TWEEN.Tween(eightGeo.rotation).to({ y: 0 }, time*5)\r\n          T3.start()\r\n          T3.chain(T4)\r\n          T4.chain(T3)\r\n        })\r\n        \r\n    },\r\n    // 文本\r\n    createText(text, position) {\r\n        position = threeLayer.coordinateToVector3(position)\r\n        let element = document.createElement('div')\r\n        element.className = 'info-wrap'\r\n        element.innerText = text\r\n        let obj = new CSS3DObject(element)\r\n        position.z = 10\r\n        obj.position.copy(position);\r\n        obj.rotateX(Math.PI/2)\r\n        obj.scale.set(0.1, 0.1, 0.1)\r\n        threeLayer.addMesh(obj)\r\n    },\r\n    createLineFly() {\r\n      // 飞线\r\n      this.lineList.forEach( (val, index) => {\r\n        let start = threeLayer.coordinateToVector3(val.start)\r\n        let end = threeLayer.coordinateToVector3(val.end)\r\n        start = new THREE.Vector3(start.x, start.y, start.z )\r\n        end = new THREE.Vector3(end.x, end.y, end.z )\r\n        const { curve, mesh } = this.addLines(start, end)\r\n        this.flyLine(curve) \r\n        threeLayer.addMesh(mesh)\r\n      })\r\n    },\r\n    // 曲线\r\n    addLines( v0, v3 ) {\r\n        var path = new THREE.LineCurve3(v0, v3)\r\n        var p = path.getPoints(120)\r\n        var d = v0.distanceTo( v3 )/3\r\n        var v1 = new THREE.Vector3( p[40].x, p[40].y, p[40].z  + d)\r\n        var v2 = new THREE.Vector3( p[80].x, p[80].y, p[80].z  + d)\r\n\r\n        // 绘制三维三次贝赛尔曲线\r\n        var curve = new THREE.CubicBezierCurve3( v0, v1, v2, v3 );\r\n        var geometry = new THREE.BufferGeometry();\r\n        var points = curve.getPoints( 150 );\r\n        var positions = [];\r\n        var colors = [], index = [];\r\n        var color = new THREE.Color();\r\n        /**\r\n         * HSL中使用渐变\r\n         * h — hue value between 0.0 and 1.0\r\n         * s — 饱和度 between 0.0 and 1.0\r\n         * l — 亮度 between 0.0 and 1.0\r\n         */\r\n        for (var j = 0; j < points.length; j ++) {\r\n            // color.setHSL( .31666+j*0.005,0.7, 0.7); //绿色\r\n            color.setHSL( .81666+j*0.0025, 0.88, 0.88); //粉色\r\n            colors.push( color.r, color.g, color.b );\r\n            positions.push( points[j].x, points[j].y, points[j].z );\r\n            index.push(j/(points.length - 1))\r\n        }\r\n        geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3))\r\n        geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3))\r\n        geometry.setAttribute('index', new THREE.Float32BufferAttribute(index, 1))\r\n        var matLine = new THREE.LineBasicMaterial( {\r\n            vertexColors: true,\r\n            transparent: true,\r\n            dashed: false\r\n        } );\r\n        return {\r\n          curve,\r\n          mesh: new THREE.Line( geometry, matLine )\r\n        }\r\n    },\r\n    // 路径飞线\r\n    flyLine(curve) {\r\n      var positions = [], index = [], current = [];\r\n      let points = curve.getPoints(5000)\r\n      const geometry = new THREE.BufferGeometry().setFromPoints(points)\r\n\r\n      for (var j = 0; j < points.length; j++) {\r\n          positions.push( points[j].x, points[j].y, points[j].z );\r\n          index.push(j/(points.length - 1))\r\n          current.push(j)\r\n      }\r\n      geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3))\r\n      geometry.setAttribute('index', new THREE.Float32BufferAttribute(index, 1))\r\n      geometry.setAttribute('current', new THREE.Float32BufferAttribute(current, 1))\r\n      const material = new THREE.ShaderMaterial({\r\n        uniforms: {\r\n          iTime: { value: 0 },\r\n          size: { value: 200 },\r\n          uRange: { value: 400 },\r\n          uTotal: { value: points.length},\r\n          uColor: { value: new THREE.Color(0x00ffff) },\r\n          uColor1: { value: new THREE.Color(0xff00ff) }\r\n        },\r\n        transparent: true,\r\n        depthTest: true,\r\n        side: 2,\r\n        vertexShader: `\r\n        attribute float index;\r\n        attribute float current;\r\n        uniform float size;\r\n        uniform vec3 uColor;\r\n        uniform vec3 uColor1;\r\n        uniform float uRange;\r\n        uniform float uTotal;\r\n        uniform float iTime;\r\n        varying vec3 vColor;\r\n        varying float vOpacity;\r\n        void main() {\r\n           // 需要当前显示的索引  \r\n            float showNumber = uTotal * mod(iTime/2.0, 1.0);\r\n            float s = size;\r\n            if (showNumber > current && showNumber < current + uRange) {\r\n                vOpacity = 1.0;\r\n                s *= (current + uRange - showNumber) / uRange;\r\n            } else {\r\n                vOpacity = 0.0;\r\n                s = 0.0;\r\n            }\r\n            // 顶点着色器计算后的Position\r\n            // mix 混淆颜色\r\n            vColor = mix(uColor, uColor1, index);\r\n            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\r\n            gl_Position = projectionMatrix * mvPosition; \r\n            // 大小\r\n            gl_PointSize = s* 5.0 / (-mvPosition.z);\r\n        }`,\r\n        fragmentShader: `\r\n        uniform vec3 uColor;\r\n        uniform vec3 uColor1;\r\n        varying vec3 vColor; \r\n        varying float vOpacity; \r\n        void main() {\r\n            gl_FragColor = vec4(vColor, vOpacity);\r\n        }`\r\n      })\r\n      const mesh = new THREE.Points(geometry, material)\r\n      effectList.push(mesh)\r\n      threeLayer.addMesh(mesh)\r\n    },\r\n    // 地铁线\r\n    cityRoadLine() {\r\n      fetch('./geojson/cs_dt.json').then(res => {\r\n        return res.json()\r\n      }).then( geojson => {\r\n        const textList = []\r\n        this.roadLine = []\r\n        geojson.l.forEach((item, i) => {\r\n          let temp = [], list = []\r\n          item.st.forEach(val => {\r\n            let location = val.sl.split(',')\r\n            let p = threeLayer.coordinateToVector3({x: Number(location[0]), y: Number(location[1])})\r\n            temp.push([Number(location[0]),Number(location[1])])\r\n            list.push(p)\r\n            var text = new maptalks.Marker(location,\r\n            {\r\n                'properties' : {\r\n                  'name' : val.n\r\n                },\r\n                'symbol' : {\r\n                  'textName' : '{name}',  \r\n                  'textSize': 10,\r\n                  'textFill': '#ffffff',\r\n                  'textHaloFill': '#000000',\r\n                  'textHaloRadius': 2,\r\n                }\r\n            })\r\n            textList.push(text)\r\n          })\r\n          this.roadLine.push({ name: item.kn, line: temp })\r\n          // var line = new maptalks.LineString(temp,\r\n          //   {\r\n          //     arrowStyle : null, // arrow-style : now we only have classic\r\n          //     arrowPlacement : 'vertex-last', // arrow's placement: vertex-first, vertex-last, vertex-firstlast, point\r\n          //     visible : true,\r\n          //     editable : true,\r\n          //     cursor : null,\r\n          //     shadowBlur : 0,\r\n          //     shadowColor : 'black',\r\n          //     draggable : false,\r\n          //     dragShadow : false, // display a shadow during dragging\r\n          //     drawOnAxis : null,  // force dragging stick on a axis, can be: x, y\r\n          //     symbol: {\r\n          //       'lineColor' : '#' + item.cl,\r\n          //       'lineWidth' : 2,\r\n          //       'textPlacement' : 'vertex'\r\n          //     }\r\n          // });\r\n          // let layer = new maptalks.VectorLayer(item.kn, line).addTo(map);\r\n          // let layer = new maptalks.VectorLayer(item.kn).addTo(map);\r\n          // layer.setZIndex(i)\r\n          // textList.forEach(ele => {\r\n          //   ele.addTo(layer)\r\n          // })\r\n          this.threeLine(list, '#' + item.cl)\r\n        })\r\n        let layer = new maptalks.VectorLayer('地铁').addTo(map);\r\n        layer.setZIndex(2)\r\n        textList.forEach(ele => {\r\n          ele.addTo(layer)\r\n        })\r\n      })\r\n    },\r\n    threeLine(list, color) {\r\n      const curve3 = new THREE.CatmullRomCurve3(list)\r\n      var geometry = new THREE.TubeGeometry( curve3, 256, 0.2, 4, false );\r\n      var material = new THREE.ShaderMaterial({\r\n            uniforms: {\r\n                iTime: {\r\n                    value: 0\r\n                },\r\n                color: { value: new THREE.Color(color) },\r\n                iResolution: {\r\n                    value: new THREE.Vector2(800, 800)\r\n                }\r\n            },\r\n            side: 2,\r\n            depthWrite: true,\r\n            transparent: true,\r\n            depthTest: false,\r\n            blending: THREE.AdditiveBlending,\r\n            vertexShader: vertexShader,\r\n            fragmentShader: `\r\n            uniform float iTime;\r\n            uniform vec3 color;\r\n            varying vec2 vUv;\r\n            void main() {\r\n                \r\n                float d = mod(vUv.x * 1.0 - iTime/2.0, 1.0);\r\n\r\n                d = pow(d, 10.0);\r\n\r\n                vec4 lightColor = vec4(mix(color*d, color, 0.2), 1.0);\r\n\r\n                gl_FragColor = lightColor;\r\n            }`\r\n      })\r\n      var mesh = new THREE.Mesh( geometry, material );\r\n      threeLayer.addMesh( mesh );\r\n      effectList.push(mesh)\r\n    },\r\n    // 加载地图\r\n    loadMap() {\r\n        this.views = this.$refs.views\r\n        map = new maptalks.Map(this.views, {\r\n            center : [112.982279, 28.19409],\r\n            zoom : 14,\r\n            pitch: 60,\r\n            minZoom: 12,\r\n            maxZoom: 19,\r\n            // bearing: 180,\r\n            centerCross: false,\r\n            doubleClickZoom: false,\r\n            attribution: false,\r\n            layerSwitcherControl: {\r\n              'position'  : 'top-right',\r\n              'baseTitle' : '主题样式',\r\n              'overlayTitle' : '',\r\n              'excludeLayers' : ['模型', '地铁'],\r\n              'containerClass' : 'maptalks-layer-switcher'\r\n            },\r\n            baseLayer: new maptalks.GroupTileLayer('tile', [\r\n              new maptalks.TileLayer('白底地图',{\r\n                'visible' : false,\r\n                'urlTemplate': 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png',\r\n                'subdomains'  : ['a','b','c','d'],\r\n              }),\r\n              new maptalks.TileLayer('黑底地图',{\r\n                'urlTemplate': 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\r\n                'subdomains'  : ['a','b','c','d']\r\n              }),\r\n              new maptalks.TileLayer('卫星地图',{\r\n                'visible' : false,\r\n                'urlTemplate': 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.jpg',\r\n                'subdomains'  : ['a','b','c','d']\r\n              })\r\n            ])\r\n        }) \r\n        threeLayer = new ThreeLayer('模型', {\r\n            forceRenderOnMoving: true,\r\n            forceRenderOnRotating: true,\r\n            animation: true\r\n        });\r\n        // threeLayer.setZIndex(10)\r\n        threeLayer.addTo(map);\r\n        threeLayer.prepareToDraw = this.initScene\r\n        map.on('click', (params) => {\r\n          let point = threeLayer.coordinateToVector3(params.coordinate)\r\n          map.animateTo({\r\n            center: params.coordinate,\r\n            zoom: 16,\r\n            pitch: 60\r\n          }, {\r\n            duration: 3000\r\n          });\r\n        })\r\n\r\n        render1 = new CSS3DRenderer({alpha: true}) //antialias: true, \r\n        render1.setSize(this.views.clientWidth, this.views.clientHeight)\r\n        this.views.appendChild(render1.domElement)\r\n        render1.domElement.style.position = 'absolute'\r\n        render1.domElement.style.top = 0\r\n        render1.domElement.style.zIndex = 2\r\n        render1.domElement.style.pointerEvents = 'none'\r\n\r\n        // 动画循环\r\n        ThreeLayer.prototype.setRendererRenderScene = function () {\r\n            this.getRenderer().renderScene = function () {\r\n                const layer = this.layer;\r\n                layer._callbackBaseObjectAnimation();\r\n                this._syncCamera();\r\n\r\n                const renderer = this.context, camera = this.camera, scene = this.scene;\r\n                TWEEN.update()\r\n                const elapsedTime = clock.getElapsedTime()\r\n                // Update passes\r\n                effectList.forEach(object => {\r\n                    if(object.material && object.material.uniforms){\r\n                        object.material.uniforms.iTime.value = elapsedTime\r\n                    }\r\n                })\r\n                if(layer.bloomEnable && layer.composer && layer.composer.passes.length > 1) {\r\n                  this.layer.composer.render(0)\r\n                  renderer.clearDepth()\r\n                  camera.layers.set(0)\r\n                  renderer.render(scene, camera);\r\n                }\r\n                render1.render(scene, camera)\r\n                this.completeRender();\r\n            }\r\n        }\r\n        threeLayer.setRendererRenderScene()\r\n        this.cityRoadLine()\r\n    },\r\n    initScene(gl, scene, camera) {\r\n        let AmbientLight = new THREE.AmbientLight( 0x404040);\r\n        scene.add( AmbientLight );\r\n        var DirectionalLight = new THREE.DirectionalLight( 0xffffff, 2);\r\n        DirectionalLight.position.set(0, -20, 50).normalize();\r\n        scene.add( DirectionalLight );\r\n        this.initComposer()\r\n        this.createPointGeo()\r\n        this.createEffect()\r\n        this.getGeoJson()\r\n        this.createLineFly()\r\n    },\r\n    initComposer() {\r\n      const renderer = threeLayer.getThreeRenderer()\r\n      threeLayer.composer = new EffectComposer(renderer)\r\n      let size = threeLayer.getMap().getSize()\r\n      threeLayer.composer.setSize(size.width, size.height)\r\n\r\n      const scene = threeLayer.getScene()\r\n      const camera = threeLayer.getCamera()\r\n      threeLayer.renderPass = new RenderPass(scene, camera)\r\n      threeLayer.composer.addPass(threeLayer.renderPass)\r\n      // 抗锯齿\r\n      const smaaPass = new SMAAPass(SMAAEdgesShader)\r\n      threeLayer.composer.addPass(smaaPass)\r\n      //辉光\r\n      const bloomPass = threeLayer.bloomPass = new UnrealBloomPass(new THREE.Vector2(size.width, size.height))\r\n      threeLayer.composer.addPass(bloomPass)\r\n      threeLayer.bloomEnable = true\r\n      bloomPass.renderToScreen = true\r\n      bloomPass.exposure = 1\r\n      bloomPass.strength = 2\r\n      bloomPass.radius = 0.5\r\n      bloomPass.threshold = 0.1\r\n\r\n    },\r\n    getGeoJson() {\r\n        const xhr = new XMLHttpRequest()\r\n        xhr.open('get', './geojson/cs_city.json', true)\r\n        xhr.onload = () => {\r\n            if(xhr.status === 200) {\r\n                const features = JSON.parse(xhr.response).features\r\n                const material = new THREE.ShaderMaterial({\r\n                uniforms: {\r\n                    iTime: { value: 0 },\r\n                    time: { value: 0 },\r\n                    color: { value: new THREE.Color(0x00ffff) },\r\n                    color1: { value: new THREE.Color(0x0b1060) }\r\n                },\r\n                side: 2,\r\n                depthWrite: true,\r\n                transparent: false,\r\n                depthTest: true,\r\n                vertexShader: vertexShader,\r\n                fragmentShader: `\r\n                    uniform float time;\r\n                    uniform vec3 color;\r\n                    uniform vec3 color1;\r\n                    varying vec3 vPosition;\r\n                    void main() {\r\n\r\n                        float indexMix = vPosition.z / 5.0;\r\n                        \r\n                        vec3 lightColor = mix(color1, color, indexMix);\r\n\r\n                        gl_FragColor = vec4(lightColor, 1.0);\r\n                }`\r\n                })\r\n                var heightPerLevel = 2.5;\r\n                var polygons = features.map(f => {\r\n                    const polygon = maptalks.GeoJSON.toGeometry(f);\r\n                    var levels = f.properties.height || 1;\r\n                    polygon.setProperties({\r\n                        height: heightPerLevel * levels,\r\n                    });\r\n                    return polygon;\r\n                });\r\n                const extrudePolygons = threeLayer.toExtrudePolygons(polygons, { topColor: '#fff', interactive: true }, material);\r\n                threeLayer.addMesh(extrudePolygons)\r\n            }\r\n        }\r\n        xhr.send()\r\n    },\r\n    // 乘坐地铁\r\n    bySubway(way) {\r\n      let count = way.line.length-1\r\n       this.replay(way, count)\r\n    },\r\n    replay(way, count) {\r\n      let _this = this\r\n      map.animateTo({\r\n        zoom: 15,\r\n        center: way.line[count],\r\n        pitch: 0\r\n      }, {\r\n        duration: 2000,\r\n\r\n      }, function(frame) {\r\n          if (frame.state.playState === 'finished' && count > 0) {\r\n            count--\r\n            _this.replay(way, count)\r\n          }\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadMap()\r\n    map.on('resize', () => {\r\n      render1.setSize(this.views.clientWidth, this.views.clientHeight)\r\n    })\r\n  },\r\n  destroyed() {\r\n    effectList = []\r\n    map = null\r\n    threeLayer.getScene().clear()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.home {\r\n  width: 100vw;\r\n  height: 100vh;\r\n} \r\n#home-view {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  background: url('~@/assets/img/sky.jpg') no-repeat;\r\n}\r\n.effect-list {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  color: #fff;\r\n  overflow: auto;\r\n  height: 100vh;\r\n}\r\nli > button {\r\n  padding: 2px 5px;\r\n  font-size: 14px;\r\n  margin-bottom: 2px;\r\n}\r\n.back {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 10px;\r\n  z-index: 99;\r\n  display: flex;\r\n}\r\n.road-line {\r\n  position: absolute;\r\n  bottom: 10px;\r\n  left: 50%;\r\n  z-index: 99;\r\n  display: flex;\r\n  transform: translateX(-50%);\r\n  li {\r\n    color: #fff;\r\n    border: 1px solid #ccc;\r\n    padding: 10px;\r\n    cursor: pointer;\r\n    &:hover {\r\n      background-color: cyan;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.maptalks-layer-switcher {\r\n  .panel {\r\n    padding: 20px 20px 0 0 !important;\r\n  }\r\n}\r\n.info-wrap {\r\n  color:rgb(7, 209, 245);\r\n  font-size: 12px;\r\n  padding: 5px 10px;\r\n  text-align: center;\r\n  text-shadow: 0 0 2px #11e1f0;\r\n  font-family: 'kaiti';\r\n  border: 1px solid #fff;\r\n  background-image: linear-gradient(to bottom,  rgba(255, 6, 234, 0.6), rgba(126, 65, 126, 0.527));\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./city-maptalks-three.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./city-maptalks-three.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./city-maptalks-three.vue?vue&type=template&id=67a3e3b9&scoped=true&\"\nimport script from \"./city-maptalks-three.vue?vue&type=script&lang=js&\"\nexport * from \"./city-maptalks-three.vue?vue&type=script&lang=js&\"\nimport style0 from \"./city-maptalks-three.vue?vue&type=style&index=0&id=67a3e3b9&lang=scss&scoped=true&\"\nimport style1 from \"./city-maptalks-three.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"67a3e3b9\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./city-maptalks-three.vue?vue&type=style&index=0&id=67a3e3b9&lang=scss&scoped=true&\"","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","/**\n * @author sole / http://soledadpenades.com\n * @author mrdoob / http://mrdoob.com\n * @author Robert Eisele / http://www.xarg.org\n * @author Philippe / http://philippe.elsass.me\n * @author Robert Penner / http://www.robertpenner.com/easing_terms_of_use.html\n * @author Paul Lewis / http://www.aerotwist.com/\n * @author lechecacharro\n * @author Josh Faul / http://jocafa.com/\n * @author egraether / http://egraether.com/\n */\n\nif ( Date.now === undefined ) {\n\n  Date.now = function () {\n\n    return new Date().valueOf();\n\n  }\n\n}\n\nvar TWEEN = TWEEN || ( function () {\n\n  var _tweens = [];\n\n  return {\n\n    REVISION: '8',\n\n    getAll: function () {\n\n      return _tweens;\n\n    },\n\n    removeAll: function () {\n\n      _tweens = [];\n\n    },\n\n    add: function ( tween ) {\n\n      _tweens.push( tween );\n\n    },\n\n    remove: function ( tween ) {\n\n      var i = _tweens.indexOf( tween );\n\n      if ( i !== -1 ) {\n\n        _tweens.splice( i, 1 );\n\n      }\n\n    },\n\n    update: function ( time ) {\n\n      if ( _tweens.length === 0 ) return false;\n\n      var i = 0, numTweens = _tweens.length;\n\n      time = time !== undefined ? time : Date.now();\n\n      while ( i < numTweens ) {\n\n        if ( _tweens[ i ].update( time ) ) {\n\n          i ++;\n\n        } else {\n\n          _tweens.splice( i, 1 );\n\n          numTweens --;\n\n        }\n\n      }\n\n      return true;\n\n    }\n\n  };\n\n} )();\n\nTWEEN.Tween = function ( object ) {\n\n  var _object = object;\n  var _valuesStart = {};\n  var _valuesEnd = {};\n  var _duration = 1000;\n  var _delayTime = 0;\n  var _startTime = null;\n  var _easingFunction = TWEEN.Easing.Linear.None;\n  var _interpolationFunction = TWEEN.Interpolation.Linear;\n  var _chainedTweens = [];\n  var _onStartCallback = null;\n  var _onStartCallbackFired = false;\n  var _onUpdateCallback = null;\n  var _onCompleteCallback = null;\n\n  this.to = function ( properties, duration ) {\n\n    if ( duration !== undefined ) {\n\n      _duration = duration;\n\n    }\n\n    _valuesEnd = properties;\n\n    return this;\n\n  };\n\n  this.start = function ( time ) {\n\n    TWEEN.add( this );\n\n    _onStartCallbackFired = false;\n\n    _startTime = time !== undefined ? time : Date.now();\n    _startTime += _delayTime;\n\n    for ( var property in _valuesEnd ) {\n\n      // This prevents the interpolation of null values or of non-existing properties\n      if( _object[ property ] === null || !(property in _object) ) {\n\n        continue;\n\n      }\n\n      // check if an Array was provided as property value\n      if ( _valuesEnd[ property ] instanceof Array ) {\n\n        if ( _valuesEnd[ property ].length === 0 ) {\n\n          continue;\n\n        }\n\n        // create a local copy of the Array with the start value at the front\n        _valuesEnd[ property ] = [ _object[ property ] ].concat( _valuesEnd[ property ] );\n\n      }\n\n      _valuesStart[ property ] = _object[ property ];\n\n    }\n\n    return this;\n\n  };\n\n  this.stop = function () {\n\n    TWEEN.remove( this );\n    return this;\n\n  };\n\n  this.delay = function ( amount ) {\n\n    _delayTime = amount;\n    return this;\n\n  };\n\n  this.easing = function ( easing ) {\n\n    _easingFunction = easing;\n    return this;\n\n  };\n\n  this.interpolation = function ( interpolation ) {\n\n    _interpolationFunction = interpolation;\n    return this;\n\n  };\n\n  this.chain = function () {\n\n    _chainedTweens = arguments;\n    return this;\n\n  };\n\n  this.onStart = function ( callback ) {\n\n    _onStartCallback = callback;\n    return this;\n\n  };\n\n  this.onUpdate = function ( callback ) {\n\n    _onUpdateCallback = callback;\n    return this;\n\n  };\n\n  this.onComplete = function ( callback ) {\n\n    _onCompleteCallback = callback;\n    return this;\n\n  };\n\n  this.update = function ( time ) {\n\n    if ( time < _startTime ) {\n\n      return true;\n\n    }\n\n    if ( _onStartCallbackFired === false ) {\n\n      if ( _onStartCallback !== null ) {\n\n        _onStartCallback.call( _object );\n\n      }\n\n      _onStartCallbackFired = true;\n\n    }\n\n    var elapsed = ( time - _startTime ) / _duration;\n    elapsed = elapsed > 1 ? 1 : elapsed;\n\n    var value = _easingFunction( elapsed );\n\n    for ( var property in _valuesStart ) {\n\n      var start = _valuesStart[ property ];\n      var end = _valuesEnd[ property ];\n\n      if ( end instanceof Array ) {\n\n        _object[ property ] = _interpolationFunction( end, value );\n\n      } else {\n\n        _object[ property ] = start + ( end - start ) * value;\n\n      }\n\n    }\n\n    if ( _onUpdateCallback !== null ) {\n\n      _onUpdateCallback.call( _object, value );\n\n    }\n\n    if ( elapsed == 1 ) {\n\n      if ( _onCompleteCallback !== null ) {\n\n        _onCompleteCallback.call( _object );\n\n      }\n\n      for ( var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i ++ ) {\n\n        _chainedTweens[ i ].start( time );\n\n      }\n\n      return false;\n\n    }\n\n    return true;\n\n  };\n\n};\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function ( k ) {\n\n      return k;\n\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function ( k ) {\n\n      return k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return k * ( 2 - k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k;\n      return - 0.5 * ( --k * ( k - 2 ) - 1 );\n\n    }\n\n  },\n\n  Cubic: {\n\n    In: function ( k ) {\n\n      return k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return --k * k * k + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k;\n      return 0.5 * ( ( k -= 2 ) * k * k + 2 );\n\n    }\n\n  },\n\n  Quartic: {\n\n    In: function ( k ) {\n\n      return k * k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return 1 - ( --k * k * k * k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1) return 0.5 * k * k * k * k;\n      return - 0.5 * ( ( k -= 2 ) * k * k * k - 2 );\n\n    }\n\n  },\n\n  Quintic: {\n\n    In: function ( k ) {\n\n      return k * k * k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return --k * k * k * k * k + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k * k * k;\n      return 0.5 * ( ( k -= 2 ) * k * k * k * k + 2 );\n\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function ( k ) {\n\n      return 1 - Math.cos( k * Math.PI / 2 );\n\n    },\n\n    Out: function ( k ) {\n\n      return Math.sin( k * Math.PI / 2 );\n\n    },\n\n    InOut: function ( k ) {\n\n      return 0.5 * ( 1 - Math.cos( Math.PI * k ) );\n\n    }\n\n  },\n\n  Exponential: {\n\n    In: function ( k ) {\n\n      return k === 0 ? 0 : Math.pow( 1024, k - 1 );\n\n    },\n\n    Out: function ( k ) {\n\n      return k === 1 ? 1 : 1 - Math.pow( 2, - 10 * k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( ( k *= 2 ) < 1 ) return 0.5 * Math.pow( 1024, k - 1 );\n      return 0.5 * ( - Math.pow( 2, - 10 * ( k - 1 ) ) + 2 );\n\n    }\n\n  },\n\n  Circular: {\n\n    In: function ( k ) {\n\n      return 1 - Math.sqrt( 1 - k * k );\n\n    },\n\n    Out: function ( k ) {\n\n      return Math.sqrt( 1 - ( --k * k ) );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1) return - 0.5 * ( Math.sqrt( 1 - k * k) - 1);\n      return 0.5 * ( Math.sqrt( 1 - ( k -= 2) * k) + 1);\n\n    }\n\n  },\n\n  Elastic: {\n\n    In: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      return - ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n\n    },\n\n    Out: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n\n    },\n\n    InOut: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      if ( ( k *= 2 ) < 1 ) return - 0.5 * ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n      return a * Math.pow( 2, -10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) * 0.5 + 1;\n\n    }\n\n  },\n\n  Back: {\n\n    In: function ( k ) {\n\n      var s = 1.70158;\n      return k * k * ( ( s + 1 ) * k - s );\n\n    },\n\n    Out: function ( k ) {\n\n      var s = 1.70158;\n      return --k * k * ( ( s + 1 ) * k + s ) + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      var s = 1.70158 * 1.525;\n      if ( ( k *= 2 ) < 1 ) return 0.5 * ( k * k * ( ( s + 1 ) * k - s ) );\n      return 0.5 * ( ( k -= 2 ) * k * ( ( s + 1 ) * k + s ) + 2 );\n\n    }\n\n  },\n\n  Bounce: {\n\n    In: function ( k ) {\n\n      return 1 - TWEEN.Easing.Bounce.Out( 1 - k );\n\n    },\n\n    Out: function ( k ) {\n\n      if ( k < ( 1 / 2.75 ) ) {\n\n        return 7.5625 * k * k;\n\n      } else if ( k < ( 2 / 2.75 ) ) {\n\n        return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\n      } else if ( k < ( 2.5 / 2.75 ) ) {\n\n        return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\n      } else {\n\n        return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\n      }\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( k < 0.5 ) return TWEEN.Easing.Bounce.In( k * 2 ) * 0.5;\n      return TWEEN.Easing.Bounce.Out( k * 2 - 1 ) * 0.5 + 0.5;\n\n    }\n\n  }\n\n};\n\nTWEEN.Interpolation = {\n\n  Linear: function ( v, k ) {\n\n    var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.Linear;\n\n    if ( k < 0 ) return fn( v[ 0 ], v[ 1 ], f );\n    if ( k > 1 ) return fn( v[ m ], v[ m - 1 ], m - f );\n\n    return fn( v[ i ], v[ i + 1 > m ? m : i + 1 ], f - i );\n\n  },\n\n  Bezier: function ( v, k ) {\n\n    var b = 0, n = v.length - 1, pw = Math.pow, bn = TWEEN.Interpolation.Utils.Bernstein, i;\n\n    for ( i = 0; i <= n; i++ ) {\n      b += pw( 1 - k, n - i ) * pw( k, i ) * v[ i ] * bn( n, i );\n    }\n\n    return b;\n\n  },\n\n  CatmullRom: function ( v, k ) {\n\n    var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n    if ( v[ 0 ] === v[ m ] ) {\n\n      if ( k < 0 ) i = Math.floor( f = m * ( 1 + k ) );\n\n      return fn( v[ ( i - 1 + m ) % m ], v[ i ], v[ ( i + 1 ) % m ], v[ ( i + 2 ) % m ], f - i );\n\n    } else {\n\n      if ( k < 0 ) return v[ 0 ] - ( fn( v[ 0 ], v[ 0 ], v[ 1 ], v[ 1 ], -f ) - v[ 0 ] );\n      if ( k > 1 ) return v[ m ] - ( fn( v[ m ], v[ m ], v[ m - 1 ], v[ m - 1 ], f - m ) - v[ m ] );\n\n      return fn( v[ i ? i - 1 : 0 ], v[ i ], v[ m < i + 1 ? m : i + 1 ], v[ m < i + 2 ? m : i + 2 ], f - i );\n\n    }\n\n  },\n\n  Utils: {\n\n    Linear: function ( p0, p1, t ) {\n\n      return ( p1 - p0 ) * t + p0;\n\n    },\n\n    Bernstein: function ( n , i ) {\n\n      var fc = TWEEN.Interpolation.Utils.Factorial;\n      return fc( n ) / fc( i ) / fc( n - i );\n\n    },\n\n    Factorial: ( function () {\n\n      var a = [ 1 ];\n\n      return function ( n ) {\n\n        var s = 1, i;\n        if ( a[ n ] ) return a[ n ];\n        for ( i = n; i > 1; i-- ) s *= i;\n        return a[ n ] = s;\n\n      };\n\n    } )(),\n\n    CatmullRom: function ( p0, p1, p2, p3, t ) {\n\n      var v0 = ( p2 - p0 ) * 0.5, v1 = ( p3 - p1 ) * 0.5, t2 = t * t, t3 = t * t2;\n      return ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n    }\n\n  }\n\n};\n\nmodule.exports = TWEEN;","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar toString = require('../internals/to-string');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\nvar SymbolPrototype = NativeSymbol && NativeSymbol.prototype;\n\nif (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);\n    var result = isPrototypeOf(SymbolPrototype, this)\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  SymbolWrapper.prototype = SymbolPrototype;\n  SymbolPrototype.constructor = SymbolWrapper;\n\n  var NATIVE_SYMBOL = String(NativeSymbol('test')) == 'Symbol(test)';\n  var symbolToString = uncurryThis(SymbolPrototype.toString);\n  var symbolValueOf = uncurryThis(SymbolPrototype.valueOf);\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  var replace = uncurryThis(''.replace);\n  var stringSlice = uncurryThis(''.slice);\n\n  defineProperty(SymbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = symbolValueOf(this);\n      var string = symbolToString(symbol);\n      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./city-maptalks-three.vue?vue&type=style&index=1&lang=scss&\"","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar setToStringTag = require('../internals/set-to-string-tag');\n\n$({ global: true }, { Reflect: {} });\n\n// Reflect[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-reflect-@@tostringtag\nsetToStringTag(global.Reflect, 'Reflect', true);\n","/*!\r\n* Contains code from THREE.js\r\n* MIT License\r\n* https://github.com/mrdoob/three.js\r\n*/\r\n\r\nvar planes = [];\r\nfor (var i = 0; i < 6; i++) {\r\n    planes[i] = [];\r\n}\r\n\r\nexport function intersectsSphere(matrix, sphere, mask) {\r\n    setPlanes(matrix);\r\n    var center = sphere[0];\r\n    var negRadius = -sphere[1];\r\n    for (var i = 0; i < 6; i++) {\r\n        if (mask && mask.charAt(i) === '0') {\r\n            continue;\r\n        }\r\n        var distance = distanceToPoint(planes[i], center);\r\n        if (distance < negRadius) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nvar p = [];\r\n\r\nexport function intersectsBox(matrix, box, mask) {\r\n    setPlanes(matrix);\r\n    for (var i = 0; i < 6; i++) {\r\n        if (mask && mask.charAt(i) === '0') {\r\n            continue;\r\n        }\r\n        var plane = planes[i];\r\n        // corner at max distance\r\n        p[0] = plane[0] > 0 ? box[1][0] : box[0][0];\r\n        p[1] = plane[1] > 0 ? box[1][1] : box[0][1];\r\n        p[2] = plane[2] > 0 ? box[1][2] : box[0][2];\r\n\r\n        if (distanceToPoint(plane, p) < 0) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return true;\r\n}\r\n\r\nfunction setPlanes(m) {\r\n    var me = m;\r\n    var me0 = me[0], me1 = me[1], me2 = me[2], me3 = me[3];\r\n    var me4 = me[4], me5 = me[5], me6 = me[6], me7 = me[7];\r\n    var me8 = me[8], me9 = me[9], me10 = me[10], me11 = me[11];\r\n    var me12 = me[12], me13 = me[13], me14 = me[14], me15 = me[15];\r\n\r\n    //right\r\n    setComponents(planes[0], me3 - me0, me7 - me4, me11 - me8, me15 - me12);\r\n    //left\r\n    setComponents(planes[1], me3 + me0, me7 + me4, me11 + me8, me15 + me12);\r\n    //bottom\r\n    setComponents(planes[2], me3 + me1, me7 + me5, me11 + me9, me15 + me13);\r\n    //top\r\n    setComponents(planes[3], me3 - me1, me7 - me5, me11 - me9, me15 - me13);\r\n    //z-far\r\n    setComponents(planes[4], me3 - me2, me7 - me6, me11 - me10, me15 - me14);\r\n    //z-near\r\n    setComponents(planes[5], me3 + me2, me7 + me6, me11 + me10, me15 + me14);\r\n}\r\n\r\nvar normalLength = 1.0 / 6;\r\nfunction setComponents(out, x, y, z, w) {\r\n    out[0] = x * normalLength;\r\n    out[1] = y * normalLength;\r\n    out[2] = z * normalLength;\r\n    out[3] = w * normalLength;\r\n    return out;\r\n}\r\n\r\nfunction distanceToPoint(plane, p) {\r\n    return plane[0] * p[0] + plane[1] * p[1] + plane[2] * p[2] + plane[3];\r\n}\r\n","!function(i){\"use strict\";var c,s,u=\"fulfilled\",f=\"undefined\",a=function(){var e=[],n=0;function o(){for(;e.length-n;){try{e[n]()}catch(t){i.console&&i.console.error(t)}e[n++]=s,1024==n&&(e.splice(0,1024),n=0)}}var r=function(){if(typeof MutationObserver===f)return typeof process!==f&&\"function\"==typeof process.nextTick?function(){process.nextTick(o)}:typeof setImmediate!==f?function(){setImmediate(o)}:function(){setTimeout(o,0)};var t=document.createElement(\"div\");return new MutationObserver(o).observe(t,{attributes:!0}),function(){t.setAttribute(\"a\",0)}}();return function(t){e.push(t),e.length-n==1&&r()}}();function l(t){if(!(this instanceof l))throw new TypeError(\"Zousan must be created with the new keyword\");if(\"function\"==typeof t){var e=this;try{t(function(t){e.resolve(t)},function(t){e.reject(t)})}catch(t){e.reject(t)}}else if(0<arguments.length)throw new TypeError(\"Zousan resolver \"+t+\" is not a function\")}function h(e,t){if(\"function\"==typeof e.y)try{var n=e.y.call(s,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function v(e,t){if(\"function\"==typeof e.n)try{var n=e.n.call(s,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}l.prototype={resolve:function(n){if(this.state===c){if(n===this)return this.reject(new TypeError(\"Attempt to resolve promise with self\"));var o=this;if(n&&(\"function\"==typeof n||\"object\"==typeof n))try{var e=!0,t=n.then;if(\"function\"==typeof t)return void t.call(n,function(t){e&&(e=!1,o.resolve(t))},function(t){e&&(e=!1,o.reject(t))})}catch(t){return void(e&&this.reject(t))}this.state=u,this.v=n,o.c&&a(function(){for(var t=0,e=o.c.length;t<e;t++)h(o.c[t],n)})}},reject:function(n){if(this.state===c){var t=this;this.state=\"rejected\",this.v=n;var o=this.c;a(o?function(){for(var t=0,e=o.length;t<e;t++)v(o[t],n)}:function(){t.handled||!l.suppressUncaughtRejectionError&&i.console&&l.warn(\"You upset Zousan. Please catch rejections: \",n,n?n.stack:null)})}},then:function(t,e){var n=new l,o={y:t,n:e,p:n};if(this.state===c)this.c?this.c.push(o):this.c=[o];else{var r=this.state,i=this.v;this.handled=!0,a(function(){r===u?h(o,i):v(o,i)})}return n},catch:function(t){return this.then(null,t)},finally:function(t){return this.then(t,t)},timeout:function(t,o){o=o||\"Timeout\";var r=this;return new l(function(e,n){setTimeout(function(){n(Error(o))},t),r.then(function(t){e(t)},function(t){n(t)})})}},l.resolve=function(t){var e=new l;return e.resolve(t),e},l.reject=function(t){var e=new l;return e.c=[],e.reject(t),e},l.all=function(n){var o=[],r=0,i=new l;function t(t,e){t&&\"function\"==typeof t.then||(t=l.resolve(t)),t.then(function(t){o[e]=t,++r==n.length&&i.resolve(o)},function(t){i.reject(t)})}for(var e=0;e<n.length;e++)t(n[e],e);return n.length||i.resolve(o),i},l.warn=console.warn,typeof module!=f&&module.exports&&(module.exports=l),i.define&&i.define.amd&&i.define([],function(){return l}),(i.Zousan=l).soon=a}(\"undefined\"!=typeof global?global:this);"],"sourceRoot":""}